






<!DOCTYPE html>
<html lang="en" data-color-mode="auto" data-light-theme="light_colorblind" data-dark-theme="dark_colorblind" data-a11y-animated-images="system">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">
  <link rel="preconnect" href="https://github.githubassets.com" crossorigin>
  <link rel="preconnect" href="https://avatars.githubusercontent.com">



  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/light_colorblind-527658dec362.css" /><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/dark_colorblind-bc6bf4eea850.css" /><link data-color-theme="light" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light-719f1193e0c0.css" /><link data-color-theme="dark" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark-0c343b529849.css" /><link data-color-theme="dark_dimmed" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed-f22da508b62a.css" /><link data-color-theme="dark_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_high_contrast-188ef1de59e6.css" /><link data-color-theme="light_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_high_contrast-c7a7fe0cd8ec.css" /><link data-color-theme="light_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_tritanopia-6aa855bdae0f.css" /><link data-color-theme="dark_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_tritanopia-6aa5e25aacc0.css" />
  
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-9563bd5b49b1.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/global-de4f252acb9b.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-7a1dd0ca7082.css" />
  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/code-78c29c966d84.css" />

    <meta name="optimizely-datafile" content="{&quot;groups&quot;: [], &quot;environmentKey&quot;: &quot;production&quot;, &quot;rollouts&quot;: [], &quot;typedAudiences&quot;: [], &quot;projectId&quot;: &quot;16737760170&quot;, &quot;variables&quot;: [], &quot;featureFlags&quot;: [], &quot;experiments&quot;: [], &quot;version&quot;: &quot;4&quot;, &quot;audiences&quot;: [{&quot;conditions&quot;: &quot;[\&quot;or\&quot;, {\&quot;match\&quot;: \&quot;exact\&quot;, \&quot;name\&quot;: \&quot;$opt_dummy_attribute\&quot;, \&quot;type\&quot;: \&quot;custom_attribute\&quot;, \&quot;value\&quot;: \&quot;$opt_dummy_value\&quot;}]&quot;, &quot;id&quot;: &quot;$opt_dummy_audience&quot;, &quot;name&quot;: &quot;Optimizely-Generated Audience for Backwards Compatibility&quot;}], &quot;anonymizeIP&quot;: true, &quot;sdkKey&quot;: &quot;WTc6awnGuYDdG98CYRban&quot;, &quot;attributes&quot;: [{&quot;id&quot;: &quot;16822470375&quot;, &quot;key&quot;: &quot;user_id&quot;}, {&quot;id&quot;: &quot;17143601254&quot;, &quot;key&quot;: &quot;spammy&quot;}, {&quot;id&quot;: &quot;18175660309&quot;, &quot;key&quot;: &quot;organization_plan&quot;}, {&quot;id&quot;: &quot;18813001570&quot;, &quot;key&quot;: &quot;is_logged_in&quot;}, {&quot;id&quot;: &quot;19073851829&quot;, &quot;key&quot;: &quot;geo&quot;}, {&quot;id&quot;: &quot;20175462351&quot;, &quot;key&quot;: &quot;requestedCurrency&quot;}, {&quot;id&quot;: &quot;20785470195&quot;, &quot;key&quot;: &quot;country_code&quot;}, {&quot;id&quot;: &quot;21656311196&quot;, &quot;key&quot;: &quot;opened_downgrade_dialog&quot;}], &quot;botFiltering&quot;: false, &quot;accountId&quot;: &quot;16737760170&quot;, &quot;events&quot;: [{&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;17911811441&quot;, &quot;key&quot;: &quot;hydro_click.dashboard.teacher_toolbox_cta&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18124116703&quot;, &quot;key&quot;: &quot;submit.organizations.complete_sign_up&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18145892387&quot;, &quot;key&quot;: &quot;no_metric.tracked_outside_of_optimizely&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18178755568&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.add_repo&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18180553241&quot;, &quot;key&quot;: &quot;submit.repository_imports.create&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18186103728&quot;, &quot;key&quot;: &quot;click.help.learn_more_about_repository_creation&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18188530140&quot;, &quot;key&quot;: &quot;test_event&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18191963644&quot;, &quot;key&quot;: &quot;click.empty_org_repo_cta.transfer_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18195612788&quot;, &quot;key&quot;: &quot;click.empty_org_repo_cta.import_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18210945499&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.invite_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18211063248&quot;, &quot;key&quot;: &quot;click.empty_org_repo_cta.create_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18215721889&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.update_profile&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18224360785&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.dismiss&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18234832286&quot;, &quot;key&quot;: &quot;submit.organization_activation.complete&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18252392383&quot;, &quot;key&quot;: &quot;submit.org_repository.create&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18257551537&quot;, &quot;key&quot;: &quot;submit.org_member_invitation.create&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18259522260&quot;, &quot;key&quot;: &quot;submit.organization_profile.update&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18564603625&quot;, &quot;key&quot;: &quot;view.classroom_select_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18568612016&quot;, &quot;key&quot;: &quot;click.classroom_sign_in_click&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18572592540&quot;, &quot;key&quot;: &quot;view.classroom_name&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18574203855&quot;, &quot;key&quot;: &quot;click.classroom_create_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18582053415&quot;, &quot;key&quot;: &quot;click.classroom_select_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18589463420&quot;, &quot;key&quot;: &quot;click.classroom_create_classroom&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18591323364&quot;, &quot;key&quot;: &quot;click.classroom_create_first_classroom&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18591652321&quot;, &quot;key&quot;: &quot;click.classroom_grant_access&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18607131425&quot;, &quot;key&quot;: &quot;view.classroom_creation&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18831680583&quot;, &quot;key&quot;: &quot;upgrade_account_plan&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19064064515&quot;, &quot;key&quot;: &quot;click.signup&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19075373687&quot;, &quot;key&quot;: &quot;click.view_account_billing_page&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19077355841&quot;, &quot;key&quot;: &quot;click.dismiss_signup_prompt&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19079713938&quot;, &quot;key&quot;: &quot;click.contact_sales&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19120963070&quot;, &quot;key&quot;: &quot;click.compare_account_plans&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19151690317&quot;, &quot;key&quot;: &quot;click.upgrade_account_cta&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19424193129&quot;, &quot;key&quot;: &quot;click.open_account_switcher&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19520330825&quot;, &quot;key&quot;: &quot;click.visit_account_profile&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19540970635&quot;, &quot;key&quot;: &quot;click.switch_account_context&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19730198868&quot;, &quot;key&quot;: &quot;submit.homepage_signup&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19820830627&quot;, &quot;key&quot;: &quot;click.homepage_signup&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19988571001&quot;, &quot;key&quot;: &quot;click.create_enterprise_trial&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20036538294&quot;, &quot;key&quot;: &quot;click.create_organization_team&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20040653299&quot;, &quot;key&quot;: &quot;click.input_enterprise_trial_form&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20062030003&quot;, &quot;key&quot;: &quot;click.continue_with_team&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20068947153&quot;, &quot;key&quot;: &quot;click.create_organization_free&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20086636658&quot;, &quot;key&quot;: &quot;click.signup_continue.username&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20091648988&quot;, &quot;key&quot;: &quot;click.signup_continue.create_account&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20103637615&quot;, &quot;key&quot;: &quot;click.signup_continue.email&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20111574253&quot;, &quot;key&quot;: &quot;click.signup_continue.password&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20120044111&quot;, &quot;key&quot;: &quot;view.pricing_page&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20152062109&quot;, &quot;key&quot;: &quot;submit.create_account&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20165800992&quot;, &quot;key&quot;: &quot;submit.upgrade_payment_form&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20171520319&quot;, &quot;key&quot;: &quot;submit.create_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20222645674&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.discuss_your_needs&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20227443657&quot;, &quot;key&quot;: &quot;submit.verify_primary_user_email&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20234607160&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.try_enterprise&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20238175784&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.team&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20239847212&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.continue_free&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20251097193&quot;, &quot;key&quot;: &quot;recommended_plan&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20438619534&quot;, &quot;key&quot;: &quot;click.pricing_calculator.1_member&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20456699683&quot;, &quot;key&quot;: &quot;click.pricing_calculator.15_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20467868331&quot;, &quot;key&quot;: &quot;click.pricing_calculator.10_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20476267432&quot;, &quot;key&quot;: &quot;click.trial_days_remaining&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20476357660&quot;, &quot;key&quot;: &quot;click.discover_feature&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20479287901&quot;, &quot;key&quot;: &quot;click.pricing_calculator.custom_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20481107083&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.apply_teacher_benefits&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20483089392&quot;, &quot;key&quot;: &quot;click.pricing_calculator.5_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20484283944&quot;, &quot;key&quot;: &quot;click.onboarding_task&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20484996281&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.apply_student_benefits&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20486713726&quot;, &quot;key&quot;: &quot;click.onboarding_task_breadcrumb&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20490791319&quot;, &quot;key&quot;: &quot;click.upgrade_to_enterprise&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20491786766&quot;, &quot;key&quot;: &quot;click.talk_to_us&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20494144087&quot;, &quot;key&quot;: &quot;click.dismiss_enterprise_trial&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20499722759&quot;, &quot;key&quot;: &quot;completed_all_tasks&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20500710104&quot;, &quot;key&quot;: &quot;completed_onboarding_tasks&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20513160672&quot;, &quot;key&quot;: &quot;click.read_doc&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20516196762&quot;, &quot;key&quot;: &quot;actions_enabled&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20518980986&quot;, &quot;key&quot;: &quot;click.dismiss_trial_banner&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20535446721&quot;, &quot;key&quot;: &quot;click.issue_actions_prompt.dismiss_prompt&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20557002247&quot;, &quot;key&quot;: &quot;click.issue_actions_prompt.setup_workflow&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20595070227&quot;, &quot;key&quot;: &quot;click.pull_request_setup_workflow&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20626600314&quot;, &quot;key&quot;: &quot;click.seats_input&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20642310305&quot;, &quot;key&quot;: &quot;click.decrease_seats_number&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20662990045&quot;, &quot;key&quot;: &quot;click.increase_seats_number&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20679620969&quot;, &quot;key&quot;: &quot;click.public_product_roadmap&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20761240940&quot;, &quot;key&quot;: &quot;click.dismiss_survey_banner&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20767210721&quot;, &quot;key&quot;: &quot;click.take_survey&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20795281201&quot;, &quot;key&quot;: &quot;click.archive_list&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20966790249&quot;, &quot;key&quot;: &quot;contact_sales.submit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20996500333&quot;, &quot;key&quot;: &quot;contact_sales.existing_customer&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20996890162&quot;, &quot;key&quot;: &quot;contact_sales.blank_message_field&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21000470317&quot;, &quot;key&quot;: &quot;contact_sales.personal_email&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21002790172&quot;, &quot;key&quot;: &quot;contact_sales.blank_phone_field&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21354412592&quot;, &quot;key&quot;: &quot;click.dismiss_create_readme&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21366102546&quot;, &quot;key&quot;: &quot;click.dismiss_zero_user_content&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21370252505&quot;, &quot;key&quot;: &quot;account_did_downgrade&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21370840408&quot;, &quot;key&quot;: &quot;click.cta_create_readme&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21375451068&quot;, &quot;key&quot;: &quot;click.cta_create_new_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21385390948&quot;, &quot;key&quot;: &quot;click.zero_user_content&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21467712175&quot;, &quot;key&quot;: &quot;click.downgrade_keep&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21484112202&quot;, &quot;key&quot;: &quot;click.downgrade&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21495292213&quot;, &quot;key&quot;: &quot;click.downgrade_survey_exit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21508241468&quot;, &quot;key&quot;: &quot;click.downgrade_survey_submit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21512030356&quot;, &quot;key&quot;: &quot;click.downgrade_support&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21539090022&quot;, &quot;key&quot;: &quot;click.downgrade_exit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21543640644&quot;, &quot;key&quot;: &quot;click_fetch_upstream&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21646510300&quot;, &quot;key&quot;: &quot;click.move_your_work&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21656151116&quot;, &quot;key&quot;: &quot;click.add_branch_protection_rule&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21663860599&quot;, &quot;key&quot;: &quot;click.downgrade_dialog_open&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21687860483&quot;, &quot;key&quot;: &quot;click.learn_about_protected_branches&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21689050333&quot;, &quot;key&quot;: &quot;click.dismiss_protect_this_branch&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21864370109&quot;, &quot;key&quot;: &quot;click.sign_in&quot;}], &quot;revision&quot;: &quot;1367&quot;}" />


  <script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/wp-runtime-529132e25b69.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_smoothscroll-polyfill_dist_smoothscroll_js-node_modules_stacktrace-parse-297da6-aaa32681a0b3.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/environment-28efc4e97933.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_selector-observer_dist_index_esm_js-650337916dbd.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_details-dialog-elemen-63debe-4a2f37f7419e.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_auto-complete-element_dist_index_js-node_modules_github_catalyst_-6afc16-fa4f01d20b81.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_markdown-toolbar-element_dist_index_js-10a449882d1a.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_remote-inp-d1569f-cac1c97bc6a5.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_text-ex-3415a8-daf4603c6e6b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_primer_view-components_app_components_primer_primer_js-node_modules_gith-3af896-b12a549920d0.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/github-elements-116001ab4ff8.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/element-registry-54ab8a2cc4af.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_lit-html_lit-html_js-e954e8c01c93.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js-ac3bd901e26b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_alive-client_dist-bf5aa2-cb53b34c4b84.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_scroll-anchoring_dist_scro-be072a-ef15727bc587.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_primer_behaviors_dist_esm_dimensions_js-node_modules_github_hydro-analyt-f69502-412e0efee3b7.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_paste-markdown_dist_index_esm_js-node_modules_github_quote-select-f57862-d5fdfac7e5dd.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_hydro-analytics_ts-app_assets_modules_github_soft-nav_state_ts-ui_p-e465e4-4b5f869b18ef.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_updatable-content_ts-62df1309213c.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_sticky-scroll-into-view_ts-66be359b1346.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_keyboard-shortcuts-helper_ts-app_assets_modules_github_be-f5afdb-e0346850e585.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_user-content_ts-app_assets_modules_github_blob-anchor_ts--b39cba-04786f2d5e49.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_commenting_edit_ts-app_assets_modules_github_behaviors_ht-83c235-cb56bba555dc.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/behaviors-18220953cd20.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_catalyst_lib_index_js-06ff532-0eddb8f4d122.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/notifications-global-35a509648d46.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_optimizely_optimizely-sdk_dist_optimizely_browser_es_min_js-node_modules-77839b-550a5f909f1b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/optimizely-b5e5c69aa424.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_virtualized-list_es_index_js-node_modules_github_memoize_dist_esm_index_-ced8cc-ffd5e4d6ee17.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_mini-throt-a33094-4a3b4e63b420.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_mini-th-85225b-d5c5eb0b8bb2.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_ref-selector_ts-eb4fbb464325.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/repositories-bae26b76f8fa.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_clipboard-copy-element_dist_index_esm_js-node_modules_github_remo-8e6bec-4a54aa10cc28.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_scroll-anchoring_di-e71893-c446bed4261b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_diffs_blob-lines_ts-app_assets_modules_github_diffs_linkable-line-n-dca161-bf0171cec2b2.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/diffs-3fb71f896836.js"></script>
  

  <title>Face-Detection-JavaScript/face-api.min.js at master · WebDevSimplified/Face-Detection-JavaScript</title>



    

  <meta name="request-id" content="CC83:A6F2:318C545:332BF45:63B55988" data-turbo-transient="true" /><meta name="html-safe-nonce" content="fc92f460eb5a9aa9298fe149a27b73c0ae36abd1cebadf171fe3ce85c4589b70" data-turbo-transient="true" /><meta name="visitor-payload" content="eyJyZWZlcnJlciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9XZWJEZXZTaW1wbGlmaWVkL0ZhY2UtRGV0ZWN0aW9uLUphdmFTY3JpcHQvZmluZC9tYXN0ZXIiLCJyZXF1ZXN0X2lkIjoiQ0M4MzpBNkYyOjMxOEM1NDU6MzMyQkY0NTo2M0I1NTk4OCIsInZpc2l0b3JfaWQiOiI3MzQ3MjUzMzM2MzMwMTQ4MzkxIiwicmVnaW9uX2VkZ2UiOiJmcmEiLCJyZWdpb25fcmVuZGVyIjoiaWFkIn0=" data-turbo-transient="true" /><meta name="visitor-hmac" content="29ef6f617ee93b6ab03f89d4093539573cf6bcae8f6aa851df9510df359af8e6" data-turbo-transient="true" />


    <meta name="hovercard-subject-tag" content="repository:187484523" data-turbo-transient>


  <meta name="github-keyboard-shortcuts" content="repository,source-code,file-tree" data-turbo-transient="true" />
  

  <meta name="selected-link" value="repo_source" data-turbo-transient>

    <meta name="google-site-verification" content="c1kuD-K2HIVF635lypcsWPoD4kilo5-jA_wBFyT4uMY">
  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
  <meta name="google-site-verification" content="Apib7-x98H0j5cPqHWwSMm6dNU4GmODRoqxLiDzdx9I">

<meta name="octolytics-url" content="https://collector.github.com/github/collect" /><meta name="octolytics-actor-id" content="75715053" /><meta name="octolytics-actor-login" content="srglbrkchn" /><meta name="octolytics-actor-hash" content="569fbf7a99e0cd5e463c430d84f372cf2aacbf2638edf8ef734e74c71b5cad0e" />

  <meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-turbo-transient="true" />

  




  

    <meta name="user-login" content="srglbrkchn">

  <link rel="sudo-modal" href="/sessions/sudo_modal">

    <meta name="viewport" content="width=device-width">
    
      <meta name="description" content="Contribute to WebDevSimplified/Face-Detection-JavaScript development by creating an account on GitHub.">
      <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <meta property="fb:app_id" content="1401488693436528">
    <meta name="apple-itunes-app" content="app-id=1477376905" />
      <meta name="twitter:image:src" content="https://opengraph.githubassets.com/26e2604a1aa707e20840102754570993fb64df74ad35bb7f637582d14ebe6907/WebDevSimplified/Face-Detection-JavaScript" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:title" content="Face-Detection-JavaScript/face-api.min.js at master · WebDevSimplified/Face-Detection-JavaScript" /><meta name="twitter:description" content="Contribute to WebDevSimplified/Face-Detection-JavaScript development by creating an account on GitHub." />
      <meta property="og:image" content="https://opengraph.githubassets.com/26e2604a1aa707e20840102754570993fb64df74ad35bb7f637582d14ebe6907/WebDevSimplified/Face-Detection-JavaScript" /><meta property="og:image:alt" content="Contribute to WebDevSimplified/Face-Detection-JavaScript development by creating an account on GitHub." /><meta property="og:image:width" content="1200" /><meta property="og:image:height" content="600" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="Face-Detection-JavaScript/face-api.min.js at master · WebDevSimplified/Face-Detection-JavaScript" /><meta property="og:url" content="https://github.com/WebDevSimplified/Face-Detection-JavaScript" /><meta property="og:description" content="Contribute to WebDevSimplified/Face-Detection-JavaScript development by creating an account on GitHub." />
      
    <link rel="assets" href="https://github.githubassets.com/">
      <link rel="shared-web-socket" href="wss://alive.github.com/_sockets/u/75715053/ws?session=eyJ2IjoiVjMiLCJ1Ijo3NTcxNTA1MywicyI6MTAxNTc3NTI2MSwiYyI6NDIyNDE0OTMzMywidCI6MTY3MjgyOTMyN30=--720c7fa48519549bedd80cc59f33f9e303b1844b9845310f1218767f43b02a55" data-refresh-url="/_alive" data-session-id="d75604a5cef77e9576bde3aedaca4c5cf09a47831c6cfc4685f0be8d004ae977">
      <link rel="shared-web-socket-src" href="/assets-cdn/worker/socket-worker-b87581f5816c.js">


        <meta name="hostname" content="github.com">


      <meta name="keyboard-shortcuts-preference" content="all">
      <script type="application/json" id="memex_keyboard_shortcuts_preference">"all"</script>

        <meta name="expected-hostname" content="github.com">

    <meta name="enabled-features" content="TURBO_EXPERIMENT_RISKY,IMAGE_METRIC_TRACKING,GEOJSON_AZURE_MAPS">


  <meta http-equiv="x-pjax-version" content="08ee615deb3a2fdfbc353938ba8236a7e3e1519b905152cf73dff1b4c69b75d9" data-turbo-track="reload">
  <meta http-equiv="x-pjax-csp-version" content="40aca5a152a13213a876f7628c466cd600db12fb858cdddccc3f1cc387eb7dad" data-turbo-track="reload">
  <meta http-equiv="x-pjax-css-version" content="ae18cfead275795ff6bcdb236bd30851b76a88b0bb83ca907c3bf631345be494" data-turbo-track="reload">
  <meta http-equiv="x-pjax-js-version" content="ead2b2349cc7126a20d62f006982ad8009dd127515371eb46154e3f3dbbf3896" data-turbo-track="reload">

  <meta name="turbo-cache-control" content="no-preview" data-turbo-transient="">

        <meta data-hydrostats="publish">

  <meta name="go-import" content="github.com/WebDevSimplified/Face-Detection-JavaScript git https://github.com/WebDevSimplified/Face-Detection-JavaScript.git">

  <meta name="octolytics-dimension-user_id" content="39717099" /><meta name="octolytics-dimension-user_login" content="WebDevSimplified" /><meta name="octolytics-dimension-repository_id" content="187484523" /><meta name="octolytics-dimension-repository_nwo" content="WebDevSimplified/Face-Detection-JavaScript" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="187484523" /><meta name="octolytics-dimension-repository_network_root_nwo" content="WebDevSimplified/Face-Detection-JavaScript" />



    <link rel="canonical" href="https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js" data-turbo-transient>
  <meta name="turbo-body-classes" content="logged-in env-production page-responsive page-blob">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <meta name="browser-optimizely-client-errors-url" content="https://api.github.com/_private/browser/optimizely_client/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">

<meta name="theme-color" content="#1e2327">
<meta name="color-scheme" content="light dark" />


  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-in env-production page-responsive page-blob" style="word-wrap: break-word;">
    <div data-turbo-body class="logged-in env-production page-responsive page-blob" style="word-wrap: break-word;">
      


    <div class="position-relative js-header-wrapper ">
      <a href="#start-of-content" class="p-3 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content">Skip to content</a>
      <span data-view-component="true" class="progress-pjax-loader Progress position-fixed width-full">
    <span style="width: 0%;" data-view-component="true" class="Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis"></span>
</span>      
      


        <script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_github_command-pale-4090c9-fc81c2b8560e.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_clipboard-copy-element_dist_index_esm_js-node_modules_delegated-e-b37f7d-a9860783b46f.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_command-palette_items_help-item_ts-app_assets_modules_github_comman-48ad9d-1115dce523df.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/command-palette-f1e16b497655.js"></script>

            <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap" role="banner">

    <div class="Header-item mt-n1 mb-n1  d-none d-md-flex">
      <a
  class="Header-link"
  href="https://github.com/"
  data-hotkey="g d"
  aria-label="Homepage "
  data-turbo="false"
  data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;go to dashboard&quot;,&quot;label&quot;:&quot;icon:logo&quot;}"
>
  <svg height="32" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>

    </div>

    <div class="Header-item d-md-none">
        <button aria-label="Toggle navigation" aria-expanded="false" type="button" data-view-component="true" class="Header-link js-details-target btn-link">    <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-three-bars">
    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
</svg>
</button>    </div>

    <div class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
              



<div class="header-search flex-auto position-relative js-site-search flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="187484523" data-scoped-search-url="/WebDevSimplified/Face-Detection-JavaScript/search" data-owner-scoped-search-url="/users/WebDevSimplified/search" data-unscoped-search-url="/search" data-turbo="false" action="/WebDevSimplified/Face-Detection-JavaScript/search" accept-charset="UTF-8" method="get">
      <label class="form-control header-search-wrapper input-sm p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
        <input type="text"
          class="form-control js-site-search-focus header-search-input jump-to-field js-jump-to-field js-site-search-field is-clearable"
          data-hotkey=s,/
          name="q"
          data-test-selector="nav-search-input"
          placeholder="Search or jump to…"
          data-unscoped-placeholder="Search or jump to…"
          data-scoped-placeholder="Search or jump to…"
          autocapitalize="off"
          role="combobox"
          aria-haspopup="listbox"
          aria-expanded="false"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          aria-label="Search or jump to…"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations"
          spellcheck="false"
          autocomplete="off"
        >
        <input type="hidden" value="WSFgR2yzXGlnB2YY1caa6wKHWnBZXiu1dkL5UbPiqgmSOqyr1wnk6eJGtdBNwbitDQV60Fx1mu55-Wjkczgxjg" data-csrf="true" class="js-data-jump-to-suggestions-path-csrf" />
        <input type="hidden" class="js-site-search-type-field" name="type" >
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="20" aria-hidden="true" class="mr-1 header-search-key-slash"><path fill="none" stroke="#979A9C" opacity=".4" d="M3.5.5h12c1.7 0 3 1.3 3 3v13c0 1.7-1.3 3-3 3h-12c-1.7 0-3-1.3-3-3v-13c0-1.7 1.3-3 3-3z"></path><path fill="#979A9C" d="M11.8 6L8 15.1h-.9L10.8 6h1z"></path></svg>


          <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
            
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="suggestion">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="color-fg-muted">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="scoped_search">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-owner-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="owner_scoped_search">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this user">
        In this user
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="global_search">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>


    <li class="d-flex flex-justify-center flex-items-center p-0 f5 js-jump-to-suggestion">
      <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="m-3 anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
    </li>
</ul>

          </div>
      </label>
</form>  </div>
</div>

        <nav id="global-nav" class="d-flex flex-column flex-md-row flex-self-stretch flex-md-self-auto" aria-label="Global">
    <a class="Header-link py-md-3 d-block d-md-none py-2 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:dashboard:user" aria-label="Dashboard" data-turbo="false" href="/dashboard">Dashboard</a>

  <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-turbo="false" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="/pulls">
      Pull<span class="d-inline d-md-none d-lg-inline"> request</span>s
</a>
  <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-turbo="false" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="/issues">Issues</a>

      <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:workspaces context:user" data-turbo="false" data-selected-links="/codespaces /codespaces" href="/codespaces">Codespaces</a>

    <div class="d-flex position-relative">
      <a class="js-selected-navigation-item Header-link flex-auto mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-turbo="false" data-selected-links=" /marketplace" href="/marketplace">Marketplace</a>
    </div>

  <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:explore" data-turbo="false" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">Explore</a>

      <a class="js-selected-navigation-item Header-link d-block d-md-none py-2 py-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:Sponsors" data-hydro-click="{&quot;event_type&quot;:&quot;sponsors.button_click&quot;,&quot;payload&quot;:{&quot;button&quot;:&quot;HEADER_SPONSORS_DASHBOARD&quot;,&quot;sponsorable_login&quot;:&quot;srglbrkchn&quot;,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="ffa70cdd0822a30013a8af2e484b6862ad5c2203e3c1e5ea7847f7e6ebf55ec0" data-turbo="false" data-selected-links=" /sponsors/accounts" href="/sponsors/accounts">Sponsors</a>

    <a class="Header-link d-block d-md-none mr-0 mr-md-3 py-2 py-md-3 border-top border-md-top-0 border-white-fade" data-turbo="false" href="/settings/profile">Settings</a>

    <a class="Header-link d-block d-md-none mr-0 mr-md-3 py-2 py-md-3 border-top border-md-top-0 border-white-fade" data-turbo="false" href="/srglbrkchn">
      <img class="avatar avatar-user" loading="lazy" decoding="async" src="https://avatars.githubusercontent.com/u/75715053?s=40&amp;v=4" width="20" height="20" alt="@srglbrkchn" />
      srglbrkchn
</a>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-turbo="false" action="/logout" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="taFM2GVmw-uwCP5abO_CQv1H5THRLXoBQdJJSbWcH8hryHRdpwJnV1xeaSaBfb_XY6zdWv4xSSeUeY5Z4rDaVw" />
      <button
        type="submit"
        class="Header-link mr-0 mr-md-3 py-2 py-md-3 border-top border-md-top-0 border-white-fade d-md-none btn-link d-block width-full text-left"
        style="padding-left: 2px;"
        data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;sign out&quot;,&quot;label&quot;:&quot;icon:logout&quot;}"
      >
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-sign-out v-align-middle">
    <path fill-rule="evenodd" d="M2 2.75C2 1.784 2.784 1 3.75 1h2.5a.75.75 0 010 1.5h-2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h2.5a.75.75 0 010 1.5h-2.5A1.75 1.75 0 012 13.25V2.75zm10.44 4.5H6.75a.75.75 0 000 1.5h5.69l-1.97 1.97a.75.75 0 101.06 1.06l3.25-3.25a.75.75 0 000-1.06l-3.25-3.25a.75.75 0 10-1.06 1.06l1.97 1.97z"></path>
</svg>
        Sign out
      </button>
</form></nav>

    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
        <a
  class="Header-link"
  href="https://github.com/"
  data-hotkey="g d"
  aria-label="Homepage "
  data-turbo="false"
  data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;go to dashboard&quot;,&quot;label&quot;:&quot;icon:logo&quot;}"
>
  <svg height="32" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>

    </div>

    <div class="Header-item mr-0 mr-md-3 flex-order-1 flex-md-order-none">
        

<notification-indicator data-channel="eyJjIjoibm90aWZpY2F0aW9uLWNoYW5nZWQ6NzU3MTUwNTMiLCJ0IjoxNjcyODI5MzI3fQ==--24e3b90b7294cc6b0b55499952e191ce8c687e562aaf4fee6a70821ec25b5842" data-indicator-mode="none" data-tooltip-global="You have unread notifications" data-tooltip-unavailable="Notifications are unavailable at the moment." data-tooltip-none="You have no unread notifications" data-view-component="true" class="js-socket-channel">
  <a id="AppHeader-notifications-button" href="/notifications"
    class="Header-link notification-indicator position-relative tooltipped tooltipped-sw"

    

    data-hotkey="g n"
    data-target="notification-indicator.link"
    aria-label="Notifications"

      data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;go to notifications&quot;,&quot;label&quot;:&quot;icon:read&quot;}"
  >

    <span
      data-target="notification-indicator.badge"
      class="mail-status unread" hidden>
    </span>

      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-bell">
    <path d="M8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path><path fill-rule="evenodd" d="M8 1.5A3.5 3.5 0 004.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01l.001.006c0 .002.002.004.004.006a.017.017 0 00.006.004l.007.001h10.964l.007-.001a.016.016 0 00.006-.004.016.016 0 00.004-.006l.001-.007a.017.017 0 00-.003-.01l-1.703-2.554a1.75 1.75 0 01-.294-.97V5A3.5 3.5 0 008 1.5zM3 5a5 5 0 0110 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.518 1.518 0 0113.482 13H2.518a1.518 1.518 0 01-1.263-2.36l1.703-2.554A.25.25 0 003 7.947V5z"></path>
</svg>
  </a>

</notification-indicator>
    </div>


    <div class="Header-item position-relative d-none d-md-flex">
        <details class="details-overlay details-reset">
  <summary
    class="Header-link"
    aria-label="Create new…"
    data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;create new&quot;,&quot;label&quot;:&quot;icon:add&quot;}"
  >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-plus">
    <path fill-rule="evenodd" d="M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"></path>
</svg> <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw">
    
<a role="menuitem" class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a role="menuitem" class="dropdown-item" href="/codespaces/new">
  New codespace
</a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>



  </details-menu>
</details>

    </div>

    <div class="Header-item position-relative mr-0 d-none d-md-flex">
        
  <details class="details-overlay details-reset js-feature-preview-indicator-container" data-feature-preview-indicator-src="/users/srglbrkchn/feature_preview/indicator_check">

  <summary
    class="Header-link"
    aria-label="View profile and more"
    data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;show menu&quot;,&quot;label&quot;:&quot;icon:avatar&quot;}"
  >
    <img src="https://avatars.githubusercontent.com/u/75715053?s=40&amp;v=4" alt="@srglbrkchn" size="20" height="20" width="20" data-view-component="true" class="avatar avatar-small circle" />
      <span class="unread-indicator js-feature-preview-indicator" style="top: 1px;" hidden></span>
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu
      class="dropdown-menu dropdown-menu-sw"
      style="width: 180px"
      
      preload>
      <include-fragment src="/users/75715053/menu" loading="lazy">
        <p class="text-center mt-3" data-hide-on-error>
          <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
        </p>
        <p class="ml-1 mb-2 mt-2 color-fg-default" data-show-on-error>
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
          Sorry, something went wrong.
        </p>
      </include-fragment>
  </details-menu>
</details>

    </div>
</header>

            
    </div>

  <div id="start-of-content" class="show-on-focus"></div>







    <div id="js-flash-container" data-turbo-replace>





  <template class="js-flash-template">
    
<div class="flash flash-full   {{ className }}">
  <div class="px-2" >
    <button autofocus class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
    </button>
    <div aria-atomic="true" role="alert" class="js-flash-alert">
      
      <div>{{ message }}</div>

    </div>
  </div>
</div>
  </template>
</div>


    
  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>





      <details
  class="details-reset details-overlay details-overlay-dark js-command-palette-dialog"
  id="command-palette-pjax-container"
  data-turbo-replace
>
  <summary aria-label="command palette trigger" tabindex="-1"></summary>
  <details-dialog class="command-palette-details-dialog d-flex flex-column flex-justify-center height-fit" aria-label="command palette">
    <command-palette
      class="command-palette color-bg-default rounded-3 border color-shadow-small"
      return-to=/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js
      user-id="75715053"
      activation-hotkey="Mod+k,Mod+Alt+k"
      command-mode-hotkey="Mod+Shift+k"
      data-action="
        command-palette-input-ready:command-palette#inputReady
        command-palette-page-stack-updated:command-palette#updateInputScope
        itemsUpdated:command-palette#itemsUpdated
        keydown:command-palette#onKeydown
        loadingStateChanged:command-palette#loadingStateChanged
        selectedItemChanged:command-palette#selectedItemChanged
        pageFetchError:command-palette#pageFetchError
      ">

        <command-palette-mode
          data-char="#"
            data-scope-types="[&quot;&quot;]"
            data-placeholder="Search issues and pull requests"
        ></command-palette-mode>
        <command-palette-mode
          data-char="#"
            data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-placeholder="Search issues, pull requests, discussions, and projects"
        ></command-palette-mode>
        <command-palette-mode
          data-char="!"
            data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-placeholder="Search projects"
        ></command-palette-mode>
        <command-palette-mode
          data-char="@"
            data-scope-types="[&quot;&quot;]"
            data-placeholder="Search or jump to a user, organization, or repository"
        ></command-palette-mode>
        <command-palette-mode
          data-char="@"
            data-scope-types="[&quot;owner&quot;]"
            data-placeholder="Search or jump to a repository"
        ></command-palette-mode>
        <command-palette-mode
          data-char="/"
            data-scope-types="[&quot;repository&quot;]"
            data-placeholder="Search files"
        ></command-palette-mode>
        <command-palette-mode
          data-char="?"
        ></command-palette-mode>
        <command-palette-mode
          data-char="&gt;"
            data-placeholder="Run a command"
        ></command-palette-mode>
        <command-palette-mode
          data-char=""
            data-scope-types="[&quot;&quot;]"
            data-placeholder="Search or jump to..."
        ></command-palette-mode>
        <command-palette-mode
          data-char=""
            data-scope-types="[&quot;owner&quot;]"
            data-placeholder="Search or jump to..."
        ></command-palette-mode>
      <command-palette-mode
        class="js-command-palette-default-mode"
        data-char=""
        data-placeholder="Search or jump to..."
      ></command-palette-mode>

      <command-palette-input placeholder="Search or jump to..."

        data-action="
          command-palette-input:command-palette#onInput
          command-palette-select:command-palette#onSelect
          command-palette-descope:command-palette#onDescope
          command-palette-cleared:command-palette#onInputClear
        "
      >
        <div class="js-search-icon d-flex flex-items-center mr-2" style="height: 26px">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search color-fg-muted">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
        </div>
        <div class="js-spinner d-flex flex-items-center mr-2 color-fg-muted" hidden>
          <svg aria-label="Loading" class="anim-rotate" viewBox="0 0 16 16" fill="none" width="16" height="16">
            <circle
              cx="8"
              cy="8"
              r="7"
              stroke="currentColor"
              stroke-opacity="0.25"
              stroke-width="2"
              vector-effect="non-scaling-stroke"
            ></circle>
            <path
              d="M15 8a7.002 7.002 0 00-7-7"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              vector-effect="non-scaling-stroke"
            ></path>
          </svg>
        </div>
        <command-palette-scope >
          <div data-target="command-palette-scope.placeholder" hidden class="color-fg-subtle">/&nbsp;&nbsp;<span class="text-semibold color-fg-default">...</span>&nbsp;&nbsp;/&nbsp;&nbsp;</div>
              <command-palette-token
                data-text="WebDevSimplified"
                data-id="MDQ6VXNlcjM5NzE3MDk5"
                data-type="owner"
                data-value="WebDevSimplified"
                data-targets="command-palette-scope.tokens"
                class="color-fg-default text-semibold"
                style="white-space:nowrap;line-height:20px;"
                >WebDevSimplified<span class="color-fg-subtle text-normal">&nbsp;&nbsp;/&nbsp;&nbsp;</span></command-palette-token>
              <command-palette-token
                data-text="Face-Detection-JavaScript"
                data-id="MDEwOlJlcG9zaXRvcnkxODc0ODQ1MjM="
                data-type="repository"
                data-value="Face-Detection-JavaScript"
                data-targets="command-palette-scope.tokens"
                class="color-fg-default text-semibold"
                style="white-space:nowrap;line-height:20px;"
                >Face-Detection-Ja...<span class="color-fg-subtle text-normal">&nbsp;&nbsp;/&nbsp;&nbsp;</span></command-palette-token>
        </command-palette-scope>
        <div class="command-palette-input-group flex-1 form-control border-0 box-shadow-none" style="z-index: 0">
          <div class="command-palette-typeahead position-absolute d-flex flex-items-center Truncate">
            <span class="typeahead-segment input-mirror" data-target="command-palette-input.mirror"></span>
            <span class="Truncate-text" data-target="command-palette-input.typeaheadText"></span>
            <span class="typeahead-segment" data-target="command-palette-input.typeaheadPlaceholder"></span>
          </div>
          <input
            class="js-overlay-input typeahead-input d-none"
            disabled
            tabindex="-1"
            aria-label="Hidden input for typeahead"
          >
          <input
            type="text"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            class="js-input typeahead-input form-control border-0 box-shadow-none input-block width-full no-focus-indicator"
            aria-label="Command palette input"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-autocomplete="list"
            aria-controls="command-palette-page-stack"
            role="combobox"
            data-action="
              input:command-palette-input#onInput
              keydown:command-palette-input#onKeydown
            "
          >
        </div>
          <div data-view-component="true" class="position-relative d-inline-block">
    <button aria-keyshortcuts="Meta+Delete" data-action="click:command-palette-input#onClear keypress:command-palette-input#onClear" data-target="command-palette-input.clearButton" id="command-palette-clear-button" hidden="hidden" type="button" data-view-component="true" class="btn-octicon command-palette-input-clear-button">      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x-circle-fill">
    <path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path>
</svg>
</button>    <tool-tip for="command-palette-clear-button" data-direction="w" data-type="label" data-view-component="true" class="sr-only position-absolute">Clear Command Palette</tool-tip>
</div>
      </command-palette-input>

      <command-palette-page-stack
        data-default-scope-id="MDEwOlJlcG9zaXRvcnkxODc0ODQ1MjM="
        data-default-scope-type="Repository"
        data-action="command-palette-page-octicons-cached:command-palette-page-stack#cacheOcticons"
      >
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">#</kbd> to search pull requests
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">#</kbd> to search issues
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">#</kbd> to search discussions
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">!</kbd> to search projects
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">@</kbd> to search teams
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">@</kbd> to search people and organizations
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">&gt;</kbd> to activate command mode
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Go to your accessibility settings to change your keyboard shortcuts
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type author:@me to search your content
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:pr to filter to pull requests
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:issue to filter to issues
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:project to filter to projects
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:open to filter to open content
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
        <command-palette-tip class="mx-3 my-2 flash flash-error d-flex flex-items-center" data-scope-types="*" data-on-error>
          <div>
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
          </div>
          <div class="px-2">
            We’ve encountered an error and some results aren't available at this time. Type a new search or try again later.
          </div>
        </command-palette-tip>
        <command-palette-tip class="h4 color-fg-default pl-3 pb-2 pt-3" data-on-empty data-scope-types="*" data-match-mode="[^?]|^$">
          No results matched your search
        </command-palette-tip>

        <div hidden>

            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="arrow-right-color-fg-muted">
              <svg height="16" class="octicon octicon-arrow-right color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="arrow-right-color-fg-default">
              <svg height="16" class="octicon octicon-arrow-right color-fg-default" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="codespaces-color-fg-muted">
              <svg height="16" class="octicon octicon-codespaces color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 1.75C2 .784 2.784 0 3.75 0h8.5C13.216 0 14 .784 14 1.75v5a1.75 1.75 0 01-1.75 1.75h-8.5A1.75 1.75 0 012 6.75v-5zm1.75-.25a.25.25 0 00-.25.25v5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25v-5a.25.25 0 00-.25-.25h-8.5zM0 11.25c0-.966.784-1.75 1.75-1.75h12.5c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25v-3zM1.75 11a.25.25 0 00-.25.25v3c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-3a.25.25 0 00-.25-.25H1.75z"></path><path fill-rule="evenodd" d="M3 12.75a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5a.75.75 0 01-.75-.75zm4 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="copy-color-fg-muted">
              <svg height="16" class="octicon octicon-copy color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="dash-color-fg-muted">
              <svg height="16" class="octicon octicon-dash color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 7.75A.75.75 0 012.75 7h10a.75.75 0 010 1.5h-10A.75.75 0 012 7.75z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="file-color-fg-muted">
              <svg height="16" class="octicon octicon-file color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 019 4.25V1.5H3.75zm6.75.062V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="gear-color-fg-muted">
              <svg height="16" class="octicon octicon-gear color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="lock-color-fg-muted">
              <svg height="16" class="octicon octicon-lock color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 4v2h-.25A1.75 1.75 0 002 7.75v5.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-5.5A1.75 1.75 0 0012.25 6H12V4a4 4 0 10-8 0zm6.5 2V4a2.5 2.5 0 00-5 0v2h5zM12 7.5h.25a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-5.5a.25.25 0 01.25-.25H12z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="moon-color-fg-muted">
              <svg height="16" class="octicon octicon-moon color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="person-color-fg-muted">
              <svg height="16" class="octicon octicon-person color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M10.5 5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm.061 3.073a4 4 0 10-5.123 0 6.004 6.004 0 00-3.431 5.142.75.75 0 001.498.07 4.5 4.5 0 018.99 0 .75.75 0 101.498-.07 6.005 6.005 0 00-3.432-5.142z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="pencil-color-fg-muted">
              <svg height="16" class="octicon octicon-pencil color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="issue-opened-open">
              <svg height="16" class="octicon octicon-issue-opened open" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path><path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="git-pull-request-draft-color-fg-muted">
              <svg height="16" class="octicon octicon-git-pull-request-draft color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M2.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.25 1a2.25 2.25 0 00-.75 4.372v5.256a2.251 2.251 0 101.5 0V5.372A2.25 2.25 0 003.25 1zm0 11a.75.75 0 100 1.5.75.75 0 000-1.5zm9.5 3a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm0-3a.75.75 0 100 1.5.75.75 0 000-1.5z"></path><path d="M14 7.5a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm0-4.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="search-color-fg-muted">
              <svg height="16" class="octicon octicon-search color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="sun-color-fg-muted">
              <svg height="16" class="octicon octicon-sun color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="sync-color-fg-muted">
              <svg height="16" class="octicon octicon-sync color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="trash-color-fg-muted">
              <svg height="16" class="octicon octicon-trash color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="key-color-fg-muted">
              <svg height="16" class="octicon octicon-key color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M6.5 5.5a4 4 0 112.731 3.795.75.75 0 00-.768.18L7.44 10.5H6.25a.75.75 0 00-.75.75v1.19l-.06.06H4.25a.75.75 0 00-.75.75v1.19l-.06.06H1.75a.25.25 0 01-.25-.25v-1.69l5.024-5.023a.75.75 0 00.181-.768A3.995 3.995 0 016.5 5.5zm4-5.5a5.5 5.5 0 00-5.348 6.788L.22 11.72a.75.75 0 00-.22.53v2C0 15.216.784 16 1.75 16h2a.75.75 0 00.53-.22l.5-.5a.75.75 0 00.22-.53V14h.75a.75.75 0 00.53-.22l.5-.5a.75.75 0 00.22-.53V12h.75a.75.75 0 00.53-.22l.932-.932A5.5 5.5 0 1010.5 0zm.5 6a1 1 0 100-2 1 1 0 000 2z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="comment-discussion-color-fg-muted">
              <svg height="16" class="octicon octicon-comment-discussion color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="bell-color-fg-muted">
              <svg height="16" class="octicon octicon-bell color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path d="M8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path><path fill-rule="evenodd" d="M8 1.5A3.5 3.5 0 004.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01l.001.006c0 .002.002.004.004.006a.017.017 0 00.006.004l.007.001h10.964l.007-.001a.016.016 0 00.006-.004.016.016 0 00.004-.006l.001-.007a.017.017 0 00-.003-.01l-1.703-2.554a1.75 1.75 0 01-.294-.97V5A3.5 3.5 0 008 1.5zM3 5a5 5 0 0110 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.518 1.518 0 0113.482 13H2.518a1.518 1.518 0 01-1.263-2.36l1.703-2.554A.25.25 0 003 7.947V5z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="bell-slash-color-fg-muted">
              <svg height="16" class="octicon octicon-bell-slash color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5c-.997 0-1.895.416-2.534 1.086A.75.75 0 014.38 1.55 5 5 0 0113 5v2.373a.75.75 0 01-1.5 0V5A3.5 3.5 0 008 1.5zM4.182 4.31L1.19 2.143a.75.75 0 10-.88 1.214L3 5.305v2.642a.25.25 0 01-.042.139L1.255 10.64A1.518 1.518 0 002.518 13h11.108l1.184.857a.75.75 0 10.88-1.214l-1.375-.996a1.196 1.196 0 00-.013-.01L4.198 4.321a.733.733 0 00-.016-.011zm7.373 7.19L4.5 6.391v1.556c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01.015.015 0 00.005.012.017.017 0 00.006.004l.007.001h9.037zM8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="paintbrush-color-fg-muted">
              <svg height="16" class="octicon octicon-paintbrush color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.134 1.535C9.722 2.562 8.16 4.057 6.889 5.312 5.8 6.387 5.041 7.401 4.575 8.294a3.745 3.745 0 00-3.227 1.054c-.43.431-.69 1.066-.86 1.657a11.982 11.982 0 00-.358 1.914A21.263 21.263 0 000 15.203v.054l.75-.007-.007.75h.054a14.404 14.404 0 00.654-.012 21.243 21.243 0 001.63-.118c.62-.07 1.3-.18 1.914-.357.592-.17 1.226-.43 1.657-.861a3.745 3.745 0 001.055-3.217c.908-.461 1.942-1.216 3.04-2.3 1.279-1.262 2.764-2.825 3.775-4.249.501-.706.923-1.428 1.125-2.096.2-.659.235-1.469-.368-2.07-.606-.607-1.42-.55-2.069-.34-.66.213-1.376.646-2.076 1.155zm-3.95 8.48a3.76 3.76 0 00-1.19-1.192 9.758 9.758 0 011.161-1.607l1.658 1.658a9.853 9.853 0 01-1.63 1.142zM.742 16l.007-.75-.75.008A.75.75 0 00.743 16zM12.016 2.749c-1.224.89-2.605 2.189-3.822 3.384l1.718 1.718c1.21-1.205 2.51-2.597 3.387-3.833.47-.662.78-1.227.912-1.662.134-.444.032-.551.009-.575h-.001V1.78c-.014-.014-.112-.113-.548.027-.432.14-.995.462-1.655.942zM1.62 13.089a19.56 19.56 0 00-.104 1.395 19.55 19.55 0 001.396-.104 10.528 10.528 0 001.668-.309c.526-.151.856-.325 1.011-.48a2.25 2.25 0 00-3.182-3.182c-.155.155-.329.485-.48 1.01a10.515 10.515 0 00-.309 1.67z"></path></svg>
            </div>

            <command-palette-item-group
              data-group-id="top"
              data-group-title="Top result"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="0"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="commands"
              data-group-title="Commands"
              data-group-hint="Type &gt; to filter"
              data-group-limits="{&quot;static_items_page&quot;:50,&quot;issue&quot;:50,&quot;pull_request&quot;:50,&quot;discussion&quot;:50}"
              data-default-priority="1"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="global_commands"
              data-group-title="Global Commands"
              data-group-hint="Type &gt; to filter"
              data-group-limits="{&quot;issue&quot;:0,&quot;pull_request&quot;:0,&quot;discussion&quot;:0}"
              data-default-priority="2"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="this_page"
              data-group-title="This Page"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="3"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="files"
              data-group-title="Files"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="4"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="default"
              data-group-title="Default"
              data-group-hint=""
              data-group-limits="{&quot;static_items_page&quot;:50}"
              data-default-priority="5"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="pages"
              data-group-title="Pages"
              data-group-hint=""
              data-group-limits="{&quot;repository&quot;:10}"
              data-default-priority="6"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="access_policies"
              data-group-title="Access Policies"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="7"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="organizations"
              data-group-title="Organizations"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="8"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="repositories"
              data-group-title="Repositories"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="9"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="references"
              data-group-title="Issues, pull requests, and discussions"
              data-group-hint="Type # to filter"
              data-group-limits="{}"
              data-default-priority="10"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="teams"
              data-group-title="Teams"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="11"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="users"
              data-group-title="Users"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="12"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="projects"
              data-group-title="Projects"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="13"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="footer"
              data-group-title="Footer"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="14"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="modes_help"
              data-group-title="Modes"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="15"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="filters_help"
              data-group-title="Use filters in issues, pull requests, discussions, and projects"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="16"
            >
            </command-palette-item-group>

            <command-palette-page
              data-page-title="WebDevSimplified"
              data-scope-id="MDQ6VXNlcjM5NzE3MDk5"
              data-scope-type="owner"
              data-targets="command-palette-page-stack.defaultPages"
              hidden
            >
            </command-palette-page>
            <command-palette-page
              data-page-title="Face-Detection-JavaScript"
              data-scope-id="MDEwOlJlcG9zaXRvcnkxODc0ODQ1MjM="
              data-scope-type="repository"
              data-targets="command-palette-page-stack.defaultPages"
              hidden
            >
            </command-palette-page>
        </div>

        <command-palette-page data-is-root>
        </command-palette-page>
          <command-palette-page
            data-page-title="WebDevSimplified"
            data-scope-id="MDQ6VXNlcjM5NzE3MDk5"
            data-scope-type="owner"
          >
          </command-palette-page>
          <command-palette-page
            data-page-title="Face-Detection-JavaScript"
            data-scope-id="MDEwOlJlcG9zaXRvcnkxODc0ODQ1MjM="
            data-scope-type="repository"
          >
          </command-palette-page>
      </command-palette-page-stack>

      <server-defined-provider data-type="search-links" data-targets="command-palette.serverDefinedProviderElements"></server-defined-provider>
      <server-defined-provider data-type="help" data-targets="command-palette.serverDefinedProviderElements">
          <command-palette-help
            data-group="modes_help"
              data-prefix="#"
              data-scope-types="[&quot;&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>issues</strong> and <strong>pull requests</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">#</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="#"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>issues, pull requests, discussions,</strong> and <strong>projects</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">#</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="@"
              data-scope-types="[&quot;&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>organizations, repositories,</strong> and <strong>users</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">@</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="!"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>projects</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">!</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="/"
              data-scope-types="[&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>files</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">/</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="&gt;"
          >
            <span data-target="command-palette-help.titleElement">Activate <strong>command mode</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">&gt;</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# author:@me"
          >
            <span data-target="command-palette-help.titleElement">Search your issues, pull requests, and discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># author:@me</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# author:@me"
          >
            <span data-target="command-palette-help.titleElement">Search your issues, pull requests, and discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># author:@me</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:pr"
          >
            <span data-target="command-palette-help.titleElement">Filter to pull requests</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:pr</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:issue"
          >
            <span data-target="command-palette-help.titleElement">Filter to issues</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:issue</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:discussion"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Filter to discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:discussion</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:project"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Filter to projects</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:project</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:open"
          >
            <span data-target="command-palette-help.titleElement">Filter to open issues, pull requests, and discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:open</kbd>
              </span>
          </command-palette-help>
      </server-defined-provider>

        <server-defined-provider
          data-type="commands"
          data-fetch-debounce="0"
            data-src="/command_palette/commands"
          data-supported-modes="[]"
            data-supports-commands
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="prefetched"
          data-fetch-debounce="0"
            data-src="/command_palette/jump_to_page_navigation"
          data-supported-modes="[&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/issues"
          data-supported-modes="[&quot;#&quot;,&quot;#&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;,&quot;&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/jump_to"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/jump_to_members_only"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;,&quot;&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="prefetched"
          data-fetch-debounce="0"
            data-src="/command_palette/jump_to_members_only_prefetched"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;,&quot;&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="files"
          data-fetch-debounce="0"
            data-src="/command_palette/files"
          data-supported-modes="[&quot;/&quot;]"
            data-supported-scope-types="[&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/discussions"
          data-supported-modes="[&quot;#&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/projects"
          data-supported-modes="[&quot;#&quot;,&quot;!&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="prefetched"
          data-fetch-debounce="0"
            data-src="/command_palette/recent_issues"
          data-supported-modes="[&quot;#&quot;,&quot;#&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;,&quot;&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/teams"
          data-supported-modes="[&quot;@&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/name_with_owner_repository"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;,&quot;&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
    </command-palette>
  </details-dialog>
</details>

<div class="position-fixed bottom-0 left-0 ml-5 mb-5 js-command-palette-toasts" style="z-index: 1000">
  <div hidden class="Toast Toast--loading">
    <span class="Toast-icon">
      <svg class="Toast--spinner" viewBox="0 0 32 32" width="18" height="18" aria-hidden="true">
        <path
          fill="#959da5"
          d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"
        />
        <path fill="#ffffff" d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"></path>
      </svg>
    </span>
    <span class="Toast-content"></span>
  </div>

  <div hidden class="anim-fade-in fast Toast Toast--error">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-stop">
    <path fill-rule="evenodd" d="M4.47.22A.75.75 0 015 0h6a.75.75 0 01.53.22l4.25 4.25c.141.14.22.331.22.53v6a.75.75 0 01-.22.53l-4.25 4.25A.75.75 0 0111 16H5a.75.75 0 01-.53-.22L.22 11.53A.75.75 0 010 11V5a.75.75 0 01.22-.53L4.47.22zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5H5.31zM8 4a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 018 4zm0 8a1 1 0 100-2 1 1 0 000 2z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>

  <div hidden class="anim-fade-in fast Toast Toast--warning">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>


  <div hidden class="anim-fade-in fast Toast Toast--success">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>

  <div hidden class="anim-fade-in fast Toast">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-info">
    <path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>
</div>


  <div
    class="application-main "
    data-commit-hovercards-enabled
    data-discussion-hovercards-enabled
    data-issue-and-pr-hovercards-enabled
  >
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main id="js-repo-pjax-container" >
      
  


    





  
  <div id="repository-container-header"  class="pt-3 hide-full-screen" style="background-color: var(--color-page-header-bg);" data-turbo-replace>

      <div class="d-flex flex-wrap flex-justify-end mb-3  px-3 px-md-4 px-lg-5" style="gap: 1rem;">

        <div class="flex-auto min-width-0 width-fit mr-3">
            
  <div class=" d-flex flex-wrap flex-items-center wb-break-word f3 text-normal">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo color-fg-muted mr-2">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
    
    <span class="author flex-self-stretch" itemprop="author">
      <a class="url fn" rel="author" data-hovercard-type="user" data-hovercard-url="/users/WebDevSimplified/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/WebDevSimplified">WebDevSimplified</a>
    </span>
    <span class="mx-1 flex-self-stretch color-fg-muted">/</span>
    <strong itemprop="name" class="mr-2 flex-self-stretch">
      <a data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" href="/WebDevSimplified/Face-Detection-JavaScript">Face-Detection-JavaScript</a>
    </strong>

    <span></span><span class="Label Label--secondary v-align-middle mr-1">Public</span>
  </div>


        </div>

          <ul class="pagehead-actions flex-shrink-0 d-none d-md-inline" style="padding: 2px 0;">

      

  <li>
          <notifications-list-subscription-form
      data-action="notifications-dialog-label-toggled:notifications-list-subscription-form#handleDialogLabelToggle"
      class="f5 position-relative"
    >
      <details
        class="details-reset details-overlay f5 position-relative"
        data-target="notifications-list-subscription-form.details"
        data-action="toggle:notifications-list-subscription-form#detailsToggled"
      >

        <summary data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;WATCH_BUTTON&quot;,&quot;repository_id&quot;:187484523,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="a2de1ea78965ff87c60edf4b9e5d79800e7609ee811087191e4cfbbc039dbfdc" data-ga-click="Repository, click Watch settings, action:blob#show" aria-label="Notification settings" data-view-component="true" class="btn-sm btn">    <span data-menu-button>
            <span
              hidden
              
              data-target="notifications-list-subscription-form.unwatchButtonCopy"
            >
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-eye">
    <path fill-rule="evenodd" d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"></path>
</svg>
              Unwatch
            </span>
            <span
              hidden
              
              data-target="notifications-list-subscription-form.stopIgnoringButtonCopy"
            >
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-bell-slash">
    <path fill-rule="evenodd" d="M8 1.5c-.997 0-1.895.416-2.534 1.086A.75.75 0 014.38 1.55 5 5 0 0113 5v2.373a.75.75 0 01-1.5 0V5A3.5 3.5 0 008 1.5zM4.182 4.31L1.19 2.143a.75.75 0 10-.88 1.214L3 5.305v2.642a.25.25 0 01-.042.139L1.255 10.64A1.518 1.518 0 002.518 13h11.108l1.184.857a.75.75 0 10.88-1.214l-1.375-.996a1.196 1.196 0 00-.013-.01L4.198 4.321a.733.733 0 00-.016-.011zm7.373 7.19L4.5 6.391v1.556c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01.015.015 0 00.005.012.017.017 0 00.006.004l.007.001h9.037zM8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path>
</svg>
              Stop ignoring
            </span>
            <span
              
              
              data-target="notifications-list-subscription-form.watchButtonCopy"
            >
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-eye">
    <path fill-rule="evenodd" d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"></path>
</svg>
              Watch
            </span>
          </span>
            <span id="repo-notifications-counter" data-target="notifications-list-subscription-form.socialCount" data-pjax-replace="true" data-turbo-replace="true" title="55" data-view-component="true" class="Counter">55</span>
          <span class="dropdown-caret"></span>
</summary>
        <details-menu
          class="SelectMenu  "
          role="menu"
          data-target="notifications-list-subscription-form.menu"
          
        >
          <div class="SelectMenu-modal notifications-component-menu-modal">
            <header class="SelectMenu-header">
              <h3 class="SelectMenu-title">Notifications</h3>
              <button class="SelectMenu-closeButton" type="button" aria-label="Close menu" data-action="click:notifications-list-subscription-form#closeMenu">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
              </button>
            </header>

            <div class="SelectMenu-list">
              <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-target="notifications-list-subscription-form.form" data-action="submit:notifications-list-subscription-form#submitForm" data-turbo="false" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="Ogzxj9NU3CxzCR0pyjHL2HHDOUVJhkN2HpSQDY9dOWGgOIoXdVcbyoQNrs9Hm0aVD1VqF7MPliXXtMnfEJ3x2g" autocomplete="off" />

                <input type="hidden" name="repository_id" value="187484523">

                <button
                  type="submit"
                  name="do"
                  value="included"
                  class="SelectMenu-item flex-items-start"
                  role="menuitemradio"
                  aria-checked="true"
                  data-targets="notifications-list-subscription-form.subscriptionButtons"
                  
                >
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  </span>
                  <div>
                    <div class="f5 text-bold">
                      Participating and @mentions
                    </div>
                    <div class="text-small color-fg-muted text-normal pb-1">
                      Only receive notifications from this repository when participating or @mentioned.
                    </div>
                  </div>
                </button>

                <button
                  type="submit"
                  name="do"
                  value="subscribed"
                  class="SelectMenu-item flex-items-start"
                  role="menuitemradio"
                  aria-checked="false"
                  data-targets="notifications-list-subscription-form.subscriptionButtons"
                >
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  </span>
                  <div>
                    <div class="f5 text-bold">
                      All Activity
                    </div>
                    <div class="text-small color-fg-muted text-normal pb-1">
                      Notified of all notifications on this repository.
                    </div>
                  </div>
                </button>

                <button
                  type="submit"
                  name="do"
                  value="ignore"
                  class="SelectMenu-item flex-items-start"
                  role="menuitemradio"
                  aria-checked="false"
                  data-targets="notifications-list-subscription-form.subscriptionButtons"
                >
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  </span>
                  <div>
                    <div class="f5 text-bold">
                      Ignore
                    </div>
                    <div class="text-small color-fg-muted text-normal pb-1">
                      Never be notified.
                    </div>
                  </div>
                </button>
</form>
              <button
                class="SelectMenu-item flex-items-start pr-3"
                type="button"
                role="menuitemradio"
                data-target="notifications-list-subscription-form.customButton"
                data-action="click:notifications-list-subscription-form#openCustomDialog"
                aria-haspopup="true"
                aria-checked="false"
                
              >
                <span class="f5">
                  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                </span>
                <div>
                  <div class="d-flex flex-items-start flex-justify-between">
                    <div class="f5 text-bold">Custom</div>
                    <div class="f5 pr-1">
                      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-arrow-right">
    <path fill-rule="evenodd" d="M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z"></path>
</svg>
                    </div>
                  </div>
                  <div class="text-small color-fg-muted text-normal pb-1">
                    Select events you want to be notified of in addition to participating and @mentions.
                  </div>
                </div>
              </button>

                <div class="px-3 py-2 d-flex color-bg-subtle flex-items-center">
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-device-mobile SelectMenu-icon SelectMenu-icon--device-mobile">
    <path fill-rule="evenodd" d="M3.75 0A1.75 1.75 0 002 1.75v12.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 14.25V1.75A1.75 1.75 0 0012.25 0h-8.5zM3.5 1.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25V1.75zM8 13a1 1 0 100-2 1 1 0 000 2z"></path>
</svg>
                  </span>
                  <span className="text-small color-fg-muted text-normal pb-1">
                    Get push notifications on <a target="_blank" rel="noopener noreferrer" href="https://apps.apple.com/app/apple-store/id1477376905?ct=watch-dropdown&amp;mt=8&amp;pt=524675">iOS</a> or <a target="_blank" rel="noopener noreferrer" href="https://play.google.com/store/apps/details?id=com.github.android&amp;referrer=utm_campaign%3Dwatch-dropdown%26utm_medium%3Dweb%26utm_source%3Dgithub">Android</a>.
                  </span>
                </div>
            </div>
          </div>
        </details-menu>

        <details-dialog
          class="notifications-component-dialog "
          data-target="notifications-list-subscription-form.customDialog"
          aria-label="Custom dialog"
          hidden
        >
          <div class="SelectMenu-modal notifications-component-dialog-modal overflow-visible">
            <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-target="notifications-list-subscription-form.customform" data-action="submit:notifications-list-subscription-form#submitCustomForm" data-turbo="false" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="m7y-wK6mjCEPREyR1TFAsSyfy-avX5xjxY_gWWw9UMgBiMVYCKVLx_hA_3dYm838UgmYtFXWSTAMr7mL8_2Ycw" autocomplete="off" />

              <input type="hidden" name="repository_id" value="187484523">

              <header class="d-sm-none SelectMenu-header pb-0 border-bottom-0 px-2 px-sm-3">
                <h1 class="f3 SelectMenu-title d-inline-flex">
                  <button
                    class="color-bg-default border-0 px-2 py-0 m-0 Link--secondary f5"
                    aria-label="Return to menu"
                    type="button"
                    data-action="click:notifications-list-subscription-form#closeCustomDialog"
                  >
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-arrow-left">
    <path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"></path>
</svg>
                  </button>
                  Custom
                </h1>
              </header>

              <header class="d-none d-sm-flex flex-items-start pt-1">
                <button
                  class="border-0 px-2 pt-1 m-0 Link--secondary f5"
                  style="background-color: transparent;"
                  aria-label="Return to menu"
                  type="button"
                  data-action="click:notifications-list-subscription-form#closeCustomDialog"
                >
                  <svg style="position: relative; left: 2px; top: 1px" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-arrow-left">
    <path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"></path>
</svg>
                </button>

                <h1 class="pt-1 pr-4 pb-0 pl-0 f5 text-bold">
                  Custom
                </h1>
              </header>

              <fieldset>
                <legend>
                  <div class="text-small color-fg-muted pt-0 pr-3 pb-3 pl-6 pl-sm-5 border-bottom mb-3">
                    Select events you want to be notified of in addition to participating and @mentions.
                  </div>
                </legend>
                <div data-target="notifications-list-subscription-form.labelInputs">
                </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="Issue"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Issues
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="PullRequest"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Pull requests
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="Release"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Releases
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="Discussion"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                          aria-describedby="Discussion-disabled"
                          aria-disabled="true"
                      >
                      Discussions
                    </label>

                      <div
                        id="Discussion-disabled"
                        class="color-fg-muted"
                        >
                        Discussions are not enabled for this repository
                      </div>

                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="SecurityAlert"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Security alerts
                    </label>


                  </div>
              </fieldset>
              <div class="pt-2 pb-3 px-3 d-flex flex-justify-start flex-row-reverse">
                  <button name="do" value="custom" data-target="notifications-list-subscription-form.customSubmit" disabled="disabled" type="submit" data-view-component="true" class="btn-primary btn-sm btn ml-2">    Apply
</button>

                  <button data-action="click:notifications-list-subscription-form#resetForm" data-close-dialog="" type="button" data-view-component="true" class="btn-sm btn">    Cancel
</button>
              </div>
</form>          </div>
        </details-dialog>


        <div class="notifications-component-dialog-overlay"></div>
      </details>
    </notifications-list-subscription-form>



  </li>

  <li>
        <div data-view-component="true" class="BtnGroup">
        <a icon="repo-forked" href="/WebDevSimplified/Face-Detection-JavaScript/fork" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FORK_BUTTON&quot;,&quot;repository_id&quot;:187484523,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="a9a48be1ec01a8e55eb24c1d2efbd77931d922c28361b3fbf20e01d4ba02f01d" data-ga-click="Repository, show fork modal, action:blob#show; text:Fork" aria-label="Fork your own copy of WebDevSimplified/Face-Detection-JavaScript" data-view-component="true" class="btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo-forked mr-2">
    <path fill-rule="evenodd" d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"></path>
</svg>Fork
          <span id="repo-network-counter" data-pjax-replace="true" data-turbo-replace="true" title="1,300" data-view-component="true" class="Counter">1.3k</span>
</a>
      <details group_item="true" id="my-forks-menu-187484523" data-view-component="true" class="details-reset details-overlay BtnGroup-parent d-inline-block position-relative">
              <summary aria-label="See your forks of this repository" data-view-component="true" class="btn-sm btn BtnGroup-item px-2 float-none">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
</summary>
  <details-menu
    class="SelectMenu right-0"
      src="/WebDevSimplified/Face-Detection-JavaScript/my_forks_menu_content?can_fork=true"
      
      role="menu"
      
>
    <div class="SelectMenu-modal">
        <button class="SelectMenu-closeButton position-absolute right-0 m-2" type="button" aria-label="Close menu" data-toggle-for="details-adc69f">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      <div
        id="filter-menu-adc69f"
        class="d-flex flex-column flex-1 overflow-hidden"
>
        <div
          class="SelectMenu-list"
          >

            <include-fragment class="SelectMenu-loading" aria-label="Loading">
              <svg role="menuitem" style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
            </include-fragment>
        </div>
        
      </div>
    </div>
  </details-menu>
</details></div>
  </li>

  <li>
        <template class="js-unstar-confirmation-dialog-template">
  <div class="Box-header">
    <h2 class="Box-title">Unstar this repository?</h2>
  </div>
  <div class="Box-body">
    <p class="mb-3">
      This will remove {{ repoNameWithOwner }} from the {{ listsWithCount }} that it's been added to.
    </p>
    <div class="form-actions">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-social-confirmation-form" data-turbo="false" action="{{ confirmUrl }}" accept-charset="UTF-8" method="post">
        <input type="hidden" name="authenticity_token" value="{{ confirmCsrfToken }}">
        <input type="hidden" name="confirm" value="true">
          <button data-close-dialog="true" type="submit" data-view-component="true" class="btn-danger btn width-full">    Unstar
</button>
</form>    </div>
  </div>
</template>

  <div data-view-component="true" class="js-toggler-container js-social-container starring-container d-flex">
    <div data-view-component="true" class="starred BtnGroup flex-1">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-social-form BtnGroup-parent flex-auto js-deferred-toggler-target" data-turbo="false" action="/WebDevSimplified/Face-Detection-JavaScript/unstar" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="BjH0sov4nVARn0FtwvOgQ_F9xQmLW1t_yOmLE-UB4G7x8qomNwBgbkuxW04eMUs5eKbCJZm1xc3YGOW1bOMTQg" autocomplete="off" />
          <input type="hidden" value="QG1iBBk9UUF2C4B-c-fnaKea6361WRxHX6bPfidWM1O3rjyQpcWsfywlml2vJQwSLkHsUqe3gvVPV6HYrrTAfw" data-csrf="true" class="js-confirm-csrf-token" />
        <input type="hidden" name="context" value="repository">
          <button data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;UNSTAR_BUTTON&quot;,&quot;repository_id&quot;:187484523,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="17b4966418d7518abc33f58015ab5a26ac9525c90b82437827b1e0d9b8112bfb" data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar" aria-label="Unstar this repository (818)" type="submit" data-view-component="true" class="rounded-left-2 btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star-fill starred-button-icon d-inline-block mr-2">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"></path>
</svg><span data-view-component="true" class="d-inline">
            Starred
</span>            <span id="repo-stars-counter-unstar" aria-label="818 users starred this repository" data-singular-suffix="user starred this repository" data-plural-suffix="users starred this repository" data-turbo-replace="true" title="818" data-view-component="true" class="Counter js-social-count">818</span>
</button></form>        <details id="details-user-list-187484523" data-view-component="true" class="details-reset details-overlay BtnGroup-parent js-user-list-menu d-inline-block position-relative">
        <summary aria-label="Add this repository to a list" data-view-component="true" class="btn-sm btn BtnGroup-item px-2 float-none">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
</summary>
  <details-menu
    class="SelectMenu right-0"
      src="/WebDevSimplified/Face-Detection-JavaScript/lists"
      
      role="menu"
      
>
    <div class="SelectMenu-modal">
        <button class="SelectMenu-closeButton position-absolute right-0 m-2" type="button" aria-label="Close menu" data-toggle-for="details-f8c1ce">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      <div
        id="filter-menu-f8c1ce"
        class="d-flex flex-column flex-1 overflow-hidden"
>
        <div
          class="SelectMenu-list"
          >

            <include-fragment class="SelectMenu-loading" aria-label="Loading">
              <svg role="menuitem" style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
            </include-fragment>
        </div>
        
      </div>
    </div>
  </details-menu>
</details>
</div>
    <div data-view-component="true" class="unstarred BtnGroup flex-1">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-social-form BtnGroup-parent flex-auto" data-turbo="false" action="/WebDevSimplified/Face-Detection-JavaScript/star" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="xhTnXk7bOa7fuCnUbC45-ytZf8TqjsbSitCXeZ0Z8xBbo94xe7kobT4wHsloOJlCO5AQMVF2Xf-b6HGeXjXZkg" autocomplete="off" />
        <input type="hidden" name="context" value="repository">
          <button data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;STAR_BUTTON&quot;,&quot;repository_id&quot;:187484523,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="60faae75f87286544e71fc3aa3e8db319651a615abc98ca4ef8e1e67ab173114" data-ga-click="Repository, click star button, action:blob#show; text:Star" aria-label="Star this repository (818)" type="submit" data-view-component="true" class="js-toggler-target rounded-left-2 btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star d-inline-block mr-2">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25zm0 2.445L6.615 5.5a.75.75 0 01-.564.41l-3.097.45 2.24 2.184a.75.75 0 01.216.664l-.528 3.084 2.769-1.456a.75.75 0 01.698 0l2.77 1.456-.53-3.084a.75.75 0 01.216-.664l2.24-2.183-3.096-.45a.75.75 0 01-.564-.41L8 2.694v.001z"></path>
</svg><span data-view-component="true" class="d-inline">
            Star
</span>            <span id="repo-stars-counter-star" aria-label="818 users starred this repository" data-singular-suffix="user starred this repository" data-plural-suffix="users starred this repository" data-turbo-replace="true" title="818" data-view-component="true" class="Counter js-social-count">818</span>
</button></form>        <details id="details-user-list-187484523" data-view-component="true" class="details-reset details-overlay BtnGroup-parent js-user-list-menu d-inline-block position-relative">
        <summary aria-label="Add this repository to a list" data-view-component="true" class="btn-sm btn BtnGroup-item px-2 float-none">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
</summary>
  <details-menu
    class="SelectMenu right-0"
      src="/WebDevSimplified/Face-Detection-JavaScript/lists"
      
      role="menu"
      
>
    <div class="SelectMenu-modal">
        <button class="SelectMenu-closeButton position-absolute right-0 m-2" type="button" aria-label="Close menu" data-toggle-for="details-f8c1ce">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      <div
        id="filter-menu-f8c1ce"
        class="d-flex flex-column flex-1 overflow-hidden"
>
        <div
          class="SelectMenu-list"
          >

            <include-fragment class="SelectMenu-loading" aria-label="Loading">
              <svg role="menuitem" style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
            </include-fragment>
        </div>
        
      </div>
    </div>
  </details-menu>
</details>
</div></div>
  </li>

    

</ul>

      </div>

        <div id="responsive-meta-container" data-turbo-replace>
</div>


          <nav data-pjax="#js-repo-pjax-container" aria-label="Repository" data-view-component="true" class="js-repo-nav js-sidenav-container-pjax js-responsive-underlinenav overflow-hidden UnderlineNav px-3 px-md-4 px-lg-5">

  <ul data-view-component="true" class="UnderlineNav-body list-style-none">
      <li data-view-component="true" class="d-inline-flex">
  <a id="code-tab" href="/WebDevSimplified/Face-Detection-JavaScript" data-tab-item="i0code-tab" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages repo_deployments /WebDevSimplified/Face-Detection-JavaScript" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g c" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Code&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" aria-current="page" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item selected">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path>
</svg>
        <span data-content="Code">Code</span>
          <span id="code-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="Not available" data-view-component="true" class="Counter"></span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="issues-tab" href="/WebDevSimplified/Face-Detection-JavaScript/issues" data-tab-item="i1issues-tab" data-selected-links="repo_issues repo_labels repo_milestones /WebDevSimplified/Face-Detection-JavaScript/issues" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g i" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Issues&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-issue-opened UnderlineNav-octicon d-none d-sm-inline">
    <path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path><path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"></path>
</svg>
        <span data-content="Issues">Issues</span>
          <span id="issues-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="27" data-view-component="true" class="Counter">27</span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="pull-requests-tab" href="/WebDevSimplified/Face-Detection-JavaScript/pulls" data-tab-item="i2pull-requests-tab" data-selected-links="repo_pulls checks /WebDevSimplified/Face-Detection-JavaScript/pulls" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g p" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Pull requests&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-git-pull-request UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"></path>
</svg>
        <span data-content="Pull requests">Pull requests</span>
          <span id="pull-requests-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="7" data-view-component="true" class="Counter">7</span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="actions-tab" href="/WebDevSimplified/Face-Detection-JavaScript/actions" data-tab-item="i3actions-tab" data-selected-links="repo_actions /WebDevSimplified/Face-Detection-JavaScript/actions" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g a" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Actions&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-play UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM6.379 5.227A.25.25 0 006 5.442v5.117a.25.25 0 00.379.214l4.264-2.559a.25.25 0 000-.428L6.379 5.227z"></path>
</svg>
        <span data-content="Actions">Actions</span>
          <span id="actions-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="Not available" data-view-component="true" class="Counter"></span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="projects-tab" href="/WebDevSimplified/Face-Detection-JavaScript/projects" data-tab-item="i4projects-tab" data-selected-links="repo_projects new_repo_project repo_project /WebDevSimplified/Face-Detection-JavaScript/projects" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g b" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Projects&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-table UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25V1.75zM1.5 6.5v7.75c0 .138.112.25.25.25H5v-8H1.5zM5 5H1.5V1.75a.25.25 0 01.25-.25H5V5zm1.5 1.5v8h7.75a.25.25 0 00.25-.25V6.5h-8zm8-1.5h-8V1.5h7.75a.25.25 0 01.25.25V5z"></path>
</svg>
        <span data-content="Projects">Projects</span>
          <span id="projects-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="0" hidden="hidden" data-view-component="true" class="Counter">0</span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="security-tab" href="/WebDevSimplified/Face-Detection-JavaScript/security" data-tab-item="i5security-tab" data-selected-links="security overview alerts policy token_scanning code_scanning /WebDevSimplified/Face-Detection-JavaScript/security" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g s" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Security&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-shield UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M7.467.133a1.75 1.75 0 011.066 0l5.25 1.68A1.75 1.75 0 0115 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.7 1.7 0 01-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 011.217-1.667l5.25-1.68zm.61 1.429a.25.25 0 00-.153 0l-5.25 1.68a.25.25 0 00-.174.238V7c0 1.358.275 2.666 1.057 3.86.784 1.194 2.121 2.34 4.366 3.297a.2.2 0 00.154 0c2.245-.956 3.582-2.104 4.366-3.298C13.225 9.666 13.5 8.36 13.5 7V3.48a.25.25 0 00-.174-.237l-5.25-1.68zM9 10.5a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.75a.75.75 0 10-1.5 0v3a.75.75 0 001.5 0v-3z"></path>
</svg>
        <span data-content="Security">Security</span>
          <include-fragment src="/WebDevSimplified/Face-Detection-JavaScript/security/overall-count" accept="text/fragment+html"></include-fragment>

    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="insights-tab" href="/WebDevSimplified/Face-Detection-JavaScript/pulse" data-tab-item="i6insights-tab" data-selected-links="repo_graphs repo_contributors dependency_graph dependabot_updates pulse people community /WebDevSimplified/Face-Detection-JavaScript/pulse" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Insights&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-graph UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M1.5 1.75a.75.75 0 00-1.5 0v12.5c0 .414.336.75.75.75h14.5a.75.75 0 000-1.5H1.5V1.75zm14.28 2.53a.75.75 0 00-1.06-1.06L10 7.94 7.53 5.47a.75.75 0 00-1.06 0L3.22 8.72a.75.75 0 001.06 1.06L7 7.06l2.47 2.47a.75.75 0 001.06 0l5.25-5.25z"></path>
</svg>
        <span data-content="Insights">Insights</span>
          <span id="insights-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="Not available" data-view-component="true" class="Counter"></span>


    
</a></li>
</ul>
    <div style="visibility:hidden;" data-view-component="true" class="UnderlineNav-actions js-responsive-underlinenav-overflow position-absolute pr-3 pr-md-4 pr-lg-5 right-0">      <details data-view-component="true" class="details-overlay details-reset position-relative">
  <summary role="button" data-view-component="true">          <div class="UnderlineNav-item mr-0 border-0">
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
            <span class="sr-only">More</span>
          </div>
</summary>
  <details-menu role="menu" data-view-component="true" class="dropdown-menu dropdown-menu-sw">          <ul>
              <li data-menu-item="i0code-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item selected dropdown-item" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages repo_deployments /WebDevSimplified/Face-Detection-JavaScript" href="/WebDevSimplified/Face-Detection-JavaScript">
                  Code
</a>              </li>
              <li data-menu-item="i1issues-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_issues repo_labels repo_milestones /WebDevSimplified/Face-Detection-JavaScript/issues" href="/WebDevSimplified/Face-Detection-JavaScript/issues">
                  Issues
</a>              </li>
              <li data-menu-item="i2pull-requests-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_pulls checks /WebDevSimplified/Face-Detection-JavaScript/pulls" href="/WebDevSimplified/Face-Detection-JavaScript/pulls">
                  Pull requests
</a>              </li>
              <li data-menu-item="i3actions-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_actions /WebDevSimplified/Face-Detection-JavaScript/actions" href="/WebDevSimplified/Face-Detection-JavaScript/actions">
                  Actions
</a>              </li>
              <li data-menu-item="i4projects-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_projects new_repo_project repo_project /WebDevSimplified/Face-Detection-JavaScript/projects" href="/WebDevSimplified/Face-Detection-JavaScript/projects">
                  Projects
</a>              </li>
              <li data-menu-item="i5security-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="security overview alerts policy token_scanning code_scanning /WebDevSimplified/Face-Detection-JavaScript/security" href="/WebDevSimplified/Face-Detection-JavaScript/security">
                  Security
</a>              </li>
              <li data-menu-item="i6insights-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_graphs repo_contributors dependency_graph dependabot_updates pulse people community /WebDevSimplified/Face-Detection-JavaScript/pulse" href="/WebDevSimplified/Face-Detection-JavaScript/pulse">
                  Insights
</a>              </li>
          </ul>
</details-menu>
</details></div>
</nav>

  </div>

  



  <turbo-frame id="repo-content-turbo-frame" target="_top" data-turbo-action="advance" class="">
      <div id="repo-content-pjax-container" class="repository-content " >
      <a href="https://github.dev/" class="d-none js-github-dev-shortcut" data-hotkey=".">Open in github.dev</a>
  <a href="https://github.dev/" class="d-none js-github-dev-new-tab-shortcut" data-hotkey="Shift+.,Shift+&gt;,&gt;" target="_blank">Open in a new github.dev tab</a>



    
      
  <div class="clearfix container-xl px-3 px-md-4 px-lg-5 mt-4">
    
    
<div data-test-selector="blob-container">
  

  



    
<a class="d-none js-permalink-shortcut" data-hotkey="y" href="/WebDevSimplified/Face-Detection-JavaScript/blob/646525e20bea82ce838ae6047076dfd095a65ad5/face-api.min.js">Permalink</a>

<div class="d-flex flex-items-start flex-shrink-0 pb-3 flex-wrap flex-md-nowrap flex-justify-between flex-md-justify-start">
  
<div class="position-relative">
  <details
    class="js-branch-select-menu details-reset details-overlay mr-0 mb-0 "
    id="branch-select-menu"
    data-hydro-click-payload="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;REFS_SELECTOR_MENU&quot;,&quot;repository_id&quot;:187484523,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="9d5329b2fef29d7bd3e2591582f1b1b55a8140f223401eb8f34a747b0f0f4bb8">
    <summary class="btn css-truncate"
            data-hotkey="w"
            title="Switch branches or tags">
      <svg text="gray" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-git-branch">
    <path fill-rule="evenodd" d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"></path>
</svg>
      <span class="css-truncate-target" data-menu-button>master</span>
      <span class="dropdown-caret"></span>
    </summary>

    
<div class="SelectMenu">
  <div class="SelectMenu-modal">
    <header class="SelectMenu-header">
      <span class="SelectMenu-title">Switch branches/tags</span>
      <button class="SelectMenu-closeButton" type="button" data-toggle-for="branch-select-menu"><svg aria-label="Close menu" aria-hidden="false" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg></button>
    </header>

    <input-demux data-action="tab-container-change:input-demux#storeInput tab-container-changed:input-demux#updateInput">
      <tab-container class="d-flex flex-column js-branches-tags-tabs" style="min-height: 0;">
        <div class="SelectMenu-filter">
          <input data-target="input-demux.source"
                 id="context-commitish-filter-field"
                 class="SelectMenu-input form-control"
                 aria-owns="ref-list-branches"
                 data-controls-ref-menu-id="ref-list-branches"
                 autofocus
                 autocomplete="off"
                 aria-label="Filter branches/tags"
                 placeholder="Filter branches/tags"
                 type="text"
          >
        </div>

        <div class="SelectMenu-tabs" role="tablist" data-target="input-demux.control" >
          <button class="SelectMenu-tab" type="button" role="tab" aria-selected="true">Branches</button>
          <button class="SelectMenu-tab" type="button" role="tab">Tags</button>
        </div>

        <div role="tabpanel" id="ref-list-branches" data-filter-placeholder="Filter branches/tags" tabindex="" class="d-flex flex-column flex-auto overflow-auto">
          <ref-selector
            type="branch"
            data-targets="input-demux.sinks"
            data-action="
              input-entered:ref-selector#inputEntered
              tab-selected:ref-selector#tabSelected
              focus-list:ref-selector#focusFirstListMember
            "
            query-endpoint="/WebDevSimplified/Face-Detection-JavaScript/refs"
            
            cache-key="v0:1558274758.0"
            current-committish="bWFzdGVy"
            default-branch="bWFzdGVy"
            name-with-owner="V2ViRGV2U2ltcGxpZmllZC9GYWNlLURldGVjdGlvbi1KYXZhU2NyaXB0"
            prefetch-on-mouseover
          >

            <template data-target="ref-selector.fetchFailedTemplate">
              <div class="SelectMenu-message" data-index="{{ index }}">Could not load branches</div>
            </template>

              <template data-target="ref-selector.noMatchTemplate">
    <div class="SelectMenu-message">Nothing to show</div>
</template>


            <div data-target="ref-selector.listContainer" role="menu" class="SelectMenu-list " data-turbo-frame="repo-content-turbo-frame">
              <div class="SelectMenu-loading pt-3 pb-0 overflow-hidden" aria-label="Menu is loading">
                <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
              </div>
            </div>

              

<template data-target="ref-selector.itemTemplate">
  <a href="https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/{{ urlEncodedRefName }}/face-api.min.js" class="SelectMenu-item" role="menuitemradio" rel="nofollow" aria-checked="{{ isCurrent }}" data-index="{{ index }}" >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    <span class="flex-1 css-truncate css-truncate-overflow {{ isFilteringClass }}">{{ refName }}</span>
    <span hidden="{{ isNotDefault }}" class="Label Label--secondary flex-self-start">default</span>
  </a>
</template>


              <footer class="SelectMenu-footer"><a href="/WebDevSimplified/Face-Detection-JavaScript/branches">View all branches</a></footer>
          </ref-selector>

        </div>

        <div role="tabpanel" id="tags-menu" data-filter-placeholder="Find a tag" tabindex="" hidden class="d-flex flex-column flex-auto overflow-auto">
          <ref-selector
            type="tag"
            data-action="
              input-entered:ref-selector#inputEntered
              tab-selected:ref-selector#tabSelected
              focus-list:ref-selector#focusFirstListMember
            "
            data-targets="input-demux.sinks"
            query-endpoint="/WebDevSimplified/Face-Detection-JavaScript/refs"
            cache-key="v0:1558274758.0"
            current-committish="bWFzdGVy"
            default-branch="bWFzdGVy"
            name-with-owner="V2ViRGV2U2ltcGxpZmllZC9GYWNlLURldGVjdGlvbi1KYXZhU2NyaXB0"
          >

            <template data-target="ref-selector.fetchFailedTemplate">
              <div class="SelectMenu-message" data-index="{{ index }}">Could not load tags</div>
            </template>

            <template data-target="ref-selector.noMatchTemplate">
              <div class="SelectMenu-message" data-index="{{ index }}">Nothing to show</div>
            </template>

              

<template data-target="ref-selector.itemTemplate">
  <a href="https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/{{ urlEncodedRefName }}/face-api.min.js" class="SelectMenu-item" role="menuitemradio" rel="nofollow" aria-checked="{{ isCurrent }}" data-index="{{ index }}" >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    <span class="flex-1 css-truncate css-truncate-overflow {{ isFilteringClass }}">{{ refName }}</span>
    <span hidden="{{ isNotDefault }}" class="Label Label--secondary flex-self-start">default</span>
  </a>
</template>


            <div data-target="ref-selector.listContainer" role="menu" class="SelectMenu-list" data-turbo-frame="repo-content-turbo-frame">
              <div class="SelectMenu-loading pt-3 pb-0 overflow-hidden" aria-label="Menu is loading">
                <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
              </div>
            </div>
              <footer class="SelectMenu-footer"><a href="/WebDevSimplified/Face-Detection-JavaScript/tags">View all tags</a></footer>
          </ref-selector>
        </div>
      </tab-container>
    </input-demux>
  </div>
</div>

  </details>

</div>


<div class="Overlay--hidden Overlay-backdrop--center" data-modal-dialog-overlay>
  <modal-dialog role="dialog" id="warn-tag-match-create-branch-dialog" aria-modal="true" aria-labelledby="warn-tag-match-create-branch-dialog-header" data-view-component="true" class="Overlay Overlay--width-large Overlay--height-auto Overlay--motion-scaleFade">
      <header class="Overlay-header Overlay-header--large Overlay-header--divided">
        <div class="Overlay-headerContentWrap">
          <div class="Overlay-titleWrap">
            <h1 id="warn-tag-match-create-branch-dialog-header" class="Overlay-title">Name already in use</h1>
          </div>
          <div class="Overlay-actionWrap">
            <button data-close-dialog-id="warn-tag-match-create-branch-dialog" aria-label="Close" type="button" data-view-component="true" class="close-button Overlay-closeButton"><svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg></button>
          </div>
        </div>
      </header>
    <div class="Overlay-body ">
      
          <div data-view-component="true">      A tag already exists with the provided branch name. Many Git commands accept both tag and branch names, so creating this branch may cause unexpected behavior. Are you sure you want to create this branch?
</div>

    </div>
      <footer class="Overlay-footer Overlay-footer--alignEnd">
            <button data-close-dialog-id="warn-tag-match-create-branch-dialog" type="button" data-view-component="true" class="btn">    Cancel
</button>
            <button data-submit-dialog-id="warn-tag-match-create-branch-dialog" type="button" data-view-component="true" class="btn-danger btn">    Create
</button>
      </footer>
</modal-dialog></div>


  <h2 id="blob-path" class="breadcrumb flex-auto flex-self-center min-width-0 text-normal mx-2 width-full width-md-auto flex-order-1 flex-md-order-none mt-3 mt-md-0">
    <span class="js-repo-root text-bold"><span class="js-path-segment d-inline-block wb-break-all"><a data-turbo-frame="repo-content-turbo-frame" href="/WebDevSimplified/Face-Detection-JavaScript"><span>Face-Detection-JavaScript</span></a></span></span><span class="separator">/</span><strong class="final-path">face-api.min.js</strong>
      <span class="separator">/</span><details class="details-reset details-overlay d-inline" id="jumpto-symbol-select-menu">
    <summary aria-haspopup="true" data-hotkey="r" data-hydro-click="{&quot;event_type&quot;:&quot;code_navigation.click_on_blob_definitions&quot;,&quot;payload&quot;:{&quot;action&quot;:&quot;click_on_blob_definitions&quot;,&quot;repository_id&quot;:187484523,&quot;ref&quot;:&quot;master&quot;,&quot;language&quot;:&quot;JavaScript&quot;,&quot;backend&quot;:&quot;ALEPH_FUZZY&quot;,&quot;code_nav_context&quot;:&quot;BLOB_VIEW&quot;,&quot;retry_backend&quot;:&quot;&quot;,&quot;cross_repo_results_included&quot;:&quot;CROSS_REPO_UNKNOWN&quot;,&quot;in_repo_result_count&quot;:0,&quot;cross_repo_result_count&quot;:0,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="579f85840ccb5240c2d8739a3f77d7c39d01da5020d1b3a800a579a417a0a9a9" data-view-component="true" class="Link--secondary css-truncate btn-link">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code">
    <path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path>
</svg>
    <span data-menu-button>Jump to</span>
    <span class="dropdown-caret"></span>
</summary>  <details-menu class="SelectMenu SelectMenu--hasFilter" role="menu">
    <div class="SelectMenu-modal">
      <header class="SelectMenu-header">
        <span class="SelectMenu-title">Code definitions</span>
        <button class="SelectMenu-closeButton" type="button" data-toggle-for="jumpto-symbol-select-menu">
          <svg aria-label="Close menu" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      </header>
      <div class="SelectMenu-list">
          <div class="SelectMenu-blankslate">
            <p class="mb-0 color-fg-muted">
              No definitions found in this file.
            </p>
          </div>
        <div data-filterable-for="jumpto-symbols-filter-field" data-filterable-type="substring">
        </div>
      </div>
      <footer class="SelectMenu-footer">
        <div class="d-flex flex-justify-between">
          Code navigation not available for this commit
          <svg class="octicon octicon-dot-fill text-light-gray" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8z"></path></svg>
        </div>
      </footer>
    </div>
  </details-menu>
</details>

  </h2>
    <a href="/WebDevSimplified/Face-Detection-JavaScript/find/master" data-pjax="" data-hotkey="t" data-view-component="true" class="btn mr-2 d-none d-md-block">    Go to file
</a>
  <details id="blob-more-options-details" data-view-component="true" class="details-overlay details-reset position-relative">
    <summary role="button" data-view-component="true" class="btn">    <svg aria-label="More options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
  <div data-view-component="true">      <ul class="dropdown-menu dropdown-menu-sw">
        <li class="d-block d-md-none">
          <a class="dropdown-item d-flex flex-items-baseline" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FIND_FILE_BUTTON&quot;,&quot;repository_id&quot;:187484523,&quot;originating_url&quot;:&quot;https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/master/face-api.min.js&quot;,&quot;user_id&quot;:75715053}}" data-hydro-click-hmac="a0af7987739b2721f502f1c9b464059489adce6eb07f62803aee60ddab74fcc7" data-ga-click="Repository, find file, location:repo overview" data-hotkey="t" href="/WebDevSimplified/Face-Detection-JavaScript/find/master">
            <span class="flex-auto">Go to file</span>
            <span class="text-small color-fg-muted" aria-hidden="true">T</span>
</a>        </li>
        <li data-toggle-for="blob-more-options-details">
            <button data-toggle-for="jumpto-line-details-dialog" type="button" data-view-component="true" class="dropdown-item btn-link">    <span class="d-flex flex-items-baseline">
              <span class="flex-auto">Go to line</span>
              <span class="text-small color-fg-muted" aria-hidden="true">L</span>
            </span>
</button>        </li>
        <li data-toggle-for="blob-more-options-details">
            <button data-toggle-for="jumpto-symbol-select-menu" type="button" data-view-component="true" class="dropdown-item btn-link">    <span class="d-flex flex-items-baseline">
              <span class="flex-auto">Go to definition</span>
              <span class="text-small color-fg-muted" aria-hidden="true">R</span>
            </span>
</button>        </li>
        <li class="dropdown-divider" role="none"></li>
        <li>
          <clipboard-copy data-toggle-for="blob-more-options-details" aria-label="Copy path" value="face-api.min.js" data-view-component="true" class="dropdown-item cursor-pointer">
    
            Copy path

</clipboard-copy>        </li>
        <li>
          <clipboard-copy data-toggle-for="blob-more-options-details" aria-label="Copy permalink" value="https://github.com/WebDevSimplified/Face-Detection-JavaScript/blob/646525e20bea82ce838ae6047076dfd095a65ad5/face-api.min.js" data-view-component="true" class="dropdown-item cursor-pointer">
    
            <span class="d-flex flex-items-baseline">
              <span class="flex-auto">Copy permalink</span>
            </span>

</clipboard-copy>        </li>
      </ul>
</div>
</details></div>





    <div id="spoof-warning" class="mt-0 pb-3" hidden aria-hidden>
  <div data-view-component="true" class="flash flash-warn mt-0 clearfix">
  
  
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert float-left mt-1">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>

      <div class="overflow-hidden">This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.</div>


  
</div></div>

    <include-fragment src="/WebDevSimplified/Face-Detection-JavaScript/spoofed_commit_check/646525e20bea82ce838ae6047076dfd095a65ad5" data-test-selector="spoofed-commit-check"></include-fragment>

    <div class="Box d-flex flex-column flex-shrink-0 mb-3">
  
  <div class="Box-header Details js-details-container">
      <div class="d-flex flex-items-center">
        <span class="flex-shrink-0 ml-n1 mr-n1 mt-n1 mb-n1">
          <a rel="author" data-hovercard-type="user" data-hovercard-url="/users/WebDevSimplified/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/WebDevSimplified"><img class="avatar avatar-user" src="https://avatars.githubusercontent.com/u/39717099?s=48&amp;v=4" width="24" height="24" alt="@WebDevSimplified" /></a>
        </span>
        <div class="flex-1 d-flex flex-items-center ml-3 min-width-0">
          <div class="css-truncate css-truncate-overflow">
            <a class="text-bold Link--primary" rel="author" data-hovercard-type="user" data-hovercard-url="/users/WebDevSimplified/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/WebDevSimplified">WebDevSimplified</a>

              <span class="markdown-title">
                <a data-pjax="true" title="Finish Video" class="Link--secondary" href="/WebDevSimplified/Face-Detection-JavaScript/commit/224a22726fc3b8cd561e871be01297b5f7ca8e58">Finish Video</a>
              </span>
          </div>


          <span class="ml-2">
            <include-fragment accept="text/fragment+html" src="/WebDevSimplified/Face-Detection-JavaScript/commit/224a22726fc3b8cd561e871be01297b5f7ca8e58/rollup?direction=e" class="d-inline"></include-fragment>
          </span>
        </div>
        <div class="ml-3 d-flex flex-shrink-0 flex-items-center flex-justify-end color-fg-muted no-wrap">
          <span class="d-none d-md-inline">
            <span>Latest commit</span>
            <a class="text-small text-mono Link--secondary" href="/WebDevSimplified/Face-Detection-JavaScript/commit/224a22726fc3b8cd561e871be01297b5f7ca8e58" data-pjax>224a227</a>
            <span itemprop="dateModified"><relative-time datetime="2019-05-19T14:05:00Z" class="no-wrap">May 19, 2019</relative-time></span>
          </span>

          <a data-pjax href="/WebDevSimplified/Face-Detection-JavaScript/commits/master/face-api.min.js" class="ml-3 no-wrap Link--primary no-underline">
            <svg text="gray" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-history">
    <path fill-rule="evenodd" d="M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 01.75.75v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 0 017.75 4z"></path>
</svg>
            <span class="d-none d-sm-inline">
              <strong>History</strong>
            </span>
          </a>
        </div>
      </div>

  </div>

  <div class="Box-body d-flex flex-items-center flex-auto border-bottom-0 flex-wrap" >
    <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default float-left mr-3" id="blob_contributors_box">
      <summary class="Link--primary">
        <svg text="gray" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-people">
    <path fill-rule="evenodd" d="M5.5 3.5a2 2 0 100 4 2 2 0 000-4zM2 5.5a3.5 3.5 0 115.898 2.549 5.507 5.507 0 013.034 4.084.75.75 0 11-1.482.235 4.001 4.001 0 00-7.9 0 .75.75 0 01-1.482-.236A5.507 5.507 0 013.102 8.05 3.49 3.49 0 012 5.5zM11 4a.75.75 0 100 1.5 1.5 1.5 0 01.666 2.844.75.75 0 00-.416.672v.352a.75.75 0 00.574.73c1.2.289 2.162 1.2 2.522 2.372a.75.75 0 101.434-.44 5.01 5.01 0 00-2.56-3.012A3 3 0 0011 4z"></path>
</svg>
        <strong>1</strong>
        
        contributor
      </summary>
      <details-dialog
        class="Box Box--overlay d-flex flex-column anim-fade-in fast"
        aria-label="Users who have contributed to this file"
        src="/WebDevSimplified/Face-Detection-JavaScript/contributors-list/master/face-api.min.js" preload>
        <div class="Box-header">
          <button class="Box-btn-octicon btn-octicon float-right" type="button" aria-label="Close dialog" data-close-dialog>
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
          </button>
          <h3 class="Box-title">
            Users who have contributed to this file
          </h3>
        </div>
        <include-fragment>
          <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="my-3 mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
        </include-fragment>
      </details-dialog>
    </details>
  </div>
</div>



      








  
    <div data-target="readme-toc.content" class="Box mt-3 position-relative">
      
  <div
    class="Box-header js-blob-header py-2 pr-2 d-flex flex-shrink-0 flex-md-row flex-items-center"
    
  >


  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1">

      1 lines (1 sloc)
      <span class="file-info-divider"></span>
    573 KB
  </div>

  <div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between hide-sm hide-md">
      

    <div class="BtnGroup">
        <a data-permalink-href="/WebDevSimplified/Face-Detection-JavaScript/raw/646525e20bea82ce838ae6047076dfd095a65ad5/face-api.min.js" href="/WebDevSimplified/Face-Detection-JavaScript/raw/master/face-api.min.js" id="raw-url" data-view-component="true" class="js-permalink-replaceable-link btn-sm btn BtnGroup-item">    Raw
</a>          <a data-permalink-href="/WebDevSimplified/Face-Detection-JavaScript/blame/646525e20bea82ce838ae6047076dfd095a65ad5/face-api.min.js" href="/WebDevSimplified/Face-Detection-JavaScript/blame/master/face-api.min.js" data-hotkey="b" data-view-component="true" class="js-update-url-with-hash js-permalink-replaceable-link btn-sm btn BtnGroup-item">    Blame
</a>    </div>

    <div class="d-flex">
        
<div class="ml-1" data-test-selector="edit-dropdown-menu-component">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="BtnGroup-parent js-update-url-with-hash " data-turbo="false" action="/WebDevSimplified/Face-Detection-JavaScript/edit/master/face-api.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="jEk5BplTK781RDv5VxsGsQyp9swe9lwNrOdH3sPoDxUD0KZVlOcTlpfDgtkFErE3z1JIeXpQOeIB2RVNI-aLig" autocomplete="off" />
      <button title="Edit the file in your fork of this project" data-hotkey="e" data-disable-with="" data-test-selector="edit-icon-button" type="submit" data-view-component="true" class="btn-sm BtnGroup-item btn">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-pencil">
    <path fill-rule="evenodd" d="M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z"></path>
</svg>
</button></form>
  <details class="details-reset details-overlay select-menu BtnGroup-parent d-inline-block position-relative">
      <summary data-disable-invalid="" data-disable-with="" data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.more_options_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:187484523,&quot;actor_id&quot;:75715053,&quot;github_dev_enabled&quot;:true,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:false}}" aria-label="Select additional options" data-view-component="true" class="js-blob-dropdown-click select-menu-button btn-sm btn BtnGroup-item float-none px-2">
</summary>    <div class="SelectMenu right-0">
      <div class="SelectMenu-modal width-full">
        <div class="SelectMenu-list SelectMenu-list--borderless py-2">
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="SelectMenu-item js-update-url-with-hash " data-turbo="false" action="/WebDevSimplified/Face-Detection-JavaScript/edit/master/face-api.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="n93Aexn2b805Tin2q5PsWklLgn7FqCzgDhyvZvWmNSYQRF8oFEJX5JvJkNb5mlvcirA8y6EOSQ-jIv31FaixuQ" autocomplete="off" />
              <button title="Edit the file in your fork of this project" data-test-selector="edit-text-button" type="submit" data-view-component="true" class="btn-invisible btn width-full d-flex flex-justify-between color-fg-default text-normal p-0">    <div class="mr-5">Edit this file</div>
              <div class="color-fg-muted">E</div>
</button></form>
            <a aria-label="Open this file in github.dev" data-test-selector="github-dev-link" data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.dev_link_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:187484523,&quot;actor_id&quot;:75715053,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:false}}" href="https://github.dev/" data-view-component="true" class="SelectMenu-item js-github-dev-shortcut js-blob-dropdown-click width-full d-flex flex-justify-between color-fg-default f5 text-normal">
              <div class="mr-5 no-wrap">Open in github.dev</div>
              <div class="color-fg-muted">.</div>
</a>
            <a data-platforms="windows,mac" data-test-selector="github-desktop-link" aria-label="Open this file in GitHub Desktop" href="x-github-client://openRepo/https://github.com/WebDevSimplified/Face-Detection-JavaScript?branch=master&amp;filepath=face-api.min.js" data-view-component="true" class="SelectMenu-item no-wrap js-remove-unless-platform width-full text-normal color-fg-default f5">
              Open in GitHub Desktop
</a>        </div>
      </div>
    </div>
  </details>
</div>


        
<div data-test-selector="remote-clipboard-copy">
  </div>


          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="inline-form" data-turbo="false" action="/WebDevSimplified/Face-Detection-JavaScript/delete/master/face-api.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="xSD-FCPRqXRGamV4zv1wyMLvCy-EyGe4d6C51W73u4Cdt1bqwE9BLY7AYdkE0b6WLRHWzv7_2SUsIKTYWn0EHA" />
            <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit"
              aria-label="Delete the file in your fork of this project" data-disable-with>
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-trash">
    <path fill-rule="evenodd" d="M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z"></path>
</svg>
            </button>
</form>    </div>
  </div>

    <div class="d-flex hide-lg hide-xl flex-order-2 flex-grow-0">
      <details class="dropdown details-reset details-overlay d-inline-block">
        <summary
          class="js-blob-dropdown-click btn-octicon"
          aria-haspopup="true"
          aria-label="possible actions"
          data-test-selector="small-screen-more-options"
          data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.more_options_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:187484523,&quot;actor_id&quot;:75715053,&quot;github_dev_enabled&quot;:true,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:true}}"
        >
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
        </summary>

        <ul class="dropdown-menu dropdown-menu-sw" style="width: 175px">
            <li>
                <a class="dropdown-item tooltipped tooltipped-nw js-remove-unless-platform"
                   data-platforms="windows,mac"
                   href="x-github-client://openRepo/https://github.com/WebDevSimplified/Face-Detection-JavaScript?branch=master&amp;filepath=face-api.min.js">
                  Open with Desktop
                </a>
            </li>
          <li>
            <a class="dropdown-item" href="/WebDevSimplified/Face-Detection-JavaScript/raw/master/face-api.min.js">
              View raw
            </a>
          </li>
            <li>
                          </li>
            <li>
              <a class="dropdown-item" href="/WebDevSimplified/Face-Detection-JavaScript/blame/master/face-api.min.js">
                View blame
              </a>
            </li>

              <li class="dropdown-divider" role="none"></li>
              <li>
                <a class="dropdown-item" href="/WebDevSimplified/Face-Detection-JavaScript/edit/master/face-api.min.js">Edit file</a>
              </li>
                <li>
                  <a class="dropdown-item js-github-dev-shortcut js-blob-dropdown-click" data-test-selector="small-screen-github-dev-link" data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.dev_link_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:187484523,&quot;actor_id&quot;:75715053,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:true}}" href="https://github.dev/">Open with github.dev</a>
                </li>
              <li>
                <a class="dropdown-item menu-item-danger" href="/WebDevSimplified/Face-Detection-JavaScript/delete/master/face-api.min.js">Delete file</a>
              </li>
        </ul>
      </details>
    </div>
</div>


      
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  gist-border-0">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template">
  <div data-view-component="true" class="flash flash-warn flash-full d-flex flex-items-center">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
  
    <span>
      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
      <a href="https://github.co/hiddenchars" target="_blank">Learn more about bidirectional Unicode characters</a>
    </span>


  <div data-view-component="true" class="flash-action">        <a href="{{ revealButtonHref }}" data-view-component="true" class="btn-sm btn">    Show hidden characters
</a>
</div>
</div></template>
<template class="js-line-alert-template">
  <span aria-label="This line has hidden Unicode characters" data-view-component="true" class="line-alert tooltipped tooltipped-e">
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
</span></template>

  <table data-hpc class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip data-tagsearch-lang="JavaScript" data-tagsearch-path="face-api.min.js">
        <tr>
          <td id="L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="LC1" class="blob-code blob-code-inner js-file-line">!function(t,e){&quot;object&quot;==typeof exports&amp;&amp;&quot;undefined&quot;!=typeof module?e(exports):&quot;function&quot;==typeof define&amp;&amp;define.amd?define([&quot;exports&quot;],e):e((t=t||self).faceapi=t.faceapi||{})}(this,function(c){&quot;use strict&quot;;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&amp;&amp;(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n&lt;r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&amp;&amp;(t[o]=e[o]);return t}).apply(this,arguments)};function p(i,a,s,u){return new(s||(s=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,a||[])).next())})}function P(n,r){var o,i,a,t,s={label:0,sent:function(){if(1&amp;a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},&quot;function&quot;==typeof Symbol&amp;&amp;(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError(&quot;Generator is already executing.&quot;);for(;s;)try{if(o=1,i&amp;&amp;(a=2&amp;e[0]?i.return:e[0]?i.throw||((a=i.return)&amp;&amp;a.call(i),0):i.next)&amp;&amp;!(a=a.call(i,e[1])).done)return a;switch(i=0,a&amp;&amp;(e=[2&amp;e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0&lt;(a=s.trys).length&amp;&amp;a[a.length-1])&amp;&amp;(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&amp;&amp;(!a||e[1]&gt;a[0]&amp;&amp;e[1]&lt;a[3])){s.label=e[1];break}if(6===e[0]&amp;&amp;s.label&lt;a[1]){s.label=a[1],a=e;break}if(a&amp;&amp;s.label&lt;a[2]){s.label=a[2],s.ops.push(e);break}a[2]&amp;&amp;s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&amp;e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&amp;&amp;(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n&lt;r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&amp;&amp;(t[o]=e[o]);return t}).apply(this,arguments)};function m(i,a,s,u){return new(s||(s=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,a||[])).next())})}function R(n,r){var o,i,a,t,s={label:0,sent:function(){if(1&amp;a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},&quot;function&quot;==typeof Symbol&amp;&amp;(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError(&quot;Generator is already executing.&quot;);for(;s;)try{if(o=1,i&amp;&amp;(a=2&amp;e[0]?i.return:e[0]?i.throw||((a=i.return)&amp;&amp;a.call(i),0):i.next)&amp;&amp;!(a=a.call(i,e[1])).done)return a;switch(i=0,a&amp;&amp;(e=[2&amp;e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0&lt;(a=s.trys).length&amp;&amp;a[a.length-1])&amp;&amp;(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&amp;&amp;(!a||e[1]&gt;a[0]&amp;&amp;e[1]&lt;a[3])){s.label=e[1];break}if(6===e[0]&amp;&amp;s.label&lt;a[1]){s.label=a[1],a=e;break}if(a&amp;&amp;s.label&lt;a[2]){s.label=a[2],s.ops.push(e);break}a[2]&amp;&amp;s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&amp;e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var i={},u={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function l(t){t in i||(i[t]=function(e){if(1!==e&amp;&amp;2!==e)throw new Error(&quot;Cannot get WebGL rendering context, WebGL is disabled.&quot;);var t=document.createElement(&quot;canvas&quot;);return t.addEventListener(&quot;webglcontextlost&quot;,function(t){t.preventDefault(),delete i[e]},!1),1===e?t.getContext(&quot;webgl&quot;,u)||t.getContext(&quot;experimental-webgl&quot;,u):t.getContext(&quot;webgl2&quot;,u)}(t));var e=i[t];return e.isContextLost()?(delete i[t],l(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),i[t])}function h(t){for(var e=t.length,n=0,r=0;0&lt;e;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function f(t,e,n){return Math.max(t,Math.min(e,n))}function _(t){return t%2==0?t:t+1}function d(t){for(var e=0,n=0;n&lt;t.length;n++)e+=t[n];return e}function v(t,e){var n=Math.random();return e*n+(1-n)*t}function D(t,e){if(!t)throw new Error(&quot;string&quot;==typeof e?e:e())}function g(t,e,n){void 0===n&amp;&amp;(n=&quot;&quot;),D(E(t,e),function(){return n+&quot; Shapes &quot;+t+&quot; and &quot;+e+&quot; must match&quot;})}function y(t){D(null!=t,function(){return&quot;The input to the tensor constructor must be a non-null value.&quot;})}function x(t,e){if(void 0===e&amp;&amp;(e=[]),null==e&amp;&amp;(e=[]),Array.isArray(t)||z(t))for(var n=0;n&lt;t.length;++n)x(t[n],e);else e.push(t);return e}function B(t){if(0===t.length)return 1;for(var e=t[0],n=1;n&lt;t.length;n++)e*=t[n];return e}function E(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n&lt;t.length;n++)if(t[n]!==e[n])return!1;return!0}function T(t){return t%1==0}function w(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function b(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function C(t,e){return e&lt;=t.length?t:t+&quot; &quot;.repeat(e-t.length)}function S(i,a,s){return void 0===a&amp;&amp;(a=function(t){return 0}),new Promise(function(e,n){var r=0,o=function(){if(i())e();else{var t=a(++r);null!=s&amp;&amp;s&lt;=r?n():setTimeout(o,t)}};o()})}function N(t,e){for(var n=1,r=-1,o=0;o&lt;t.length;++o)if(0&lt;=t[o])n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error(&quot;Shapes can only have 1 implicit size. Found -1 at dim &quot;+r+&quot; and dim &quot;+o);r=o}else if(t[o]&lt;0)throw Error(&quot;Shapes can not be &lt; 0. Found &quot;+t[o]+&quot; at dim &quot;+o);if(-1===r){if(0&lt;e&amp;&amp;e!==n)throw Error(&quot;Size(&quot;+e+&quot;) must match the product of shape &quot;+t);return t}if(0===n)throw Error(&quot;Cannot infer the missing size in [&quot;+t+&quot;] when there are 0 elements&quot;);if(e%n!=0)throw Error(&quot;The implicit shape can&#39;t be a fractional number. Got &quot;+e+&quot; / &quot;+n);var i=t.slice();return i[r]=e/n,i}function k(t,e){var n=e.length;return D((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return-n&lt;=t&amp;&amp;t&lt;n}),function(){return&quot;All values in axis param must be in range [-&quot;+n+&quot;, &quot;+n+&quot;) but got axis &quot;+t}),D(t.every(function(t){return T(t)}),function(){return&quot;All values in axis param must be integers but got axis &quot;+t}),t.map(function(t){return t&lt;0?n+t:t})}function I(t,e){for(var n=[],r=[],o=null==e?null:k(e,t).sort(),i=0,a=0;a&lt;t.length;++a){if(null!=o){if(o[i]===a&amp;&amp;1!==t[a])throw new Error(&quot;Can&#39;t squeeze axis &quot;+a+&quot; since its dim &#39;&quot;+t[a]+&quot;&#39; is not 1&quot;);(null==o[i]||o[i]&gt;a)&amp;&amp;1===t[a]&amp;&amp;(n.push(t[a]),r.push(a)),o[i]&lt;=a&amp;&amp;i++}1!==t[a]&amp;&amp;(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function A(t,e){var n=null;if(null==t||&quot;float32&quot;===t)n=new Float32Array(e);else if(&quot;int32&quot;===t)n=new Int32Array(e);else{if(&quot;bool&quot;!==t)throw new Error(&quot;Unknown data type &quot;+t);n=new Uint8Array(e)}return n}function M(t,e){var n=null;if(null==t||&quot;float32&quot;===t)n=new Float32Array(e);else if(&quot;int32&quot;===t)n=new Int32Array(e);else if(&quot;bool&quot;===t)n=new Uint8Array(e);else{if(&quot;string&quot;!==t)throw new Error(&quot;Unknown data type &quot;+t);n=new Array(e)}return n}function F(t,e,n){if(&quot;float32&quot;===e)for(var r=0;r&lt;t.length;r++){var o=t[r];if(isNaN(o)||!isFinite(o))throw Error(&quot;The result of the &#39;&quot;+n+&quot;&#39; is &quot;+o+&quot;.&quot;)}}function L(t,e){for(var n=0;n&lt;t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error(&quot;A tensor of type &quot;+e+&quot; being uploaded contains &quot;+r+&quot;.&quot;)}}function W(t,e){return!(&quot;complex64&quot;===e||&quot;float32&quot;===e&amp;&amp;&quot;complex64&quot;!==t||&quot;int32&quot;===e&amp;&amp;&quot;float32&quot;!==t&amp;&amp;&quot;complex64&quot;!==t||&quot;bool&quot;===e&amp;&amp;&quot;bool&quot;===t)}function z(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function U(t){if(&quot;float32&quot;===t||&quot;int32&quot;===t)return 4;if(&quot;complex64&quot;===t)return 8;if(&quot;bool&quot;===t)return 1;throw new Error(&quot;Unknown dtype &quot;+t)}function G(t){if(null==t)return 0;var e=0;return t.forEach(function(t){return e+=2*t.length}),e}function V(t){return&quot;string&quot;==typeof t||t instanceof String}function e(t){return&quot;boolean&quot;==typeof t}function H(t){return&quot;number&quot;==typeof t}function q(t){return Array.isArray(t)?q(t[0]):t instanceof Float32Array?&quot;float32&quot;:t instanceof Int32Array||t instanceof Uint8Array?&quot;int32&quot;:H(t)?&quot;float32&quot;:V(t)?&quot;string&quot;:e(t)?&quot;bool&quot;:&quot;float32&quot;}function j(t){return!!(t&amp;&amp;t.constructor&amp;&amp;t.call&amp;&amp;t.apply)}function $(t,e){for(var n=e;n&lt;t;++n)if(t%n==0)return n;return t}function K(t){var e=t.length;if(e&lt;2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;0&lt;=r;--r)n[r]=n[r+1]*t[r+1];return n}function X(t,e,n){if(&quot;string&quot;===e)throw new Error(&quot;Cannot convert a string[] to a TypedArray&quot;);if(Array.isArray(t)&amp;&amp;(t=x(t)),n&amp;&amp;L(t,e),o=e,(r=t)instanceof Float32Array&amp;&amp;&quot;float32&quot;===o||r instanceof Int32Array&amp;&amp;&quot;int32&quot;===o||r instanceof Uint8Array&amp;&amp;&quot;bool&quot;===o)return t;var r,o;if(null==e||&quot;float32&quot;===e||&quot;complex64&quot;===e)return new Float32Array(t);if(&quot;int32&quot;===e)return new Int32Array(t);if(&quot;bool&quot;!==e)throw new Error(&quot;Unknown data type &quot;+e);for(var i=new Uint8Array(t.length),a=0;a&lt;i.length;++a)0!==Math.round(t[a])&amp;&amp;(i[a]=1);return i}function Y(t,e){if(0===t.length)return e[0];var n=t.reduce(function(t,e){return t*e});if(0===n)return[];if(n!==e.length)throw new Error(&quot;[&quot;+t+&quot;] does not match the input size.&quot;);return function t(e,n,r){var o=new Array;if(1===n.length)for(var i=n[0],a=0;a&lt;i;a++)o[a]=r[e+a];else{i=n[0];var s=n.slice(1),u=s.reduce(function(t,e){return t*e});for(a=0;a&lt;i;a++)o[a]=t(e+a*u,s,r)}return o}(0,t,e)}function Q(t,e){for(var n=J(t,e),r=0;r&lt;n.length;r++)n[r]=1;return n}function J(t,e){if(null==e||&quot;float32&quot;===e||&quot;complex64&quot;===e)return new Float32Array(t);if(&quot;int32&quot;===e)return new Int32Array(t);if(&quot;bool&quot;===e)return new Uint8Array(t);throw new Error(&quot;Unknown data type &quot;+e)}function Z(){if(&quot;undefined&quot;!=typeof performance)return performance.now();if(&quot;undefined&quot;==typeof process)throw new Error(&quot;Cannot measure time in this environment. You should run tf.js in the browser or in Node.js&quot;);var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}function tt(e){e.forEach(function(t){D(Number.isInteger(t)&amp;&amp;0&lt;=t,function(){return&quot;Tensor must have a shape comprised of positive integers but got shape [&quot;+e+&quot;].&quot;})})}var t=Object.freeze({shuffle:h,clamp:f,nearestLargerEven:_,sum:d,randUniform:v,distSquared:function(t,e){for(var n=0,r=0;r&lt;t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},assert:D,assertShapesMatch:g,assertNonNull:y,flatten:x,sizeFromShape:B,isScalarShape:function(t){return 0===t.length},arraysEqual:E,isInt:T,tanh:w,sizeToSquarishShape:b,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n&lt;t;++n)e[n]=n;return h(e),e},rightPad:C,repeatedTry:S,inferFromImplicitShape:N,parseAxisParam:k,squeezeShape:I,getTypedArrayFromDType:A,getArrayFromDType:M,checkComputationForErrors:F,checkConversionForErrors:L,hasEncodingLoss:W,isTypedArray:z,bytesPerElement:U,bytesFromStringArray:G,isString:V,isBoolean:e,isNumber:H,inferDtype:q,isFunction:j,nearestDivisor:$,computeStrides:K,toTypedArray:X,toNestedArray:Y,makeOnesTypedArray:Q,makeZerosTypedArray:J,now:Z,assertNonNegativeIntegerDimensions:tt}),et=function(){function t(t,e){this.backendTimer=t,null==(this.logger=e)&amp;&amp;(this.logger=new nt)}return t.prototype.profileKernel=function(o,t){var e,i=this,a=this.backendTimer.time(function(){e=t()});return(Array.isArray(e)?e:[e]).forEach(function(n){var r=n.dataSync();F(r,n.dtype,o),a.then(function(t){var e=&quot;&quot;;null!=t.getExtraProfileInfo&amp;&amp;(e=t.getExtraProfileInfo()),i.logger.logKernelProfile(o,n,r,t.kernelMs,e)})}),e},t}(),nt=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,o){var i=C(r+&quot;ms&quot;,9),a=C(t,25),s=e.rank,u=e.size,c=C(e.shape.toString(),14);console.log(&quot;%c&quot;+a+&quot;\t%c&quot;+i+&quot;\t%c&quot;+s+&quot;D &quot;+c+&quot;\t%c&quot;+u+&quot;\t%c&quot;+o,&quot;font-weight:bold&quot;,&quot;color:red&quot;,&quot;color:blue&quot;,&quot;color: orange&quot;,&quot;color: green&quot;)},t}(),rt=20,ot=3,it=7;function at(t,e,n,r){var o=K(e),i=function(t,e,n,r){var o=B(e),i=r[r.length-1],a=new Array(i).fill(0),s=e.length,u=&quot;complex64&quot;===n?ct(t):t;if(1&lt;s)for(var c=0;c&lt;o/i;c++)for(var l=c*i,h=0;h&lt;i;h++)a[h]=Math.max(a[h],st(u[l+h],0,n).length);return a}(t,e,n,o),a=e.length,s=function t(e,n,r,o,i,a){void 0===a&amp;&amp;(a=!0);var s=&quot;complex64&quot;===r?2:1,u=n[0],c=n.length;if(0===c)return&quot;complex64&quot;===r?[st(ct(e)[0],0,r)]:&quot;bool&quot;===r?[ut(e[0])]:[e[0].toString()];if(1===c){if(rt&lt;u){var l=ot*s,h=Array.from(e.slice(0,l)),p=Array.from(e.slice(u-ot*s,u));return&quot;complex64&quot;===r&amp;&amp;(h=ct(h),p=ct(p)),[&quot;[&quot;+h.map(function(t,e){return st(t,i[e],r)}).join(&quot;, &quot;)+&quot;, ..., &quot;+p.map(function(t,e){return st(t,i[u-ot+e],r)}).join(&quot;, &quot;)+&quot;]&quot;]}return[&quot;[&quot;+(&quot;complex64&quot;===r?ct(e):Array.from(e)).map(function(t,e){return st(t,i[e],r)}).join(&quot;, &quot;)+&quot;]&quot;]}var f=n.slice(1),d=o.slice(1),v=o[0]*s,m=[];if(rt&lt;u){for(var g=0;g&lt;ot;g++){var y=(x=g*v)+v;m.push.apply(m,t(e.slice(x,y),f,r,d,i,!1))}for(m.push(&quot;...&quot;),g=u-ot;g&lt;u;g++)y=(x=g*v)+v,m.push.apply(m,t(e.slice(x,y),f,r,d,i,g===u-1))}else for(g=0;g&lt;u;g++){var x;y=(x=g*v)+v,m.push.apply(m,t(e.slice(x,y),f,r,d,i,g===u-1))}var w=2===c?&quot;,&quot;:&quot;&quot;;m[0]=&quot;[&quot;+m[0]+w;for(g=1;g&lt;m.length-1;g++)m[g]=&quot; &quot;+m[g]+w;var b=&quot;,\n&quot;;for(g=2;g&lt;c;g++)b+=&quot;\n&quot;;return m[m.length-1]=&quot; &quot;+m[m.length-1]+&quot;]&quot;+(a?&quot;&quot;:b),m}(t,e,n,o,i),u=[&quot;Tensor&quot;];return r&amp;&amp;(u.push(&quot;  dtype: &quot;+n),u.push(&quot;  rank: &quot;+a),u.push(&quot;  shape: [&quot;+e+&quot;]&quot;),u.push(&quot;  values:&quot;)),u.push(s.map(function(t){return&quot;    &quot;+t}).join(&quot;\n&quot;)),u.join(&quot;\n&quot;)}function st(t,e,n){return C(Array.isArray(t)?parseFloat(t[0].toFixed(it))+&quot; + &quot;+parseFloat(t[1].toFixed(it))+&quot;j&quot;:V(t)?&quot;&#39;&quot;+t+&quot;&#39;&quot;:&quot;bool&quot;===n?ut(t):parseFloat(t.toFixed(it)).toString(),e)}function ut(t){return 0===t?&quot;false&quot;:&quot;true&quot;}function ct(t){for(var e=[],n=0;n&lt;t.length;n+=2)e.push([t[n],t[n+1]]);return e}var lt=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=B(t),null!=n){var o=n.length;D(o===this.size,function(){return&quot;Length of values &#39;&quot;+o+&quot;&#39; does not match the size inferred by the shape &#39;&quot;+r.size+&quot;&#39;.&quot;})}if(&quot;complex64&quot;===e)throw new Error(&quot;complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).&quot;);this.values=n||M(e,this.size),this.strides=K(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r&lt;arguments.length;r++)n[r-1]=arguments[r];0===n.length&amp;&amp;(n=[0]),D(n.length===this.rank,function(){return&quot;The number of provided coordinates (&quot;+n.length+&quot;) must match the rank (&quot;+e.rank+&quot;)&quot;});var o=this.locToIndex(n);this.values[o]=t},t.prototype.get=function(){for(var t=[],e=0;e&lt;arguments.length;e++)t[e]=arguments[e];0===t.length&amp;&amp;(t=[0]);for(var n=0,r=0,o=t;r&lt;o.length;r++){var i=o[r];if(i&lt;0||i&gt;=this.shape[n]){var a=&quot;Requested out of range element at &quot;+t+&quot;.   Buffer shape=&quot;+this.shape;throw new Error(a)}n++}for(var s=t[t.length-1],u=0;u&lt;t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n&lt;t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n&lt;e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,&quot;rank&quot;,{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return dt.make(this.shape,{values:this.values},this.dtype)},t}(),ht=null,pt=null,ft=null;var dt=function(){function o(t,e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||&quot;float32&quot;,this.size=B(t),this.strides=K(t),this.dataId=null!=r?r:{},this.id=ht().nextTensorId(),this.rankType=this.rank&lt;5?this.rank.toString():&quot;higher&quot;,ht().registerTensor(this,o),null!=n&amp;&amp;ht().write(this.dataId,n)}return o.make=function(t,e,n,r){return new o(t,n,e.values,e.dataId,r)},o.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},o.prototype.asScalar=function(){return this.throwIfDisposed(),D(1===this.size,function(){return&quot;The array must have only 1 element.&quot;}),this.reshape([])},o.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},o.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},o.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},o.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},o.prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),this.reshape([t,e,n,r,o])},o.prototype.asType=function(t){return this.throwIfDisposed(),pt.cast(this,t)},Object.defineProperty(o.prototype,&quot;rank&quot;,{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),o.prototype.buffer=function(){return m(this,void 0,void 0,function(){var e;return R(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,pt.buffer(this.shape,this.dtype,e)]}})})},o.prototype.bufferSync=function(){return pt.buffer(this.shape,this.dtype,this.dataSync())},o.prototype.array=function(){return m(this,void 0,void 0,function(){var e;return R(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Y(this.shape,e)]}})})},o.prototype.arraySync=function(){return Y(this.shape,this.dataSync())},o.prototype.data=function(){return m(this,void 0,void 0,function(){return R(this,function(t){return this.throwIfDisposed(),[2,ht().read(this.dataId)]})})},o.prototype.dataSync=function(){return this.throwIfDisposed(),ht().readSync(this.dataId)},o.prototype.dispose=function(){this.isDisposed||(ht().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(o.prototype,&quot;isDisposed&quot;,{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),o.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error(&quot;Tensor is disposed.&quot;)},o.prototype.toFloat=function(){return this.asType(&quot;float32&quot;)},o.prototype.toInt=function(){return this.asType(&quot;int32&quot;)},o.prototype.toBool=function(){return this.asType(&quot;bool&quot;)},o.prototype.print=function(t){return void 0===t&amp;&amp;(t=!1),pt.print(this,t)},o.prototype.reshape=function(t){return this.throwIfDisposed(),pt.reshape(this,t)},o.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},o.prototype.expandDims=function(t){return void 0===t&amp;&amp;(t=0),pt.expandDims(this,t)},o.prototype.cumsum=function(t,e,n){return void 0===t&amp;&amp;(t=0),void 0===e&amp;&amp;(e=!1),void 0===n&amp;&amp;(n=!1),pt.cumsum(this,t,e,n)},o.prototype.squeeze=function(t){return this.throwIfDisposed(),pt.squeeze(this,t)},o.prototype.clone=function(){return this.throwIfDisposed(),pt.clone(this)},o.prototype.oneHot=function(t,e,n){return this.throwIfDisposed(),pt.oneHot(this,t,e,n)},o.prototype.toString=function(t){return void 0===t&amp;&amp;(t=!1),at(this.dataSync(),this.shape,this.dtype,t)},o.prototype.tile=function(t){return this.throwIfDisposed(),pt.tile(this,t)},o.prototype.gather=function(t,e){return void 0===e&amp;&amp;(e=0),this.throwIfDisposed(),pt.gather(this,t,e)},o.prototype.matMul=function(t,e,n){return void 0===e&amp;&amp;(e=!1),void 0===n&amp;&amp;(n=!1),this.throwIfDisposed(),pt.matMul(this,t,e,n)},o.prototype.dot=function(t){return this.throwIfDisposed(),pt.dot(this,t)},o.prototype.norm=function(t,e,n){return void 0===t&amp;&amp;(t=&quot;euclidean&quot;),void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1),this.throwIfDisposed(),pt.norm(this,t,e,n)},o.prototype.slice=function(t,e){return this.throwIfDisposed(),pt.slice(this,t,e)},o.prototype.reverse=function(t){return this.throwIfDisposed(),pt.reverse(this,t)},o.prototype.concat=function(t,e){return void 0===e&amp;&amp;(e=0),this.throwIfDisposed(),t instanceof o&amp;&amp;(t=[t]),pt.concat([this].concat(t),e)},o.prototype.split=function(t,e){return void 0===e&amp;&amp;(e=0),this.throwIfDisposed(),pt.split(this,t,e)},o.prototype.stack=function(t,e){return void 0===e&amp;&amp;(e=0),pt.stack([this,t],e)},o.prototype.unstack=function(t){return void 0===t&amp;&amp;(t=0),pt.unstack(this,t)},o.prototype.pad=function(t,e){return void 0===e&amp;&amp;(e=0),pt.pad(this,t,e)},o.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&amp;&amp;(n=.001),ft(&quot;tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon&quot;),this.batchNorm(t,e,o,r,n)},o.prototype.batchNorm=function(t,e,n,r,o){return void 0===o&amp;&amp;(o=.001),this.throwIfDisposed(),pt.batchNorm(this,t,e,n,r,o)},o.prototype.all=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.all(this,t,e)},o.prototype.any=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.any(this,t,e)},o.prototype.logSumExp=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.logSumExp(this,t,e)},o.prototype.sum=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.sum(this,t,e)},o.prototype.prod=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.prod(this,t,e)},o.prototype.mean=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.mean(this,t,e)},o.prototype.min=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.min(this,t,e)},o.prototype.max=function(t,e){return void 0===t&amp;&amp;(t=null),void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.max(this,t,e)},o.prototype.argMin=function(t){return void 0===t&amp;&amp;(t=null),this.throwIfDisposed(),pt.argMin(this,t)},o.prototype.argMax=function(t){return void 0===t&amp;&amp;(t=null),this.throwIfDisposed(),pt.argMax(this,t)},o.prototype.cast=function(t){return this.throwIfDisposed(),pt.cast(this,t)},o.prototype.add=function(t){return this.throwIfDisposed(),pt.add(this,t)},o.prototype.addStrict=function(t){return this.throwIfDisposed(),pt.addStrict(this,t)},o.prototype.atan2=function(t){return this.throwIfDisposed(),pt.atan2(this,t)},o.prototype.sub=function(t){return this.throwIfDisposed(),pt.sub(this,t)},o.prototype.subStrict=function(t){return this.throwIfDisposed(),pt.subStrict(this,t)},o.prototype.pow=function(t){return this.throwIfDisposed(),pt.pow(this,t)},o.prototype.powStrict=function(t){return this.throwIfDisposed(),pt.powStrict(this,t)},o.prototype.mul=function(t){return this.throwIfDisposed(),pt.mul(this,t)},o.prototype.mulStrict=function(t){return this.throwIfDisposed(),pt.mulStrict(this,t)},o.prototype.div=function(t){return this.throwIfDisposed(),pt.div(this,t)},o.prototype.floorDiv=function(t){return this.throwIfDisposed(),pt.floorDiv(this,t)},o.prototype.divStrict=function(t){return this.throwIfDisposed(),pt.divStrict(this,t)},o.prototype.minimum=function(t){return this.throwIfDisposed(),pt.minimum(this,t)},o.prototype.minimumStrict=function(t){return this.throwIfDisposed(),pt.minimumStrict(this,t)},o.prototype.maximum=function(t){return this.throwIfDisposed(),pt.maximum(this,t)},o.prototype.maximumStrict=function(t){return this.throwIfDisposed(),pt.maximumStrict(this,t)},o.prototype.mod=function(t){return this.throwIfDisposed(),pt.mod(this,t)},o.prototype.modStrict=function(t){return this.throwIfDisposed(),pt.modStrict(this,t)},o.prototype.squaredDifference=function(t){return this.throwIfDisposed(),pt.squaredDifference(this,t)},o.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),pt.squaredDifferenceStrict(this,t)},o.prototype.transpose=function(t){return this.throwIfDisposed(),pt.transpose(this,t)},o.prototype.notEqual=function(t){return this.throwIfDisposed(),pt.notEqual(this,t)},o.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),pt.notEqualStrict(this,t)},o.prototype.less=function(t){return this.throwIfDisposed(),pt.less(this,t)},o.prototype.lessStrict=function(t){return this.throwIfDisposed(),pt.lessStrict(this,t)},o.prototype.equal=function(t){return this.throwIfDisposed(),pt.equal(this,t)},o.prototype.equalStrict=function(t){return this.throwIfDisposed(),pt.equalStrict(this,t)},o.prototype.lessEqual=function(t){return this.throwIfDisposed(),pt.lessEqual(this,t)},o.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),pt.lessEqualStrict(this,t)},o.prototype.greater=function(t){return this.throwIfDisposed(),pt.greater(this,t)},o.prototype.greaterStrict=function(t){return this.throwIfDisposed(),pt.greaterStrict(this,t)},o.prototype.greaterEqual=function(t){return this.throwIfDisposed(),pt.greaterEqual(this,t)},o.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),pt.greaterEqualStrict(this,t)},o.prototype.logicalAnd=function(t){return this.throwIfDisposed(),pt.logicalAnd(this,t)},o.prototype.logicalOr=function(t){return this.throwIfDisposed(),pt.logicalOr(this,t)},o.prototype.logicalNot=function(){return this.throwIfDisposed(),pt.logicalNot(this)},o.prototype.logicalXor=function(t){return this.throwIfDisposed(),pt.logicalXor(this,t)},o.prototype.where=function(t,e){return this.throwIfDisposed(),pt.where(t,this,e)},o.prototype.neg=function(){return this.throwIfDisposed(),pt.neg(this)},o.prototype.ceil=function(){return this.throwIfDisposed(),pt.ceil(this)},o.prototype.floor=function(){return this.throwIfDisposed(),pt.floor(this)},o.prototype.sign=function(){return this.throwIfDisposed(),pt.sign(this)},o.prototype.exp=function(){return this.throwIfDisposed(),pt.exp(this)},o.prototype.expm1=function(){return this.throwIfDisposed(),pt.expm1(this)},o.prototype.log=function(){return this.throwIfDisposed(),pt.log(this)},o.prototype.log1p=function(){return this.throwIfDisposed(),pt.log1p(this)},o.prototype.sqrt=function(){return this.throwIfDisposed(),pt.sqrt(this)},o.prototype.rsqrt=function(){return this.throwIfDisposed(),pt.rsqrt(this)},o.prototype.square=function(){return this.throwIfDisposed(),pt.square(this)},o.prototype.reciprocal=function(){return this.throwIfDisposed(),pt.reciprocal(this)},o.prototype.abs=function(){return this.throwIfDisposed(),pt.abs(this)},o.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),pt.clipByValue(this,t,e)},o.prototype.relu=function(){return this.throwIfDisposed(),pt.relu(this)},o.prototype.elu=function(){return this.throwIfDisposed(),pt.elu(this)},o.prototype.selu=function(){return this.throwIfDisposed(),pt.selu(this)},o.prototype.leakyRelu=function(t){return void 0===t&amp;&amp;(t=.2),this.throwIfDisposed(),pt.leakyRelu(this,t)},o.prototype.prelu=function(t){return this.throwIfDisposed(),pt.prelu(this,t)},o.prototype.sigmoid=function(){return this.throwIfDisposed(),pt.sigmoid(this)},o.prototype.logSigmoid=function(){return this.throwIfDisposed(),pt.logSigmoid(this)},o.prototype.softplus=function(){return this.throwIfDisposed(),pt.softplus(this)},o.prototype.zerosLike=function(){return this.throwIfDisposed(),pt.zerosLike(this)},o.prototype.onesLike=function(){return this.throwIfDisposed(),pt.onesLike(this)},o.prototype.sin=function(){return this.throwIfDisposed(),pt.sin(this)},o.prototype.cos=function(){return this.throwIfDisposed(),pt.cos(this)},o.prototype.tan=function(){return this.throwIfDisposed(),pt.tan(this)},o.prototype.asin=function(){return this.throwIfDisposed(),pt.asin(this)},o.prototype.acos=function(){return this.throwIfDisposed(),pt.acos(this)},o.prototype.atan=function(){return this.throwIfDisposed(),pt.atan(this)},o.prototype.sinh=function(){return this.throwIfDisposed(),pt.sinh(this)},o.prototype.cosh=function(){return this.throwIfDisposed(),pt.cosh(this)},o.prototype.tanh=function(){return this.throwIfDisposed(),pt.tanh(this)},o.prototype.asinh=function(){return this.throwIfDisposed(),pt.asinh(this)},o.prototype.acosh=function(){return this.throwIfDisposed(),pt.acosh(this)},o.prototype.atanh=function(){return this.throwIfDisposed(),pt.atanh(this)},o.prototype.erf=function(){return this.throwIfDisposed(),pt.erf(this)},o.prototype.round=function(){return this.throwIfDisposed(),pt.round(this)},o.prototype.step=function(t){return void 0===t&amp;&amp;(t=0),this.throwIfDisposed(),pt.step(this,t)},o.prototype.softmax=function(t){return void 0===t&amp;&amp;(t=-1),this.throwIfDisposed(),pt.softmax(this,t)},o.prototype.logSoftmax=function(t){return void 0===t&amp;&amp;(t=-1),this.throwIfDisposed(),pt.logSoftmax(this,t)},o.prototype.resizeBilinear=function(t,e){return void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.image.resizeBilinear(this,t,e)},o.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&amp;&amp;(e=!1),this.throwIfDisposed(),pt.image.resizeNearestNeighbor(this,t,e)},o.prototype.conv1d=function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=&quot;NWC&quot;),void 0===o&amp;&amp;(o=1),this.throwIfDisposed(),pt.conv1d(this,t,e,n,r,o,i)},o.prototype.conv2d=function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=&quot;NHWC&quot;),void 0===o&amp;&amp;(o=[1,1]),this.throwIfDisposed(),pt.conv2d(this,t,e,n,r,o,i)},o.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),pt.conv2dTranspose(this,t,e,n,r,o)},o.prototype.depthwiseConv2D=function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=&quot;NHWC&quot;),void 0===o&amp;&amp;(o=[1,1]),this.throwIfDisposed(),pt.depthwiseConv2d(this,t,e,n,r,o,i)},o.prototype.separableConv2d=function(t,e,n,r,o,i){return void 0===o&amp;&amp;(o=[1,1]),void 0===i&amp;&amp;(i=&quot;NHWC&quot;),this.throwIfDisposed(),pt.separableConv2d(this,t,e,n,r,o,i)},o.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),pt.avgPool(this,t,e,n,r)},o.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),pt.maxPool(this,t,e,n,r)},o.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&amp;&amp;(t=5),void 0===e&amp;&amp;(e=1),void 0===n&amp;&amp;(n=1),void 0===r&amp;&amp;(r=.5),pt.localResponseNormalization(this,t,e,n,r)},o.prototype.pool=function(t,e,n,r,o){return this.throwIfDisposed(),pt.pool(this,t,e,n,r,o)},o.prototype.variable=function(t,e,n){return void 0===t&amp;&amp;(t=!0),this.throwIfDisposed(),vt.variable(this,t,e,n)},o.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),pt.unsortedSegmentSum(this,t,e)},o.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),pt.batchToSpaceND(this,t,e)},o.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),pt.spaceToBatchND(this,t,e)},o.prototype.topk=function(t,e){return void 0===t&amp;&amp;(t=1),void 0===e&amp;&amp;(e=!0),this.throwIfDisposed(),pt.topk(this,t,e)},o.prototype.stridedSlice=function(t,e,n,r,o,i,a,s){return void 0===r&amp;&amp;(r=0),void 0===o&amp;&amp;(o=0),void 0===i&amp;&amp;(i=0),void 0===a&amp;&amp;(a=0),void 0===s&amp;&amp;(s=0),this.throwIfDisposed(),pt.stridedSlice(this,t,e,n,r,o,i,a,s)},o.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),pt.depthToSpace(this,t,e)},o.prototype.fft=function(){return this.throwIfDisposed(),pt.spectral.fft(this)},o.prototype.ifft=function(){return this.throwIfDisposed(),pt.spectral.ifft(this)},o.prototype.rfft=function(){return this.throwIfDisposed(),pt.spectral.rfft(this)},o.prototype.irfft=function(){return this.throwIfDisposed(),pt.spectral.irfft(this)},o}();Object.defineProperty(dt,Symbol.hasInstance,{value:function(t){return!!t&amp;&amp;null!=t.dataId&amp;&amp;null!=t.shape&amp;&amp;null!=t.dtype}});var vt=function(o){function i(t,e,n){void 0===e&amp;&amp;(e=!0);var r=o.call(this,t.shape,t.dtype,null,t.dataId)||this;r.trainable=e,r.name=n,null==r.name&amp;&amp;(r.name=ht().nextVariableId().toString());try{ht().registerVariable(r)}catch(t){throw ht().disposeTensor(r),t}return r}return s(i,o),i.variable=function(t,e,n,r){return void 0===e&amp;&amp;(e=!0),null!=r&amp;&amp;r!==t.dtype&amp;&amp;(t=t.asType(r)),new i(t,e,n)},i.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error(&quot;dtype of the new value (&quot;+t.dtype+&quot;) and previous value (&quot;+this.dtype+&quot;) must match&quot;);if(!E(t.shape,this.shape))throw new Error(&quot;shape of the new value (&quot;+t.shape+&quot;) and previous value (&quot;+this.shape+&quot;) must match&quot;);ht().disposeTensor(this),this.dataId=t.dataId,ht().registerTensor(this)},i}(dt);Object.defineProperty(vt,Symbol.hasInstance,{value:function(t){return t instanceof dt&amp;&amp;null!=t.assign&amp;&amp;t.assign instanceof Function}});var mt,gt,yt,xt,wt,bt,Et,Ct,_t,St,Rt=vt.variable;(St=mt||(mt={})).R0=&quot;R0&quot;,St.R1=&quot;R1&quot;,St.R2=&quot;R2&quot;,St.R3=&quot;R3&quot;,St.R4=&quot;R4&quot;,St.R5=&quot;R5&quot;,St.R6=&quot;R6&quot;,(_t=gt||(gt={})).float32=&quot;float32&quot;,_t.int32=&quot;int32&quot;,_t.bool=&quot;int32&quot;,_t.complex64=&quot;complex64&quot;,(Ct=yt||(yt={})).float32=&quot;float32&quot;,Ct.int32=&quot;int32&quot;,Ct.bool=&quot;bool&quot;,Ct.complex64=&quot;complex64&quot;,(Et=xt||(xt={})).float32=&quot;float32&quot;,Et.int32=&quot;float32&quot;,Et.bool=&quot;float32&quot;,Et.complex64=&quot;complex64&quot;,(bt=wt||(wt={})).float32=&quot;complex64&quot;,bt.int32=&quot;complex64&quot;,bt.bool=&quot;complex64&quot;,bt.complex64=&quot;complex64&quot;;var Nt={float32:xt,int32:gt,bool:yt,complex64:wt};function kt(t,e){if(&quot;string&quot;!==t&amp;&amp;&quot;string&quot;!==e)return Nt[t][e];if(&quot;string&quot;===t&amp;&amp;&quot;string&quot;===e)return&quot;string&quot;;throw new Error(&quot;Can not upcast &quot;+t+&quot; with &quot;+e)}function It(t){return kt(t,&quot;int32&quot;)}function Tt(t,e){if(t.dtype===e.dtype)return[t,e];var n=kt(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function At(t,e){D(t.dtype===e.dtype,function(){return&quot;The dtypes of the first(&quot;+t.dtype+&quot;) and second(&quot;+e.dtype+&quot;) input must match&quot;})}function Dt(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof dt)n.push(e);else if(s=e,Array.isArray(s)||&quot;object&quot;==typeof s){var o=e;for(var i in o){var a=o[i];r.has(a)||(r.add(a),t(a,n,r))}}var s}(t,e,new Set),e}var Mt,Ot,Pt=Object.freeze({makeTypesMatch:Tt,assertTypesMatch:At,isTensorInList:function(t,e){for(var n=0;n&lt;e.length;n++)if(e[n].id===t.id)return!0;return!1},getTensorsInContainer:Dt}),Ft=function(){function t(t,e,n){this.backend=t,this.safeMode=e,this.debugMode=n,this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.profiling=!1,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiler=new et(t),this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.moveData=function(t){this.write(t,this.readSync(t))},t.prototype.tidy=function(t,e){var n,r=this,o=null;if(null==e){if(&quot;function&quot;!=typeof t)throw new Error(&quot;Please provide a function to tidy()&quot;);e=t}else{if(&quot;string&quot;!=typeof t&amp;&amp;!(t instanceof String))throw new Error(&quot;When calling with two arguments, the first argument to tidy() must be a string&quot;);if(&quot;function&quot;!=typeof e)throw new Error(&quot;When calling with two arguments, the 2nd argument to tidy() must be a function&quot;);o=t}return this.scopedRun(function(){return r.startScope(o)},function(){return r.endScope(n)},function(){return(n=e())instanceof Promise&amp;&amp;console.error(&quot;Cannot return a Promise inside of tidy.&quot;),n})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=dt.make(t.shape,{dataId:t.dataId},t.dtype);return this.addTapeNode([t],e,function(t){return[t.toFloat()]}),e},t.prototype.runKernel=function(t,e,n){var r,o=this,i=[],a=this.isTapeOn(),s=null!=this.activeScope?this.activeScope.name:&quot;&quot;,u=function(t){a&amp;&amp;(i=t.map(function(t){return o.keep(o.clone(t))}))},c=this.numBytes,l=this.numTensors;if(this.scopedRun(function(){return o.kernelDepth++},function(){return o.kernelDepth--},function(){r=o.debugMode()?o.profiler.profileKernel(s,function(){return t(o.backend,u)}):t(o.backend,u)}),a){var h={id:this.nextTapeNodeId++,name:s,inputs:e,outputs:Array.isArray(r)?r:[r],saved:i};null!=n&amp;&amp;(h.gradient=function(t){return n(t,i)}),this.activeTape.push(h)}return this.profiling&amp;&amp;this.activeProfile.kernels.push({name:s,bytesAdded:this.numBytes-c,totalBytesSnapshot:this.numBytes,tensorsAdded:this.numTensors-l,totalTensorsSnapshot:this.numTensors,inputShapes:Object.keys(e).map(function(t){return e[t].shape}),outputShape:Array.isArray(r)?r.map(function(t){return t.shape}):r.shape}),r},t.prototype.registerTensor=function(t,e){var n=this.tensorInfo.has(t.dataId)?this.tensorInfo.get(t.dataId).refCount:0;if(this.numTensors++,&quot;string&quot;===t.dtype&amp;&amp;this.numStringTensors++,0===n){this.numDataBuffers++;var r=0;&quot;complex64&quot;!==t.dtype&amp;&amp;&quot;string&quot;!==t.dtype&amp;&amp;(r=t.size*U(t.dtype)),this.tensorInfo.set(t.dataId,{backend:null!=e?e:this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.numBytes+=r,null!=e?e.register(t.dataId,t.shape,t.dtype):this.backend.register(t.dataId,t.shape,t.dtype)}this.tensorInfo.get(t.dataId).refCount++,t instanceof vt||this.track(t)},t.prototype.registerVariable=function(t){if(null!=this.registeredVariables[t.name])throw new Error(&quot;Variable with name &quot;+t.name+&quot; was already registered&quot;);this.registeredVariables[t.name]=t},t.prototype.disposeTensor=function(t){if(this.tensorInfo.has(t.dataId)){this.numTensors--,&quot;string&quot;===t.dtype&amp;&amp;this.numStringTensors--;var e=this.tensorInfo.get(t.dataId);e.refCount&lt;=1?(&quot;complex64&quot;!==t.dtype&amp;&amp;(this.numBytes-=e.bytes),this.numDataBuffers--,e.backend.disposeData(t.dataId),this.tensorInfo.delete(t.dataId)):this.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.registeredVariables){var e=this.registeredVariables[t];this.disposeTensor(e),delete this.registeredVariables[t]}},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.numTensors,t.numDataBuffers=this.numDataBuffers,t.numBytes=this.numBytes,0&lt;this.numStringTensors&amp;&amp;(t.unreliable=!0,null==t.reasons&amp;&amp;(t.reasons=[]),t.reasons.push(&quot;Memory usage by string tensors is approximate (2 bytes per character)&quot;)),t},t.prototype.profile=function(r){return m(this,void 0,void 0,function(){var e,n;return R(this,function(t){return this.profiling=!0,e=this.numBytes,n=this.numTensors,this.activeProfile.kernels=[],this.activeProfile.result=r(),this.profiling=!1,this.activeProfile.peakBytes=Math.max.apply(Math,this.activeProfile.kernels.map(function(t){return t.totalBytesSnapshot})),this.activeProfile.newBytes=this.numBytes-e,this.activeProfile.newTensors=this.numTensors-n,[2,this.activeProfile]})})},t.prototype.isTapeOn=function(){return 0&lt;this.gradientDepth&amp;&amp;0===this.kernelDepth},t.prototype.addTapeNode=function(t,e,r){var n={};t.forEach(function(t,e){n[e]=t});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:n,outputs:[e],gradient:function(t){var n={};return r(t).forEach(function(t,e){n[e]=function(){return t}}),n}};this.activeTape.push(o)},t.prototype.keep=function(t){if(1===this.scopeStack.length&amp;&amp;this.safeMode)throw new Error(&quot;Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() =&gt; {...}) to avoid memory leaks.&quot;);return t.kept=!0,t},t.prototype.startTape=function(){0===this.gradientDepth&amp;&amp;(this.activeTape=[]),this.gradientDepth++},t.prototype.endTape=function(){this.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:&quot;unnamed scope&quot;,id:this.nextScopeId++};t&amp;&amp;(e.name=t),this.scopeStack.push(e),this.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=Dt(t),r=new Set(n.map(function(t){return t.id})),o=0;o&lt;this.activeScope.track.length;o++){var i=this.activeScope.track[o];i.kept||r.has(i.id)||i.dispose()}var a=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?null:this.scopeStack[this.scopeStack.length-1],n.forEach(function(t){t.kept||t.scopeId!==a.id||e.track(t)})},t.prototype.gradients=function(t,o,i,e){var a=this;if(void 0===e&amp;&amp;(e=!1),D(0&lt;o.length,function(){return&quot;gradients() received an empty list of xs.&quot;}),null!=i&amp;&amp;&quot;float32&quot;!==i.dtype)throw new Error(&quot;dy must have &#39;float32&#39; dtype, but has &#39;&quot;+i.dtype+&quot;&#39;&quot;);var s=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy(&quot;forward&quot;,t)});D(s instanceof dt,function(){return&quot;The result y returned by f() must be a tensor.&quot;});var u=function(t,e,n){for(var r={},o={},i=0;i&lt;e.length;i++)r[e[i].id]=!0;for(i=0;i&lt;t.length;i++){var a=(d=t[i]).inputs;for(var s in a){for(var u=a[s],c=!1,l=0;l&lt;e.length;l++)if(r[u.id]){d.outputs.forEach(function(t){return r[t.id]=!0}),c=!0,o[d.id]=!0;break}if(c)break}}var h={};h[n.id]=!0;var p={};for(i=t.length-1;0&lt;=i;i--)for(a=(d=t[i]).inputs,l=0;l&lt;d.outputs.length;l++)if(h[d.outputs[l].id]){for(var s in a)h[a[s].id]=!0,p[d.id]=!0;break}var f=[];for(i=0;i&lt;t.length;i++){var d;if(o[(d=t[i]).id]&amp;&amp;p[d.id]){var v={};for(var s in d.inputs){var m=d.inputs[s];r[m.id]&amp;&amp;(v[s]=m)}var g=Object.assign({},d);g.inputs=v,g.outputs=d.outputs,f.push(g)}}return f}(this.activeTape,o,s);if(!e&amp;&amp;0===u.length&amp;&amp;0&lt;o.length)throw new Error(&quot;Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.&quot;);return this.tidy(&quot;backward&quot;,function(){var t,e,n={};n[s.id]=null==i?(t=s.shape,e=Q(B(t),&quot;float32&quot;),dt.make(t,{values:e})):i,function(a,s,u){for(var t=function(t){var o=s[t],r=[];if(o.outputs.forEach(function(t){var e=a[t.id];if(null!=e)r.push(e);else{var n=dt.make(t.shape,{values:J(t.size,t.dtype)},t.dtype);r.push(n)}}),null==o.gradient)throw new Error(&quot;Cannot compute gradient: gradient function not found for &quot;+o.name+&quot;.&quot;);var i=o.gradient(1===o.outputs.length?r[0]:r),e=function(t){if(!(t in i))throw new Error(&quot;Cannot backprop through input &quot;+t+&quot;. Available gradients found: &quot;+Object.keys(i)+&quot;.&quot;);var e=u(function(){return i[t]()});if(&quot;float32&quot;!==e.dtype)throw new Error(&quot;Error in gradient for op &quot;+o.name+&quot;. The gradient of input &quot;+t+&quot; must have &#39;float32&#39; dtype, but has &#39;&quot;+e.dtype+&quot;&#39;&quot;);var n=o.inputs[t];if(!E(e.shape,n.shape))throw new Error(&quot;Error in gradient for op &quot;+o.name+&quot;. The gradient of input &#39;&quot;+t+&quot;&#39; has shape &#39;&quot;+e.shape+&quot;&#39;, which does not match the shape of the input &#39;&quot;+n.shape+&quot;&#39;&quot;);if(null==a[n.id])a[n.id]=e;else{var r=a[n.id];a[n.id]=r.add(e),r.dispose()}};for(var n in o.inputs)e(n)},e=s.length-1;0&lt;=e;e--)t(e)}(n,u,function(t){return a.tidy(t)});var r=o.map(function(t){return n[t.id]});return 0===a.gradientDepth&amp;&amp;(a.activeTape.forEach(function(t){for(var e in t.saved)t.saved[e].dispose()}),a.activeTape=null),{value:s,grads:r}})},t.prototype.customGrad=function(r){var e=this;return D(j(r),function(){return&quot;The f passed in customGrad(f) must be a function.&quot;}),function(){for(var i,a=[],t=0;t&lt;arguments.length;t++)a[t]=arguments[t];D(a.every(function(t){return t instanceof dt}),function(){return&quot;The args passed in customGrad(f)(x1, x2,...) must all be tensors&quot;});var n={};return a.forEach(function(t,e){n[e]=t}),e.runKernel(function(t,e){return D((i=r.apply(void 0,a.concat([e]))).value instanceof dt,function(){return&quot;The function f passed in customGrad(f) must return an object where `obj.value` is a tensor&quot;}),D(j(i.gradFunc),function(){return&quot;The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.&quot;}),i.value},n,function(t,e){var n=i.gradFunc(t,e),r=Array.isArray(n)?n:[n];D(r.length===a.length,function(){return&quot;The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).&quot;}),D(r.every(function(t){return t instanceof dt}),function(){return&quot;The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.&quot;});var o={};return r.forEach(function(t,e){o[e]=function(){return t}}),o})}},t.prototype.write=function(t,e){var n=this.tensorInfo.get(t);if(&quot;string&quot;===n.dtype){var r=G(e);this.numBytes+=r-n.bytes,n.bytes=r}this.backend!==n.backend&amp;&amp;(n.backend.disposeData(t),n.backend=this.backend,this.backend.register(t,n.shape,n.dtype)),this.backend.write(t,e)},t.prototype.readSync=function(t){return this.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.tensorInfo.get(t).backend.read(t)},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.time=function(r){return m(this,void 0,void 0,function(){var e,n;return R(this,function(t){switch(t.label){case 0:return e=Z(),[4,this.backend.time(r)];case 1:return(n=t.sent()).wallMs=Z()-e,[2,n]}})})},t.prototype.track=function(t){if(1===this.scopeStack.length&amp;&amp;this.safeMode)throw new Error(&quot;Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() =&gt; {op();...}); to avoid memory leaks.&quot;);return null!=this.activeScope&amp;&amp;(t.scopeId=this.activeScope.id,this.activeScope.track.push(t)),t},t.nextTensorId=0,t.nextVariableId=0,t}();(Ot=Mt||(Mt={}))[Ot.NUMBER=0]=&quot;NUMBER&quot;,Ot[Ot.BOOLEAN=1]=&quot;BOOLEAN&quot;,Ot[Ot.STRING=2]=&quot;STRING&quot;;var Lt,Bt,Wt=[{name:&quot;DEBUG&quot;,type:Mt.BOOLEAN},{name:&quot;IS_BROWSER&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_LAZILY_UNPACK&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_CPU_FORWARD&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_BATCHNORMALIZATION&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_CLIP&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_DEPTHWISECONV&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_IMAGE_OPERATIONS&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_PACK_REDUCE&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_CONV_IM2COL&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_MAX_TEXTURE_SIZE&quot;,type:Mt.NUMBER},{name:&quot;WEBGL_NUM_MB_BEFORE_PAGING&quot;,type:Mt.NUMBER},{name:&quot;WEBGL_MAX_TEXTURES_IN_SHADER&quot;,type:Mt.NUMBER},{name:&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;,type:Mt.NUMBER},{name:&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_VERSION&quot;,type:Mt.NUMBER},{name:&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_DOWNLOAD_FLOAT_ENABLED&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_FENCE_API_ENABLED&quot;,type:Mt.BOOLEAN},{name:&quot;WEBGL_SIZE_UPLOAD_UNIFORM&quot;,type:Mt.NUMBER},{name:&quot;BACKEND&quot;,type:Mt.STRING},{name:&quot;EPSILON&quot;,type:Mt.NUMBER},{name:&quot;PROD&quot;,type:Mt.BOOLEAN},{name:&quot;TENSORLIKE_CHECK_SHAPE_CONSISTENCY&quot;,type:Mt.BOOLEAN},{name:&quot;DEPRECATION_WARNINGS_ENABLED&quot;,type:Mt.BOOLEAN}];function zt(t){try{if(null!=l(t))return!0}catch(t){return!1}return!1}var Ut=&quot;tfjsflags&quot;;function Gt(){var e={};if(&quot;undefined&quot;==typeof window||void 0===window.location||void 0===window.location.search)return e;var t,a,n=(t=window.location.search,a={},t.replace(/[?&amp;]([^=?&amp;]+)(?:=([^&amp;]*))?/g,function(t){for(var e=[],n=1;n&lt;arguments.length;n++)e[n-1]=arguments[n];return r=a,o=e[0],i=e[1],r[decodeURIComponent(o)]=decodeURIComponent(i||&quot;&quot;),e.join(&quot;=&quot;);var r,o,i}),a);if(Ut in n){var o={};n[Ut].split(&quot;,&quot;).forEach(function(t){var e=t.split(&quot;:&quot;),n=e[0],r=e[1];o[n]=r}),Wt.forEach(function(t){t.name in o&amp;&amp;(console.log(&quot;Setting feature override from URL &quot;+t.name+&quot;: &quot;+o[t.name]),t.type===Mt.NUMBER?e[t.name]=+o[t.name]:t.type===Mt.BOOLEAN?e[t.name]=&quot;true&quot;===o[t.name]:t.type===Mt.STRING?e[t.name]=o[t.name]:console.warn(&quot;Unknown URL param: &quot;+t.name+&quot;.&quot;))})}return e}function Vt(t,e){return null!=t.getExtension(e)}function Ht(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var o=2===e?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,o,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(n),i}var qt,jt=function(){function t(t){this.features={},this.registry={},this.registryFactory={},null!=t&amp;&amp;(this.features=t),this.get(&quot;DEBUG&quot;)&amp;&amp;console.warn(&quot;Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.&quot;)}return t.setBackend=function(t,e){if(void 0===e&amp;&amp;(e=!1),!(t in Zt.registry))throw new Error(&quot;Backend name &#39;&quot;+t+&quot;&#39; not found in registry&quot;);Zt.engine.backend=Zt.findBackend(t),Zt.backendName=t},t.getBackend=function(){return Zt.initEngine(),Zt.backendName},t.disposeVariables=function(){Zt.engine.disposeVariables()},t.memory=function(){return Zt.engine.memory()},t.profile=function(t){return Zt.engine.profile(t)},t.tidy=function(t,e){return Zt.engine.tidy(t,e)},t.dispose=function(t){Dt(t).forEach(function(t){return t.dispose()})},t.keep=function(t){return Zt.engine.keep(t)},t.time=function(t){return Zt.engine.time(t)},t.prototype.get=function(t){return t in this.features||(this.features[t]=this.evaluateFeature(t)),this.features[t]},t.prototype.getFeatures=function(){return this.features},t.prototype.set=function(t,e){this.features[t]=e},t.prototype.getBestBackendName=function(){var e=this;if(0===Object.keys(this.registry).length)throw new Error(&quot;No backend found in registry.&quot;);return Object.keys(this.registry).map(function(t){return{name:t,entry:e.registry[t]}}).sort(function(t,e){return e.entry.priority-t.entry.priority})[0].name},t.prototype.evaluateFeature=function(t){if(&quot;DEBUG&quot;===t)return!1;if(&quot;IS_BROWSER&quot;===t)return&quot;undefined&quot;!=typeof window;if(&quot;IS_NODE&quot;===t)return&quot;undefined&quot;!=typeof process&amp;&amp;void 0!==process.versions&amp;&amp;void 0!==process.versions.node;if(&quot;IS_CHROME&quot;===t)return&quot;undefined&quot;!=typeof navigator&amp;&amp;null!=navigator&amp;&amp;null!=navigator.userAgent&amp;&amp;/Chrome/.test(navigator.userAgent)&amp;&amp;/Google Inc/.test(navigator.vendor);if(&quot;WEBGL_CPU_FORWARD&quot;===t)return!0;if(&quot;WEBGL_PACK&quot;===t)return 0!==this.get(&quot;WEBGL_VERSION&quot;);if(&quot;WEBGL_PACK_BATCHNORMALIZATION&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_PACK_CLIP&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_PACK_DEPTHWISECONV&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_PACK_IMAGE_OPERATIONS&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_PACK_REDUCE&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_LAZILY_UNPACK&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_CONV_IM2COL&quot;===t)return this.get(&quot;WEBGL_PACK&quot;);if(&quot;WEBGL_NUM_MB_BEFORE_PAGING&quot;===t)return this.get(&quot;PROD&quot;)||!this.get(&quot;IS_BROWSER&quot;)?Number.POSITIVE_INFINITY:window.screen.height*window.screen.width*window.devicePixelRatio*600/1024;if(&quot;WEBGL_MAX_TEXTURE_SIZE&quot;===t)return function(t){if(null==Lt){var e=l(t);Lt=e.getParameter(e.MAX_TEXTURE_SIZE)}return Lt}(this.get(&quot;WEBGL_VERSION&quot;));if(&quot;WEBGL_MAX_TEXTURES_IN_SHADER&quot;===t)return function(t){if(null==Bt){var e=l(t);Bt=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Bt)}(this.get(&quot;WEBGL_VERSION&quot;));if(&quot;IS_TEST&quot;===t)return!1;if(&quot;BACKEND&quot;===t)return this.getBestBackendName();if(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;===t){var e=this.get(&quot;WEBGL_VERSION&quot;);return 0===e?0:function(t){if(0===t)return 0;var e=l(t);return Vt(e,&quot;EXT_disjoint_timer_query_webgl2&quot;)&amp;&amp;2===t?2:Vt(e,&quot;EXT_disjoint_timer_query&quot;)?1:0}(e)}if(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE&quot;===t)return 0&lt;this.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)&amp;&amp;(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n,r;if(&quot;HAS_WEBGL&quot;===t)return 0&lt;this.get(&quot;WEBGL_VERSION&quot;);if(&quot;WEBGL_VERSION&quot;===t)return zt(2)?2:zt(1)?1:0;if(&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;===t)return function(t){if(0===t)return!1;var e=l(t);if(1===t){if(!Vt(e,&quot;OES_texture_float&quot;))return!1}else if(!Vt(e,&quot;EXT_color_buffer_float&quot;))return!1;return Ht(e,t)}(this.get(&quot;WEBGL_VERSION&quot;));if(&quot;WEBGL_DOWNLOAD_FLOAT_ENABLED&quot;===t)return function(t){if(0===t)return!1;var e=l(t);if(1===t){if(!Vt(e,&quot;OES_texture_float&quot;))return!1;if(!Vt(e,&quot;WEBGL_color_buffer_float&quot;))return!1}else if(!Vt(e,&quot;EXT_color_buffer_float&quot;))return!1;return Ht(e,t)}(this.get(&quot;WEBGL_VERSION&quot;));if(&quot;WEBGL_FENCE_API_ENABLED&quot;===t)return 2===(r=this.get(&quot;WEBGL_VERSION&quot;))&amp;&amp;null!=l(r).fenceSync;if(&quot;WEBGL_SIZE_UPLOAD_UNIFORM&quot;===t)return this.get(&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;)?4:0;if(&quot;TEST_EPSILON&quot;===t)return 32===this.backend.floatPrecision()?.001:.1;if(&quot;EPSILON&quot;===t)return 32===this.backend.floatPrecision()?1e-7:1e-4;if(&quot;PROD&quot;===t)return!1;if(&quot;TENSORLIKE_CHECK_SHAPE_CONSISTENCY&quot;===t)return!this.get(&quot;PROD&quot;);if(&quot;DEPRECATION_WARNINGS_ENABLED&quot;===t)return!0;throw new Error(&quot;Unknown feature &quot;+t+&quot;.&quot;)},t.prototype.setFeatures=function(t){this.features=Object.assign({},t)},t.prototype.reset=function(){this.features=Gt(),null!=this.globalEngine&amp;&amp;(this.globalEngine=null)},Object.defineProperty(t.prototype,&quot;backend&quot;,{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),t.prototype.findBackend=function(t){return t in this.registry?this.registry[t].backend:null},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t]:null},t.prototype.registerBackend=function(t,e,n){var r=this;if(void 0===n&amp;&amp;(n=1),t in this.registry)return console.warn(t+&quot; backend was already registered. Reusing existing backend&quot;),!1;try{var o=e();return o.setDataMover({moveData:function(t){return r.engine.moveData(t)}}),this.registry[t]={backend:o,priority:n},this.registryFactory[t]=e,!0}catch(e){return console.warn(&quot;Registration of backend &quot;+t+&quot; failed&quot;),console.warn(e.stack||e.message),!1}},t.prototype.removeBackend=function(t){if(!(t in this.registry))throw new Error(t+&quot; backend not found in registry&quot;);this.registry[t].backend.dispose(),delete this.registry[t]},Object.defineProperty(t.prototype,&quot;engine&quot;,{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initEngine=function(){var t=this;if(null==this.globalEngine){this.backendName=this.get(&quot;BACKEND&quot;);var e=this.findBackend(this.backendName);this.globalEngine=new Ft(e,!1,function(){return t.get(&quot;DEBUG&quot;)})}},Object.defineProperty(t.prototype,&quot;global&quot;,{get:function(){return $t()},enumerable:!0,configurable:!0}),t}();function $t(){if(null==qt){var t=void 0;if(&quot;undefined&quot;!=typeof window)t=window;else if(&quot;undefined&quot;!=typeof global)t=global;else{if(&quot;undefined&quot;==typeof process)throw new Error(&quot;Could not find a global object&quot;);t=process}qt=t}return qt}function Kt(){Zt.set(&quot;PROD&quot;,!0)}function Xt(){Zt.set(&quot;DEBUG&quot;,!0)}function Yt(){Zt.set(&quot;DEPRECATION_WARNINGS_ENABLED&quot;,!1),console.warn(&quot;TensorFlow.js deprecation warnings have been disabled.&quot;)}function Qt(t){Zt.get(&quot;DEPRECATION_WARNINGS_ENABLED&quot;)&amp;&amp;console.warn(t+&quot; You can disable deprecation warnings with tf.disableDeprecationWarnings().&quot;)}ft=Qt;var Jt,Zt=(null==(Jt=$t()).ENV&amp;&amp;(Jt.ENV=new jt(Gt())),ht=function(){return Jt.ENV.engine},Jt.ENV),te=Object.freeze({EPSILON_FLOAT16:1e-4,EPSILON_FLOAT32:1e-7,Environment:jt,enableProdMode:Kt,enableDebugMode:Xt,disableDeprecationWarnings:Yt,deprecationWarn:Qt,ENV:Zt});function ee(t){var e=t;if(z(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];Array.isArray(e)||z(e);)n.push(e.length),e=e[0];return Array.isArray(t)&amp;&amp;Zt.get(&quot;TENSORLIKE_CHECK_SHAPE_CONSISTENCY&quot;)&amp;&amp;function t(e,n,r){if(r=r||[],Array.isArray(e)||z(e)){D(0&lt;n.length,function(){return&quot;Element arr[&quot;+r.join(&quot;][&quot;)+&quot;] should be a primitive, but is an array of &quot;+e.length+&quot; elements&quot;}),D(e.length===n[0],function(){return&quot;Element arr[&quot;+r.join(&quot;][&quot;)+&quot;] should have &quot;+n[0]+&quot; elements, but has &quot;+e.length+&quot; elements&quot;});for(var o=n.slice(1),i=0;i&lt;e.length;++i)t(e[i],o,r.concat(i))}else D(0===n.length,function(){return&quot;Element arr[&quot;+r.join(&quot;][&quot;)+&quot;] is a primitive, but should be an array/TypedArray of &quot;+n[0]+&quot; elements&quot;})}(t,n,[]),n}function ne(t,e,n,r){if(null!=t&amp;&amp;(&quot;numeric&quot;!==t&amp;&amp;t!==e||&quot;numeric&quot;===t&amp;&amp;&quot;string&quot;===e))throw new Error(&quot;Argument &#39;&quot;+n+&quot;&#39; passed to &#39;&quot;+r+&quot;&#39; must be &quot;+t+&quot; tensor, but got &quot;+e+&quot; tensor&quot;)}function re(t,e,n,r){if(void 0===r&amp;&amp;(r=&quot;numeric&quot;),t instanceof dt)return ne(r,t.dtype,e,n),t;var o=q(t);if(&quot;string&quot;!==o&amp;&amp;0&lt;=[&quot;bool&quot;,&quot;int32&quot;,&quot;float32&quot;].indexOf(r)&amp;&amp;(o=r),ne(r,o,e,n),null==t||!z(t)&amp;&amp;!Array.isArray(t)&amp;&amp;&quot;number&quot;!=typeof t&amp;&amp;&quot;boolean&quot;!=typeof t&amp;&amp;&quot;string&quot;!=typeof t){var i=null==t?&quot;null&quot;:t.constructor.name;throw new Error(&quot;Argument &#39;&quot;+e+&quot;&#39; passed to &#39;&quot;+n+&quot;&#39; must be a Tensor or TensorLike, but got &#39;&quot;+i+&quot;&#39;&quot;)}var a=ee(t);z(t)||Array.isArray(t)||(t=[t]);var s=&quot;string&quot;!==o?X(t,o,Zt.get(&quot;DEBUG&quot;)):x(t);return dt.make(a,{values:s},o)}function oe(t,n,r,e){if(void 0===e&amp;&amp;(e=&quot;numeric&quot;),!Array.isArray(t))throw new Error(&quot;Argument &quot;+n+&quot; passed to &quot;+r+&quot; must be a `Tensor[]` or `TensorLike[]`&quot;);return t.map(function(t,e){return re(t,n+&quot;[&quot;+e+&quot;]&quot;,r)},e)}function ie(t,e){if(D(j(t),function(){return&quot;The f passed in variableGrads(f) must be a function&quot;}),D(null==e||Array.isArray(e)&amp;&amp;e.every(function(t){return t instanceof vt}),function(){return&quot;The varList passed in variableGrads(f, varList) must be an array of variables&quot;}),null==e)for(var n in e=[],Zt.engine.registeredVariables)e.push(Zt.engine.registeredVariables[n]);var r=e.length;D(0&lt;(e=e.filter(function(t){return t.trainable})).length,function(){return&quot;variableGrads() expects at least one of the input variables to be trainable, but none of the &quot;+r+&quot; variables is trainable.&quot;});var o=Zt.engine.gradients(t,e,null,!0),i=o.value,a=o.grads;D(a.some(function(t){return null!=t}),function(){return&quot;Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().&quot;}),D(0===i.rank,function(){return&quot;The f passed in variableGrads(f) must return a scalar, but it returned a rank-&quot;+i.rank+&quot; tensor&quot;});var s={};return e.forEach(function(t,e){null!=a[e]&amp;&amp;(s[t.name]=a[e])}),{value:i,grads:s}}function ae(t){return Zt.engine.customGrad(t)}function se(t){if(0&lt;t.filter(function(t){return null==t}).length)throw new Error(&quot;Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.&quot;)}var ue=jt.tidy,ce=jt.keep,le=jt.dispose,he=jt.time,pe=jt.profile;function fe(){for(var t=[],e=0;e&lt;arguments.length;e++)t[e]=arguments[e];Zt.get(&quot;IS_TEST&quot;)||console.warn.apply(console,t)}function de(t,e,n,r){void 0===r&amp;&amp;(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var i=e.length,a=0;a&lt;i;++a)o=o.concat([t[a+1]/e[a],e[a]]);o=o.concat(t.slice(i+1))}return o}function ve(t,e,n){void 0===n&amp;&amp;(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o&lt;t;++o)o&lt;=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var i=[],a=[];for(o=1;o&lt;t;++o)2*e+1&lt;=o||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function me(t,e,n,r){void 0===r&amp;&amp;(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var i=1;i&lt;t.length;++i)i&lt;=e.length?r?o.push(e[i-1]*t[i]):o.push(t[i]/e[i-1]):o.push(t[i]);return o}function ge(t,e){for(var n=[0],r=0;r&lt;e;++r)n.push(t[r][0]);return n}function ye(t,e,n){for(var r=t.slice(0,1),o=0;o&lt;n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function xe(t,e){for(var n=0;n&lt;t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function we(e,t){for(var n=[],r=e.length,o=0;o&lt;r;o++)-1===t.indexOf(o)&amp;&amp;n.push(e[o]);return[n,t.map(function(t){return e[t]})]}function be(t,e){return function(t,e,n){for(var r=t.length+e.length,o=[],i=0,a=0,s=0;s&lt;r;s++)-1===n.indexOf(s)?o.push(t[i++]):o.push(e[a++]);return o}(t,e.map(function(t){return 1}),e)}function Ee(t,e,n){D(xe(e,n),function(){return t+&quot; supports only inner-most axes for now. Got axes &quot;+e+&quot; and rank-&quot;+n+&quot; input.&quot;})}function Ce(t,e){if(xe(t,e))return null;for(var n=[],r=0;r&lt;e;++r)-1===t.indexOf(r)&amp;&amp;n.push(r);return t.forEach(function(t){return n.push(t)}),n}function _e(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function Se(t,e){for(var n=[],r=e-t;r&lt;e;++r)n.push(r);return n}function Re(t,e){for(var n=t[0].slice(),r=1;r&lt;t.length;r++)n[e]+=t[r][e];return n}function Ne(t,e){if(t.rank&lt;1)throw new Error(&quot;tf.gatherND() expects the input to be rank 1 or higher, but the rank was &quot;+t.rank+&quot;.&quot;);if(e.rank&lt;1)throw new Error(&quot;tf.gatherND() expects the indices to be rank 1 or higher, but the rank was &quot;+e.rank+&quot;.&quot;);if(&quot;int32&quot;!==e.dtype)throw new Error(&quot;tf.gatherND() expects the indices to be int32 type, but the dtype was &quot;+e.dtype+&quot;.&quot;);if(e.shape[e.rank-1]&gt;t.rank)throw new Error(&quot;index innermost dimension length must be &lt;= tensor rank; saw: &quot;+e.shape[e.rank-1]+&quot; vs. &quot;+t.rank);if(0===t.size)throw new Error(&quot;Requested more than 0 entries, but input is empty. Input shape: &quot;+t.shape+&quot;.&quot;);for(var n=e.shape,r=n[n.length-1],o=1,i=0;i&lt;n.length-1;++i)o*=n[i];var a=t.shape,s=n.slice();s.pop();var u=1;for(i=r;i&lt;t.rank;++i)u*=a[i],s.push(a[i]);var c=K(t.shape).map(function(t){return t/u}).concat([1]).slice(0,r);return[s,o,u,c]}function ke(t){return t&lt;=30?t:$(t,Math.floor(Math.sqrt(t)))}function Ie(t,e,n){if(e.rank&lt;1)throw new Error(&quot;tf.scatterND() expects the indices to be rank 1 or higher, but the rank was &quot;+e.rank+&quot;.&quot;);if(t.rank&lt;1)throw new Error(&quot;tf.scatterND() expects the updates to be rank 1 or higher, but the rank was &quot;+t.rank+&quot;.&quot;);if(&quot;int32&quot;!==e.dtype)throw new Error(&quot;The dtype of &#39;indices&#39; should be int32, but got dtype: &quot;+e.dtype);if(n.length&lt;1)throw new Error(&quot;Output rank must be greater or equal to 1, but got shape: &quot;+n);if(0===n.length){if(0===e.size)throw new Error(&quot;Indices specified for empty output. indices shape: &quot;+e.shape);if(0===t.size)throw new Error(&quot;Updates specified for empty output. updates shape: &quot;+t.shape)}!function(t,e,n){var r=1&lt;e.rank?e.shape[e.rank-1]:1,o=1&lt;e.rank?e.rank-1:1,i=&quot;Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: &quot;+n.shape+&quot;, indices.shape: &quot;+e.shape+&quot;, shape: &quot;+t+&quot;, sliceDim: &quot;+r+&quot;, and batchDim: &quot;+o+&quot;.&quot;;if(n.rank&lt;o)throw new Error(i+&quot; update.rank &lt; &quot;+o+&quot;. &quot;);if(t.length&lt;r+(n.rank-o))throw new Error(i+&quot; Output shape length &lt; &quot;+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(i+&quot; update.rank != &quot;+(o+t.length-r));for(var a=0;a&lt;o;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+&quot; updates.shape[&quot;+a+&quot;] (&quot;+n.shape[a]+&quot;) != indices.shape[&quot;+a+&quot;] (&quot;+e.shape[a]+&quot;).&quot;);for(a=0;a&lt;n.rank-o;++a)if(n.shape[a+o]!==t[a+r])throw new Error(i+&quot; updates.shape[&quot;+(a+o)+&quot;] (&quot;+n.shape[a+o]+&quot;) != shape[&quot;+(a+o)+&quot;] (&quot;+t[a+o]+&quot;)&quot;)}(n,e,t)}function Te(t,e,n){for(var r=1&lt;e.rank?e.shape[e.rank-1]:1,o=n.length,i=1,a=r;a&lt;o;++a)i*=n[a];var s=r&lt;1?1:r;return{sliceRank:r,numUpdates:e.size/s,sliceSize:i,strides:K(n.slice(0,r)).concat([1]),outputSize:B(n)}}function Ae(t,e,n,i,r,o,a,s,u){if(void 0===r&amp;&amp;(r=0),void 0===o&amp;&amp;(o=0),void 0===a&amp;&amp;(a=0),void 0===s&amp;&amp;(s=0),void 0===u&amp;&amp;(u=0),0!==a)throw new Error(&quot;ellipsis mask is not yet supported&quot;);if(0!==s)throw new Error(&quot;new axis mask is not yet supported&quot;);for(var c=[],l=[],h=[],p=0;p&lt;t.length;p++)c[p]=De(r,e,i,t,p),l[p]=Me(o,n,i,t,p),u&amp;1&lt;&lt;p&amp;&amp;(l[p]=c[p]+1,h.push(p));var f=new Array(t.length).fill(0);return f=f.map(function(t,e){for(var n=0,r=i[e]||1,o=c[e];!(0&lt;r?o&gt;=l[e]:o&lt;=l[e]);o+=r)n+=1;return n}),[c,f,h]}function De(t,e,n,r,o){var i=e[o],a=n[o]||1;(t&amp;1&lt;&lt;o||null==i)&amp;&amp;(i=0&lt;a?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return i&lt;0&amp;&amp;(i+=s),f(0,i,s-1)}function Me(t,e,n,r,o){var i=e[o],a=n[o]||1;(t&amp;1&lt;&lt;o||null==i)&amp;&amp;(i=0&lt;a?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i&lt;0&amp;&amp;(i+=s),0&lt;a?f(0,i,s):f(-1,i,s-1)}function Oe(t,e,n){for(var r=n.length,o=0;o&lt;n.length;o++)if(1&lt;n[o]){r=o;break}for(o=r+1;o&lt;n.length;o++)if(0&lt;e[o]||n[o]!==t[o])return!1;return!0}function Pe(t,e){for(var n=0&lt;t.length?t[t.length-1]:1,r=0;r&lt;t.length-1;r++)n+=t[r]*e[r];return n}function Fe(t){var e=Object.keys(t);if(1!==e.length)throw new Error(&quot;Please provide an object with a single key (operation name) mapping to a function. Got an object with &quot;+e.length+&quot; keys.&quot;);var r=e[0],o=t[r];r.endsWith(&quot;_&quot;)&amp;&amp;(r=r.substring(0,r.length-1));var n=function(){for(var t=[],e=0;e&lt;arguments.length;e++)t[e]=arguments[e];Zt.engine.startScope(r);try{var n=o.apply(void 0,t);return n instanceof Promise&amp;&amp;console.error(&quot;Cannot return a Promise inside of tidy.&quot;),Zt.engine.endScope(n),n}catch(t){throw Zt.engine.endScope(null),t}};return Object.defineProperty(n,&quot;name&quot;,{value:r,configurable:!0}),n}var Le=Fe({softmax_:function(t,o){void 0===o&amp;&amp;(o=-1);var e=re(t,&quot;logits&quot;,&quot;softmax&quot;);if(-1===o&amp;&amp;(o=e.rank-1),o!==e.rank-1)throw Error(&quot;Softmax along a non-last dimension is not yet supported. Logits was rank &quot;+e.rank+&quot; and dim was &quot;+o);return ae(function(t,e){var n=t.logSumExp([o],!0),r=t.toFloat().sub(n).exp();return e([r]),{value:r,gradFunc:function(t,e){var n=e[0],r=t.mul(n);return r.sub(r.sum([o],!0).mul(n))}}})(e)}}),Be=Fe({logSoftmax_:function(t,i){void 0===i&amp;&amp;(i=-1);var e=re(t,&quot;logits&quot;,&quot;logSoftmax&quot;);if(-1===i&amp;&amp;(i=e.rank-1),i!==e.rank-1)throw Error(&quot;Log Softmax along a non-last dimension is not yet supported. Logits was rank &quot;+e.rank+&quot; and axis was &quot;+i);return ae(function(t,e){var n=t.max(i,!0),r=t.sub(n),o=r.toFloat().sub(r.exp().sum(i,!0).log());return e([o]),{value:o,gradFunc:function(t,e){var n=e[0].exp();return t.sub(t.sum(i,!0).mul(n))}}})(e)}});var We=Fe({complex_:function(t,e){var n=re(t,&quot;real&quot;,&quot;complex&quot;),r=re(e,&quot;imag&quot;,&quot;complex&quot;);return g(n.shape,r.shape,&quot;real and imag shapes, &quot;+n.shape+&quot; and &quot;+r.shape+&quot;, must match in call to tf.complex().&quot;),Zt.engine.runKernel(function(t){return t.complex(n,r)},{$real:n,$imag:r})}}),ze=Fe({real_:function(t){var e=re(t,&quot;input&quot;,&quot;real&quot;);return Zt.engine.runKernel(function(t){return t.real(e)},{$input:e})}}),Ue=Fe({imag_:function(t){var e=re(t,&quot;input&quot;,&quot;imag&quot;);return Zt.engine.runKernel(function(t){return t.imag(e)},{$input:e})}});function Ge(t,e,n){if(null==n&amp;&amp;(n=q(t)),&quot;complex64&quot;===n)throw new Error(&quot;Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).&quot;);if(!z(t)&amp;&amp;!Array.isArray(t)&amp;&amp;&quot;number&quot;!=typeof t&amp;&amp;&quot;boolean&quot;!=typeof t&amp;&amp;&quot;string&quot;!=typeof t)throw new Error(&quot;values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray&quot;);var r=ee(t);if(null!=e){tt(e);var o=B(e),i=B(r);D(o===i,function(){return&quot;Based on the provided shape, [&quot;+e+&quot;], the tensor should have &quot;+o+&quot; values but has &quot;+i});for(var a=0;a&lt;r.length;++a){var s=r[a],u=a!==r.length-1||s!==B(e.slice(a));D(r[a]===e[a]||!u,function(){return&quot;Error creating a new Tensor. Inferred shape (&quot;+r+&quot;) does not match the provided shape (&quot;+e+&quot;). &quot;})}}return z(t)||Array.isArray(t)||(t=[t]),e=e||r,t=&quot;string&quot;!==n?X(t,n,Zt.get(&quot;DEBUG&quot;)):x(t),dt.make(e,{values:t},n)}function Ve(t,e){if((z(t)||Array.isArray(t))&amp;&amp;&quot;complex64&quot;!==e)throw new Error(&quot;Error creating a new Scalar: value must be a primitive (number|boolean|string)&quot;);return Ge(t,[],e)}function He(t,e){y(t);var n=ee(t);if(1!==n.length)throw new Error(&quot;tensor1d() requires values to be a flat/TypedArray&quot;);return Ge(t,n,e)}function qe(t,e,n){if(y(t),null!=e&amp;&amp;2!==e.length)throw new Error(&quot;tensor2d() requires shape to have two numbers&quot;);var r=ee(t);if(2!==r.length&amp;&amp;1!==r.length)throw new Error(&quot;tensor2d() requires values to be number[][] or flat/TypedArray&quot;);if(1===r.length&amp;&amp;null==e)throw new Error(&quot;tensor2d() requires shape to be provided when `values` are a flat/TypedArray&quot;);return Ge(t,e=e||r,n)}function je(t,e,n){if(y(t),null!=e&amp;&amp;3!==e.length)throw new Error(&quot;tensor3d() requires shape to have three numbers&quot;);var r=ee(t);if(3!==r.length&amp;&amp;1!==r.length)throw new Error(&quot;tensor3d() requires values to be number[][][] or flat/TypedArray&quot;);if(1===r.length&amp;&amp;null==e)throw new Error(&quot;tensor3d() requires shape to be provided when `values` are a flat array&quot;);return Ge(t,e=e||r,n)}function $e(t,e,n){if(y(t),null!=e&amp;&amp;4!==e.length)throw new Error(&quot;tensor4d() requires shape to have four numbers&quot;);var r=ee(t);if(4!==r.length&amp;&amp;1!==r.length)throw new Error(&quot;tensor4d() requires values to be number[][][][] or flat/TypedArray&quot;);if(1===r.length&amp;&amp;null==e)throw new Error(&quot;tensor4d() requires shape to be provided when `values` are a flat array&quot;);return Ge(t,e=e||r,n)}function Ke(t,e,n){if(y(t),null!=e&amp;&amp;5!==e.length)throw new Error(&quot;tensor5d() requires shape to have five numbers&quot;);var r=ee(t);if(5!==r.length&amp;&amp;1!==r.length)throw new Error(&quot;tensor5d() requires values to be number[][][][][] or flat/TypedArray&quot;);if(1===r.length&amp;&amp;null==e)throw new Error(&quot;tensor5d() requires shape to be provided when `values` are a flat array&quot;);return Ge(t,e=e||r,n)}function Xe(t,e,n){if(y(t),null!=e&amp;&amp;6!==e.length)throw new Error(&quot;tensor6d() requires shape to have six numbers&quot;);var r=ee(t);if(6!==r.length&amp;&amp;1!==r.length)throw new Error(&quot;tensor6d() requires values to be number[][][][][][] or flat/TypedArray&quot;);if(1===r.length&amp;&amp;null==e)throw new Error(&quot;tensor6d() requires shape to be provided when `values` are a flat array&quot;);return Ge(t,e=e||r,n)}function Ye(t,e){if(void 0===e&amp;&amp;(e=&quot;float32&quot;),&quot;complex64&quot;===e){var n=Ye(t,&quot;float32&quot;),r=Ye(t,&quot;float32&quot;);return We(n,r)}var o=Q(B(t),e);return dt.make(t,{values:o},e)}function Qe(t,e){if(void 0===e&amp;&amp;(e=&quot;float32&quot;),&quot;complex64&quot;===e){var n=Qe(t,&quot;float32&quot;),r=Qe(t,&quot;float32&quot;);return We(n,r)}var o=J(B(t),e);return dt.make(t,{values:o},e)}function Je(e,n,r){return Zt.engine.runKernel(function(t){return t.fill(e,n,r)},{})}function Ze(t,e,n){if(0===n)throw new Error(&quot;Cannot request zero samples&quot;);var r=(e-t)/(n-1),o=J(n,&quot;float32&quot;);o[0]=t;for(var i=1;i&lt;o.length;i++)o[i]=o[i-1]+r;return He(o,&quot;float32&quot;)}function tn(t,e,n,r){if(void 0===n&amp;&amp;(n=1),void 0===r&amp;&amp;(r=&quot;float32&quot;),0===n)throw new Error(&quot;Cannot have a step of zero&quot;);if(t===e||t&lt;e&amp;&amp;n&lt;0||e&lt;t&amp;&amp;1&lt;n)return Qe([0],r);var o=J(Math.abs(Math.ceil((e-t)/n)),r);e&lt;t&amp;&amp;1===n&amp;&amp;(n=-1),o[0]=t;for(var i=1;i&lt;o.length;i++)o[i]=o[i-1]+n;return He(o,r)}var en=Fe({onesLike_:function(t){var e=re(t,&quot;x&quot;,&quot;onesLike&quot;);if(&quot;complex64&quot;!==e.dtype)return Zt.engine.runKernel(function(t){return t.onesLike(e)},{$x:e},null);var n=en(ze(e)),r=nn(Ue(e));return We(n,r)}}),nn=Fe({zerosLike_:function(t){var e=re(t,&quot;x&quot;,&quot;zerosLike&quot;);return Zt.engine.runKernel(function(t){return t.zerosLike(e)},{$x:e},null)}}),rn=function(){function t(t){this.dataMover=t,this.data=new WeakMap}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(t),this.data.get(t)},t.prototype.set=function(t,e){this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.data.delete(t)},t}(),on=function(){function t(){}return t.prototype.time=function(t){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.read=function(t){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.readSync=function(t){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.disposeData=function(t){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.write=function(t,e){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.fromPixels=function(t,e){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.register=function(t,e,n){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.memory=function(){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.floatPrecision=function(){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.batchMatMul=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.fusedBatchMatMul=function(t,e,n,r,o,i){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.slice=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.stridedSlice=function(t,e,n,r,o,i,a,s,u){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.unstack=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.reverse=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.concat=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.neg=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.add=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.addN=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.subtract=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.multiply=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.realDivide=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.floorDiv=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sum=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.prod=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.unsortedSegmentSum=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.argMin=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.argMax=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.equal=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.notEqual=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.less=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.lessEqual=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.greater=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.greaterEqual=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.logicalNot=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.logicalAnd=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.logicalOr=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.where=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.select=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.topk=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.min=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.minimum=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.mod=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.max=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.maximum=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.all=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.any=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.squaredDifference=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.ceil=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.floor=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.round=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sign=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.isNaN=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.isInf=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.isFinite=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.pow=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.exp=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.expm1=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.log=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.log1p=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sqrt=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.rsqrt=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.square=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.reciprocal=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.relu=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.prelu=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.elu=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.eluDer=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.selu=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.int=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.clip=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.abs=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.complexAbs=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sigmoid=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.softplus=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sin=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.cos=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.tan=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.asin=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.acos=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.atan=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.atan2=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sinh=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.cosh=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.tanh=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.asinh=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.acosh=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.atanh=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.erf=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.step=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.conv2d=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.conv2dDerInput=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.conv2dDerFilter=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.depthwiseConv2D=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.depthwiseConv2DDerInput=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.conv3d=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.conv3dDerInput=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.conv3dDerFilter=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.maxPool=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.maxPoolBackprop=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.avgPool=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.avgPoolBackprop=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.reshape=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.cast=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.tile=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.pad=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.transpose=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.gather=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.gatherND=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.scatterND=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.batchToSpaceND=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.spaceToBatchND=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.resizeBilinear=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.resizeBilinearBackprop=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.resizeNearestNeighbor=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.batchNormalization=function(t,e,n,r,o,i){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.LRNGrad=function(t,e,n,r,o,i,a){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.multinomial=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.oneHot=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.cumsum=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.nonMaxSuppression=function(t,e,n,r,o){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.fft=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.ifft=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.complex=function(t,e){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.real=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.imag=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.cropAndResize=function(t,e,n,r,o,i){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.depthToSpace=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.split=function(t,e,n){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.sparseToDense=function(t,e,n,r){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.fill=function(t,e,n){throw new Error(&quot;Not yet implemented.&quot;)},t.prototype.onesLike=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.zerosLike=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.setDataMover=function(t){throw new Error(&quot;Not yet implemented&quot;)},t.prototype.dispose=function(){throw new Error(&quot;Not yet implemented&quot;)},t}();function an(t,e,n){if(&quot;complex64&quot;===e){if(&quot;complex64&quot;===t.dtype)return t.clone();var r=Qe(t.shape),o=t.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!W(t.dtype,e))return dt.make(t.shape,{dataId:t.dataId},e);if(&quot;complex64&quot;===t.dtype){var a=n.real(t);return i=a.cast(e),a.dispose(),i}if(&quot;int32&quot;===e)return n.int(t);if(&quot;bool&quot;!==e)throw new Error(&quot;Error in Cast: unknown dtype argument (&quot;+e+&quot;)&quot;);var s=Ve(0,t.dtype);return i=n.notEqual(t,s),s.dispose(),i}function sn(t,e){return dt.make(e,{dataId:t.dataId},t.dtype)}function un(t,e){if(t.length!==e.length)throw new Error(&quot;Cannot merge real and imag arrays of different lengths. real:&quot;+t.length+&quot;, imag: &quot;+e.length+&quot;.&quot;);for(var n=new Float32Array(2*t.length),r=0;r&lt;n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function cn(t,e){return{real:t[2*e],imag:t[2*e+1]}}function ln(t,e,n,r,o){for(var i=Array.from(e).map(function(t,e){return{score:t,boxIndex:e}}).filter(function(t){return t.score&gt;o}).sort(function(t,e){return e.score-t.score}),a=[],s=0;s&lt;i.length;s++){var u=i[s],c=u.score,l=u.boxIndex;if(c&lt;o)break;for(var h=!1,p=a.length-1;0&lt;=p;--p)if(hn(t,l,a[p])&gt;=r){h=!0;break}if(!h&amp;&amp;(a.push(l),a.length&gt;=n))break}return He(a,&quot;int32&quot;)}function hn(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),h=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),f=(s-i)*(u-a),d=(h-c)*(p-l);if(f&lt;=0||d&lt;=0)return 0;var v=Math.max(i,c),m=Math.max(a,l),g=Math.min(s,h),y=Math.min(u,p),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(f+d-x)}function pn(n,t,r){var o=new Array(n.rank).fill(0),i=n.shape.slice();return t.map(function(t){i[r]=t;var e=n.slice(o,i);return o[r]+=t,e})}function fn(t,e,n,r,o){for(var i=e[e.length-1],a=[t.length/i,i],s=a[0],u=a[1],c=A(n,s*r),l=A(&quot;int32&quot;,s*r),h=0;h&lt;s;h++){for(var p=h*u,f=t.subarray(p,p+u),d=[],v=0;v&lt;f.length;v++)d.push({value:f[v],index:v});d.sort(function(t,e){return e.value-t.value});var m=h*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r);for(v=0;v&lt;r;v++)g[v]=d[v].value,y[v]=d[v].index}var x=e.slice();return x[x.length-1]=r,[Ge(c,x,n),Ge(l,x,&quot;int32&quot;)]}var dn=function(t,e,n){this.variableNames=[&quot;A&quot;];var r=t.windowSize,o=t.batchSize,i=t.inSize,a=Math.ceil(i/r);n||this.variableNames.push(&quot;bestIndicesA&quot;),this.outputShape=[o,a];var s=&quot;max&quot;===e?&quot;&gt;&quot;:&quot;&lt;&quot;,u=n?&quot;inOffset + i;&quot;:&quot;round(getBestIndicesA(batch, inOffset + i));&quot;;this.userCode=&quot;\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * &quot;+r+&quot;;\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i &lt; &quot;+r+&quot;; i++) {\n          int inIdx = &quot;+u+&quot;;\n          float candidate = getA(batch, inIdx);\n          if (candidate &quot;+s+&quot; bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    &quot;};function vn(e,t){return[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;w&quot;,&quot;u&quot;,&quot;v&quot;].slice(0,t).map(function(t){return e+&quot;.&quot;+t})}function mn(t,e){return 1===e?[t]:vn(t,e)}function gn(t,e){for(var n=t.length,r=[],o=0;o&lt;n;o++){var i=n-1-o,a=t[i]||1;1&lt;(e[e.length-1-o]||1)&amp;&amp;1===a&amp;&amp;r.unshift(i)}return r}function yn(t,e){for(var n=[],r=0;r&lt;e.length;r++){var o=t[t.length-r-1],i=e.length-r-1,a=e[i];(null==o||1===o&amp;&amp;1&lt;a)&amp;&amp;n.unshift(i)}return n}function xn(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o&lt;r;o++){var i=t[t.length-o-1];null==i&amp;&amp;(i=1);var a=e[e.length-o-1];if(null==a&amp;&amp;(a=1),1===i)n.unshift(a);else if(1===a)n.unshift(i);else{if(i!==a)throw Error(&quot;Operands could not be broadcast together with shapes &quot;+t+&quot; and &quot;+e+&quot;.&quot;);n.unshift(i)}}return n}function wn(){var t,e,n,r,o,i,a,s,u,c;return c=2===Zt.get(&quot;WEBGL_VERSION&quot;)?(t=&quot;#version 300 es&quot;,n=&quot;out&quot;,r=e=&quot;in&quot;,o=&quot;texture&quot;,i=&quot;outputColor&quot;,a=&quot;out vec4 outputColor;&quot;,s=&quot;\n      const float NAN = uintBitsToFloat(uint(0x7fc00000));\n    &quot;,u=&quot;\n      const float INFINITY = uintBitsToFloat(uint(0x7f800000));\n    &quot;,&quot;\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    &quot;):(e=&quot;attribute&quot;,r=n=&quot;varying&quot;,o=&quot;texture2D&quot;,i=&quot;gl_FragColor&quot;,a=t=&quot;&quot;,s=&quot;\n      uniform float NAN;\n\n      bool isnan(float val) {\n        return (val &lt; 1.0 || 0.0 &lt; val || val == 0.0) ? false : true;\n      }\n      bvec4 isnan(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    &quot;,u=&quot;\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    &quot;,&quot;\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    &quot;),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function bn(n,t,r){void 0===r&amp;&amp;(r=&quot;index&quot;);var o=K(t);return o.map(function(t,e){return&quot;int &quot;+n[e]+&quot; = &quot;+r+&quot; / &quot;+t+&quot;; &quot;+(e===o.length-1?&quot;int &quot;+n[e+1]+&quot; = &quot;+r+&quot; - &quot;+n[e]+&quot; * &quot;+t:&quot;index -= &quot;+n[e]+&quot; * &quot;+t)+&quot;;&quot;}).join(&quot;&quot;)}function En(t){return 1===t.length?&quot;&quot;+t[0]:&quot;vec&quot;+t.length+&quot;(&quot;+t.join(&quot;,&quot;)+&quot;)&quot;}function Cn(t,e,n,r){var o=[];t.forEach(function(t){var e=B(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?o.push(&quot;uniform float &quot;+t.name+(1&lt;e?&quot;[&quot;+e+&quot;]&quot;:&quot;&quot;)+&quot;;&quot;):(o.push(&quot;uniform sampler2D &quot;+t.name+&quot;;&quot;),o.push(&quot;uniform int offset&quot;+t.name+&quot;;&quot;))});var i,a,s,u=o.join(&quot;\n&quot;),c=t.map(function(t){return function(t,e,n){void 0===n&amp;&amp;(n=!1);var r=&quot;&quot;;r+=n?Sn(t):_n(t);var o=t.shapeInfo.logicalShape,i=e.logicalShape;return o.length&lt;=i.length&amp;&amp;(r+=n?function(t,e){var n,r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),i=&quot;get&quot;+o+&quot;AtOutCoords&quot;,a=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,u=gn(t.shapeInfo.logicalShape,e.logicalShape),c=Dn(s),l=s-a,h=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;w&quot;,&quot;u&quot;,&quot;v&quot;];n=0===a?&quot;&quot;:s&lt;2&amp;&amp;1&lt;=u.length?&quot;coords = 0;&quot;:u.map(function(t){return&quot;coords.&quot;+h[t+l]+&quot; = 0;&quot;}).join(&quot;\n&quot;);var p=&quot;&quot;;p=s&lt;2&amp;&amp;0&lt;a?&quot;coords&quot;:t.shapeInfo.logicalShape.map(function(t,e){return&quot;coords.&quot;+h[e+l]}).join(&quot;, &quot;);var f=&quot;return outputValue;&quot;;if(1===a&amp;&amp;1&lt;s)f=&quot;\n      return vec4(outputValue.xy, outputValue.xy);\n    &quot;;else if(0===a&amp;&amp;0&lt;s)f=1===s?&quot;\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      &quot;:&quot;\n        return vec4(outputValue.x);\n      &quot;;else if(u.length){var d=a-2,v=a-1;-1&lt;u.indexOf(d)&amp;&amp;-1&lt;u.indexOf(v)?f=&quot;return vec4(outputValue.x);&quot;:-1&lt;u.indexOf(d)?f=&quot;return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);&quot;:-1&lt;u.indexOf(v)&amp;&amp;(f=&quot;return vec4(outputValue.xx, outputValue.zz);&quot;)}return&quot;\n    vec4 &quot;+i+&quot;() {\n      &quot;+c+&quot; coords = getOutputCoords();\n      &quot;+n+&quot;\n      vec4 outputValue = get&quot;+o+&quot;(&quot;+p+&quot;);\n      &quot;+f+&quot;\n    }\n  &quot;}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o=&quot;get&quot;+r+&quot;AtOutCoords&quot;,i=e.texShape,a=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&amp;&amp;s===u&amp;&amp;null==t.shapeInfo.flatOffset&amp;&amp;E(a,i))return&quot;\n      float &quot;+o+&quot;() {\n        return sampleTexture(&quot;+n+&quot;, resultUV);\n      }\n    &quot;;var c=Dn(u),l=gn(t.shapeInfo.logicalShape,e.logicalShape),h=u-s,p=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;w&quot;,&quot;u&quot;,&quot;v&quot;];return&quot;\n    float &quot;+o+&quot;() {\n      &quot;+c+&quot; coords = getOutputCoords();\n      &quot;+(0===s?&quot;&quot;:u&lt;2&amp;&amp;1&lt;=l.length?&quot;coords = 0;&quot;:l.map(function(t){return&quot;coords.&quot;+p[t+h]+&quot; = 0;&quot;}).join(&quot;\n&quot;))+&quot;\n      return get&quot;+r+&quot;(&quot;+(u&lt;2&amp;&amp;0&lt;s?&quot;coords&quot;:t.shapeInfo.logicalShape.map(function(t,e){return&quot;coords.&quot;+p[e+h]}).join(&quot;, &quot;))+&quot;);\n    }\n  &quot;}(t,e)),r}(t,e,r)}).join(&quot;\n&quot;),l=e.texShape,h=wn(),p=&quot;\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return &quot;+h.texture2D+&quot;(textureSampler, uv).r;\n    }\n  &quot;,f=(s=h).version+&quot;\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    &quot;+s.varyingFs+&quot; vec2 resultUV;\n    &quot;+s.defineOutput+&quot;\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    &quot;+s.defineSpecialNaN+&quot;\n    &quot;+s.defineSpecialInf+&quot;\n    &quot;+s.defineRound+&quot;\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    &quot;+Rn+&quot;\n    &quot;+Nn+&quot;\n    &quot;+kn+&quot;\n  &quot;;return a=e.isPacked?(i=function(t,e){switch(t.length){case 0:return&quot;\n    int getOutputCoords() {\n      return 0;\n    }\n  &quot;;case 1:return s=e,1===(u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)])[0]?&quot;\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * &quot;+u[1]+&quot;.0);\n      }\n    &quot;:1===u[1]?&quot;\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * &quot;+u[0]+&quot;.0);\n      }\n    &quot;:&quot;\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+u[0]+&quot;, &quot;+u[1]+&quot;));\n      return resTexRC.x * &quot;+u[1]+&quot; + resTexRC.y;\n    }\n  &quot;;case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(E(t,e))return&quot;\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(&quot;+n[0]+&quot;, &quot;+n[1]+&quot;));\n      }\n    &quot;;var r=Math.ceil(t[1]/2);return&quot;\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+n[0]+&quot;, &quot;+n[1]+&quot;));\n\n      int index = resTexRC.x * &quot;+n[1]+&quot; + resTexRC.y;\n      int r = 2 * (index / &quot;+r+&quot;);\n      int c = imod(index, &quot;+r+&quot;) * 2;\n\n      return ivec2(r, c);\n    }\n  &quot;}(t,e);case 3:return n=t,r=e,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(n[2]/2),a=i*Math.ceil(n[1]/2),&quot;\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+o[0]+&quot;, &quot;+o[1]+&quot;));\n      int index = resTexRC.x * &quot;+o[1]+&quot; + resTexRC.y;\n\n      int b = index / &quot;+a+&quot;;\n      index -= b * &quot;+a+&quot;;\n\n      int r = 2 * (index / &quot;+i+&quot;);\n      int c = imod(index, &quot;+i+&quot;) * 2;\n\n      return ivec3(b, r, c);\n    }\n  &quot;;default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),i=o,a=&quot;&quot;,s=&quot;b, r, c&quot;,u=2;u&lt;t.length-1;u++)a=&quot;\n      int b&quot;+u+&quot; = index / &quot;+(i*=t[t.length-u-1])+&quot;;\n      index -= b&quot;+u+&quot; * &quot;+i+&quot;;\n    &quot;+a,s=&quot;b&quot;+u+&quot;, &quot;+s;return&quot;\n    ivec&quot;+t.length+&quot; getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+n[0]+&quot;, &quot;+n[1]+&quot;));\n      int index = resTexRC.x * &quot;+n[1]+&quot; + resTexRC.y;\n\n      &quot;+a+&quot;\n\n      int b = index / &quot;+o+&quot;;\n      index -= b * &quot;+o+&quot;;\n\n      int r = 2 * (index / &quot;+r+&quot;);\n      int c = imod(index, &quot;+r+&quot;) * 2;\n\n      return ivec&quot;+t.length+&quot;(&quot;+s+&quot;);\n    }\n  &quot;}(t,e)}var n,r,o,i,a;var s,u}(e.logicalShape,l),&quot;\n    void setOutput(vec4 val) {\n      &quot;+h.output+&quot; = val;\n    }\n  &quot;):(i=function(t,e){switch(t.length){case 0:return&quot;\n    int getOutputCoords() {\n      return 0;\n    }\n  &quot;;case 1:return 1===(p=e)[0]?&quot;\n      int getOutputCoords() {\n        return int(resultUV.x * &quot;+p[1]+&quot;.0);\n      }\n    &quot;:1===p[1]?&quot;\n      int getOutputCoords() {\n        return int(resultUV.y * &quot;+p[0]+&quot;.0);\n      }\n    &quot;:&quot;\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+p[0]+&quot;, &quot;+p[1]+&quot;));\n      return resTexRC.x * &quot;+p[1]+&quot; + resTexRC.y;\n    }\n  &quot;;case 2:return E(l=t,h=e)?&quot;\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(&quot;+h[0]+&quot;, &quot;+h[1]+&quot;));\n      }\n    &quot;:1===l[1]?&quot;\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(&quot;+h[0]+&quot;, &quot;+h[1]+&quot;));\n        int index = resTexRC.x * &quot;+h[1]+&quot; + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    &quot;:1===l[0]?&quot;\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(&quot;+h[0]+&quot;, &quot;+h[1]+&quot;));\n        int index = resTexRC.x * &quot;+h[1]+&quot; + resTexRC.y;\n        return ivec2(0, index);\n      }\n    &quot;:&quot;\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+h[0]+&quot;, &quot;+h[1]+&quot;));\n      int index = resTexRC.x * &quot;+h[1]+&quot; + resTexRC.y;\n      int r = index / &quot;+l[1]+&quot;;\n      int c = index - r * &quot;+l[1]+&quot;;\n      return ivec2(r, c);\n    }\n  &quot;;case 3:return u=e,c=bn([&quot;r&quot;,&quot;c&quot;,&quot;d&quot;],t),&quot;\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(&quot;+u[0]+&quot;, &quot;+u[1]+&quot;));\n      int index = resTexRC.x * &quot;+u[1]+&quot; + resTexRC.y;\n      &quot;+c+&quot;\n      return ivec3(r, c, d);\n    }\n  &quot;;case 4:return a=e,s=bn([&quot;r&quot;,&quot;c&quot;,&quot;d&quot;,&quot;d2&quot;],t),&quot;\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(&quot;+a[0]+&quot;, &quot;+a[1]+&quot;));\n      int index = resTexRC.x * &quot;+a[1]+&quot; + resTexRC.y;\n      &quot;+s+&quot;\n      return ivec4(r, c, d, d2);\n    }\n  &quot;;case 5:return o=e,i=bn([&quot;r&quot;,&quot;c&quot;,&quot;d&quot;,&quot;d2&quot;,&quot;d3&quot;],t),&quot;\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(&quot;+o[0]+&quot;,\n                             &quot;+o[1]+&quot;));\n\n      int index = resTexRC.x * &quot;+o[1]+&quot; + resTexRC.y;\n\n      &quot;+i+&quot;\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  &quot;;case 6:return n=e,r=bn([&quot;r&quot;,&quot;c&quot;,&quot;d&quot;,&quot;d2&quot;,&quot;d3&quot;,&quot;d4&quot;],t),&quot;\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(&quot;+n[0]+&quot;, &quot;+n[1]+&quot;));\n      int index = resTexRC.x * &quot;+n[1]+&quot; + resTexRC.y;\n\n      &quot;+r+&quot;\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  &quot;;default:throw new Error(t.length+&quot;-D output sampling is not yet supported&quot;)}var n,r;var o,i;var a,s;var u,c;var l,h;var p}(e.logicalShape,l),&quot;\n    void setOutput(float val) {\n      &quot;+h.output+&quot; = vec4(val, 0, 0, 0);\n    }\n  &quot;),r&amp;&amp;(f+=In),[f,p,a,u,i,c,n].join(&quot;\n&quot;)}function _n(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n=&quot;get&quot;+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return&quot;float &quot;+n+&quot;() {return &quot;+e+&quot;;}&quot;;var r=t.shapeInfo.texShape,o=r[0],i=r[1];if(1===o&amp;&amp;1===i)return&quot;\n      float &quot;+n+&quot;() {\n        return sampleTexture(&quot;+e+&quot;, halfCR);\n      }\n    &quot;;var a=t.shapeInfo.texShape;return&quot;\n    float &quot;+n+&quot;() {\n      vec2 uv = uvFromFlat(&quot;+a[0]+&quot;, &quot;+a[1]+&quot;, &quot;+Tn(e)+&quot;);\n      return sampleTexture(&quot;+e+&quot;, uv);\n    }\n  &quot;}(t);case 1:return function(t){var e=t.name,n=&quot;get&quot;+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return&quot;\n      float &quot;+n+&quot;(int index) {\n        &quot;+An(t)+&quot;\n      }\n    &quot;;var r=t.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&amp;&amp;1===o)return&quot;\n      float &quot;+n+&quot;(int index) {\n        return sampleTexture(&quot;+e+&quot;, halfCR);\n      }\n    &quot;;var a=Tn(e);return 1===i?&quot;\n      float &quot;+n+&quot;(int index) {\n        vec2 uv = vec2(0.5, (float(index + &quot;+a+&quot;) + 0.5) / &quot;+o+&quot;.0);\n        return sampleTexture(&quot;+e+&quot;, uv);\n      }\n    &quot;:1===o?&quot;\n      float &quot;+n+&quot;(int index) {\n        vec2 uv = vec2((float(index + &quot;+a+&quot;) + 0.5) / &quot;+i+&quot;.0, 0.5);\n        return sampleTexture(&quot;+e+&quot;, uv);\n      }\n    &quot;:&quot;\n    float &quot;+n+&quot;(int index) {\n      vec2 uv = uvFromFlat(&quot;+o+&quot;, &quot;+i+&quot;, index + &quot;+a+&quot;);\n      return sampleTexture(&quot;+e+&quot;, uv);\n    }\n  &quot;}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape;if(null!=o&amp;&amp;E(e,o)){var i=o[0];return&quot;\n    float &quot;+r+&quot;(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(&quot;+o[1]+&quot;.0, &quot;+i+&quot;.0);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;}var a=I(e),s=a.newShape,u=a.keptDims,c=s;if(c.length&lt;e.length)return&quot;\n      &quot;+_n(Mn(t,c))+&quot;\n      float &quot;+r+&quot;(int row, int col) {\n        return &quot;+r+&quot;(&quot;+On([&quot;row&quot;,&quot;col&quot;],u)+&quot;);\n      }\n    &quot;;if(t.shapeInfo.isUniform)return&quot;\n      float &quot;+r+&quot;(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(&quot;+e[1]+&quot;, 1)));\n        &quot;+An(t)+&quot;\n      }\n    &quot;;var l=o[0],h=o[1],p=Tn(n);return 1===h?&quot;\n    float &quot;+r+&quot;(int row, int col) {\n      float index = dot(vec3(row, col, &quot;+p+&quot;), vec3(&quot;+e[1]+&quot;, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / &quot;+l+&quot;.0);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;:1===l?&quot;\n    float &quot;+r+&quot;(int row, int col) {\n      float index = dot(vec3(row, col, &quot;+p+&quot;), vec3(&quot;+e[1]+&quot;, 1, 1));\n      vec2 uv = vec2((index + 0.5) / &quot;+h+&quot;.0, 0.5);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;:&quot;\n  float &quot;+r+&quot;(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * &quot;+e[1]+&quot; + col + &quot;+p+&quot;;\n    vec2 uv = uvFromFlat(&quot;+l+&quot;, &quot;+h+&quot;, index);\n    return sampleTexture(&quot;+n+&quot;, uv);\n  }\n&quot;}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=e[1]*e[2],i=e[2],a=I(e),s=a.newShape,u=a.keptDims,c=s;if(c.length&lt;e.length)return&quot;\n        &quot;+_n(Mn(t,c))+&quot;\n        float &quot;+r+&quot;(int row, int col, int depth) {\n          return &quot;+r+&quot;(&quot;+On([&quot;row&quot;,&quot;col&quot;,&quot;depth&quot;],u)+&quot;);\n        }\n      &quot;;if(t.shapeInfo.isUniform)return&quot;\n      float &quot;+r+&quot;(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(&quot;+o+&quot;, &quot;+i+&quot;, 1)));\n        &quot;+An(t)+&quot;\n      }\n    &quot;;var l=t.shapeInfo.texShape,h=l[0],p=l[1],f=t.shapeInfo.flatOffset;return p===o&amp;&amp;null==f?&quot;\n        float &quot;+r+&quot;(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(&quot;+i+&quot;, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(&quot;+p+&quot;.0, &quot;+h+&quot;.0);\n          return sampleTexture(&quot;+n+&quot;, uv);\n        }\n      &quot;:p===i&amp;&amp;null==f?&quot;\n    float &quot;+r+&quot;(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(&quot;+e[1]+&quot;, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(&quot;+p+&quot;.0, &quot;+h+&quot;.0);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;:&quot;\n      float &quot;+r+&quot;(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * &quot;+o+&quot; + col * &quot;+i+&quot; + depth + &quot;+Tn(n)+&quot;;\n        vec2 uv = uvFromFlat(&quot;+h+&quot;, &quot;+p+&quot;, index);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n  &quot;}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=e[3],i=e[2]*o,a=e[1]*i,s=I(e),u=s.newShape,c=s.keptDims;if(u.length&lt;e.length)return&quot;\n      &quot;+_n(Mn(t,u))+&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2) {\n        return &quot;+r+&quot;(&quot;+On([&quot;row&quot;,&quot;col&quot;,&quot;depth&quot;,&quot;depth2&quot;],c)+&quot;);\n      }\n    &quot;;if(t.shapeInfo.isUniform)return&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(&quot;+a+&quot;, &quot;+i+&quot;, &quot;+o+&quot;, 1)));\n        &quot;+An(t)+&quot;\n      }\n    &quot;;var l=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],f=h[1];return f===a&amp;&amp;null==l?&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(&quot;+i+&quot;, &quot;+o+&quot;, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(&quot;+f+&quot;.0, &quot;+p+&quot;.0);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n    &quot;:f===o&amp;&amp;null==l?&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(&quot;+e[1]*e[2]+&quot;, &quot;+e[2]+&quot;, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(&quot;+f+&quot;.0, &quot;+p+&quot;.0);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n    &quot;:&quot;\n    float &quot;+r+&quot;(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * &quot;+a+&quot; + col * &quot;+i+&quot; +\n          depth * &quot;+o+&quot; + depth2;\n      vec2 uv = uvFromFlat(&quot;+p+&quot;, &quot;+f+&quot;, index + &quot;+Tn(n)+&quot;);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],i=e[3]*o,a=e[2]*i,s=e[1]*a,u=I(e),c=u.newShape,l=u.keptDims;if(c.length&lt;e.length)return&quot;\n      &quot;+_n(Mn(t,c))+&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2, int depth3) {\n        return &quot;+r+&quot;(&quot;+On([&quot;row&quot;,&quot;col&quot;,&quot;depth&quot;,&quot;depth2&quot;,&quot;depth3&quot;],l)+&quot;);\n      }\n    &quot;;if(t.shapeInfo.isUniform)return&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(&quot;+s+&quot;, &quot;+a+&quot;, &quot;+i+&quot;, &quot;+o+&quot;)) +\n          depth3;\n        &quot;+An(t)+&quot;\n      }\n    &quot;;var h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],d=p[1];return d===s&amp;&amp;null==h?&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(&quot;+a+&quot;, &quot;+i+&quot;, &quot;+o+&quot;, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(&quot;+d+&quot;.0, &quot;+f+&quot;.0);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n    &quot;:d===o&amp;&amp;null==h?&quot;\n      float &quot;+r+&quot;(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(&quot;+e[1]*e[2]*e[3]+&quot;,\n               &quot;+e[2]*e[3]+&quot;, &quot;+e[3]+&quot;, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(&quot;+d+&quot;.0, &quot;+f+&quot;.0);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n    &quot;:&quot;\n    float &quot;+r+&quot;(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * &quot;+s+&quot; + col * &quot;+a+&quot; + depth * &quot;+i+&quot; +\n          depth2 * &quot;+o+&quot; + depth3 + &quot;+Tn(n)+&quot;;\n      vec2 uv = uvFromFlat(&quot;+f+&quot;, &quot;+d+&quot;, index);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=I(e),i=o.newShape,a=o.keptDims;if(i.length&lt;e.length)return&quot;\n      &quot;+_n(Mn(t,i))+&quot;\n      float &quot;+r+&quot;(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return &quot;+r+&quot;(&quot;+On([&quot;row&quot;,&quot;col&quot;,&quot;depth&quot;,&quot;depth2&quot;,&quot;depth3&quot;,&quot;depth4&quot;],a)+&quot;);\n      }\n    &quot;;var s=e[5],u=e[4]*s,c=e[3]*u,l=e[2]*c,h=e[1]*l;if(t.shapeInfo.isUniform)return&quot;\n      float &quot;+r+&quot;(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(&quot;+h+&quot;, &quot;+l+&quot;, &quot;+c+&quot;, &quot;+u+&quot;)) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(&quot;+s+&quot;, 1)));\n        &quot;+An(t)+&quot;\n      }\n    &quot;;var p=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],v=f[1];return v===h&amp;&amp;null==p?&quot;\n      float &quot;+r+&quot;(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(&quot;+l+&quot;, &quot;+c+&quot;, &quot;+u+&quot;, &quot;+s+&quot;)) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(&quot;+v+&quot;.0, &quot;+d+&quot;.0);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n    &quot;:v===s&amp;&amp;null==p?&quot;\n      float &quot;+r+&quot;(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(&quot;+e[1]*e[2]*e[3]*e[4]+&quot;,\n               &quot;+e[2]*e[3]*e[4]+&quot;,\n               &quot;+e[3]*e[4]+&quot;,\n               &quot;+e[4]+&quot;)) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(&quot;+v+&quot;.0, &quot;+d+&quot;.0);\n        return sampleTexture(&quot;+n+&quot;, uv);\n      }\n    &quot;:&quot;\n    float &quot;+r+&quot;(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * &quot;+h+&quot; + col * &quot;+l+&quot; + depth * &quot;+c+&quot; +\n          depth2 * &quot;+u+&quot; + depth3 * &quot;+s+&quot; + depth4 + &quot;+Tn(n)+&quot;;\n      vec2 uv = uvFromFlat(&quot;+d+&quot;, &quot;+v+&quot;, index);\n      return sampleTexture(&quot;+n+&quot;, uv);\n    }\n  &quot;}(t);default:throw new Error(e.length+&quot;-D input sampling is not yet supported&quot;)}}function Sn(t){switch(t.shapeInfo.logicalShape.length){case 0:return&quot;\n    vec4 get&quot;+(s=t.name).charAt(0).toUpperCase()+s.slice(1)+&quot;() {\n      return &quot;+wn().texture2D+&quot;(&quot;+s+&quot;, halfCR);\n    }\n  &quot;;case 1:return n=(e=t).name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],a=wn(),&quot;\n    vec4 &quot;+r+&quot;(int index) {\n      vec2 uv = packedUVfrom1D(\n        &quot;+i[0]+&quot;, &quot;+i[1]+&quot;, index);\n      return &quot;+a.texture2D+&quot;(&quot;+n+&quot;, uv);\n    }\n  &quot;;case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,i=o[0],a=o[1],s=wn();if(null!=o&amp;&amp;E(e,o))return&quot;\n      vec4 &quot;+r+&quot;(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(&quot;+a+&quot;.0, &quot;+i+&quot;.0);\n\n        return &quot;+s.texture2D+&quot;(&quot;+n+&quot;, uv);\n      }\n    &quot;;var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return&quot;\n    vec4 &quot;+r+&quot;(int row, int col) {\n      vec2 uv = packedUVfrom2D(&quot;+Math.ceil(e[1]/2)+&quot;, &quot;+u[0]+&quot;, &quot;+u[1]+&quot;, row, col);\n      return &quot;+s.texture2D+&quot;(&quot;+n+&quot;, uv);\n    }\n  &quot;}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r=&quot;get&quot;+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===e[0])return&quot;\n        &quot;+Sn(Mn(t,e.slice(1)))+&quot;\n        vec4 &quot;+r+&quot;(int b, int row, int col) {\n          return &quot;+r+&quot;(&quot;+On([&quot;b&quot;,&quot;row&quot;,&quot;col&quot;],[1,2])+&quot;);\n        }\n      &quot;;var a=i[0],s=i[1],u=Math.ceil(e[2]/2);return&quot;\n    vec4 &quot;+r+&quot;(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        &quot;+a+&quot;, &quot;+s+&quot;, &quot;+u*Math.ceil(e[1]/2)+&quot;, &quot;+u+&quot;, b, row, col);\n      return &quot;+wn().texture2D+&quot;(&quot;+n+&quot;, uv);\n    }\n  &quot;}(t);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,o=&quot;get&quot;+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=a[0],u=a[1],c=Math.ceil(e[n-1]/2),l=c*Math.ceil(e[n-2]/2),h=&quot;int b, int row, int col&quot;,p=&quot;b * &quot;+l+&quot; + (row / 2) * &quot;+c+&quot; + (col / 2)&quot;,f=2;f&lt;n-1;f++)h=&quot;int b&quot;+f+&quot;, &quot;+h,p=&quot;b&quot;+f+&quot; * &quot;+(l*=e[n-f-1])+&quot; + &quot;+p;return&quot;\n    vec4 &quot;+o+&quot;(&quot;+h+&quot;) {\n      int index = &quot;+p+&quot;;\n      int texR = index / &quot;+u+&quot;;\n      int texC = index - texR * &quot;+u+&quot;;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(&quot;+u+&quot;, &quot;+s+&quot;);\n      return &quot;+wn().texture2D+&quot;(&quot;+r+&quot;, uv);\n    }\n  &quot;}(t)}var e,n,r,o,i,a,s}var Rn=&quot;\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n&quot;,Nn=&quot;\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n&quot;,kn=&quot;\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n&quot;,In=&quot;\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n&quot;;function Tn(t){return&quot;offset&quot;+t}function An(t){var e=t.name,n=B(t.shapeInfo.logicalShape);return n&lt;2?&quot;return &quot;+e+&quot;;&quot;:&quot;\n    for (int i = 0; i &lt; &quot;+n+&quot;; i++) {\n      if (i == index) {\n        return &quot;+e+&quot;[i];\n      }\n    }\n  &quot;}function Dn(t){if(t&lt;=1)return&quot;int&quot;;if(2===t)return&quot;ivec2&quot;;if(3===t)return&quot;ivec3&quot;;if(4===t)return&quot;ivec4&quot;;if(5===t)return&quot;ivec5&quot;;if(6===t)return&quot;ivec6&quot;;throw Error(&quot;GPU for rank &quot;+t+&quot; is not yet supported&quot;)}function Mn(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function On(e,t){return t.map(function(t){return e[t]}).join(&quot;, &quot;)}var Pn=function(t,e,n,r){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0,D(2&lt;t.length,function(){return&quot;Packed arg&quot;+(n.charAt(0).toUpperCase()+n.slice(1))+&quot; supports only inputs with rank above 2.&quot;});var o=t[t.length-1],i=Math.ceil(o/e);this.outputShape=t.slice(0,-1),1&lt;i&amp;&amp;this.outputShape.push(i),r||this.variableNames.push(&quot;bestIndicesA&quot;);var a,s,u=this.outputShape,c=u.length,l=Dn(c),h=mn(&quot;coords&quot;,c);if(1===i){var p=Dn(s=c+1);a=&quot;\n        &quot;+p+&quot; sourceLocR = &quot;+p+&quot;(&quot;+h.join()+&quot;, 0);\n        ++&quot;+h[c-1]+&quot;;\n        &quot;+p+&quot; sourceLocG = &quot;+p+&quot;(&quot;+h.join()+&quot;, 0);\n        ++&quot;+h[c-2]+&quot;;\n        &quot;+p+&quot; sourceLocA = &quot;+p+&quot;(&quot;+h.join()+&quot;, 0);\n        --&quot;+h[c-1]+&quot;;\n        &quot;+p+&quot; sourceLocB = &quot;+p+&quot;(&quot;+h.join()+&quot;, 0);\n        --&quot;+h[c-2]+&quot;;&quot;}else a=&quot;\n        &quot;+l+&quot; sourceLocR = coords;\n        ++&quot;+h[(s=c)-1]+&quot;;\n        &quot;+l+&quot; sourceLocG = coords;\n        ++&quot;+h[c-2]+&quot;;\n        &quot;+l+&quot; sourceLocA = coords;\n        --&quot;+h[c-1]+&quot;;\n        &quot;+l+&quot; sourceLocB = coords;\n        --&quot;+h[c-2]+&quot;;&quot;;var f=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;w&quot;,&quot;u&quot;,&quot;v&quot;].slice(0,s),d=&quot;.&quot;+f[s-1],v=f.map(function(t){return&quot;int &quot;+t}),m=mn(&quot;sourceLocR&quot;,s-1).concat(&quot;inIdx.r&quot;),g=mn(&quot;sourceLocG&quot;,s-1).concat(&quot;inIdx.g&quot;),y=mn(&quot;sourceLocB&quot;,s-1).concat(&quot;inIdx.b&quot;),x=mn(&quot;sourceLocA&quot;,s-1).concat(&quot;inIdx.a&quot;),w=&quot;max&quot;===n?&quot;greaterThan&quot;:&quot;lessThan&quot;,b=r?&quot;&quot;:&quot;\n          inIdx = round(vec4(getBestIndicesAChannel(&quot;+m.join()+&quot;),\n                             getBestIndicesAChannel(&quot;+g.join()+&quot;),\n                             getBestIndicesAChannel(&quot;+y.join()+&quot;),\n                             getBestIndicesAChannel(&quot;+x.join()+&quot;)));&quot;,E=&quot;vec4(\n            getAChannel(&quot;+m.join()+&quot;),\n            hasNextCol ? getAChannel(&quot;+g.join()+&quot;) : 0.,\n            hasNextRow ? getAChannel(&quot;+y.join()+&quot;) : 0.,\n            hasNextRow &amp;&amp; hasNextCol ? getAChannel(&quot;+x.join()+&quot;) : 0.)&quot;,C=r?&quot;&quot;:&quot;\n      float getBestIndicesAChannel(&quot;+v.join()+&quot;) {\n        return getChannel(getBestIndicesA(&quot;+f.join()+&quot;),\n                                          vec2(&quot;+f.slice(-2).join()+&quot;));\n      }&quot;;this.userCode=&quot;\n      float getAChannel(&quot;+v.join()+&quot;) {\n        return getChannel(getA(&quot;+f.join()+&quot;),\n                               vec2(&quot;+f.slice(-2).join()+&quot;));\n      }\n      &quot;+C+&quot;\n      void main() {\n        &quot;+l+&quot; coords = getOutputCoords();\n        bool hasNextCol = &quot;+h[c-1]+&quot; &lt; &quot;+(u[c-1]-1)+&quot;;\n        bool hasNextRow = &quot;+h[c-2]+&quot; &lt; &quot;+(u[c-2]-1)+&quot;;\n        &quot;+a+&quot;\n        ivec4 srcIdx = ivec4(sourceLocR&quot;+d+&quot;, sourceLocG&quot;+d+&quot;,\n          sourceLocB&quot;+d+&quot;, sourceLocA&quot;+d+&quot;) * &quot;+e+&quot;;\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = &quot;+E+&quot;;\n\n        for (int i = 0; i &lt; &quot;+e+&quot;; i++) {\n          inIdx = srcIdx;\n          &quot;+b+&quot;\n          vec4 candidate = &quot;+E+&quot;;\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(&quot;+w+&quot;(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    &quot;},Fn=function(t){this.variableNames=[&quot;dy&quot;],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=s-1-t.padInfo.top,l=u-1-t.padInfo.left,h=1/(e*n);this.userCode=&quot;\n      const ivec2 pads = ivec2(&quot;+c+&quot;, &quot;+l+&quot;);\n      const float avgMultiplier = float(&quot;+h+&quot;);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR &lt; &quot;+s+&quot;;\n            wR += &quot;+i+&quot;) {\n          float dyR = float(dyRCorner + wR) / &quot;+r+&quot;.0;\n\n          if (dyR &lt; 0.0 || dyR &gt;= &quot;+t.outHeight+&quot;.0 || fract(dyR) &gt; 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC &lt; &quot;+u+&quot;;\n            wC+= &quot;+a+&quot;) {\n            float dyC = float(dyCCorner + wC) / &quot;+o+&quot;.0;\n\n            if (dyC &lt; 0.0 || dyC &gt;= &quot;+t.outWidth+&quot;.0 ||\n                fract(dyC) &gt; 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},Ln=function(t,e,n,r,o,i){this.outputShape=[],this.variableNames=[&quot;x&quot;,&quot;mean&quot;,&quot;variance&quot;],xn(t,e),xn(t,n);var a=&quot;0.0&quot;;null!=r&amp;&amp;(xn(t,r),this.variableNames.push(&quot;offset&quot;),a=&quot;getOffsetAtOutCoords()&quot;);var s=&quot;1.0&quot;;null!=o&amp;&amp;(xn(t,o),this.variableNames.push(&quot;scale&quot;),s=&quot;getScaleAtOutCoords()&quot;),this.outputShape=t,this.userCode=&quot;\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = &quot;+a+&quot;;\n        float scale = &quot;+s+&quot;;\n        float inv = scale * inversesqrt(variance + float(&quot;+i+&quot;));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    &quot;},Bn=function(t,e,n,r,o,i){this.usesPackedTextures=!0,this.variableNames=[&quot;x&quot;,&quot;mean&quot;,&quot;variance&quot;],xn(t,e),xn(t,n);var a=&quot;vec4(0.0)&quot;;null!=r&amp;&amp;(xn(t,r),this.variableNames.push(&quot;offset&quot;),a=&quot;getOffsetAtOutCoords()&quot;);var s=&quot;vec4(1.0)&quot;;null!=o&amp;&amp;(xn(t,o),this.variableNames.push(&quot;scale&quot;),s=&quot;getScaleAtOutCoords()&quot;),this.outputShape=t,this.userCode=&quot;\n      void main() {\n        vec4 offset = &quot;+a+&quot;;\n        vec4 scale = &quot;+s+&quot;;\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(&quot;+i+&quot;));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    &quot;},Wn=&quot;return areal * breal - aimag * bimag;&quot;,zn=&quot;return areal * bimag + aimag * breal;&quot;,Un=function(t,e,n){this.variableNames=[&quot;AReal&quot;,&quot;AImag&quot;,&quot;BReal&quot;,&quot;BImag&quot;],this.outputShape=xn(e,n),this.userCode=&quot;\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        &quot;+t+&quot;\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    &quot;},Gn=&quot;return a + b;&quot;,Vn=&quot;return a - b;&quot;,Hn=&quot;return a * b;&quot;,qn=&quot;return (a - b) * (a - b);&quot;,jn=function(t,e,n){this.variableNames=[&quot;A&quot;,&quot;B&quot;],this.outputShape=xn(e,n),this.userCode=&quot;\n      float binaryOperation(float a, float b) {\n        &quot;+t+&quot;\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    &quot;},$n=function(t,e,n){this.variableNames=[&quot;A&quot;,&quot;B&quot;],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=xn(e,n),this.userCode=&quot;\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        &quot;+t+&quot;\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    &quot;},Kn=function(){function t(t){this.variableNames=[&quot;A&quot;],this.outputShape=t,this.userCode=&quot;\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, min, max));\n      }\n    &quot;}return t.prototype.getCustomSetupFunc=function(n,r){var o=this;return function(t,e){null==o.minLoc&amp;&amp;(o.minLoc=t.getUniformLocationNoThrow(e,&quot;min&quot;),o.maxLoc=t.getUniformLocationNoThrow(e,&quot;max&quot;)),t.gl.uniform1f(o.minLoc,n),t.gl.uniform1f(o.maxLoc,r)}},t}(),Xn=function(){function t(t){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0,this.outputShape=t,this.userCode=&quot;\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(min), vec4(max)));\n      }\n    &quot;}return t.prototype.getCustomSetupFunc=function(n,r){var o=this;return function(t,e){null==o.minLoc&amp;&amp;(o.minLoc=t.getUniformLocationNoThrow(e,&quot;min&quot;),o.maxLoc=t.getUniformLocationNoThrow(e,&quot;max&quot;)),t.gl.uniform1f(o.minLoc,n),t.gl.uniform1f(o.maxLoc,r)}},t}(),Yn=function(t){this.variableNames=[&quot;real&quot;,&quot;imag&quot;],this.outputShape=t,this.userCode=&quot;\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    &quot;},Qn=function(t){this.outputShape=[],this.outputShape=Re(t,1),this.variableNames=t.map(function(t,e){return&quot;T&quot;+e});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n&lt;e.length;n++)e[n]=e[n-1]+t[n][1];var r=[&quot;if (yC &lt; &quot;+e[0]+&quot;) setOutput(getT0(yR, yC));&quot;];for(n=1;n&lt;e.length;n++){var o=e[n-1];r.push(&quot;else if (yC &lt; &quot;+e[n]+&quot;) setOutput(getT&quot;+n+&quot;(yR, yC-&quot;+o+&quot;));&quot;)}var i=e.length,a=e[e.length-1];r.push(&quot;else setOutput(getT&quot;+i+&quot;(yR, yC-&quot;+a+&quot;));&quot;),this.userCode=&quot;\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        &quot;+r.join(&quot;\n        &quot;)+&quot;\n      }\n    &quot;},Jn=function(t,e){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Re(t,e);var n=this.outputShape,r=n.length,o=Dn(r),i=mn(&quot;coords&quot;,r),a=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;w&quot;,&quot;u&quot;,&quot;v&quot;].slice(0,r);this.variableNames=t.map(function(t,e){return&quot;T&quot;+e});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u&lt;s.length;u++)s[u]=s[u-1]+t[u][e];var c=a[e],l=&quot;vec2(&quot;+a.slice(-2).join()+&quot;)&quot;,h=a.join(),p=&quot;if (&quot;+c+&quot; &lt; &quot;+s[0]+&quot;)\n          return getChannel(getT0(&quot;+h+&quot;), &quot;+l+&quot;);&quot;;for(u=1;u&lt;s.length;u++){var f=s[u-1];p+=&quot;\n        else if (&quot;+c+&quot; &lt; &quot;+s[u]+&quot;) {\n          &quot;+c+&quot; -= &quot;+f+&quot;;\n          return getChannel(getT&quot;+u+&quot;(&quot;+h+&quot;), &quot;+l+&quot;);\n        }&quot;}var d=s.length;p+=&quot;\n        else {\n          &quot;+c+&quot; -= &quot;+s[s.length-1]+&quot;;\n          return getChannel(getT&quot;+d+&quot;(&quot;+h+&quot;), &quot;+l+&quot;);\n        }&quot;,this.userCode=&quot;\n      float getValue(&quot;+a.map(function(t){return&quot;int &quot;+t})+&quot;) {\n        &quot;+p+&quot;\n      }\n\n      void main() {\n        &quot;+o+&quot; coords = getOutputCoords();\n        vec4 result = vec4(getValue(&quot;+i+&quot;), 0., 0., 0.);\n        if (++&quot;+i[r-1]+&quot; &lt; &quot;+n[r-1]+&quot;) {\n          result.g = getValue(&quot;+i+&quot;);\n        }\n        if (++&quot;+i[r-2]+&quot; &lt; &quot;+n[r-2]+&quot;) {\n          result.a = getValue(&quot;+i+&quot;);\n        }\n        if (&quot;+i[r-2]+&quot; &lt; &quot;+n[r-2]+&quot; &amp;&amp;\n            --&quot;+i[r-1]+&quot; &lt; &quot;+n[r-1]+&quot;) {\n          result.b = getValue(&quot;+i+&quot;);\n        }\n        setOutput(result);\n      }\n    &quot;},Zn=function(t){this.variableNames=[&quot;x&quot;,&quot;dy&quot;],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left;this.userCode=&quot;\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b &lt; &quot;+t.batchSize+&quot;; b++) {\n          for (int yR = 0; yR &lt; &quot;+t.outHeight+&quot;; yR++) {\n            int xR = wR + yR * &quot;+e+&quot; - &quot;+r+&quot;;\n\n            if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n              continue;\n            }\n\n            for (int yC = 0; yC &lt; &quot;+t.outWidth+&quot;; yC++) {\n              int xC = wC + yC * &quot;+n+&quot; - &quot;+o+&quot;;\n\n              if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},tr=function(t){this.variableNames=[&quot;dy&quot;,&quot;W&quot;],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,i=e-1-t.padInfo.top,a=n-1-t.padInfo.left;this.userCode=&quot;\n      const ivec2 pads = ivec2(&quot;+i+&quot;, &quot;+a+&quot;);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR &lt; &quot;+e+&quot;; wR++) {\n          float dyR = float(dyRCorner + wR) / &quot;+r+&quot;.0;\n\n          if (dyR &lt; 0.0 || dyR &gt;= &quot;+t.outHeight+&quot;.0 || fract(dyR) &gt; 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = &quot;+e+&quot; - 1 - wR;\n\n          for (int wC = 0; wC &lt; &quot;+n+&quot;; wC++) {\n            float dyC = float(dyCCorner + wC) / &quot;+o+&quot;.0;\n\n            if (dyC &lt; 0.0 || dyC &gt;= &quot;+t.outWidth+&quot;.0 ||\n                fract(dyC) &gt; 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = &quot;+n+&quot; - 1 - wC;\n\n            for (int d2 = 0; d2 &lt; &quot;+t.outChannels+&quot;; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},er=function(t){this.variableNames=[&quot;x&quot;,&quot;dy&quot;],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,a=t.padInfo.left;this.userCode=&quot;\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b &lt; &quot;+t.batchSize+&quot;; b++) {\n          for (int yF = 0; yF &lt; &quot;+t.outDepth+&quot;; yF++) {\n            int xF = wF + yF * &quot;+e+&quot; - &quot;+o+&quot;;\n\n            if (xF &lt; 0 || xF &gt;= &quot;+t.inDepth+&quot;) {\n              continue;\n            }\n\n            for (int yR = 0; yR &lt; &quot;+t.outHeight+&quot;; yR++) {\n              int xR = wR + yR * &quot;+n+&quot; - &quot;+i+&quot;;\n\n              if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n                continue;\n              }\n\n              for (int yC = 0; yC &lt; &quot;+t.outWidth+&quot;; yC++) {\n                int xC = wC + yC * &quot;+r+&quot; - &quot;+a+&quot;;\n\n                if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},nr=function(t){this.variableNames=[&quot;dy&quot;,&quot;W&quot;],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode=&quot;\n      const ivec3 pads = ivec3(&quot;+s+&quot;, &quot;+u+&quot;, &quot;+c+&quot;);\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF &lt; &quot;+e+&quot;; wF++) {\n          float dyF = float(dyFCorner + wF) / &quot;+o+&quot;.0;\n\n          if (dyF &lt; 0.0 || dyF &gt;= &quot;+t.outDepth+&quot;.0 || fract(dyF) &gt; 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = &quot;+e+&quot; - 1 - wF;\n\n          for (int wR = 0; wR &lt; &quot;+n+&quot;; wR++) {\n            float dyR = float(dyRCorner + wR) / &quot;+i+&quot;.0;\n\n            if (dyR &lt; 0.0 || dyR &gt;= &quot;+t.outHeight+&quot;.0 ||\n              fract(dyR) &gt; 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = &quot;+n+&quot; - 1 - wR;\n\n            for (int wC = 0; wC &lt; &quot;+r+&quot;; wC++) {\n              float dyC = float(dyCCorner + wC) / &quot;+a+&quot;.0;\n\n              if (dyC &lt; 0.0 || dyC &gt;= &quot;+t.outWidth+&quot;.0 ||\n                  fract(dyC) &gt; 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = &quot;+r+&quot; - 1 - wC;\n\n              for (int d2 = 0; d2 &lt; &quot;+t.outChannels+&quot;; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},rr=function(t){this.variableNames=[&quot;x&quot;,&quot;dy&quot;],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=&quot;\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * &quot;+i+&quot; + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b &lt; &quot;+t.batchSize+&quot;; b++) {\n          for (int yR = 0; yR &lt; &quot;+t.outHeight+&quot;; yR++) {\n            int xR = wR + yR * &quot;+e+&quot; - &quot;+r+&quot;;\n\n            if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n              continue;\n            }\n\n            for (int yC = 0; yC &lt; &quot;+t.outWidth+&quot;; yC++) {\n              int xC = wC + yC * &quot;+n+&quot; - &quot;+o+&quot;;\n\n              if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},or=function(t){this.variableNames=[&quot;dy&quot;,&quot;W&quot;],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,i=e-1-t.padInfo.top,a=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=&quot;\n      const ivec2 pads = ivec2(&quot;+i+&quot;, &quot;+a+&quot;);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR &lt; &quot;+e+&quot;; wR++) {\n          float dyR = float(dyRCorner + wR) / &quot;+r+&quot;.0;\n\n          if (dyR &lt; 0.0 || dyR &gt;= &quot;+t.outHeight+&quot;.0 || fract(dyR) &gt; 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = &quot;+e+&quot; - 1 - wR;\n\n          for (int wC = 0; wC &lt; &quot;+n+&quot;; wC++) {\n            float dyC = float(dyCCorner + wC) / &quot;+o+&quot;.0;\n\n            if (dyC &lt; 0.0 || dyC &gt;= &quot;+t.outWidth+&quot;.0 ||\n                fract(dyC) &gt; 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = &quot;+n+&quot; - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm &lt; &quot;+s+&quot;; dm++) {\n              int d2 = d1 * &quot;+s+&quot; + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},ir=function(t){this.variableNames=[&quot;x&quot;,&quot;W&quot;],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.filterHeight,u=t.filterWidth,c=4*Math.floor(t.inChannels/4),l=t.inChannels%4;this.userCode=&quot;\n      const ivec2 strides = ivec2(&quot;+r+&quot;, &quot;+o+&quot;);\n      const ivec2 pads = ivec2(&quot;+e+&quot;, &quot;+n+&quot;);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR &lt; &quot;+s+&quot;; wR++) {\n          int xR = xRCorner + wR * &quot;+i+&quot;;\n\n          if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n            continue;\n          }\n\n          for (int wC = 0; wC &lt; &quot;+u+&quot;; wC++) {\n            int xC = xCCorner + wC * &quot;+a+&quot;;\n\n            if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 &lt; &quot;+c+&quot;; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if (&quot;+(1===l)+&quot;) {\n              dotProd +=\n                getX(batch, xR, xC, &quot;+c+&quot;) *\n                getW(wR, wC, &quot;+c+&quot;, d2);\n            } else if (&quot;+(2===l)+&quot;) {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, &quot;+c+&quot;),\n                getX(batch, xR, xC, &quot;+c+&quot; + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, &quot;+c+&quot;, d2),\n                getW(wR, wC, &quot;+c+&quot; + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if (&quot;+(3===l)+&quot;) {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, &quot;+c+&quot;),\n                getX(batch, xR, xC, &quot;+c+&quot; + 1),\n                getX(batch, xR, xC, &quot;+c+&quot; + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, &quot;+c+&quot;, d2),\n                getW(wR, wC, &quot;+c+&quot; + 1, d2),\n                getW(wR, wC, &quot;+c+&quot; + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},ar=function(t){this.variableNames=[&quot;x&quot;,&quot;W&quot;],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,h=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),d=t.inChannels%4;this.userCode=&quot;\n      const ivec3 strides = ivec3(&quot;+o+&quot;, &quot;+i+&quot;, &quot;+a+&quot;);\n      const ivec3 pads = ivec3(&quot;+e+&quot;, &quot;+n+&quot;, &quot;+r+&quot;);\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF &lt; &quot;+l+&quot;; wF++) {\n          int xF = xFCorner + wF * &quot;+s+&quot;;\n\n          if (xF &lt; 0 || xF &gt;= &quot;+t.inDepth+&quot;) {\n            continue;\n          }\n\n          for (int wR = 0; wR &lt; &quot;+h+&quot;; wR++) {\n            int xR = xRCorner + wR * &quot;+u+&quot;;\n\n            if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n              continue;\n            }\n\n            for (int wC = 0; wC &lt; &quot;+p+&quot;; wC++) {\n              int xC = xCCorner + wC * &quot;+c+&quot;;\n\n              if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 &lt; &quot;+f+&quot;; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (&quot;+(1===d)+&quot;) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, &quot;+f+&quot;) *\n                  getW(wF, wR, wC, &quot;+f+&quot;, d2);\n              } else if (&quot;+(2===d)+&quot;) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, &quot;+f+&quot;),\n                  getX(batch, xF, xR, xC, &quot;+f+&quot; + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, &quot;+f+&quot;, d2),\n                  getW(wF, wR, wC, &quot;+f+&quot; + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (&quot;+(3===d)+&quot;) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, &quot;+f+&quot;),\n                  getX(batch, xF, xR, xC, &quot;+f+&quot; + 1),\n                  getX(batch, xF, xR, xC, &quot;+f+&quot; + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, &quot;+f+&quot;, d2),\n                  getW(wF, wR, wC, &quot;+f+&quot; + 1, d2),\n                  getW(wF, wR, wC, &quot;+f+&quot; + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},sr=function(t){this.variableNames=[&quot;x&quot;,&quot;W&quot;],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,i=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,h=t.outChannels/t.inChannels;this.userCode=&quot;\n      const ivec2 strides = ivec2(&quot;+i+&quot;, &quot;+a+&quot;);\n      const ivec2 pads = ivec2(&quot;+r+&quot;, &quot;+o+&quot;);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / &quot;+h+&quot;;\n        int q = d2 - d1 * &quot;+h+&quot;;\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR &lt; &quot;+c+&quot;; wR++) {\n          int xR = xRCorner + wR * &quot;+s+&quot;;\n\n          if (xR &lt; 0 || xR &gt;= &quot;+e+&quot;) {\n            continue;\n          }\n\n          for (int wC = 0; wC &lt; &quot;+l+&quot;; wC++) {\n            int xC = xCCorner + wC * &quot;+u+&quot;;\n\n            if (xC &lt; 0 || xC &gt;= &quot;+n+&quot;) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},ur=function(t){this.variableNames=[&quot;x&quot;,&quot;W&quot;],this.usesPackedTextures=!0,this.outputShape=t.outShape;for(var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,i=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,h=l,p=&quot;int xR; int xC; int xCOffset;&quot;,f=0;f&lt;c;f++)for(var d=0;d&lt;l;d++)p+=&quot;\n          vec4 xTexelR&quot;+f+&quot;C&quot;+2*d+&quot; = vec4(0.);\n          vec4 wR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);\n          vec4 xR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);&quot;;for(f=0;f&lt;c;f++)for(var v=0;v&lt;h;v++){if(p+=&quot;\n          xR = xRCorner + &quot;+f*s+&quot;;\n          xC = xCCorner + &quot;+(d=2*v)*u+&quot;;\n        &quot;,1===a){if(d&lt;l&amp;&amp;(p+=o%2==1?&quot;\n                xCOffset = xC + 1;\n                if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot; &amp;&amp; xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot; &amp;&amp; xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR&quot;+f+&quot;C&quot;+d+&quot; = vec4(previous.zw, xTexelR&quot;+f+&quot;C&quot;+d+&quot;.xy);\n                } else {\n                  xR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0, 0, xTexelR&quot;+f+&quot;C&quot;+d+&quot;.xy);\n                }\n              &quot;:&quot;\n                if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot; &amp;&amp; xC &gt;= 0 &amp;&amp; xC &lt; &quot;+n+&quot;) {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);\n                }\n\n                xR&quot;+f+&quot;C&quot;+d+&quot; = xTexelR&quot;+f+&quot;C&quot;+d+&quot;;\n              &quot;,d+1&lt;l)){var m=o%2==0?_(u):u;u%2==0&amp;&amp;o%2==1||u%2!=0&amp;&amp;o%2!=1?(p+=&quot;\n                  xCOffset = xC + &quot;+o%2+&quot; + &quot;+m+&quot;;\n\n                  if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot; &amp;&amp;\n                    xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                    xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot; = getX(batch, xR, xCOffset, d1);\n                  }\n                &quot;,1&lt;u&amp;&amp;(p+=&quot;\n                    xCOffset -= 2;\n                    if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot; &amp;&amp;\n                      xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                      xTexelR&quot;+f+&quot;C&quot;+d+&quot; = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);\n                    }\n                  &quot;),p+=&quot;\n                  xR&quot;+f+&quot;C&quot;+(d+1)+&quot; = vec4(\n                    xTexelR&quot;+f+&quot;C&quot;+d+&quot;.zw, xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot;.xy);\n                &quot;):p+=&quot;\n                  xCOffset = xC + &quot;+m+&quot;;\n\n                  if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot; &amp;&amp;\n                    xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                    xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot; = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR&quot;+f+&quot;C&quot;+(d+1)+&quot; = xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot;;\n                &quot;}}else d&lt;l&amp;&amp;(p+=&quot;\n              if(xR &gt;= 0 &amp;&amp; xR &lt; &quot;+e+&quot;) {\n            &quot;,o%2==1?(p+=&quot;\n                xCOffset = xC + 1 - &quot;+a+&quot;;\n                if(xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);\n                }\n\n                if(xC + 1 &gt;= 0 &amp;&amp; xC + 1 &lt; &quot;+n+&quot;) {\n                  xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot; = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot; = vec4(0.);\n                }\n\n                xR&quot;+f+&quot;C&quot;+d+&quot; = vec4(\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot;.zw, xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot;.zw);\n              &quot;,d+1&lt;l&amp;&amp;(p+=&quot;\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + &quot;+a+&quot;;\n                  if(xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR&quot;+f+&quot;C&quot;+(d+1)+&quot; = vec4(xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot;.xy, final.xy);\n                &quot;)):(p+=&quot;\n                if(xC &gt;= 0 &amp;&amp; xC &lt; &quot;+n+&quot;) {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot; = vec4(0.);\n                }\n\n                xCOffset = xC + &quot;+a+&quot;;\n                if(xCOffset &gt;= 0 &amp;&amp; xCOffset &lt; &quot;+n+&quot;) {\n                  xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot; = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot; = vec4(0.);\n                }\n\n                xR&quot;+f+&quot;C&quot;+d+&quot; = vec4(\n                  xTexelR&quot;+f+&quot;C&quot;+d+&quot;.xy, xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot;.xy);\n              &quot;,d+1&lt;l&amp;&amp;(p+=&quot;\n                  xR&quot;+f+&quot;C&quot;+(d+1)+&quot; = vec4(\n                    xTexelR&quot;+f+&quot;C&quot;+d+&quot;.zw, xTexelR&quot;+f+&quot;C&quot;+(d+2)+&quot;.zw);\n                &quot;)),p+=&quot;}&quot;);d&lt;l&amp;&amp;(p+=&quot;\n            vec4 wTexelR&quot;+f+&quot;C&quot;+d+&quot; = getW(&quot;+f+&quot;, &quot;+d+&quot;, d1, q);\n            wR&quot;+f+&quot;C&quot;+d+&quot; = vec4(wTexelR&quot;+f+&quot;C&quot;+d+&quot;.xz, wTexelR&quot;+f+&quot;C&quot;+d+&quot;.xz);\n          &quot;,d+1&lt;l&amp;&amp;(p+=&quot;\n              vec4 wTexelR&quot;+f+&quot;C&quot;+(d+1)+&quot; = getW(&quot;+f+&quot;, &quot;+(d+1)+&quot;, d1, q);\n              wR&quot;+f+&quot;C&quot;+(d+1)+&quot; =\n                vec4(wTexelR&quot;+f+&quot;C&quot;+(d+1)+&quot;.xz, wTexelR&quot;+f+&quot;C&quot;+(d+1)+&quot;.xz);&quot;))}for(f=0;f&lt;c;f++)for(d=0;d&lt;l;d++)p+=&quot;result += xR&quot;+f+&quot;C&quot;+d+&quot; * wR&quot;+f+&quot;C&quot;+d+&quot;;&quot;;this.userCode=&quot;\n      const ivec2 strides = ivec2(&quot;+i+&quot;, &quot;+a+&quot;);\n      const ivec2 pads = ivec2(&quot;+r+&quot;, &quot;+o+&quot;);\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 result = vec4(0.);\n\n        &quot;+p+&quot;\n\n        setOutput(result);\n      }\n    &quot;},cr=function(t,e,n,r,o){this.variableNames=[&quot;Image&quot;,&quot;Boxes&quot;,&quot;BoxInd&quot;],this.outputShape=[];var i=t[0],a=t[1],s=t[2],u=t[3],c=e[0],l=n[0],h=n[1];this.outputShape=[c,l,h,u];var p=&quot;bilinear&quot;===r?1:0,f=[a-1+&quot;.0&quot;,s-1+&quot;.0&quot;],d=f[0],v=f[1],m=1&lt;l?[&quot;&quot;+(a-1)/(l-1),&quot;(y2-y1) * height_ratio&quot;,&quot;y1*&quot;+d+&quot; + float(y)*(height_scale)&quot;]:[&quot;0.0&quot;,&quot;0.0&quot;,&quot;0.5 * (y1+y2) * &quot;+d],g=m[0],y=m[1],x=m[2],w=1&lt;h?[&quot;&quot;+(s-1)/(h-1),&quot;(x2-x1) * width_ratio&quot;,&quot;x1*&quot;+v+&quot; + float(x)*(width_scale)&quot;]:[&quot;0.0&quot;,&quot;0.0&quot;,&quot;0.5 * (x1+x2) * &quot;+v],b=w[0],E=w[1],C=w[2];this.userCode=&quot;\n      const float height_ratio = float(&quot;+g+&quot;);\n      const float width_ratio = float(&quot;+b+&quot;);\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd &lt; 0 || bInd &gt;= &quot;+i+&quot;) {\n          return;\n        }\n\n        float height_scale = &quot;+y+&quot;;\n        float width_scale = &quot;+E+&quot;;\n\n        float in_y = &quot;+x+&quot;;\n        if( in_y &lt; 0.0 || in_y &gt; &quot;+d+&quot; ) {\n          setOutput(float(&quot;+o+&quot;));\n          return;\n        }\n        float in_x = &quot;+C+&quot;;\n        if( in_x &lt; 0.0 || in_x &gt; &quot;+v+&quot; ) {\n          setOutput(float(&quot;+o+&quot;));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(&quot;+p+&quot; == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    &quot;},lr=function(t,e,n){this.variableNames=[&quot;x&quot;];var r=(this.outputShape=t).length,o=t[t.length-1],i=n?&quot;&lt;&quot;:&quot;&gt;&quot;;this.userCode=&quot;\n      int getIndex(int i) {\n        &quot;+(n?&quot;return &quot;+o+&quot; -i - 1;&quot;:&quot;return i;&quot;)+&quot;\n      }\n\n      void main() {\n        &quot;+Dn(r)+&quot; coords = getOutputCoords();\n        int end = &quot;+hr(r,&quot;coords&quot;)+&quot;;\n        float val = 0.0;\n        for (int i = &quot;+o+&quot; - 1; i &gt;= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx &quot;+i+&quot; end) {\n            continue;\n          }\n          if (idx == end &amp;&amp; &quot;+e+&quot;) {\n            continue;\n          }\n          &quot;+hr(r,&quot;coords&quot;)+&quot; = idx;\n          val += getX(&quot;+function(t,e){if(1===t)return&quot;&quot;+e;if(2===t)return e+&quot;.x, &quot;+e+&quot;.y&quot;;if(3===t)return e+&quot;.x, &quot;+e+&quot;.y, &quot;+e+&quot;.z&quot;;if(4===t)return e+&quot;.x, &quot;+e+&quot;.y, &quot;+e+&quot;.z, &quot;+e+&quot;.w&quot;;throw Error(&quot;Cumulative sum for rank &quot;+t+&quot; is not yet supported&quot;)}(r,&quot;coords&quot;)+&quot;);\n        }\n        setOutput(val);\n      }\n    &quot;};function hr(t,e){if(1===t)return&quot;&quot;+e;if(2===t)return e+&quot;.y&quot;;if(3===t)return e+&quot;.z&quot;;if(4===t)return e+&quot;.w&quot;;throw Error(&quot;Cumulative sum for rank &quot;+t+&quot; is not yet supported&quot;)}var pr=function(){function t(t,e,n){this.variableNames=[&quot;x&quot;],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=&quot;\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = &quot;+this.getHeightCoordString()+&quot;;\n      int w = &quot;+this.getWidthCoordString()+&quot;;\n      int d = &quot;+this.getDepthCoordString()+&quot;;\n\n      int in_h = h / &quot;+e+&quot;;\n      int offset_h = imod(h, &quot;+e+&quot;);\n      int in_w = w / &quot;+e+&quot;;\n      int offset_w = imod(w, &quot;+e+&quot;);\n      int offset_d = (offset_h * &quot;+e+&quot; + offset_w) *\n        &quot;+this.getOutputDepthSize()+&quot;;\n      int in_d = d + offset_d;\n\n      float result = &quot;+this.getInputSamplingString()+&quot;;\n      setOutput(result);\n    }\n  &quot;}return t.prototype.getHeightCoordString=function(){return&quot;NHWC&quot;===this.dataFormat?&quot;coords[1]&quot;:&quot;coords[2]&quot;},t.prototype.getWidthCoordString=function(){return&quot;NHWC&quot;===this.dataFormat?&quot;coords[2]&quot;:&quot;coords[3]&quot;},t.prototype.getDepthCoordString=function(){return&quot;NHWC&quot;===this.dataFormat?&quot;coords[3]&quot;:&quot;coords[1]&quot;},t.prototype.getOutputDepthSize=function(){return&quot;NHWC&quot;===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return&quot;NHWC&quot;===this.dataFormat?&quot;getX(b, in_h, in_w, in_d)&quot;:&quot;getX(b, in_d, in_h, in_w)&quot;},t}(),fr=function(t){this.variableNames=[&quot;A&quot;];var e=wn();this.outputShape=t,this.userCode=&quot;\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isnan(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av &lt; FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v &gt; FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v &lt; -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        &quot;+e.output+&quot; = encode_float(x);\n      }\n    &quot;},dr=&quot;return real * expR - imag * expI;&quot;,vr=&quot;return real * expI + imag * expR;&quot;,mr=function(t,e,n){this.variableNames=[&quot;real&quot;,&quot;imag&quot;];var r=e[1];this.outputShape=e;var o=n?&quot;2.0 * &quot;+Math.PI:&quot;-2.0 * &quot;+Math.PI,i=n?r+&quot;.0&quot;:&quot;1.0&quot;;this.userCode=&quot;\n      const float exponentMultiplier = &quot;+o+&quot;;\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        &quot;+t+&quot;\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(&quot;+r+&quot;);\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i &lt; &quot;+r+&quot;; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / &quot;+i+&quot;;\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    &quot;},gr=function(){function t(t,e){this.outputShape=[],this.variableNames=[&quot;x&quot;],this.outputShape=t,this.userCode=&quot;\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    &quot;}return t.prototype.getCustomSetupFunc=function(n){var r=this;return function(t,e){null==r.valueLoc&amp;&amp;(r.valueLoc=t.getUniformLocationNoThrow(e,&quot;value&quot;)),t.gl.uniform1f(r.valueLoc,n)}},t}(),yr=function(t){this.variableNames=[&quot;A&quot;];var e=wn(),n=t[0],r=t[1];this.outputShape=t,this.userCode=&quot;\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(&quot;+r+&quot;.0, &quot;+n+&quot;.0);\n\n        vec4 values = &quot;+e.texture2D+&quot;(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    &quot;},xr=function(t,e,n){this.variableNames=[&quot;A&quot;,&quot;indices&quot;];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Dn(this.rank),i=function(t,e){var n=t.length;if(4&lt;n)throw Error(&quot;Gather for rank &quot;+n+&quot; is not yet supported&quot;);if(1===n)return&quot;int(getIndices(resRC))&quot;;for(var r=[&quot;resRC.x&quot;,&quot;resRC.y&quot;,&quot;resRC.z&quot;,&quot;resRC.w&quot;],o=[],i=0;i&lt;t.length;i++)i===e?o.push(&quot;int(getIndices(&quot;+r[i]+&quot;))&quot;):o.push(&quot;&quot;+r[i]);return o.join()}(t,n);this.userCode=&quot;\n      void main() {\n        &quot;+o+&quot; resRC = getOutputCoords();\n        setOutput(getA(&quot;+i+&quot;));\n      }\n    &quot;};var wr,br,Er,Cr,_r=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=[&quot;x&quot;,&quot;indices&quot;],this.outputShape=n;var r=Dn(e.length),o=Dn(n.length),i=1&lt;this.sliceDim?&quot;strides[j]&quot;:&quot;strides&quot;;this.userCode=&quot;\n        &quot;+r+&quot; strides = &quot;+r+&quot;(&quot;+this.strides+&quot;);\n         void main() {\n          &quot;+o+&quot; coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j &lt; &quot;+this.sliceDim+&quot;; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * &quot;+i+&quot;;\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      &quot;};function Sr(t,e){return[e,t]}function Rr(t,e){return t*e}function Nr(t,e,n){var r=function(t,e){if(t%e!=0)throw new Error(&quot;unpackedSize (&quot;+t+&quot;) must be a multiple of &quot;+e);return t/e}(t.length,n);if(e.length&lt;r)throw new Error(&quot;matrix length (&quot;+e.length+&quot;) must be &gt;= &quot;+r);for(var o=0,i=0;i&lt;t.length;i+=n)e[o++]=t[i]}function kr(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Ir(t,e){var n=kr(t,e);return n[0]*n[1]*4}function Tr(t,e,n,r,o){var i=n*r;if(o.length&lt;i)throw new Error(&quot;matrix length (&quot;+o.length+&quot;) must be &gt;= &quot;+i);for(var a=r%2==1,s=n%2==1,u=Math.floor(r/2),c=Math.floor(n/2),l=Math.ceil(r/2),h=l*Math.ceil(n/2),p=_(n)*_(r),f=0;f&lt;e;f++){for(var d=f*n*r,v=f*p,m=a?4:0,g=r+(a?1:0),y=v,x=d,w=d+r,b=0;b&lt;c;++b){for(var E=0;E&lt;u;++E)o[x++]=t[y++],o[x++]=t[y++],o[w++]=t[y++],o[w++]=t[y++];y+=m,x+=g,w+=g}if(a){y=v+4*(l-1);var C=d+r-1;for(m=4*l,g=2*r,b=0;b&lt;c;++b)o[C]=t[y],o[C+r]=t[y+2],y+=m,C+=g}if(s){for(y=v+4*(h-l),C=d+(n-1)*r,E=0;E&lt;u;++E)o[C++]=t[y++],o[C++]=t[y++],y+=2;a&amp;&amp;(o[d+n*r-1]=t[y])}}return o}function Ar(t,e,n){var r=n();return e&amp;&amp;function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error(&quot;WebGL Error: &quot;+Mr(t,e))}(t),r}(Cr=wr||(wr={}))[Cr.RENDER=0]=&quot;RENDER&quot;,Cr[Cr.UPLOAD=1]=&quot;UPLOAD&quot;,Cr[Cr.PIXELS=2]=&quot;PIXELS&quot;,Cr[Cr.DOWNLOAD=3]=&quot;DOWNLOAD&quot;,(Er=br||(br={}))[Er.UNPACKED_FLOAT16=0]=&quot;UNPACKED_FLOAT16&quot;,Er[Er.UNPACKED_FLOAT32=1]=&quot;UNPACKED_FLOAT32&quot;,Er[Er.PACKED_4X1_UNSIGNED_BYTE=2]=&quot;PACKED_4X1_UNSIGNED_BYTE&quot;,Er[Er.PACKED_2X2_FLOAT32=3]=&quot;PACKED_2X2_FLOAT32&quot;,Er[Er.PACKED_2X2_FLOAT16=4]=&quot;PACKED_2X2_FLOAT16&quot;;function Dr(t){return!!(Zt.get(&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;)||0===t||5.96e-8&lt;Math.abs(t)&amp;&amp;Math.abs(t)&lt;65504)}function Mr(t,e){switch(e){case t.NO_ERROR:return&quot;NO_ERROR&quot;;case t.INVALID_ENUM:return&quot;INVALID_ENUM&quot;;case t.INVALID_VALUE:return&quot;INVALID_VALUE&quot;;case t.INVALID_OPERATION:return&quot;INVALID_OPERATION&quot;;case t.INVALID_FRAMEBUFFER_OPERATION:return&quot;INVALID_FRAMEBUFFER_OPERATION&quot;;case t.OUT_OF_MEMORY:return&quot;OUT_OF_MEMORY&quot;;case t.CONTEXT_LOST_WEBGL:return&quot;CONTEXT_LOST_WEBGL&quot;;default:return&quot;Unknown error code &quot;+e}}function Or(t,e,n){return no(t,e,function(){return t.getExtension(n)},&#39;Extension &quot;&#39;+n+&#39;&quot; not supported on this browser.&#39;)}function Pr(t,e,n){var r=no(t,e,function(){return t.createShader(t.VERTEX_SHADER)},&quot;Unable to create vertex WebGLShader.&quot;);if(Ar(t,e,function(){return t.shaderSource(r,n)}),Ar(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error(&quot;Failed to compile vertex shader.&quot;);return r}function Fr(t,e,n){var r=no(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},&quot;Unable to create fragment WebGLShader.&quot;);if(Ar(t,e,function(){return t.shaderSource(r,n)}),Ar(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=Lr.exec(e);if(null==n)return console.log(&quot;Couldn&#39;t parse line number in error: &quot;+e),console.log(t);for(var r=+n[1],o=t.split(&quot;\n&quot;),i=o.length.toString().length+2,a=o.map(function(t,e){return C((e+1).toString(),i)+t}),s=0,u=0;u&lt;a.length;u++)s=Math.max(a[u].length,s);var c=a.slice(0,r-1),l=a.slice(r-1,r),h=a.slice(r);console.log(c.join(&quot;\n&quot;)),console.log(e.split(&quot;\n&quot;)[0]),console.log(&quot;%c &quot;+C(l[0],s),&quot;border:1px solid red; background-color:#e3d2d2; color:#a61717&quot;),console.log(h.join(&quot;\n&quot;))}(n,t.getShaderInfoLog(r)),new Error(&quot;Failed to compile fragment shader.&quot;);return r}var Lr=/ERROR: [0-9]+:([0-9]+):/g;function Br(t,e){return no(t,e,function(){return t.createProgram()},&quot;Unable to create WebGLProgram.&quot;)}function Wr(t,e,n){if(Ar(t,e,function(){return t.linkProgram(n)}),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error(&quot;Failed to link vertex and fragment shaders.&quot;)}function zr(t,e,n){if(Ar(t,e,function(){return t.validateProgram(n)}),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error(&quot;Shader program validation failed.&quot;)}function Ur(t,e,n){var r=no(t,e,function(){return t.createBuffer()},&quot;Unable to create WebGLBuffer&quot;);return Ar(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Ar(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Gr(t,e,n){var r=no(t,e,function(){return t.createBuffer()},&quot;Unable to create WebGLBuffer&quot;);return Ar(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Ar(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Vr(){return 2===Zt.get(&quot;WEBGL_VERSION&quot;)?1:4}function Hr(t,e){return no(t,e,function(){return t.createTexture()},&quot;Unable to create WebGLTexture.&quot;)}function qr(t,e){var n=Zt.get(&quot;WEBGL_MAX_TEXTURE_SIZE&quot;);if(t&lt;=0||e&lt;=0){var r=&quot;[&quot;+t+&quot;x&quot;+e+&quot;]&quot;;throw new Error(&quot;Requested texture size &quot;+r+&quot; is invalid.&quot;)}if(n&lt;t||n&lt;e)throw r=&quot;[&quot;+t+&quot;x&quot;+e+&quot;]&quot;,new Error(&quot;Requested texture size &quot;+r+&quot; greater than WebGL maximum on this browser / GPU [&quot;+n+&quot;x&quot;+n+&quot;].&quot;)}function jr(t,e){return no(t,e,function(){return t.createFramebuffer()},&quot;Unable to create WebGLFramebuffer.&quot;)}function $r(t,e,n,r,o,i,a,s){var u=t.getAttribLocation(n,r);return-1!==u&amp;&amp;(Ar(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),Ar(t,e,function(){return t.vertexAttribPointer(u,i,t.FLOAT,!1,a,s)}),Ar(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function Kr(t,e,n,r){ro(t,r),Ar(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function Xr(t,e,n,r){return no(t,e,function(){return t.getUniformLocation(n,r)},&#39;uniform &quot;&#39;+r+&#39;&quot; not present in program.&#39;)}function Yr(t,e,n){return t.getUniformLocation(e,n)}function Qr(t,e,n,r,o,i){Ar(t,e,function(){return Kr(t,e,r,i)}),Ar(t,e,function(){return t.uniform1i(o,i)})}function Jr(t,e,n,r){Ar(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Ar(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function Zr(t,e,n){Ar(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Ar(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function to(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error(&quot;Error binding framebuffer: &quot;+eo(t,e))}function eo(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return&quot;FRAMEBUFFER_INCOMPLETE_ATTACHMENT&quot;;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return&quot;FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT&quot;;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return&quot;FRAMEBUFFER_INCOMPLETE_DIMENSIONS&quot;;case t.FRAMEBUFFER_UNSUPPORTED:return&quot;FRAMEBUFFER_UNSUPPORTED&quot;;default:return&quot;unknown error &quot;+e}}function no(t,e,n,r){var o=Ar(t,e,function(){return n()});if(null==o)throw new Error(r);return o}function ro(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r&lt;t.TEXTURE0||n&lt;r)throw new Error(&quot;textureUnit must be in [gl.TEXTURE0, gl.TEXTURE&quot;+n+&quot;].&quot;)}function oo(t,e){return void 0===e&amp;&amp;(e=2),B(t.slice(0,t.length-e))}function io(t){if(0===t.length)throw Error(&quot;Cannot get rows and columns of an empty shape array.&quot;);return[1&lt;t.length?t[t.length-2]:1,t[t.length-1]]}function ao(n,t){var e;void 0===t&amp;&amp;(t=!1);var r=Zt.get(&quot;WEBGL_MAX_TEXTURE_SIZE&quot;);if(t&amp;&amp;(r*=2,1===(n=n.map(function(t,e){return e&gt;=n.length-2?_(n[e]):n[e]})).length&amp;&amp;(n=[2,n[0]])),2!==n.length){var o=I(n);n=o.newShape}var i=B(n);if(n.length&lt;=1&amp;&amp;i&lt;=r)return[1,i];if(2===n.length&amp;&amp;n[0]&lt;=r&amp;&amp;n[1]&lt;=r)return n;if(3===n.length&amp;&amp;n[0]*n[1]&lt;=r&amp;&amp;n[2]&lt;=r)return[n[0]*n[1],n[2]];if(3===n.length&amp;&amp;n[0]&lt;=r&amp;&amp;n[1]*n[2]&lt;=r)return[n[0],n[1]*n[2]];if(4===n.length&amp;&amp;n[0]*n[1]*n[2]&lt;=r&amp;&amp;n[3]&lt;=r)return[n[0]*n[1]*n[2],n[3]];if(4===n.length&amp;&amp;n[0]&lt;=r&amp;&amp;n[1]*n[2]*n[3]&lt;=r)return[n[0],n[1]*n[2]*n[3]];if(t){var a=oo(n),s=2,u=2;return n.length&amp;&amp;(s=(e=io(n))[0],u=e[1]),b(i=a*(s/2)*(u/2)).map(function(t){return 2*t})}return b(i)}function so(t){return t%2==0}function uo(t,e){if(E(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(so(n)&amp;&amp;so(r)&amp;&amp;(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&amp;&amp;so(t[0])&amp;&amp;so(e[0])}var co=Object.freeze({callAndCheck:Ar,canBeRepresented:Dr,getWebGLErrorMessage:Mr,getExtensionOrThrow:Or,createVertexShader:Pr,createFragmentShader:Fr,createProgram:Br,linkProgram:Wr,validateProgram:zr,createStaticVertexBuffer:Ur,createStaticIndexBuffer:Gr,getNumChannels:Vr,createTexture:Hr,validateTextureSize:qr,createFramebuffer:jr,bindVertexBufferToProgramAttribute:$r,bindTextureUnit:Kr,unbindTextureUnit:function(t,e,n){ro(t,n),Ar(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Xr,getProgramUniformLocation:Yr,bindTextureToProgramUniformSampler:Qr,bindCanvasToFramebuffer:function(t,e){Ar(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Ar(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Ar(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Jr,unbindColorTextureFromFramebuffer:Zr,validateFramebuffer:to,getFramebufferErrorMessage:eo,getBatchDim:oo,getRowsCols:io,getTextureShapeFromLogicalShape:ao,isReshapeFree:uo});function lo(t,e){var n=wn();return Pr(t,e,n.version+&quot;\n    precision highp float;\n    &quot;+n.attribute+&quot; vec3 clipSpacePos;\n    &quot;+n.attribute+&quot; vec2 uv;\n    &quot;+n.varyingVs+&quot; vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }&quot;)}function ho(t,e){return Ur(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function po(t,e){return Gr(t,e,new Uint16Array([0,1,2,2,1,3]))}function fo(t,e){var n,r,o,i,a,s,u,c,l=t;return c=2===Zt.get(&quot;WEBGL_VERSION&quot;)?(n=l.R32F,r=l.R16F,o=l.RGBA16F,i=l.RGBA32F,a=l.RED,s=4,u=1,l.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,i=l.RGBA,a=t.RGBA,u=s=4,null!=e?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c}}function vo(t,e,n,r,o,i,a){qr(n,r);var s=Hr(t,e),u=t.TEXTURE_2D;return Ar(t,e,function(){return t.bindTexture(u,s)}),Ar(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Ar(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Ar(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Ar(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Ar(t,e,function(){return t.texImage2D(u,0,o,n,r,0,i,a,null)}),Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function mo(t,e,n,r,o){var i=Sr(n,r);return vo(t,e,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function go(t,e,n,r,o){var i=Sr(n,r);return vo(t,e,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function yo(t,e,n,r,o){var i=Sr(n,r);return vo(t,e,i[0],i[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function xo(t,e,n,r,o){var i=kr(n,r);return vo(t,e,i[0],i[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function wo(t,e,n,r,o){var i=kr(n,r);return vo(t,e,i[0],i[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function bo(t,e,n,r){return Ar(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),$r(t,e,n,&quot;clipSpacePos&quot;,r,3,20,0)&amp;&amp;$r(t,e,n,&quot;uv&quot;,r,2,20,12)}function Eo(t,e,n,r){Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),Ar(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Co(t,e,n,r,o,i,a){qr(r,o),Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),Ar(t,e,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,r,o,a,t.FLOAT,i)}),Ar(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function _o(t,e,n,r,o,i,a,s){var u,c=Sr(r,o),l=c[0],h=c[1],p=r*o;1===s.defaultNumChannels&amp;&amp;p===i.length?u=i:function(t,e,n){var r=Rr(t.length,n);if(e.length&lt;r)throw new Error(&quot;unpackedArray length (&quot;+e.length+&quot;) must be &gt;= &quot;+r);for(var o=0,i=0;i&lt;t.length;++i)e[o]=t[i],o+=n}(i,u=new Float32Array(p*a),a),Co(t,e,n,l,h,u,s.textureFormatFloat)}function So(t,e,n,r,o,i,a,s,u,c){var l=kr(a,s),h=l[0],p=l[1],f=new Float32Array(Ir(a,s));(function(t,e,n,r,o){for(var i=r%2==1,a=n%2==1,s=Math.floor(r/2),u=Math.floor(n/2),c=Math.ceil(r/2),l=c*Math.ceil(n/2),h=_(n)*_(r),p=0;p&lt;e;p++){for(var f=p*n*r,d=p*h,v=i?4:0,m=r,g=d,y=0;y&lt;u;++y){for(var x=2*y*r,w=0;w&lt;s;++w){var b=f+x+2*w;o[g]=t[b],o[g+1]=t[b+1],o[g+2]=t[b+m],o[g+3]=t[b+m+1],g+=4}g+=v}if(i){b=f+r-1,g=d+4*(c-1);var E=2*r;for(v=4*c,y=0;y&lt;u;++y)o[g]=t[b],o[g+2]=t[b+r],b+=E,g+=v}if(a){for(b=f+(n-1)*r,g=d+4*(l-c),w=0;w&lt;s;++w)o[g++]=t[b++],o[g++]=t[b++],g+=2;i&amp;&amp;a&amp;&amp;(o[d+h-4]=t[b])}}})(u,r,o,i,f),Co(t,e,n,h,p,f,t.RGBA)}function Ro(t,e,n,r,o,i){var a=n;if(2===Zt.get(&quot;WEBGL_VERSION&quot;)){var s=t,u=s.createBuffer();Ar(t,e,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,u)});var c=4*Rr(r*o,i.downloadUnpackNumChannels);Ar(t,e,function(){return t.bufferData(s.PIXEL_PACK_BUFFER,c,s.STREAM_READ)}),Ar(t,e,function(){return s.readPixels(0,0,o,r,t.RGBA,t.FLOAT,0)}),Ar(t,e,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,null)}),a=u}return a}function No(t,e,n,r,o){var i=t,a=new Float32Array(Rr(n*r,o.downloadUnpackNumChannels));i.bindBuffer(i.PIXEL_PACK_BUFFER,e),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,a),i.bindBuffer(i.PIXEL_PACK_BUFFER,null);var s=new Float32Array(n*r);return Nr(a,s,o.downloadUnpackNumChannels),s}function ko(t,e,n,r,o){var i=Sr(n,r),a=i[0],s=i[1],u=new Float32Array(Rr(n*r,o.downloadUnpackNumChannels));Ar(t,e,function(){return t.readPixels(0,0,a,s,o.downloadTextureFormat,t.FLOAT,u)});var c=new Float32Array(n*r);return Nr(u,c,o.downloadUnpackNumChannels),c}function Io(t,e,n,r,o){var i=Sr(n,r),a=i[0],s=i[1],u=new Uint8Array(Rr(n*r,4));return Ar(t,e,function(){return t.readPixels(0,0,a,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function To(t,e,n,r,o,i,a,s){var u=t,c=new Float32Array(Ir(i,a));u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null);var l=new Float32Array(B([n,r,o]));return Tr(c,n,r,o,l),l}function Ao(t,e,n,r,o,i,a,s){var u=kr(i,a),c=u[0],l=u[1],h=new Float32Array(Ir(i,a));Ar(t,e,function(){return t.readPixels(0,0,c,l,t.RGBA,t.FLOAT,h)});var p=new Float32Array(B([n,r,o]));return Tr(h,n,r,o,p)}var Do=Object.freeze({createVertexShader:lo,createVertexBuffer:ho,createIndexBuffer:po,getTextureConfig:fo,createFloat32MatrixTexture:mo,createFloat16MatrixTexture:go,createUnsignedBytesMatrixTexture:yo,createPackedMatrixTexture:xo,createFloat16PackedMatrixTexture:wo,bindVertexProgramAttributeStreams:bo,uploadPixelDataToTexture:Eo,uploadMatrixToTexture:_o,uploadMatrixToPackedTexture:So,maybeCreateBufferFromOutputTexture:Ro,downloadFloat32MatrixFromBuffer:No,downloadFloat32MatrixFromOutputTexture:ko,downloadByteEncodedFloatMatrixFromOutputTexture:Io,downloadPackedMatrixFromBuffer:To,downloadMatrixFromPackedOutputTexture:Ao}),Mo=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e,n=Zt.get(&quot;WEBGL_VERSION&quot;);null!=t?(this.gl=t,e=t,i[n]=e):this.gl=l(n),1===Zt.get(&quot;WEBGL_VERSION&quot;)?(this.textureFloatExtension=Or(this.gl,this.debug,&quot;OES_texture_float&quot;),this.colorBufferFloatExtension=this.gl.getExtension(&quot;WEBGL_color_buffer_float&quot;),Zt.get(&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;)||(this.textureHalfFloatExtension=Or(this.gl,this.debug,&quot;OES_texture_half_float&quot;),this.colorBufferHalfFloatExtension=this.gl.getExtension(&quot;EXT_color_buffer_half_float&quot;))):this.colorBufferFloatExtension=Or(this.gl,this.debug,&quot;EXT_color_buffer_float&quot;),this.vertexBuffer=ho(this.gl,this.debug),this.indexBuffer=po(this.gl,this.debug),this.framebuffer=jr(this.gl,this.debug),this.textureConfig=fo(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,&quot;debug&quot;,{get:function(){return Zt.get(&quot;DEBUG&quot;)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&amp;&amp;console.warn(&quot;Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing.&quot;),null!=this.outputTexture&amp;&amp;console.warn(&quot;Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.&quot;);var e=this.gl;Ar(e,this.debug,function(){return e.finish()}),Ar(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Ar(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),Ar(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Ar(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Ar(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),mo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),go(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),yo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),Eo(this.gl,this.debug,t,e)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),wo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),xo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&amp;&amp;(Zr(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ar(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,n,r){this.throwIfDisposed();var o=Vr();return _o(this.gl,this.debug,t,e,n,r,o,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(t,e,n,r,o,i,a){return this.throwIfDisposed(),So(this.gl,this.debug,t,e,n,r,o,i,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return ko(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Io(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,o,i){return To(this.gl,t,e,n,r,o,i,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e,n){return No(this.gl,t,e,n,this.textureConfig)},t.prototype.maybeCreateBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=Ro(this.gl,this.debug,t,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(Zt.get(&quot;WEBGL_FENCE_API_ENABLED&quot;)){var o=t,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=o.clientWaitSync(i,0,0);return t===o.ALREADY_SIGNALED||t===o.CONDITION_SATISFIED},e=i}else n=0&lt;Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)?(e=this.beginQuery(),this.endQuery(),function(){return r.isQueryAvailable(e,Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;))}):function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n,r,o,i){var a=this;return this.downloadMatrixDriver(t,function(){return Ao(a.gl,a.debug,e,n,r,o,i,a.textureConfig)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=Fr(e,this.debug,t),r=lo(e,this.debug),o=Br(e,this.debug);return Ar(e,this.debug,function(){return e.attachShader(o,r)}),Ar(e,this.debug,function(){return e.attachShader(o,n)}),Wr(e,this.debug,o),this.debug&amp;&amp;zr(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=bo(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&amp;&amp;(this.program=null),null!=t&amp;&amp;Ar(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&amp;&amp;this.debug&amp;&amp;zr(this.gl,this.debug,this.program),Ar(this.gl,this.debug,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&amp;&amp;(n=!0),this.throwIfDisposed(),n?Xr(this.gl,this.debug,t,e):Yr(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),Ar(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Qr(this.gl,this.debug,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=kr(e,n),o=r[0],i=r[1];this.setOutputMatrixTextureDriver(t,o,i)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error(&quot;setOutputPackedMatrixWriteRegion not implemented.&quot;)},t.prototype.debugValidate=function(){null!=this.program&amp;&amp;zr(this.gl,this.debug,this.program),to(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&amp;&amp;this.debugValidate(),Ar(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Ar(this.gl,this.debug,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&amp;&amp;(this.disjointQueryTimerExtension=Or(this.gl,this.debug,2===Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)?&quot;EXT_disjoint_timer_query_webgl2&quot;:&quot;EXT_disjoint_timer_query&quot;)),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return m(this,void 0,void 0,function(){var e=this;return R(this,function(t){switch(t.label){case 0:return[4,S(function(){return e.disposed||e.isQueryAvailable(n,Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;))})];case 1:return t.sent(),[2,this.getQueryTime(n,Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;))]}})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2!==e)return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&amp;&amp;(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&amp;&amp;!this.disjoint;var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&amp;&amp;(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&amp;&amp;!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(t){n.addItemToPoll(function(){return e.isFencePassed()},function(){return t()})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e&lt;t.length&amp;&amp;t[e]();++e);return e-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e&lt;=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),1&lt;this.itemsToPoll.length||S(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Jr(this.gl,this.debug,t,this.framebuffer),this.debug&amp;&amp;to(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Jr(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&amp;&amp;to(this.gl)):Zr(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Jr(r,this.debug,t,this.framebuffer),this.debug&amp;&amp;to(r),this.outputTexture=t,Ar(r,this.debug,function(){return r.viewport(0,0,e,n)}),Ar(r,this.debug,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),Ar(this.gl,this.debug,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error(&quot;Attempted to use disposed GPGPUContext.&quot;)},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error(&quot;No GPU program is currently set.&quot;)},t}();function Oo(t,s){if(t.length!==s.length)throw Error(&quot;Binary was compiled with &quot;+t.length+&quot; inputs, but was executed with &quot;+s.length+&quot; inputs&quot;);t.forEach(function(t,e){var n=t.logicalShape,r=s[e],o=r.shape;if(!E(n,o))throw Error(&quot;Binary was compiled with different shapes than the current args. Shapes &quot;+n+&quot; and &quot;+o+&quot; must match&quot;);if(!t.isUniform||!r.isUniform){var i=t.texShape,a=r.isUniform?null:r.texData.texShape;if(!E(i,a))throw Error(&quot;Binary was compiled with different texture shapes than the current args. Shape &quot;+i+&quot; and &quot;+a+&quot; must match&quot;)}})}var Po=function(t,e,n){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0,this.outputShape=t;var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,h=s.left,p=s.top,f=o*r,d=wn();this.userCode=&quot;\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        for(int row=0; row&lt;=1; row++) {\n          for(int col=0; col&lt;=1; col++) {\n            int blockIndex = rc.y + col;\n            int pos = rc.x + row;\n\n            if(blockIndex &gt;= &quot;+t[1]+&quot; || pos &gt;= &quot;+t[0]+&quot;) continue;\n\n            int offsetY = int(blockIndex / (&quot;+u+&quot;)) * &quot;+a+&quot; - &quot;+p+&quot;;\n            int d0 = offsetY + &quot;+l+&quot; * (pos / &quot;+f+&quot;);\n\n            if(d0 &gt;= &quot;+e[0]+&quot; || d0 &lt; 0) continue;\n\n            int offsetX = int(mod(float(blockIndex), &quot;+u+&quot;.) * &quot;+i+&quot;. - &quot;+h+&quot;.);\n            int d1 = offsetX + &quot;+c+&quot; * (int(mod(float(pos), &quot;+f+&quot;.) / &quot;+o+&quot;.));\n\n            if(d1 &gt;= &quot;+e[1]+&quot; || d1 &lt; 0) continue;\n\n            vec2 innerDims = vec2(d1, int(mod(float(pos), &quot;+o+&quot;.)));\n            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),\n                                              int(innerDims.y)), innerDims);\n          }\n        }\n\n        &quot;+d.output+&quot; = result;\n      }\n    &quot;},Fo=function(t,e,n,r,o){this.variableNames=[&quot;x&quot;],this.outputShape=[];var i,a=e,s=t[3]-1;this.outputShape=t;var u=&quot;float(&quot;+n+&quot;) + float(&quot;+r+&quot;) * sum&quot;;i=.5===o?&quot;inversesqrt(&quot;+u+&quot;)&quot;:1===o?&quot;1.0/(&quot;+u+&quot;)&quot;:&quot;exp(log(&quot;+u+&quot;) * float(-&quot;+o+&quot;));&quot;,this.userCode=&quot;\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -&quot;+a+&quot;; j &lt;= &quot;+a+&quot;; j++) {\n          int idx = d + j;\n          if (idx &gt;= 0 &amp;&amp; idx &lt;=  &quot;+s+&quot;) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * &quot;+i+&quot;;\n        setOutput(val);\n      }\n    &quot;},Lo=function(t,e,n,r,o){this.variableNames=[&quot;inputImage&quot;,&quot;outputImage&quot;,&quot;dy&quot;],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=&quot;\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d &lt; &quot;+this.depth+&quot;; ++d) {\n          int depthBegin = int(max(0.0, float(d - &quot;+e+&quot;)));\n          int depthEnd = int(min(float(&quot;+this.depth+&quot;),\n              float(d + &quot;+e+&quot; + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = &quot;+this.depth+&quot;;\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k &lt; MAX_DEPTH_END; ++k) {\n            if (k &lt; depthBegin){\n              continue;\n            }\n            else if (k &gt;= depthBegin &amp;&amp; k &lt; depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(&quot;+r+&quot;) * norm + float(&quot;+n+&quot;);\n\n          for(int k = MIN_DEPTH_BEGIN; k &lt; MAX_DEPTH_END; ++k){\n            if (k &lt; depthBegin){\n              continue;\n            }\n            else if (k &gt;= depthBegin &amp;&amp; k &lt; depthEnd){\n              float dyi = -2.0 * float(&quot;+r+&quot;)\n                * float(&quot;+o+&quot;)\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * &quot;+o+&quot;);\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    &quot;},Bo=function(t){this.variableNames=[&quot;dy&quot;,&quot;maxPos&quot;],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,a=o-1-t.padInfo.top,s=i-1-t.padInfo.left,u=o*i-1;this.userCode=&quot;\n      const ivec2 pads = ivec2(&quot;+a+&quot;, &quot;+s+&quot;);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR &lt; &quot;+o+&quot;;\n          wR += &quot;+r+&quot;) {\n          float dyR = float(dyRCorner + wR) / &quot;+e+&quot;.0;\n\n          if (dyR &lt; 0.0 || dyR &gt;= &quot;+t.outHeight+&quot;.0 || fract(dyR) &gt; 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC &lt; &quot;+i+&quot;; wC++) {\n            float dyC = float(dyCCorner + wC) / &quot;+n+&quot;.0;\n\n            if (dyC &lt; 0.0 || dyC &gt;= &quot;+t.outWidth+&quot;.0 ||\n                fract(dyC) &gt; 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = &quot;+u+&quot; - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * &quot;+i+&quot; + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    &quot;},Wo=function(t,e,n,r,o,i){void 0===n&amp;&amp;(n=!1),void 0===r&amp;&amp;(r=!1),void 0===o&amp;&amp;(o=!1),void 0===i&amp;&amp;(i=null),this.variableNames=[&quot;matrixA&quot;,&quot;matrixB&quot;],this.usesPackedTextures=!0,this.outputShape=e;var a=n?t[1]:t[2],s=Math.ceil(a/2),u=n?&quot;i * 2, rc.y&quot;:&quot;rc.y, i * 2&quot;,c=r?&quot;rc.z, i * 2&quot;:&quot;i * 2, rc.z&quot;,l=n?[&quot;a.xxyy&quot;,&quot;a.zzww&quot;]:[&quot;a.xxzz&quot;,&quot;a.yyww&quot;],h=r?[&quot;b.xzxz&quot;,&quot;b.ywyw&quot;]:[&quot;b.xyxy&quot;,&quot;b.zwzw&quot;],p=&quot;&quot;,f=&quot;&quot;;i&amp;&amp;(p=&quot;vec4 activation(vec4 x) {\n        &quot;+i+&quot;\n      }&quot;,f=&quot;result = activation(result);&quot;);var d=o?&quot;result += getBiasAtOutCoords();&quot;:&quot;&quot;;o&amp;&amp;this.variableNames.push(&quot;bias&quot;),this.userCode=&quot;\n      &quot;+p+&quot;\n\n      const float sharedDimension = &quot;+s+&quot;.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i &lt; &quot;+s+&quot;; i++) {\n          vec4 a = getMatrixA(rc.x, &quot;+u+&quot;);\n          vec4 b = getMatrixB(rc.x, &quot;+c+&quot;);\n\n          result += (&quot;+l[0]+&quot; * &quot;+h[0]+&quot;) + (&quot;+l[1]+&quot; * &quot;+h[1]+&quot;);\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        &quot;+d+&quot;\n\n        &quot;+f+&quot;\n\n        setOutput(result);\n      }\n    &quot;},zo=function(){function t(t,e,n){this.variableNames=[&quot;probs&quot;],this.outputShape=[t,n],this.userCode=&quot;\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i &lt; &quot;+(e-1)+&quot;; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r &lt; cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(&quot;+(e-1)+&quot;));\n      }\n    &quot;}return t.prototype.getCustomSetupFunc=function(n){var r=this;return function(t,e){null==r.seedLoc&amp;&amp;(r.seedLoc=t.getUniformLocation(e,&quot;seed&quot;)),t.gl.uniform1f(r.seedLoc,n)}},t}(),Uo=function(t,e,n,r){this.variableNames=[&quot;indices&quot;],this.outputShape=[t,e],this.userCode=&quot;\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(&quot;+r+&quot;), float(&quot;+n+&quot;),\n                      float(index == coords.y)));\n      }\n    &quot;},Go=function(t){this.variableNames=[&quot;A&quot;],this.isPackShader=!0;var e,n,r,o,i=(this.outputShape=t).length;if(0===i)this.userCode=&quot;\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      &quot;;else{var a=mn(&quot;rc&quot;,i),s=Dn(i),u=function(t,e,n){if(1===t)return&quot;rc &gt; &quot;+e[0];for(var r=&quot;&quot;,o=t-2;o&lt;t;o++)r+=n[o]+&quot; &gt;= &quot;+e[o],o&lt;t-1&amp;&amp;(r+=&quot;||&quot;);return r}(i,t,a),c=function(t,e,n,r){if(1===t)return&quot;&quot;;var o=r.slice(-2);return&quot;\n    int r = &quot;+o[0]+&quot;;\n    int c = &quot;+o[1]+&quot;;\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 &gt;= &quot;+e+&quot;;\n    bool rEdge = rp1 &gt;= &quot;+n+&quot;;\n  &quot;}(i,t[t.length-1],t[t.length-2],a),l=(n=a,r=(e=t).length,o=function(t,e){for(var n=[],r=0;r&lt;=1;r++)for(var o=0;o&lt;=1;o++){for(var i=(0===r?&quot;r&quot;:&quot;rp1&quot;)+&quot;, &quot;+(0===o?&quot;c&quot;:&quot;cp1&quot;),a=2;a&lt;t;a++)i=e[e.length-1-a]+&quot;,&quot;+i;n.push(i)}return n}(r,n),1===r?&quot;getA(rc),\n            rc + 1 &gt;= &quot;+e[0]+&quot; ? 0. : getA(rc + 1),\n            0, 0&quot;:&quot;getA(&quot;+o[0]+&quot;),\n          cEdge ? 0. : getA(&quot;+o[1]+&quot;),\n          rEdge ? 0. : getA(&quot;+o[2]+&quot;),\n          rEdge || cEdge ? 0. : getA(&quot;+o[3]+&quot;)&quot;);this.userCode=&quot;\n        void main() {\n          &quot;+s+&quot; rc = getOutputCoords();\n\n          if(&quot;+u+&quot;) {\n            setOutput(vec4(0));\n          } else {\n            &quot;+c+&quot;\n\n            setOutput(vec4(&quot;+l+&quot;));\n          }\n        }\n      &quot;}};var Vo=function(n,t,e){this.variableNames=[&quot;x&quot;],this.outputShape=t.map(function(t,e){return t[0]+n[e]+t[1]});var r=n.length,o=Dn(r),i=t.map(function(t){return t[0]}).join(&quot;,&quot;),a=t.map(function(t,e){return t[0]+n[e]}).join(&quot;,&quot;),s=[&quot;coords[0]&quot;,&quot;coords[1]&quot;,&quot;coords[2]&quot;,&quot;coords[3]&quot;].slice(0,r);this.userCode=1!==r?&quot;\n      &quot;+o+&quot; start = &quot;+o+&quot;(&quot;+i+&quot;);\n      &quot;+o+&quot; end = &quot;+o+&quot;(&quot;+a+&quot;);\n\n      void main() {\n        &quot;+o+&quot; outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(&quot;+e+&quot;));\n        } else {\n          &quot;+o+&quot; coords = outC - start;\n          setOutput(getX(&quot;+s+&quot;));\n        }\n      }\n    &quot;:&quot;\n        int start = &quot;+i+&quot;;\n        int end = &quot;+a+&quot;;\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC &lt; start || outC &gt;= end) {\n            setOutput(float(&quot;+e+&quot;));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      &quot;},Ho=function(n,t,e){this.variableNames=[&quot;x&quot;],this.usesPackedTextures=!0,this.outputShape=t.map(function(t,e){return t[0]+n[e]+t[1]});for(var r=n.length,o=Dn(r),i=t.map(function(t){return t[0]}).join(&quot;,&quot;),a=t.map(function(t,e){return t[0]+n[e]}).join(&quot;,&quot;),s=mn(&quot;rc&quot;,r),u=mn(&quot;source&quot;,r),c=s[r-1]+&quot; &lt; &quot;+this.outputShape[r-1],l=1===r?&quot;source&quot;:&quot;vec2(&quot;+u.slice(-2).join()+&quot;)&quot;,h=[o+&quot; rc = outputLoc;&quot;,s[r-1]+&quot; += 1;\n       if(&quot;+c+&quot;) {\n      &quot;,1===r?&quot;&quot;:&quot;}\n       rc = outputLoc;\n       &quot;+s[r-2]+&quot; += 1;\n       if(&quot;+s[r-2]+&quot; &lt; &quot;+this.outputShape[r-2]+&quot;) {&quot;,1===r?&quot;&quot;:&quot;  &quot;+s[r-1]+&quot; += 1;\n         if(&quot;+c+&quot;) {&quot;],p=1===r?&quot;rc &lt; start || rc &gt;= end&quot;:&quot;any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))&quot;,f=&quot;&quot;,d=0,v=1===r?2:4;d&lt;v;d++)f+=&quot;\n        &quot;+h[d]+&quot;\n        if (&quot;+p+&quot;) {\n          result[&quot;+d+&quot;] = float(&quot;+e+&quot;);\n        } else {\n          &quot;+o+&quot; source = rc - start;\n          result[&quot;+d+&quot;] = getChannel(getX(&quot;+u.join()+&quot;), &quot;+l+&quot;);\n        }\n      &quot;;f+=1===r?&quot;} &quot;:&quot;}}&quot;,this.userCode=&quot;\n      const &quot;+o+&quot; start = &quot;+o+&quot;(&quot;+i+&quot;);\n      const &quot;+o+&quot; end = &quot;+o+&quot;(&quot;+a+&quot;);\n\n      void main() {\n        &quot;+o+&quot; outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        &quot;+f+&quot;\n        setOutput(result);\n      }\n    &quot;},qo=function(t,e,n){if(this.variableNames=[&quot;x&quot;],&quot;avg&quot;===e&amp;&amp;n)throw new Error(&quot;Cannot compute positions for average pool.&quot;);var r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var p=&quot;avg&quot;===e,f=&quot;0.0&quot;;if(p||(f=&quot;-1.0 / 1e-20&quot;),n)this.userCode=&quot;\n        const ivec2 strides = ivec2(&quot;+o+&quot;, &quot;+i+&quot;);\n        const ivec2 pads = ivec2(&quot;+l+&quot;, &quot;+h+&quot;);\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR &lt; &quot;+u+&quot;;\n              wR += &quot;+a+&quot;) {\n            int xR = xRCorner + wR;\n\n            if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n              continue;\n            }\n\n            for (int wC = 0; wC &lt; &quot;+c+&quot;;\n                wC += &quot;+s+&quot;) {\n              int xC = xCCorner + wC;\n\n              if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value &gt;= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * &quot;+c+&quot; + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      &quot;;else{var d=e+&quot;(&quot;+e+&quot;(&quot;+e+&quot;(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])&quot;;&quot;avg&quot;===e&amp;&amp;(d=&quot;avgValue / count&quot;);var v=4*Math.floor(r/4),m=r%4,g=&quot;\n      if (&quot;+p+&quot;) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    &quot;;this.userCode=&quot;\n      const ivec2 strides = ivec2(&quot;+o+&quot;, &quot;+i+&quot;);\n      const ivec2 pads = ivec2(&quot;+l+&quot;, &quot;+h+&quot;);\n      const float initializationValue = &quot;+f+&quot;;\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC &lt; 0 || xC &gt;= &quot;+t.inWidth+&quot;) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(&quot;+f+&quot;);\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR &lt; &quot;+u+&quot;;\n            wR += &quot;+a+&quot;) {\n          int xR = xRCorner + wR;\n\n          if (xR &lt; 0 || xR &gt;= &quot;+t.inHeight+&quot;) {\n            continue;\n          }\n\n          for (int wC = 0; wC &lt; &quot;+v+&quot;; wC += 4) {\n            int xC = xCCorner + wC * &quot;+s+&quot;;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + &quot;+s+&quot;, d),\n              getValue(batch, xR, xC + 2 * &quot;+s+&quot;, d),\n              getValue(batch, xR, xC + 3 * &quot;+s+&quot;, d)\n            );\n\n            &quot;+g+&quot;\n          }\n\n          int xC = xCCorner + &quot;+v+&quot;;\n          if (&quot;+(1===m)+&quot;) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            &quot;+g+&quot;\n          } else if (&quot;+(2===m)+&quot;) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + &quot;+s+&quot;, d),\n              initializationValue,\n              initializationValue\n            );\n\n            &quot;+g+&quot;\n          } else if (&quot;+(3===m)+&quot;) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + &quot;+s+&quot;, d),\n              getValue(batch, xR, xC + 2 * &quot;+s+&quot;, d),\n              initializationValue\n            );\n\n            &quot;+g+&quot;\n          }\n        }\n        setOutput(&quot;+d+&quot;);\n      }\n    &quot;}},jo=function(t,e){this.variableNames=[&quot;x&quot;];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a=&quot;0.0&quot;,s=&quot;&quot;;&quot;prod&quot;===e?a=&quot;1.0&quot;:&quot;min&quot;===e?(a=&quot;1.0 / 1e-20&quot;,s=&quot;min&quot;):&quot;max&quot;===e&amp;&amp;(a=&quot;-1.0 / 1e-20&quot;,s=&quot;max&quot;);var u=e+&quot;(&quot;+e+&quot;(&quot;+e+&quot;(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])&quot;;&quot;sum&quot;===e?u=&quot;sumValue&quot;:&quot;prod&quot;===e?u=&quot;prodValue&quot;:&quot;all&quot;===e?u=&quot;allValue&quot;:&quot;any&quot;===e&amp;&amp;(u=&quot;anyValue&quot;);var c=4*Math.floor(n/4),l=n%4,h=&quot;\n      if (&quot;+(&quot;sum&quot;===e)+&quot;) {\n        sumValue += dot(values, ones);\n      } else if (&quot;+(&quot;prod&quot;===e)+&quot;) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = &quot;+s+&quot;(values, minMaxValue);\n      }\n    &quot;,p=&quot;vec4&quot;;&quot;all&quot;===e?(a=&quot;1.0&quot;,h=&quot;\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue &gt;= 1.0 &amp;&amp; floatedReducedAllValue &gt;= 1.0);\n      &quot;,p=&quot;bvec4&quot;):&quot;any&quot;===e&amp;&amp;(a=&quot;0.0&quot;,h=&quot;\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue &gt;= 1.0 || floatedReducedAnyValue &gt;= 1.0);\n      &quot;,p=&quot;bvec4&quot;);var f=&quot;&quot;;0&lt;o%n&amp;&amp;(f=&quot;\n        if (inIdx &lt; 0 || inIdx &gt;= &quot;+o+&quot;) {\n          return initializationValue;\n        }\n      &quot;),this.userCode=&quot;\n      const float initializationValue = &quot;+a+&quot;;\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        &quot;+f+&quot;\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * &quot;+n+&quot;;\n\n        vec4 minMaxValue = vec4(&quot;+a+&quot;);\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i &lt; &quot;+c+&quot;; i += 4) {\n          int inIdx = inOffset + i;\n          &quot;+p+&quot; values = &quot;+p+&quot;(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          &quot;+h+&quot;\n        }\n\n        int inIdx = inOffset + &quot;+c+&quot;;\n        if (&quot;+(1===l)+&quot;) {\n          &quot;+p+&quot; values = &quot;+p+&quot;(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          &quot;+h+&quot;\n        } else if (&quot;+(2===l)+&quot;) {\n          &quot;+p+&quot; values = &quot;+p+&quot;(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          &quot;+h+&quot;\n        } else if (&quot;+(3===l)+&quot;) {\n          &quot;+p+&quot; values = &quot;+p+&quot;(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          &quot;+h+&quot;\n        }\n        setOutput(&quot;+u+&quot;);\n      }\n    &quot;},$o=function(t,e){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0,this.outputShape=t;for(var n=&quot;&quot;,r=0;r&lt;4;r++){var o=&quot;thisRC = rc;&quot;;r%2==1&amp;&amp;(o+=&quot;thisRC.z += 1;&quot;),1&lt;r&amp;&amp;(o+=&quot;thisRC.y += 1;&quot;),n+=&quot;\n        &quot;+o+&quot;\n        &quot;+(0&lt;r?&quot;if(thisRC.y &lt; rows &amp;&amp; thisRC.z &lt; cols){&quot;:&quot;&quot;)+&quot;\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[&quot;+r+&quot;] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        &quot;+(0&lt;r?&quot;}&quot;:&quot;&quot;)+&quot;\n      &quot;}this.userCode=&quot;\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      &quot;+bn([&quot;r&quot;,&quot;c&quot;,&quot;d&quot;],e)+&quot;\n      return ivec3(r, c, d);\n    }\n  \n      \n    int getFlatIndex(ivec3 coords) {\n      return round(&quot;+function(t,e){if(t.length!==e.length)throw new Error(&quot;Vectors to be dotted must be of the same length -got &quot;+t.length+&quot; and &quot;+e.length);for(var n=[],r=Math.floor(t.length/4),o=t.length%4,i=0;i&lt;r;i++){var a=t.slice(4*i,4*i+4),s=e.slice(4*i,4*i+4);n.push(En(a)+&quot;, &quot;+En(s))}return 0!==o&amp;&amp;(a=t.slice(4*r),s=e.slice(4*r),1===a.length&amp;&amp;(a=a.map(function(t){return&quot;float(&quot;+t+&quot;)&quot;}),s=s.map(function(t){return&quot;float(&quot;+t+&quot;)&quot;})),n.push(En(a)+&quot;, &quot;+En(s))),n.map(function(t,e){return&quot;dot(&quot;+t+&quot;)&quot;}).join(&quot;+&quot;)}([&quot;coords.x&quot;,&quot;coords.y&quot;,&quot;coords.z&quot;],K(t).map(function(t){return t.toString()}).concat([&quot;1.&quot;]))+&quot;);\n    }\n  \n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = &quot;+t[1]+&quot;;\n        int cols = &quot;+t[2]+&quot;;\n\n        &quot;+n+&quot;\n\n        setOutput(result);\n      }\n    &quot;};var Ko=function(t,e,n){this.variableNames=[&quot;dy&quot;],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],c=[n&amp;&amp;1&lt;s?o-1:o,n&amp;&amp;1&lt;u?i-1:i],l=[n&amp;&amp;1&lt;s?s-1:s,n&amp;&amp;1&lt;u?u-1:u],h=c[0]/l[0],p=c[1]/l[1],f=1/h,d=1/p,v=2*Math.ceil(f)+2,m=2*Math.ceil(d)+2;this.userCode=&quot;\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(&quot;+h+&quot;);\n        const float widthScale = float(&quot;+p+&quot;);\n\n        const float invHeightScale = float(&quot;+f+&quot;);\n        const float invWidthScale = float(&quot;+d+&quot;);\n\n        const int winHeight = int(&quot;+v+&quot;);\n        const int winWidth = int(&quot;+m+&quot;);\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset &lt; winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR &lt; 0 || dyR &gt;= &quot;+s+&quot;) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset &lt; winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC &lt; 0 || dyC &gt;= &quot;+u+&quot;) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), &quot;+(o-1)+&quot;.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), &quot;+(i-1)+&quot;.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex &amp;&amp; c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex &amp;&amp; c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex &amp;&amp; c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex &amp;&amp; c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    &quot;},Xo=function(t,e,n,r){this.variableNames=[&quot;A&quot;],this.outputShape=[];var o=t[0],i=t[1],a=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&amp;&amp;1&lt;e?i-1:i,r&amp;&amp;1&lt;n?a-1:a],c=[r&amp;&amp;1&lt;e?e-1:e,r&amp;&amp;1&lt;n?n-1:n];this.userCode=&quot;\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          &quot;+u[0]/c[0]+&quot;,\n          &quot;+u[1]/c[1]+&quot;);\n      const vec2 inputShapeRC = vec2(&quot;+i+&quot;.0, &quot;+a+&quot;.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    &quot;},Yo=function(t,e,n,r){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0,this.outputShape=[];var o=t[0],i=t[1],a=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&amp;&amp;1&lt;e?i-1:i,r&amp;&amp;1&lt;n?a-1:a],c=[r&amp;&amp;1&lt;e?e-1:e,r&amp;&amp;1&lt;n?n-1:n];this.userCode=&quot;\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          &quot;+u[0]/c[0]+&quot;,\n          &quot;+u[1]/c[1]+&quot;,\n          &quot;+u[1]/c[1]+&quot;);\n      const vec3 inputShapeRC = vec3(&quot;+i+&quot;.0, &quot;+a+&quot;.0,\n                                     &quot;+a+&quot;.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d &lt; &quot;+(s-1)+&quot;; \n        bool hasNextRow = coords.z &lt; &quot;+(n-1)+&quot;;\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow &amp;&amp; hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow &amp;&amp; hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow &amp;&amp; hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow &amp;&amp; hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    &quot;},Qo=function(t,e,n){this.variableNames=[&quot;dy&quot;],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],c=[n&amp;&amp;1&lt;s?o-1:o,n&amp;&amp;1&lt;u?i-1:i],l=[n&amp;&amp;1&lt;s?s-1:s,n&amp;&amp;1&lt;u?u-1:u],h=c[0]/l[0],p=c[1]/l[1],f=1/h,d=1/p,v=2*Math.ceil(f)+2,m=2*Math.ceil(d)+2;this.userCode=&quot;\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(&quot;+h+&quot;);\n        const float widthScale = float(&quot;+p+&quot;);\n\n        const float invHeightScale = float(&quot;+f+&quot;);\n        const float invWidthScale = float(&quot;+d+&quot;);\n\n        const int winHeight = int(&quot;+v+&quot;);\n        const int winWidth = int(&quot;+m+&quot;);\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset &lt; winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR &lt; 0 || dyR &gt;= &quot;+s+&quot;) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset &lt; winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC &lt; 0 || dyC &gt;= &quot;+u+&quot;) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(&quot;+c[0]+&quot;) *\n                (float(dyR) / float(&quot;+l[0]+&quot;));\n\n            float sourceFracCol =\n                float(&quot;+c[1]+&quot;) *\n                  (float(dyC) / float(&quot;+l[1]+&quot;));\n\n            int sourceNearestRow = int(min(\n                float(int(&quot;+o+&quot;) - 1),\n                &quot;+n+&quot; ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(&quot;+i+&quot;) - 1),\n                &quot;+n+&quot; ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow &amp;&amp; c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    &quot;},Jo=function(t,e,n,r){this.variableNames=[&quot;A&quot;],this.outputShape=[];var o=t[0],i=t[1],a=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&amp;&amp;1&lt;e?i-1:i,r&amp;&amp;1&lt;n?a-1:a],c=[r&amp;&amp;1&lt;e?e-1:e,r&amp;&amp;1&lt;n?n-1:n],l=r?&quot;0.5&quot;:&quot;0.0&quot;;this.userCode=&quot;\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          &quot;+u[0]/c[0]+&quot;,\n          &quot;+u[1]/c[1]+&quot;);\n      const vec2 inputShapeRC = vec2(&quot;+i+&quot;.0, &quot;+a+&quot;.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + &quot;+l+&quot;)));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    &quot;},Zo=function(r,o){this.variableNames=[&quot;x&quot;];var t=r.length;if(4&lt;t)throw new Error(&quot;WebGL backend: Reverse of rank-&quot;+t+&quot; tensor is not yet supported&quot;);if(this.outputShape=r,1!==t){var e=r.map(function(t,e){return n=e,-1!==o.indexOf(n)&amp;&amp;1!==r[n]?r[n]+&quot; - coords[&quot;+n+&quot;] - 1&quot;:&quot;coords[&quot;+n+&quot;]&quot;;var n}).join(&quot;,&quot;),n=Dn(t);this.userCode=&quot;\n      void main() {\n        &quot;+n+&quot; coords = getOutputCoords();\n        setOutput(getX(&quot;+e+&quot;));\n      }\n    &quot;}else this.userCode=&quot;\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(&quot;+r[0]+&quot; - coord - 1));\n        }\n      &quot;},ti=function(i,a){this.variableNames=[&quot;x&quot;],this.usesPackedTextures=!0;var t=i.length;if(4&lt;t)throw new Error(&quot;WebGL backend: Reverse of rank-&quot;+t+&quot; tensor is not yet supported&quot;);this.outputShape=i;var e,n,r,o=mn(&quot;rc&quot;,t),s=o[t-1]+&quot; + 1 &lt; &quot;+this.outputShape[t-1],u=o[t-2]+&quot; + 1 &lt; &quot;+this.outputShape[t-2],c=Dn(t);function l(o){var t=i.map(function(t,e){return n=e,r=o,-1!==a.indexOf(n)&amp;&amp;1!==i[n]?i[n]+&quot; - &quot;+r[n]+&quot; - 1&quot;:&quot;&quot;+r[n];var n,r});return&quot;getChannel(getX(&quot;+t.join(&quot;,&quot;)+&quot;), vec2(&quot;+t.slice(-2).join(&quot;,&quot;)+&quot;))&quot;}this.userCode=1===t?&quot;\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(&quot;+i[0]+&quot; - rc - 1), rc);\n          if(&quot;+s+&quot;){\n              result.g = getChannel(getX(&quot;+i[0]+&quot; - (rc  + 1) - 1), rc + 1);\n          }\n          setOutput(result);\n        }\n      &quot;:&quot;\n        void main() {\n          &quot;+c+&quot; rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = &quot;+l(o.slice())+&quot;;\n          if(&quot;+s+&quot;){\n            result.g = &quot;+((r=o.slice())[t-1]=&quot;(&quot;+r[t-1]+&quot; + 1)&quot;,l(r))+&quot;;\n          }\n          if(&quot;+u+&quot;) {\n            result.b = &quot;+((n=o.slice())[t-2]=&quot;(&quot;+n[t-2]+&quot; + 1)&quot;,l(n))+&quot;;\n            if(&quot;+s+&quot;) {\n              result.a = &quot;+((e=o.slice())[t-1]=&quot;(&quot;+e[t-1]+&quot; + 1)&quot;,e[t-2]=&quot;(&quot;+e[t-2]+&quot; + 1)&quot;,l(e))+&quot;;\n            }\n          }\n          setOutput(result);\n        }\n    &quot;},ei=function(t,e,n,r,o,i,a){void 0===a&amp;&amp;(a=!0),this.variableNames=[&quot;updates&quot;,&quot;indices&quot;,&quot;defaultValue&quot;],this.outputShape=i;var s=Dn(o.length),u=Dn(i.length),c=&quot;&quot;;1===n?c=&quot;i&quot;:2===n&amp;&amp;(c=&quot;i, j&quot;);var l=&quot;getIndices(&quot;+c+&quot;)&quot;,h=&quot;&quot;;1===r?h=&quot;i&quot;:2===r&amp;&amp;(h=&quot;i, coords[1]&quot;);var p=&quot;getUpdates(&quot;+h+&quot;)&quot;,f=1&lt;e?&quot;strides[j]&quot;:&quot;strides&quot;;this.userCode=&quot;\n        &quot;+s+&quot; strides = &quot;+s+&quot;(&quot;+o+&quot;);\n\n        void main() {\n          &quot;+u+&quot; coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i &lt; &quot;+t+&quot;; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j &lt; &quot;+e+&quot;; j++) {\n              int index = round(&quot;+l+&quot;);\n              flattenedIndex += index * &quot;+f+&quot;;\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += &quot;+p+&quot;;\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      &quot;},ni=function(t,e){this.variableNames=[&quot;x&quot;,&quot;segmentIds&quot;];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=t.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,c=&quot;\n        sumValue += dot(values, segFilter);\n    &quot;,l=&quot;&quot;;0&lt;o%n&amp;&amp;(l=&quot;\n        if (inIdx &lt; 0 || inIdx &gt;= &quot;+o+&quot;) {\n          return initializationValue;\n        }\n      &quot;);var h=&quot;&quot;;0&lt;o%n&amp;&amp;(h=&quot;\n        if (inIdx &lt; 0 || inIdx &gt;= &quot;+o+&quot;) {\n          return -1.0;\n        }\n      &quot;),this.userCode=&quot;\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        &quot;+l+&quot;\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        &quot;+h+&quot;\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          &quot;+i+&quot;)) * float(&quot;+n+&quot;));\n        int currentSeg = int(mod(float(outIdx), float(&quot;+i+&quot;)));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i &lt; &quot;+s+&quot;; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          &quot;+c+&quot;\n        }\n\n        int inIdx = inOffset + &quot;+s+&quot;;\n        if (&quot;+(1===u)+&quot;) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          &quot;+c+&quot;\n        } else if (&quot;+(2===u)+&quot;) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          &quot;+c+&quot;\n        } else if (&quot;+(3===u)+&quot;) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          &quot;+c+&quot;\n        }\n        setOutput(sumValue);\n      }\n    &quot;},ri=function(t,e,n){var r,o;if(this.variableNames=[&quot;c&quot;,&quot;a&quot;,&quot;b&quot;],this.outputShape=e,4&lt;n)throw Error(&quot;Where for rank &quot;+n+&quot; is not yet supported&quot;);if(1===n)r=o=&quot;resRC&quot;;else{for(var i=[&quot;resRC.x&quot;,&quot;resRC.y&quot;,&quot;resRC.z&quot;,&quot;resRC.w&quot;],a=[],s=[],u=0;u&lt;e.length;u++)s.push(&quot;&quot;+i[u]),u&lt;t&amp;&amp;a.push(&quot;&quot;+i[u]);r=a.join(),o=s.join()}var c=Dn(n);this.userCode=&quot;\n      void main() {\n        &quot;+c+&quot; resRC = getOutputCoords();\n        float cVal = getC(&quot;+r+&quot;);\n        if (cVal &gt;= 1.0) {\n          setOutput(getA(&quot;+o+&quot;));\n        } else {\n          setOutput(getB(&quot;+o+&quot;));\n        }\n      }\n    &quot;},oi=function(){function t(t){this.variableNames=[&quot;source&quot;],this.outputShape=t,this.rank=t.length;var e,n=Dn(this.rank),r=&quot;uniform int start[&quot;+this.rank+&quot;];&quot;,o=function(t){if(1===t)return&quot;sourceLoc&quot;;if(t&lt;=6)return ii.slice(0,t).map(function(t){return&quot;sourceLoc.&quot;+t}).join(&quot;,&quot;);throw Error(&quot;Slicing for rank &quot;+t+&quot; is not yet supported&quot;)}(this.rank);e=&quot;\n        &quot;+n+&quot; sourceLoc;\n        &quot;+n+&quot; coords = getOutputCoords();\n        &quot;+t.map(function(t,e){return&quot;sourceLoc.&quot;+ii[e]+&quot; = start[&quot;+e+&quot;] + coords.&quot;+ii[e]+&quot;;&quot;}).join(&quot;\n&quot;)+&quot;\n      &quot;,this.userCode=&quot;\n      &quot;+r+&quot;\n      void main() {\n        &quot;+e+&quot;\n        setOutput(getSource(&quot;+o+&quot;));\n      }\n    &quot;}return t.prototype.getCustomSetupFunc=function(n){var r=this;if(n.length!==this.rank)throw Error(&quot;The rank (&quot;+this.rank+&quot;) of the program must match the length of start (&quot;+n.length+&quot;)&quot;);return function(t,e){null==r.startLoc&amp;&amp;(r.startLoc=t.getUniformLocationNoThrow(e,&quot;start&quot;),null==r.startLoc)||t.gl.uniform1iv(r.startLoc,n)}},t}(),ii=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;w&quot;,&quot;u&quot;,&quot;v&quot;];var ai=function(){function t(t){this.variableNames=[&quot;source&quot;],this.usesPackedTextures=!0,this.outputShape=t,this.rank=t.length;var e=Dn(this.rank),n=mn(&quot;coords&quot;,this.rank),r=mn(&quot;sourceLoc&quot;,this.rank),o=1===this.rank?&quot;sourceLoc&quot;:&quot;vec2(&quot;+r.slice(-2).join()+&quot;)&quot;,i=&quot;getChannel(getSource(&quot;+r.join()+&quot;), &quot;+o+&quot;)&quot;,a=&quot;\n      result.x = &quot;+i+&quot;;\n      if (++&quot;+n[this.rank-1]+&quot; &lt; &quot;+t[this.rank-1]+&quot;) {\n        ++&quot;+r[this.rank-1]+&quot;;\n        result.y = &quot;+i+&quot;;\n        --&quot;+r[this.rank-1]+&quot;;\n      }\n    &quot;,s=1===this.rank?&quot;&quot;:&quot;\n      --&quot;+n[this.rank-1]+&quot;;\n      if (++&quot;+n[this.rank-2]+&quot; &lt; &quot;+t[this.rank-2]+&quot;) {\n        ++&quot;+r[this.rank-2]+&quot;;\n        result.z = &quot;+i+&quot;;\n        if (++&quot;+n[this.rank-1]+&quot; &lt; &quot;+t[this.rank-1]+&quot;) {\n          ++&quot;+r[this.rank-1]+&quot;;\n          result.w = &quot;+i+&quot;;\n        }\n      }\n    &quot;,u=this.rank&lt;=4?&quot;sourceLoc = coords +\n            &quot;+e+&quot;(&quot;+t.map(function(t,e){return&quot;start[&quot;+e+&quot;]&quot;}).join()+&quot;);&quot;:t.map(function(t,e){return r[e]+&quot; = &quot;+n[e]+&quot; + start[&quot;+e+&quot;];&quot;}).join(&quot;\n&quot;);this.userCode=&quot;\n      uniform int start[&quot;+this.rank+&quot;];\n      void main() {\n        &quot;+e+&quot; coords = getOutputCoords();\n        &quot;+e+&quot; sourceLoc;\n        &quot;+u+&quot; \n        vec4 result = vec4(0.);\n        &quot;+a+&quot;\n        &quot;+s+&quot;\n        setOutput(result);\n      }\n    &quot;}return t.prototype.getCustomSetupFunc=function(n){var r=this;if(n.length!==this.rank)throw Error(&quot;The rank (&quot;+this.rank+&quot;) of the program must match the length of start (&quot;+n.length+&quot;)&quot;);return function(t,e){null==r.startLoc&amp;&amp;(r.startLoc=t.getUniformLocationNoThrow(e,&quot;start&quot;),null==r.startLoc)||t.gl.uniform1iv(r.startLoc,n)}},t}(),si=function(t,e,n,r){this.variableNames=[&quot;x&quot;];var o=n.filter(function(t,e){return-1===r.indexOf(e)});this.outputShape=o;var i=n.length,a=Dn(n.length),s=Dn(o.length),u=&quot;&quot;;if(1===i)u=&quot;coords * strides + begin&quot;;else{var c=0;u=n.map(function(t,e){return-1===r.indexOf(e)?(c++,1===o.length?&quot;coords * strides[&quot;+e+&quot;] + begin[&quot;+e+&quot;]&quot;:&quot;coords[&quot;+(c-1)+&quot;] * strides[&quot;+e+&quot;] + begin[&quot;+e+&quot;]&quot;):&quot;begin[&quot;+e+&quot;]&quot;}).join(&quot;,&quot;)}this.userCode=&quot;\n      &quot;+a+&quot; begin = &quot;+a+&quot;(&quot;+t+&quot;);\n      &quot;+a+&quot; strides = &quot;+a+&quot;(&quot;+e+&quot;);\n\n      void main() {\n        &quot;+s+&quot; coords = getOutputCoords();\n        setOutput(getX(&quot;+u+&quot;));\n      }\n    &quot;},ui=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,o=ci(e,n),i=li(t,o,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),0&lt;this.freeTextures[i].length){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),o===br.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===br.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===br.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===br.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===br.PACKED_4X1_UNSIGNED_BYTE&amp;&amp;(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var o=li(e,ci(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],a=i.indexOf(t);if(a&lt;0)throw new Error(&quot;Cannot release a texture that was never provided by this texture manager&quot;);i.splice(a,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log(&quot;Free/Used&quot;,this.numFreeTextures+&quot; / &quot;+this.numUsedTextures,&quot;(&quot;+t+&quot;)&quot;)}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function ci(t,e){if(t===wr.UPLOAD)return e?br.PACKED_2X2_FLOAT32:br.UNPACKED_FLOAT32;if(t===wr.RENDER||null==t)return e?Zt.get(&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;)?br.PACKED_2X2_FLOAT32:br.PACKED_2X2_FLOAT16:Zt.get(&quot;WEBGL_RENDER_FLOAT32_ENABLED&quot;)?br.UNPACKED_FLOAT32:br.UNPACKED_FLOAT16;if(t===wr.DOWNLOAD||t===wr.PIXELS)return br.PACKED_4X1_UNSIGNED_BYTE;throw new Error(&quot;Unknown logical texture type &quot;+t)}function li(t,e,n){return t[0]+&quot;_&quot;+t[1]+&quot;_&quot;+e+&quot;_&quot;+n}var hi=function(t,e){this.variableNames=[&quot;A&quot;];for(var n=new Array(t.length),r=0;r&lt;n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Dn(this.rank),i=function(t){var e=t.length;if(5&lt;e)throw Error(&quot;Tile for rank &quot;+e+&quot; is not yet supported&quot;);if(1===e)return&quot;imod(resRC, &quot;+t[0]+&quot;)&quot;;for(var n=[&quot;resRC.x&quot;,&quot;resRC.y&quot;,&quot;resRC.z&quot;,&quot;resRC.w&quot;,&quot;resRC.u&quot;],r=[],o=0;o&lt;t.length;o++)r.push(&quot;imod(&quot;+n[o]+&quot;, &quot;+t[o]+&quot;)&quot;);return r.join()}(t);this.userCode=&quot;\n      void main() {\n        &quot;+o+&quot; resRC = getOutputCoords();\n        setOutput(getA(&quot;+i+&quot;));\n      }\n    &quot;};var pi=function(t,e){this.variableNames=[&quot;A&quot;];for(var n=new Array(t.length),r=0;r&lt;n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Dn(this.rank),i=function(t){var e=t.length;if(6&lt;e)throw Error(&quot;Transpose for rank &quot;+e+&quot; is not yet supported&quot;);for(var n=[&quot;resRC.x&quot;,&quot;resRC.y&quot;,&quot;resRC.z&quot;,&quot;resRC.w&quot;,&quot;resRC.u&quot;,&quot;resRC.v&quot;],r=new Array(e),o=0;o&lt;t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode=&quot;\n    void main() {\n      &quot;+o+&quot; resRC = getOutputCoords();\n      setOutput(getA(&quot;+i+&quot;));\n    }\n    &quot;};var fi=function(t,e){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0;for(var n=new Array(t.length),r=0;r&lt;n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,6&lt;this.rank)throw Error(&quot;Packed transpose for rank &quot;+this.rank+&quot; is not yet supported.&quot;);var o=Dn(this.rank),i=vn(&quot;rc&quot;,this.rank),a=new Array(this.rank);for(r=0;r&lt;e.length;r++)a[e[r]]=i[r];var s=&quot;vec2(&quot;+a.slice(-2).join()+&quot;)&quot;,u=&quot;++&quot;+i[this.rank-1]+&quot; &lt; &quot;+n[this.rank-1],c=&quot;getChannel(getA(&quot;+a.join()+&quot;), &quot;+s+&quot;)&quot;;this.userCode=&quot;\n    void main() {\n      &quot;+o+&quot; rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = &quot;+c+&quot;;\n      if(&quot;+u+&quot;) {\n        result[1] = &quot;+c+&quot;;\n      }\n      --&quot;+i[this.rank-1]+&quot;;\n      if(++&quot;+i[this.rank-2]+&quot; &lt; &quot;+n[this.rank-2]+&quot;) {\n        result[2] = &quot;+c+&quot;;\n        if(&quot;+u+&quot;) {\n          result[3] = &quot;+c+&quot;;\n        }\n      }  \n      setOutput(result);\n    }\n    &quot;},di=1.7580993408473768,vi=1.0507009873554805,mi=function(t,e){this.variableNames=[&quot;A&quot;],this.outputShape=t,this.userCode=&quot;\n      float unaryOperation(float x) {\n        &quot;+e+&quot;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    &quot;},gi=&quot;if (isnan(x)) return x;&quot;,yi=gi+&quot;\n  return (x &lt; 0.0) ? 0.0 : x;\n&quot;;var xi=&quot;return exp(x);&quot;,wi=&quot;return x;&quot;,bi=&quot;\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n&quot;,Ei=function(t,e){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0,this.outputShape=t,this.userCode=&quot;\n      vec4 unaryOperation(vec4 x) {\n        &quot;+e+&quot;\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    &quot;},Ci=function(t){this.variableNames=[&quot;A&quot;],this.usesPackedTextures=!0;var e=(this.outputShape=t).length,n=mn(&quot;rc&quot;,e),r=Dn(e),o=function(t,e){if(1===t)return&quot;rc&quot;;for(var n=&quot;&quot;,r=0;r&lt;t;r++)n+=e[r],r&lt;t-1&amp;&amp;(n+=&quot;,&quot;);return n}(e,n),i=n.slice(-2),a=e&lt;=1?&quot;rc&quot;:&quot;vec2(&quot;+i.join(&quot;,&quot;)+&quot;)&quot;;this.userCode=&quot;\n      void main() {\n        &quot;+r+&quot; rc = getOutputCoords();\n        vec4 packedInput = getA(&quot;+o+&quot;);\n\n        setOutput(getChannel(packedInput, &quot;+a+&quot;));\n      }\n    &quot;};var _i=Fe({concat_:function(t,n){void 0===n&amp;&amp;(n=0),D(1&lt;=t.length,function(){return&quot;Pass at least one tensor to concat&quot;});var e=oe(t,&quot;tensors&quot;,&quot;concat&quot;);n=k(n,e[0].shape)[0];var r=Re(e.map(function(t){return t.shape}),n);if(0===B(r))return Ge([],r);if(1===(e=e.filter(function(t){return 0&lt;t.size})).length)return e[0];var o=e.map(function(t){return t.shape});!function(t,r){var o=t[0].length;t.forEach(function(t,e){D(t.length===o,function(){return&quot;Error in concat&quot;+o+&quot;D: rank of tensors[&quot;+e+&quot;] must be the same as the rank of the rest (&quot;+o+&quot;)&quot;})}),D(0&lt;=r&amp;&amp;r&lt;o,function(){return&quot;Error in concat&quot;+o+&quot;D: axis must be between 0 and &quot;+(o-1)+&quot;.&quot;});var i=t[0];t.forEach(function(t,e){for(var n=0;n&lt;o;n++)D(n===r||t[n]===i[n],function(){return&quot;Error in concat&quot;+o+&quot;D: Shape of tensors[&quot;+e+&quot;] (&quot;+t+&quot;) does not match the shape of the rest (&quot;+i+&quot;) along the non-concatenated axis &quot;+e+&quot;.&quot;})})}(o,n);var i=e;return Zt.engine.runKernel(function(t){return t.concat(e,n)},i,function(t){var e=o.map(function(t){return t[n]});return Ii(t,e,n).map(function(t){return function(){return t}})})}}),Si=Fe({concat1d_:function(t){return _i(t,0)}}),Ri=Fe({concat2d_:function(t,e){return _i(t,e)}}),Ni=Fe({concat3d_:function(t,e){return _i(t,e)}}),ki=Fe({concat4d_:function(t,e){return _i(t,e)}}),Ii=Fe({split_:function(t,e,n){void 0===n&amp;&amp;(n=0);var r,o=re(t,&quot;x&quot;,&quot;split&quot;);return n=k(n,o.shape)[0],r=&quot;number&quot;==typeof e?(D(o.shape[n]%e==0,function(){return&quot;Number of splits must evenly divide the axis.&quot;}),new Array(e).fill(o.shape[n]/e)):(D(o.shape[n]===e.reduce(function(t,e){return t+e}),function(){return&quot;The sum of sizes must match the size of the axis dimension.&quot;}),e),Zt.engine.runKernel(function(t){return t.split(o,r,n)},{$x:o},function(t){return{$x:function(){return _i(t,n)}}})}});function Ti(t,e){return t(e={exports:{}},e.exports),e.exports}var Ai=Ti(function(t){!function(t,e,n){function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function r(t,e){var n=new function(t){var r,e=this,n=(r=4022871197,function(t){t=t.toString();for(var e=0;e&lt;t.length;e++){var n=.02519603282416938*(r+=t.charCodeAt(e));n-=r=n&gt;&gt;&gt;0,r=(n*=r)&gt;&gt;&gt;0,r+=4294967296*(n-=r)}return 2.3283064365386963e-10*(r&gt;&gt;&gt;0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(&quot; &quot;),e.s1=n(&quot; &quot;),e.s2=n(&quot; &quot;),e.s0-=n(t),e.s0&lt;0&amp;&amp;(e.s0+=1),e.s1-=n(t),e.s1&lt;0&amp;&amp;(e.s1+=1),e.s2-=n(t),e.s2&lt;0&amp;&amp;(e.s2+=1),n=null}(t),r=e&amp;&amp;e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&amp;&amp;(&quot;object&quot;==typeof r&amp;&amp;i(r,n),o.state=function(){return i(n,{})}),o}e&amp;&amp;e.exports?e.exports=r:this.alea=r}(0,t)}),Di=Ti(function(t){!function(t,e,n){function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function r(t,e){var n=new function(t){var e=this,n=&quot;&quot;;e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x&lt;&lt;11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w&gt;&gt;&gt;19^t^t&gt;&gt;&gt;8},t===(0|t)?e.x=t:n+=t;for(var r=0;r&lt;n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),r=e&amp;&amp;e.state,o=function(){return(n.next()&gt;&gt;&gt;0)/4294967296};return o.double=function(){do{var t=((n.next()&gt;&gt;&gt;11)+(n.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&amp;&amp;(&quot;object&quot;==typeof r&amp;&amp;i(r,n),o.state=function(){return i(n,{})}),o}e&amp;&amp;e.exports?e.exports=r:this.xor128=r}(0,t)}),Mi=Ti(function(t){!function(t,e,n){function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function r(t,e){var n=new function(t){var e=this,n=&quot;&quot;;e.next=function(){var t=e.x^e.x&gt;&gt;&gt;2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v&lt;&lt;4^t^t&lt;&lt;1)|0},e.x=0,e.y=0,e.z=0,e.w=0,t===((e.v=0)|t)?e.x=t:n+=t;for(var r=0;r&lt;n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&amp;&amp;(e.d=e.x&lt;&lt;10^e.x&gt;&gt;&gt;4),e.next()}(t),r=e&amp;&amp;e.state,o=function(){return(n.next()&gt;&gt;&gt;0)/4294967296};return o.double=function(){do{var t=((n.next()&gt;&gt;&gt;11)+(n.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&amp;&amp;(&quot;object&quot;==typeof r&amp;&amp;i(r,n),o.state=function(){return i(n,{})}),o}e&amp;&amp;e.exports?e.exports=r:this.xorwow=r}(0,t)}),Oi=Ti(function(t){!function(t,e,n){function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function r(t,e){null==t&amp;&amp;(t=+new Date);var n=new function(t){var o=this;o.next=function(){var t,e,n=o.x,r=o.i;return t=n[r],e=(t^=t&gt;&gt;&gt;7)^t&lt;&lt;24,e^=(t=n[r+1&amp;7])^t&gt;&gt;&gt;10,e^=(t=n[r+3&amp;7])^t&gt;&gt;&gt;3,e^=(t=n[r+4&amp;7])^t&lt;&lt;7,t=n[r+7&amp;7],e^=(t^=t&lt;&lt;13)^t&lt;&lt;9,n[r]=e,o.i=r+1&amp;7,e},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=&quot;&quot;+e,n=0;n&lt;e.length;++n)r[7&amp;n]=r[7&amp;n]&lt;&lt;15^e.charCodeAt(n)+r[n+1&amp;7]&lt;&lt;13;for(;r.length&lt;8;)r.push(0);for(n=0;n&lt;8&amp;&amp;0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;0&lt;n;--n)t.next()}(o,t)}(t),r=e&amp;&amp;e.state,o=function(){return(n.next()&gt;&gt;&gt;0)/4294967296};return o.double=function(){do{var t=((n.next()&gt;&gt;&gt;11)+(n.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&amp;&amp;(r.x&amp;&amp;i(r,n),o.state=function(){return i(n,{})}),o}e&amp;&amp;e.exports?e.exports=r:this.xorshift7=r}(0,t)}),Pi=Ti(function(t){!function(t,e,n){function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function r(t,e){null==t&amp;&amp;(t=+new Date);var n=new function(t){var i=this;i.next=function(){var t,e,n=i.w,r=i.X,o=i.i;return i.w=n=n+1640531527|0,e=r[o+34&amp;127],t=r[o=o+1&amp;127],e^=e&lt;&lt;13,t^=t&lt;&lt;17,e^=e&gt;&gt;&gt;15,t^=t&gt;&gt;&gt;12,e=r[o]=e^t,i.i=o,e+(n^n&gt;&gt;&gt;16)|0},function(t,e){var n,r,o,i,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+=&quot;\0&quot;,r=0,u=Math.max(u,e.length)),o=0,i=-32;i&lt;u;++i)e&amp;&amp;(r^=e.charCodeAt((i+32)%e.length)),0===i&amp;&amp;(a=r),r^=r&lt;&lt;10,r^=r&gt;&gt;&gt;15,r^=r&lt;&lt;4,r^=r&gt;&gt;&gt;13,0&lt;=i&amp;&amp;(a=a+1640531527|0,o=0==(n=s[127&amp;i]^=r+a)?o+1:0);for(128&lt;=o&amp;&amp;(s[127&amp;(e&amp;&amp;e.length||0)]=-1),o=127,i=512;0&lt;i;--i)r=s[o+34&amp;127],n=s[o=o+1&amp;127],r^=r&lt;&lt;13,n^=n&lt;&lt;17,r^=r&gt;&gt;&gt;15,n^=n&gt;&gt;&gt;12,s[o]=r^n;t.w=a,t.X=s,t.i=o}(i,t)}(t),r=e&amp;&amp;e.state,o=function(){return(n.next()&gt;&gt;&gt;0)/4294967296};return o.double=function(){do{var t=((n.next()&gt;&gt;&gt;11)+(n.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&amp;&amp;(r.X&amp;&amp;i(r,n),o.state=function(){return i(n,{})}),o}e&amp;&amp;e.exports?e.exports=r:this.xor4096=r}(0,t)}),Fi=Ti(function(t){!function(t,e,n){function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function r(t,e){var n=new function(t){var o=this,e=&quot;&quot;;o.next=function(){var t=o.b,e=o.c,n=o.d,r=o.a;return t=t&lt;&lt;25^t&gt;&gt;&gt;7^e,e=e-n|0,n=n&lt;&lt;24^n&gt;&gt;&gt;8^r,r=r-t|0,o.b=t=t&lt;&lt;20^t&gt;&gt;&gt;12^e,o.c=e=e-n|0,o.d=n&lt;&lt;16^e&gt;&gt;&gt;16^r,o.a=r-t|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,t===Math.floor(t)?(o.a=t/4294967296|0,o.b=0|t):e+=t;for(var n=0;n&lt;e.length+20;n++)o.b^=0|e.charCodeAt(n),o.next()}(t),r=e&amp;&amp;e.state,o=function(){return(n.next()&gt;&gt;&gt;0)/4294967296};return o.double=function(){do{var t=((n.next()&gt;&gt;&gt;11)+(n.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&amp;&amp;(&quot;object&quot;==typeof r&amp;&amp;i(r,n),o.state=function(){return i(n,{})}),o}e&amp;&amp;e.exports?e.exports=r:this.tychei=r}(0,t)}),Li=Ti(function(e){!function(s,u){var c,l=this,h=256,p=6,f=&quot;random&quot;,d=u.pow(h,p),v=u.pow(2,52),m=2*v,g=h-1;function t(t,e,n){var r=[],o=x(function t(e,n){var r,o=[],i=typeof e;if(n&amp;&amp;&quot;object&quot;==i)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:&quot;string&quot;==i?e:e+&quot;\0&quot;}((e=1==e?{entropy:!0}:e||{}).entropy?[t,w(s)]:null==t?function(){try{var t;return c&amp;&amp;(t=c.randomBytes)?t=t(h):(t=new Uint8Array(h),(l.crypto||l.msCrypto).getRandomValues(t)),w(t)}catch(t){var e=l.navigator,n=e&amp;&amp;e.plugins;return[+new Date,l,n,l.screen,w(s)]}}():t,3),r),i=new function(t){var e,n=t.length,a=this,r=0,o=a.i=a.j=0,i=a.S=[];for(n||(t=[n++]);r&lt;h;)i[r]=r++;for(r=0;r&lt;h;r++)i[r]=i[o=g&amp;o+t[r%n]+(e=i[r])],i[o]=e;(a.g=function(t){for(var e,n=0,r=a.i,o=a.j,i=a.S;t--;)e=i[r=g&amp;r+1],n=n*h+i[g&amp;(i[r]=i[o=g&amp;o+e])+(i[o]=e)];return a.i=r,a.j=o,n})(h)}(r),a=function(){for(var t=i.g(p),e=d,n=0;t&lt;v;)t=(t+n)*h,e*=h,n=i.g(1);for(;m&lt;=t;)t/=2,e/=2,n&gt;&gt;&gt;=1;return(t+n)/e};return a.int32=function(){return 0|i.g(4)},a.quick=function(){return i.g(4)/4294967296},a.double=a,x(w(i.S),s),(e.pass||n||function(t,e,n,r){return r&amp;&amp;(r.S&amp;&amp;y(r,i),t.state=function(){return y(i,{})}),n?(u[f]=t,e):t})(a,o,&quot;global&quot;in e?e.global:this==u,e.state)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function x(t,e){for(var n,r=t+&quot;&quot;,o=0;o&lt;r.length;)e[g&amp;o]=g&amp;(n^=19*e[g&amp;o])+r.charCodeAt(o++);return w(e)}function w(t){return String.fromCharCode.apply(0,t)}if(u[&quot;seed&quot;+f]=t,x(u.random(),s),e.exports){e.exports=t;try{c=require(&quot;crypto&quot;)}catch(t){}}}([],Math)});Li.alea=Ai,Li.xor128=Di,Li.xorwow=Mi,Li.xorshift7=Oi,Li.xor4096=Pi,Li.tychei=Fi;var Bi=Li.alea,Wi=function(){function t(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&amp;&amp;(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Bi(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){for(var o=void 0,i=void 0,a=void 0;1&lt;=(a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i)||0===a;);var s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&amp;&amp;!this.isValidTruncated(e)||(r=!0)}return this.truncated&amp;&amp;!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||&quot;float32&quot;===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t&lt;=this.upper&amp;&amp;t&gt;=this.lower},t}();function zi(t,e,n){return void 0===e&amp;&amp;(e=&quot;float32&quot;),e=e||&quot;float32&quot;,tt(t),new lt(t,e,n)}function Ui(t,e){void 0===e&amp;&amp;(e=!1),console.log(t.toString(e))}var Gi=Fe({batchToSpaceND_:function(t,e,n){var r=re(t,&quot;x&quot;,&quot;batchToSpaceND&quot;),o=e.reduce(function(t,e){return t*e});return D(r.rank&gt;=1+e.length,function(){return&quot;input rank is &quot;+r.rank+&quot; but should be &gt; than blockShape.length &quot;+e.length}),D(n.length===e.length,function(){return&quot;crops.length is &quot;+n.length+&quot; but should be equal to blockShape.length  &quot;+e.length}),D(r.shape[0]%o==0,function(){return&quot;input tensor batch is &quot;+r.shape[0]+&quot; but is not divisible by the product of the elements of blockShape &quot;+e.join(&quot; * &quot;)+&quot; === &quot;+o}),Zt.engine.runKernel(function(t){return t.batchToSpaceND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}})}}),Vi=Fe({cast_:function(t,e){var n=re(t,&quot;x&quot;,&quot;cast&quot;);return Zt.engine.runKernel(function(t){return t.cast(n,e)},{$x:n},function(t){return{$x:function(){return t.clone()}}})}}),Hi=Fe({clone_:function(t){var e=re(t,&quot;x&quot;,&quot;clone&quot;,null);return Zt.engine.runKernel(function(t){return dt.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),qi=Fe({cumsum_:function(t,e,n,r){void 0===e&amp;&amp;(e=0),void 0===n&amp;&amp;(n=!1),void 0===r&amp;&amp;(r=!1);var o=re(t,&quot;x&quot;,&quot;cumsum&quot;),i=Ce([e|=0],o.rank),a=o;null!=i&amp;&amp;(a=o.transpose(i));var s=Se(1,o.rank)[0],u=Zt.engine.runKernel(function(t){return t.cumsum(a,s,n,r)},{permutedX:a},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=i&amp;&amp;(u=u.transpose(i)),u}}),ji=Fe({depthToSpace_:function(t,e,n){void 0===n&amp;&amp;(n=&quot;NHWC&quot;);var r=re(t,&quot;x&quot;,&quot;depthToSpace&quot;),o=&quot;NHWC&quot;===n?r.shape[1]:r.shape[2],i=&quot;NHWC&quot;===n?r.shape[2]:r.shape[3],a=&quot;NHWC&quot;===n?r.shape[3]:r.shape[1];return D(0&lt;=o*e,function(){return&quot;Negative dimension size caused by overflow when multiplying\n      &quot;+o+&quot; and &quot;+e+&quot;  for depthToSpace with input shape\n      &quot;+r.shape}),D(0&lt;=i*e,function(){return&quot;Negative dimension size caused by overflow when multiplying\n      &quot;+i+&quot; and &quot;+e+&quot; for depthToSpace with input shape\n          &quot;+r.shape}),D(a%(e*e)==0,function(){return&quot;Dimension size must be evenly divisible by &quot;+e*e+&quot; but is &quot;+a+&quot; for depthToSpace with input shape &quot;+r.shape}),Zt.engine.runKernel(function(t){return t.depthToSpace(r,e,n)},{$x:r})}}),$i=Fe({expandDims_:function(t,e){void 0===e&amp;&amp;(e=0);var n=re(t,&quot;x&quot;,&quot;expandDims&quot;);D(e&lt;=n.rank,function(){return&quot;Axis must be &lt;= rank of the tensor&quot;});var r=n.shape.slice();return e&lt;0&amp;&amp;(D(-(n.rank+1)&lt;=e,function(){return&quot;Axis must be in the interval [&quot;+-(n.rank+1)+&quot;, &quot;+n.rank+&quot;]&quot;}),e=n.rank+e+1),r.splice(e,0,1),ia(n,r)}}),Ki=Fe({eye_:function(t,e,n,r){void 0===r&amp;&amp;(r=&quot;float32&quot;),null==e&amp;&amp;(e=t);for(var o=zi([t,e],r),i=t&lt;=e?t:e,a=0;a&lt;i;++a)o.set(1,a,a);var s=o.toTensor().as2D(t,e);if(null==n)return s;if(1===n.length)return ca($i(s,0),[n[0],1,1]);if(2===n.length)return ca($i($i(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ca($i($i($i(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(&quot;eye() currently supports only 1D and 2D batchShapes, but received &quot;+n.length+&quot;D.&quot;)}}),Xi=Fe({multinomial_:function(t,e,n,r){void 0===r&amp;&amp;(r=!1);var o=re(t,&quot;logits&quot;,&quot;multinomial&quot;),i=o.size,a=o.rank;if(i&lt;2)throw new Error(&quot;Error in multinomial: you need at least 2 outcomes, but got &quot;+i+&quot;.&quot;);if(2&lt;a)throw new Error(&quot;Rank of probabilities must be 1 or 2, but is &quot;+a);n=n||Math.random();var s=1===a?o.as2D(1,-1):o,u=Zt.engine.runKernel(function(t){return t.multinomial(s,r,e,n)},{logits2D:s});return 1===a?u.as1D():u}}),Yi=Fe({oneHot_:function(t,e,n,r){if(void 0===n&amp;&amp;(n=1),void 0===r&amp;&amp;(r=0),e&lt;2)throw new Error(&quot;Error in oneHot: depth must be &gt;=2, but it is &quot;+e);var o=re(t,&quot;indices&quot;,&quot;oneHot&quot;,&quot;int32&quot;),i=o.shape.concat([e]);return o=o.flatten(),Zt.engine.runKernel(function(t){return t.oneHot(o,e,n,r)},{$indices:o},function(t){return{$indices:function(){return Qe(o.shape,&quot;float32&quot;)}}}).reshape(i)}}),Qi=Fe({pad_:function(t,e,n){void 0===n&amp;&amp;(n=0);var r=re(t,&quot;x&quot;,&quot;pad&quot;);if(0===r.rank)throw new Error(&quot;pad(scalar) is not defined. Pass non-scalar to pad&quot;);var o=e.map(function(t){return t[0]});return Zt.engine.runKernel(function(t){return t.pad(r,e,n)},{$x:r},function(t){return{$x:function(){return t.slice(o,r.shape)}}})}}),Ji=Fe({pad1d_:function(t,e,n){return void 0===n&amp;&amp;(n=0),D(2===e.length,function(){return&quot;Invalid number of paddings. Must be length of 2.&quot;}),Qi(t,[e],n)}}),Zi=Fe({pad2d_:function(t,e,n){return void 0===n&amp;&amp;(n=0),D(2===e.length&amp;&amp;2===e[0].length&amp;&amp;2===e[1].length,function(){return&quot;Invalid number of paddings. Must be length of 2 each.&quot;}),Qi(t,e,n)}}),ta=Fe({pad3d_:function(t,e,n){return void 0===n&amp;&amp;(n=0),D(3===e.length&amp;&amp;2===e[0].length&amp;&amp;2===e[1].length&amp;&amp;2===e[2].length,function(){return&quot;Invalid number of paddings. Must be length of 2 each.&quot;}),Qi(t,e,n)}}),ea=Fe({pad4d_:function(t,e,n){return void 0===n&amp;&amp;(n=0),D(4===e.length&amp;&amp;2===e[0].length&amp;&amp;2===e[1].length&amp;&amp;2===e[2].length&amp;&amp;2===e[3].length,function(){return&quot;Invalid number of paddings. Must be length of 2 each.&quot;}),Qi(t,e,n)}}),na=Fe({rand_:function(t,e,n){var r=B(t),o=null;if(null==n||&quot;float32&quot;===n)o=new Float32Array(r);else if(&quot;int32&quot;===n)o=new Int32Array(r);else{if(&quot;bool&quot;!==n)throw new Error(&quot;Unknown data type &quot;+n);o=new Uint8Array(r)}for(var i=0;i&lt;r;i++)o[i]=e();return dt.make(t,{values:o},n)}}),ra=Fe({randomNormal_:function(t,e,n,r,o){if(void 0===e&amp;&amp;(e=0),void 0===n&amp;&amp;(n=1),null!=r&amp;&amp;&quot;bool&quot;===r)throw new Error(&quot;Unsupported data type &quot;+r);for(var i=new Wi(e,n,r,!1,o),a=zi(t,r),s=0;s&lt;a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),oa=Fe({randomUniform_:function(t,e,n,r){void 0===e&amp;&amp;(e=0),void 0===n&amp;&amp;(n=1),void 0===r&amp;&amp;(r=&quot;float32&quot;);for(var o=zi(t,r),i=0;i&lt;o.values.length;i++)o.values[i]=v(e,n);return o.toTensor()}}),ia=Fe({reshape_:function(t,e){var n=re(t,&quot;x&quot;,&quot;reshape&quot;,null);return e=N(e,n.size),D(n.size===B(e),function(){return&quot;new shape and old shape must have the same number of elements.&quot;}),Zt.engine.runKernel(function(t){return t.reshape(n,e)},{$x:n},function(t){return{$x:function(){return t.reshape(n.shape)}}})}}),aa=Fe({spaceToBatchND_:function(t,r,o){var e=re(t,&quot;x&quot;,&quot;spaceToBatchND&quot;);return D(e.rank&gt;=1+r.length,function(){return&quot;input rank &quot;+e.rank+&quot; should be &gt; than [blockShape] &quot;+r.length}),D(o.length===r.length,function(){return&quot;paddings.shape[0] &quot;+o.length+&quot; must be equal to [blockShape] &quot;+r.length}),D(e.shape.reduce(function(t,e,n){return 0&lt;n&amp;&amp;n&lt;=r.length?t&amp;&amp;(e+o[n-1][0]+o[n-1][1])%r[n-1]==0:t},!0),function(){return&quot;input spatial dimensions &quot;+e.shape.slice(1)+&quot; with paddings &quot;+o.toString()+&quot; must be divisible by blockShapes &quot;+r.toString()}),Zt.engine.runKernel(function(t){return t.spaceToBatchND(e,r,o)},{$x:e},function(t){return{$x:function(){return t.batchToSpaceND(r,o)}}})}}),sa=Fe({squeeze_:function(t,e){var n=re(t,&quot;x&quot;,&quot;squeeze&quot;);return ia(n,I(n.shape,e).newShape)}}),ua=Fe({stack_:function(t,e){void 0===e&amp;&amp;(e=0);var n=oe(t,&quot;tensors&quot;,&quot;stack&quot;);if(D(1&lt;=n.length,function(){return&quot;Pass at least one tensor to tf.stack&quot;}),1===n.length)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;D(e&lt;=r,function(){return&quot;Axis must be &lt;= rank of the tensor&quot;}),n.forEach(function(t){g(o,t.shape,&quot;All tensors passed to stack must have matching shapes&quot;)}),n.forEach(function(t){D(i===t.dtype,function(){return&quot;All tensors passed to stack must have matching dtypes&quot;})});var a=n.map(function(t){return t.expandDims(e)});return _i(a,e)}}),ca=Fe({tile_:function(t,s){var r=re(t,&quot;x&quot;,&quot;tile&quot;);return D(r.rank===s.length,function(){return&quot;Error in transpose: rank of input &quot;+r.rank+&quot; must match length of reps &quot;+s+&quot;.&quot;}),Zt.engine.runKernel(function(t,e){var n=t.tile(r,s);return e([r]),n},{$x:r},function(i,t){var a=t[0];return{$x:function(){var t=nn(a);if(1===a.rank)for(var e=0;e&lt;s[0];++e)t=t.add(i.slice([e*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(e=0;e&lt;s[0];++e)for(var n=0;n&lt;s[1];++n)t=t.add(i.slice([e*a.shape[0],n*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(e=0;e&lt;s[0];++e)for(n=0;n&lt;s[1];++n)for(var r=0;r&lt;s[2];++r)t=t.add(i.slice([e*a.shape[0],n*a.shape[1],r*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error(&quot;Gradient for tile operation is not implemented for rank-&quot;+a.rank+&quot; tensors yet.&quot;);for(e=0;e&lt;s[0];++e)for(n=0;n&lt;s[1];++n)for(r=0;r&lt;s[2];++r)for(var o=0;o&lt;s[3];++o)t=t.add(i.slice([e*a.shape[0],n*a.shape[1],r*a.shape[2],o*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return t}}})}}),la=Fe({truncatedNormal_:function(t,e,n,r,o){if(void 0===e&amp;&amp;(e=0),void 0===n&amp;&amp;(n=1),null!=r&amp;&amp;&quot;bool&quot;===r)throw new Error(&quot;Unsupported data type &quot;+r);for(var i=new Wi(e,n,r,!0,o),a=zi(t,r),s=0;s&lt;a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),ha=Fe({unstack_:function(t,e){void 0===e&amp;&amp;(e=0),e=e||0;var n=re(t,&quot;x&quot;,&quot;unstack&quot;);return D(e&gt;=-n.shape.length&amp;&amp;e&lt;n.shape.length,function(){return&quot;Axis = &quot;+e+&quot; is not in [-&quot;+n.shape.length+&quot;, &quot;+n.shape.length+&quot;)&quot;}),e&lt;0&amp;&amp;(e+=n.shape.length),Zt.engine.runKernel(function(t){return t.unstack(n,e)},{$x:n},function(t){return{$x:function(){return ua(t,e)}}})}}),pa=function(h,p){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l;return R(this,function(t){switch(t.label){case 0:return e=re(h,&quot;x&quot;,&quot;setdiff1d&quot;),n=re(p,&quot;y&quot;,&quot;setdiff1d&quot;),D(e.dtype===n.dtype,function(){return&quot;x and y should have the same dtype, but got x (&quot;+e.dtype+&quot;) and y (&quot;+n.dtype+&quot;).&quot;}),D(1===e.rank,function(){return&quot;x should be 1D tensor, but got x (&quot;+e.shape+&quot;).&quot;}),D(1===n.rank,function(){return&quot;y should be 1D tensor, but got y (&quot;+n.shape+&quot;).&quot;}),[4,e.data()];case 1:return r=t.sent(),[4,n.data()];case 2:for(o=t.sent(),i=new Set(o),c=a=0;c&lt;r.length;c++)i.has(r[c])||a++;for(s=new lt([a],e.dtype),u=new lt([a],&quot;int32&quot;),l=c=0;c&lt;r.length;c++)i.has(r[c])||(s.values[l]=r[c],u.values[l]=c,l++);return[2,[s.toTensor(),u.toTensor()]]}})})};function fa(t,e){for(var n=[],r=0;r&lt;e.length;r++)e[r]&amp;&amp;n.push(r);var o=zi(t,&quot;int32&quot;),i=zi([n.length,t.length],&quot;int32&quot;);for(r=0;r&lt;n.length;r++){var a=o.indexToLoc(n[r]),s=r*t.length;i.values.set(a,s)}return i.toTensor()}var da={};var va=function(){function t(t){if(this.gpgpu=t,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.disposed=!1,Zt.get(&quot;WEBGL_VERSION&quot;)&lt;1)throw new Error(&quot;WebGL is not supported on this device&quot;);if(null==t){var e=l(Zt.get(&quot;WEBGL_VERSION&quot;));this.binaryCache=((n=Zt.get(&quot;WEBGL_VERSION&quot;))in da||(da[n]={}),da[n]),this.gpgpu=new Mo(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;var n;this.textureManager=new ui(this.gpgpu)}return t.prototype.register=function(t,e,n){if(this.texData.has(t))throw new Error(&quot;Data buffer is already registered&quot;);this.texData.set(t,{shape:e,dtype:n})},t.prototype.setDataMover=function(t){this.texData=new rn(t)},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error(&quot;pixels passed to tf.browser.fromPixels() can not be null&quot;);var n=[t.height,t.width],r=[t.height,t.width,e];if(Zt.get(&quot;IS_BROWSER&quot;)){if(!(t instanceof HTMLVideoElement||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData))throw new Error(&quot;pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was &quot;+t.constructor.name);if(t instanceof HTMLVideoElement){if(null==this.fromPixels2DContext){if(&quot;complete&quot;!==document.readyState)throw new Error(&quot;The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object&quot;);this.fromPixels2DContext=document.createElement(&quot;canvas&quot;).getContext(&quot;2d&quot;)}this.fromPixels2DContext.canvas.width=t.width,this.fromPixels2DContext.canvas.height=t.height,this.fromPixels2DContext.drawImage(t,0,0,t.width,t.height),t=this.fromPixels2DContext.canvas}}var o=this.makeTensorHandle(n,&quot;int32&quot;);this.texData.get(o.dataId).usage=wr.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),t);var i=new yr(r),a=this.compileAndRun(i,[o]);return this.disposeData(o.dataId),a},t.prototype.makeTensorHandle=function(t,e){var n={};return this.register(n,t,e),{dataId:n,shape:t,dtype:e}},t.prototype.write=function(t,e){if(null==e)throw new Error(&quot;MathBackendWebGL.write(): values can not be null&quot;);if(Zt.get(&quot;DEBUG&quot;))for(var n=0;n&lt;e.length;n++){var r=e[n];if(!Dr(r))throw Error(&quot;The value &quot;+r+&quot; cannot be represented on this device.&quot;)}var o=this.texData.get(t),i=o.texture,a=o.texShape,s=o.usage,u=o.dtype,c=o.isPacked;if(&quot;complex64&quot;===u)throw new Error(&quot;Cannot write to a complex64 dtype. Please use tf.complex(real, imag).&quot;);null!=i&amp;&amp;(this.releaseTexture(t,i,a,s,u,c),o.texture=null,o.texShape=null),o.usage=wr.UPLOAD,o.values=e},t.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,o=e.complexTensors,i=e.slice,a=e.shape;if(null!=i){var s=new mi(a,wi),u=this.compileAndRun(s,[{dataId:t,shape:a,dtype:r}]),c=this.readSync(u.dataId);return u.dispose(),c}if(null!=n)return this.convertAndCacheOnCPU(t);if(&quot;string&quot;===r)return n;var l,h,p=null!=this.activeTimers;return p&amp;&amp;(l=performance.now()),h=&quot;complex64&quot;===r?un(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(t),p&amp;&amp;(this.downloadWaitMs+=performance.now()-l),this.convertAndCacheOnCPU(t,h)},t.prototype.read=function(S){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l,h,p,f,d,v,m,g,y,x,w,b,E,C,_;return R(this,function(t){switch(t.label){case 0:if(this.pendingRead.has(S))return r=this.pendingRead.get(S),[2,new Promise(function(t){return r.push(t)})];if(o=this.texData.get(S),i=o.texture,a=o.values,s=o.texShape,u=o.isPacked,c=o.shape,l=o.slice,h=o.dtype,null!=l)return p=new mi(c,wi),f=this.compileAndRun(p,[{dataId:S,shape:c,dtype:h}]),d=this.read(f.dataId),f.dispose(),[2,d];if(null!=a)return[2,this.convertAndCacheOnCPU(S)];if(this.pendingRead.set(S,[]),!Zt.get(&quot;WEBGL_DOWNLOAD_FLOAT_ENABLED&quot;)&amp;&amp;2===Zt.get(&quot;WEBGL_VERSION&quot;))throw new Error(&quot;tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.&quot;);return v=s[1],m=s[0],u&amp;&amp;(e=kr(s[0],s[1]),v=e[0],m=e[1]),g=this.gpgpu.maybeCreateBufferFromTexture(i,m,v),[4,this.gpgpu.createAndWaitForFence()];case 1:return t.sent(),y=g instanceof WebGLTexture?this.getValuesFromTexture(S):(x=B(c),u?(w=oo(c),E=b=1,c.length&amp;&amp;(n=io(c),b=n[0],E=n[1]),this.gpgpu.downloadPackedMatrixFromBuffer(g,w,b,E,s[0],s[1]).subarray(0,x)):this.gpgpu.downloadFloat32MatrixFromBuffer(g,s[0],s[1]).subarray(0,x)),C=this.convertAndCacheOnCPU(S,y),_=this.pendingRead.get(S),this.pendingRead.delete(S),_.forEach(function(t){return t(C)}),this.pendingDisposal.has(S)&amp;&amp;(this.pendingDisposal.delete(S),this.disposeData(S)),[2,C]}})})},t.prototype.getValuesFromTexture=function(e){var t,n=this,r=this.texData.get(e),o=r.shape,i=r.dtype,a=r.texture,s=r.texShape,u=B(o);if(Zt.get(&quot;WEBGL_DOWNLOAD_FLOAT_ENABLED&quot;)){if(this.texData.get(e).isPacked){var c=oo(o),l=1,h=1;return o.length&amp;&amp;(l=(t=io(o))[0],h=t[1]),this.gpgpu.downloadMatrixFromPackedTexture(a,c,l,h,s[0],s[1]).subarray(0,u)}return this.gpgpu.downloadFloat32MatrixFromOutputTexture(a,s[0],s[1]).subarray(0,u)}var p=this.makeTensorHandle(o,&quot;float32&quot;);p.size=B(o),this.texData.get(p.dataId).usage=wr.DOWNLOAD;var f=ue(function(){var t=new fr(o);return n.compileAndRun(t,[{shape:o,dtype:i,dataId:e}],p,null,!1)}),d=this.texData.get(f.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture,d.texShape[0],d.texShape[1]).subarray(0,u);return this.disposeData(p.dataId),v},t.prototype.time=function(u){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s;return R(this,function(t){switch(t.label){case 0:return e=this.activeTimers,r=!(n=[]),null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,u(),o=x(this.activeTimers.map(function(t){return t.query})).filter(function(t){return null!=t}),i=x(this.activeTimers.map(function(t){return t.name})).filter(function(t){return null!=t}),this.activeTimers=e,r&amp;&amp;(this.programTimersStack=null),[4,Promise.all(o)];case 1:return a=t.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:d(a),getExtraProfileInfo:function(){return a.map(function(t,e){return{name:i[e],ms:t}}).map(function(t){return t.name+&quot;: &quot;+t.ms}).join(&quot;, &quot;)},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return 0&lt;Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return 0&lt;Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)?this.gpgpu.endQuery():t.endMs=performance.now(),t},t.prototype.getQueryTime=function(n){return m(this,void 0,void 0,function(){var e;return R(this,function(t){return 0&lt;Zt.get(&quot;WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION&quot;)?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(e=n).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t))if(this.pendingRead.has(t))this.pendingDisposal.add(t);else if(this.texData.has(t)){var e=this.texData.get(t),n=e.texture,r=e.dtype,o=e.texShape,i=e.usage,a=e.complexTensors,s=e.isPacked,u=e.slice;if(null!=n){var c=u&amp;&amp;u.origDataId||t,l=this.dataRefCount.get(c);1&lt;l?this.dataRefCount.set(c,l-1):(this.dataRefCount.delete(c),this.releaseTexture(t,n,o,i,r,s),this.texData.delete(t))}null!=a&amp;&amp;(a.real.dispose(),a.imag.dispose())}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},t.prototype.getCPUBackend=function(){return Zt.get(&quot;WEBGL_CPU_FORWARD&quot;)?(null==this.cpuBackend&amp;&amp;(this.cpuBackend=Zt.findBackend(&quot;cpu&quot;)),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&amp;&amp;(e=128),null!=this.getCPUBackend()&amp;&amp;t.every(function(t){return null==n.texData.get(t.dataId).texture&amp;&amp;t.size&lt;e})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.complex=function(t,e){var n=this.makeOutputArray(t.shape,&quot;complex64&quot;);return this.texData.get(n.dataId).complexTensors={real:Zt.engine.keep(t.clone()),imag:Zt.engine.keep(e.clone())},n},t.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},t.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},t.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);var r=this.texData.get(t.dataId).isPacked,o=Oe(t.shape,e,n);if(!r&amp;&amp;o)return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n);var i=Zt.get(&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;)?new ai(n):new oi(n),a=i.getCustomSetupFunc(e);return this.compileAndRun(i,[t],null,a)},t.prototype.shallowSlice=function(t,e,n){var r=this.texData.get(t.dataId),o=dt.make(n,{},t.dtype,this),i=this.texData.get(o.dataId);Object.assign(i,r),i.shape=n,i.dtype=t.dtype;var a=Pe(e,t.strides);r.slice&amp;&amp;(a+=r.slice.flatOffset),i.slice={flatOffset:a,origDataId:r.slice&amp;&amp;r.slice.origDataId||t.dataId};var s=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,s+1),o},t.prototype.stridedSlice=function(t,e,n,r,o,i,a,s,u){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r,o,i,a,s,u);var c=Ae(t.shape,e,n,r,o,i,a,s,u),l=c[0],h=c[1],p=c[2],f=h.filter(function(t,e){return-1===p.indexOf(e)});if(f.some(function(t){return 0===t}))return Ge([],f);var d=new si(l,r,h,p);return this.compileAndRun(d,[t])},t.prototype.reverse=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;)?new ti(t.shape,e):new Zo(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.concat=function(t,e){if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length&gt;Zt.get(&quot;WEBGL_MAX_TEXTURES_IN_SHADER&quot;)){var n=Math.floor(t.length/2),r=this.concat(t.slice(0,n),e),o=this.concat(t.slice(n),e);return this.concat([r,o],e)}if(Zt.get(&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;)&amp;&amp;1&lt;t[0].rank){var i=new Jn(t.map(function(t){return t.shape}),e);return this.compileAndRun(i,t)}var a=Re(t.map(function(t){return t.shape}),e),s=t.map(function(t){return t.as2D(-1,B(t.shape.slice(e)))}),u=new Qn(s.map(function(t){return t.shape}));return this.compileAndRun(u,s).reshape(a)},t.prototype.neg=function(t){var e=new mi(t.shape,&quot;return -x;&quot;);return this.compileAndRun(e,[t])},t.prototype.batchMatMul=function(t,e,n,r){var o=n?t.shape[2]:t.shape[1],i=r?e.shape[1]:e.shape[2],a=n?t.shape[1]:t.shape[2],s=t.shape[0];if((1===o||1===i)&amp;&amp;1e3&lt;a){n&amp;&amp;(t=t.transpose([0,2,1])),r&amp;&amp;(e=e.transpose([0,2,1]));var u=1===i?t:t.as3D(s,a,1),c=1===i?2:1,l=1===i?e.as3D(s,1,a):e;return this.multiply(u,l).sum(c,!0)}var h=kt(t.dtype,e.dtype),p=new Wo(t.shape,[s,o,i],n,r),f=this.makePackedTensor(p.outputShape,h);return this.compileAndRun(p,[t,e],f)},t.prototype.fusedBatchMatMul=function(t,e,n,r,o,i){var a=n?t.shape[2]:t.shape[1],s=r?e.shape[1]:e.shape[2],u=t.shape[0],c=kt(t.dtype,e.dtype),l=new Wo(t.shape,[u,a,s],n,r,!!o,i?function(t,e){if(void 0===e&amp;&amp;(e=!1),&quot;linear&quot;===t)return&quot;return x;&quot;;if(&quot;relu&quot;===t)return e?bi:yi;throw new Error(&quot;Activation &quot;+t+&quot; has not been implemented for the WebGL backend.&quot;)}(i,!0):null),h=this.makePackedTensor(l.outputShape,c),p=[t,e];return o&amp;&amp;p.push(o),this.compileAndRun(l,p,h)},t.prototype.multiply=function(t,e){if(&quot;complex64&quot;===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),o=new Un(Wn,t.shape,e.shape),i=new Un(zn,t.shape,e.shape),a=[this.makeComplexComponentTensorHandle(t,n.complexTensors.real),this.makeComplexComponentTensorHandle(t,n.complexTensors.imag),this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag)],s=this.compileAndRun(o,a),u=this.compileAndRun(i,a),c=this.complex(s,u);return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,Hn,t.dtype);var l=new jn(Hn,t.shape,e.shape),h=this.makeOutputArray(l.outputShape,t.dtype);return this.compileAndRun(l,[t,e],h)},t.prototype.batchNormalization=function(t,e,n,r,o,i){var a=[t,e,n],s=null;null!=i&amp;&amp;(s=i.shape,a.push(i));var u=null;if(null!=o&amp;&amp;(u=o.shape,a.push(o)),Zt.get(&quot;WEBGL_PACK_BATCHNORMALIZATION&quot;)){var c=new Bn(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(c,a)}var l=new Ln(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(l,a)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){var i=new Fo(t.shape,e,n,r,o);return this.compileAndRun(i,[t])},t.prototype.LRNGrad=function(t,e,n,r,o,i,a){var s=new Lo(e.shape,r,o,i,a);return this.compileAndRun(s,[e,n,t])},t.prototype.tile=function(t,e){var n=new hi(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.pad=function(t,e,n){var r=Zt.get(&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;)?new Ho(t.shape,e,n):new Vo(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.transpose=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,e);var n=Zt.get(&quot;WEBGL_PACK_ARRAY_OPERATIONS&quot;)?new fi(t.shape,e):new pi(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new xr(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},t.prototype.batchToSpaceND=function(t,e,n){D(t.rank&lt;=4,function(){return&quot;batchToSpaceND for rank &gt; 4 with a WebGL backend not implemented yet&quot;});var r=e.reduce(function(t,e){return t*e}),o=de(t.shape,e,r),i=ve(o.length,e.length),a=me(t.shape,e,r),s=ge(n,e.length),u=ye(a,n,e.length);return t.reshape(o).transpose(i).reshape(a).slice(s,u)},t.prototype.spaceToBatchND=function(t,e,n){D(t.rank&lt;=4,function(){return&quot;spaceToBatchND for rank &gt; 4 with a WebGL backend not implemented yet&quot;});var r=e.reduce(function(t,e){return t*e}),o=[[0,0]];o.push.apply(o,n);for(var i=1+e.length;i&lt;t.shape.length;++i)o.push([0,0]);var a=t.pad(o),s=de(a.shape,e,r,!1),u=ve(s.length,e.length,!1),c=me(a.shape,e,r,!1);return a.reshape(s).transpose(u).reshape(c)},t.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],i=ke(o),a=new jo({windowSize:i,inSize:o,batchSize:r},e),s=a.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],n);return this.compileAndRun(a,[t],l),1===l.shape[1]?l:this.reduce(l,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&amp;&amp;(n=null);var r=t.shape[0],o=t.shape[1];null!=n&amp;&amp;(r=n.shape[0],o=n.shape[1]);var i=ke(o),a=new dn({windowSize:i,inSize:o,batchSize:r},e,null==n),s=a.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],&quot;int32&quot;),h=[t];return null!=n&amp;&amp;h.push(n),this.compileAndRun(a,h,l),1===l.shape[1]?l:this.argReduce(t,e,l)},t.prototype.argReducePacked=function(t,e,n){void 0===n&amp;&amp;(n=null);var r=null!=n?n.shape:t.shape,o=ke(r[r.length-1]),i=new Pn(r,o,e,null==n),a=this.makePackedTensor(i.outputShape,&quot;int32&quot;),s=null==n?[t]:[t,n];return this.compileAndRun(i,s,a),a.rank===t.rank?this.argReducePacked(t,e,a):a},t.prototype.sum=function(t,e){Ee(&quot;sum&quot;,e,t.rank);var n=we(t.shape,e),r=n[0],o=B(n[1]),i=t.as2D(-1,o),a=It(t.dtype);return this.reduce(i,&quot;sum&quot;,a).reshape(r)},t.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=we(t.shape,e),r=n[0],o=B(n[1]),i=t.as2D(-1,o),a=It(t.dtype);return this.reduce(i,&quot;prod&quot;,a).reshape(r)},t.prototype.unsortedSegmentSum=function(t,e,n){var r=0,o=Ce([r],t.rank),i=t;null!=o&amp;&amp;(i=t.transpose(o),r=Se(1,t.rank)[0]);var a=function(t,e,n){for(var r=[],o=t.length,i=0;i&lt;o;i++)i!==e?r.push(t[i]):r.push(n);return r}(i.shape,r,n),s=B([i.shape[r]]),u=i.as2D(-1,s),c=It(t.dtype),l=this.segOpCompute(u,&quot;unsortedSegmentSum&quot;,e,c,n).reshape(a);return null!=o&amp;&amp;(l=l.transpose(_e(o))),l},t.prototype.segOpCompute=function(t,e,n,r,o){var i=t.shape[0],a=t.shape[1],s=function(t,e){var n,r=!1;for(t&lt;=30?(n=t,r=!0):n=$(t,Math.floor(Math.sqrt(t)));!r;)e&lt;n||n===t?r=!0:n=$(t,n+1);return n}(a,o),u=new ni({windowSize:s,inSize:a,batchSize:i,numSegments:o},e),c=u.outputShape,l=c[0],h=c[1],p=this.makeOutputArray([l,h],r);return this.compileAndRun(u,[t,n],p),p.shape[1]===o?p:(n=tn(0,o).tile([a/s]),this.segOpCompute(p,e,n,r,o))},t.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(Ee(&quot;arg&quot;+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!Zt.get(&quot;WEBGL_PACK_REDUCE&quot;)||t.rank&lt;=2){var o=we(t.shape,r),i=o[0],a=B(o[1]),s=t.as2D(-1,a);return this.argReduce(s,n).reshape(i)}return this.argReducePacked(t,n)},t.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,&quot;min&quot;)},t.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,&quot;max&quot;)},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error(&quot;WebGL cumsum shader expects an inner-most axis=&quot;+(t.rank-1)+&quot; but got axis=&quot;+e);var o=new lr(t.shape,n,r);return this.compileAndRun(o,[t])},t.prototype.equal=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(equal(a, b));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a == b);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.notEqual=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(notEqual(a, b));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a != b);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(lessThan(a, b));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a &lt; b);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.lessEqual=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(lessThanEqual(a, b));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a &lt;= b);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(greaterThan(a, b));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a &gt; b);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.greaterEqual=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(greaterThanEqual(a, b));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a &gt;= b);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.logicalNot=function(t){var e=new mi(t.shape,&quot;return float(!(x &gt;= 1.0));&quot;);return this.compileAndRun(e,[t])},t.prototype.logicalAnd=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a &gt;= 1.0 &amp;&amp; b &gt;= 1.0);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.logicalOr=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n&quot;,&quot;bool&quot;);var n=new jn(&quot;return float(a &gt;= 1.0 || b &gt;= 1.0);&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;bool&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.select=function(t,e,n){var r=new ri(t.rank,e.shape,e.rank),o=this.makeOutputArray(r.outputShape,kt(e.dtype,n.dtype));return this.compileAndRun(r,[t,e,n],o)},t.prototype.where=function(t){fe(&quot;tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead&quot;);var e=t.dataSync();return fa(t.shape,e)},t.prototype.topk=function(t,e,n){return fn(t.dataSync(),t.shape,t.dtype,e)},t.prototype.min=function(t,e){Ee(&quot;min&quot;,e,t.rank);var n=we(t.shape,e),r=n[0],o=B(n[1]),i=t.as2D(-1,o);return this.reduce(i,&quot;min&quot;,i.dtype).reshape(r)},t.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(&quot;\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r &gt; 0. ? NAN : result.r;\n  result.g = isNaN.g &gt; 0. ? NAN : result.g;\n  result.b = isNaN.b &gt; 0. ? NAN : result.b;\n  result.a = isNaN.a &gt; 0. ? NAN : result.a;\n\n  return result;\n&quot;,t.shape,e.shape):new jn(&quot;\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n&quot;,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.mod=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(&quot;\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r &gt; 0. ? NAN : result.r;\n  result.g = isNaN.g &gt; 0. ? NAN : result.g;\n  result.b = isNaN.b &gt; 0. ? NAN : result.b;\n  result.a = isNaN.a &gt; 0. ? NAN : result.a;\n\n  return result;\n&quot;,t.shape,e.shape):new jn(&quot;if (b == 0.0) return NAN;\n  return mod(a, b);&quot;,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);Ee(&quot;max&quot;,e,t.rank);var n=we(t.shape,e),r=n[0],o=B(n[1]),i=t.as2D(-1,o);return this.reduce(i,&quot;max&quot;,i.dtype).reshape(r)},t.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(&quot;\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r &gt; 0. ? NAN : result.r;\n  result.g = isNaN.g &gt; 0. ? NAN : result.g;\n  result.b = isNaN.b &gt; 0. ? NAN : result.b;\n  result.a = isNaN.a &gt; 0. ? NAN : result.a;\n\n  return result;\n&quot;,t.shape,e.shape):new jn(&quot;\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n&quot;,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.all=function(t,e){Ee(&quot;all&quot;,e,t.rank);var n=we(t.shape,e),r=n[0],o=B(n[1]),i=t.as2D(-1,o);return this.reduce(i,&quot;all&quot;,i.dtype).reshape(r)},t.prototype.any=function(t,e){Ee(&quot;any&quot;,e,t.rank);var n=we(t.shape,e),r=n[0],o=B(n[1]),i=t.as2D(-1,o);return this.reduce(i,&quot;any&quot;,i.dtype).reshape(r)},t.prototype.squaredDifference=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(qn,t.shape,e.shape):new jn(qn,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.realDivide=function(t,e){var n=new jn(&quot;if (a == b) return 1.0;\n  return a / b;&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;float32&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.floorDiv=function(t,e){if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,&quot;\n  vec4 resultSign = sign(a) * sign(b);\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  ivec4 result = ia / ib;\n  ivec4 amodb = ia - ib * result;\n\n  // Vectorize INT_DIV\n  // if (resultSign &lt; 0.0 &amp;&amp; amodb != 0) result -= 1;\n  // return float(result);\n  return vec4(result -\n     ivec4(lessThan(resultSign, vec4(0.0))) * ivec4(notEqual(amodb, ivec4(0))));\n&quot;,&quot;int32&quot;);var n=new jn(&quot;\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign &lt; 0.0 &amp;&amp; amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n&quot;,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,&quot;int32&quot;);return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){if(&quot;complex64&quot;===t.dtype&amp;&amp;&quot;complex64&quot;===e.dtype)return this.complexSeparableBinaryOp(t,e,Gn);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=kt(t.dtype,e.dtype);if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,Gn,n);var r=new jn(Gn,t.shape,e.shape),o=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[t,e],o)},t.prototype.packedBinaryOp=function(t,e,n,r){var o=new $n(n,t.shape,e.shape),i=this.makePackedTensor(o.outputShape,r);return this.compileAndRun(o,[t,e],i)},t.prototype.complexSeparableBinaryOp=function(s,u,c){var l=this,t=this.texData.get(s.dataId),e=this.texData.get(u.dataId),n=[[t.complexTensors.real,e.complexTensors.real],[t.complexTensors.imag,e.complexTensors.imag]].map(function(t){var e=t[0],n=t[1],r=l.makeComplexComponentTensorHandle(s,e),o=l.makeComplexComponentTensorHandle(u,n),i=new jn(c,s.shape,u.shape),a=l.makeOutputArray(i.outputShape,kt(e.dtype,n.dtype));return l.compileAndRun(i,[r,o],a)}),r=n[0],o=n[1],i=this.complex(r,o);return r.dispose(),o.dispose(),i},t.prototype.makeComplexComponentTensorHandle=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},t.prototype.addN=function(t){for(var e=t[0],n=1;n&lt;t.length;n++)e=this.add(e,t[n]);return e},t.prototype.subtract=function(t,e){if(&quot;complex64&quot;===t.dtype&amp;&amp;&quot;complex64&quot;===e.dtype)return this.complexSeparableBinaryOp(t,e,Vn);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=kt(t.dtype,e.dtype);if(Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;))return this.packedBinaryOp(t,e,Vn,t.dtype);var r=new jn(Vn,t.shape,e.shape),o=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[t,e],o)},t.prototype.pow=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;),r=n?new $n(&quot;\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r &gt; 0. ? NAN : result.r;\n  result.g = isNaN.g &gt; 0. ? NAN : result.g;\n  result.b = isNaN.b &gt; 0. ? NAN : result.b;\n  result.a = isNaN.a &gt; 0. ? NAN : result.a;\n\n  return result;\n&quot;,t.shape,e.shape):new jn(&quot;\nif(a &lt; 0.0 &amp;&amp; floor(b) &lt; b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n&quot;,t.shape,e.shape),o=kt(t.dtype,e.dtype),i=n?this.makePackedTensor(r.outputShape,o):this.makeOutputArray(r.outputShape,o);return this.compileAndRun(r,[t,e],i)},t.prototype.ceil=function(t){var e=new mi(t.shape,&quot;return ceil(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new mi(t.shape,&quot;return floor(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.sign=function(t){var e=new mi(t.shape,&quot;\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n&quot;);return this.compileAndRun(e,[t])},t.prototype.isNaN=function(t){var e=new mi(t.shape,&quot;return float(isnan(x));&quot;),n=this.makeOutputArray(e.outputShape,&quot;bool&quot;);return this.compileAndRun(e,[t],n)},t.prototype.isInf=function(t){var e=new mi(t.shape,&quot;return float(isinf(x));&quot;),n=this.makeOutputArray(e.outputShape,&quot;bool&quot;);return this.compileAndRun(e,[t],n)},t.prototype.isFinite=function(t){var e=new mi(t.shape,&quot;return float(!isnan(x) &amp;&amp; !isinf(x));&quot;),n=this.makeOutputArray(e.outputShape,&quot;bool&quot;);return this.compileAndRun(e,[t],n)},t.prototype.round=function(t){var e=new mi(t.shape,&quot;\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker&#39;s rounding.\n  float base = floor(x);\n  if ((x - base) &lt; 0.5) {\n    return floor(x);\n  } else if ((x - base) &gt; 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n&quot;);return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e;return e=Zt.get(&quot;WEBGL_PACK&quot;)?new Ei(t.shape,xi):new mi(t.shape,xi),this.compileAndRun(e,[t])},t.prototype.expm1=function(t){var e=new mi(t.shape,&quot;return exp(x) - 1.0;&quot;);return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e;return e=Zt.get(&quot;WEBGL_PACK&quot;)?new Ei(t.shape,&quot;\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n&quot;):new mi(t.shape,&quot;if (x &lt; 0.0) return NAN;\n  return log(x);&quot;),this.compileAndRun(e,[t])},t.prototype.log1p=function(t){var e=new mi(t.shape,&quot;return log(1.0 + x);&quot;);return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new mi(t.shape,&quot;return sqrt(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new mi(t.shape,&quot;return inversesqrt(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new mi(t.shape,&quot;return x * x;&quot;);return this.compileAndRun(e,[t])},t.prototype.reciprocal=function(t){var e=new mi(t.shape,&quot;return 1.0 / x;&quot;);return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e;return e=Zt.get(&quot;WEBGL_PACK&quot;)?new Ei(t.shape,bi):new mi(t.shape,yi),this.compileAndRun(e,[t])},t.prototype.prelu=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(&quot;\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n&quot;,t.shape,e.shape):new jn(&quot;return (a &lt; 0.) ? b * a : a;&quot;,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.elu=function(t){var e=new mi(t.shape,&quot;return (x &gt;= 0.0) ? x : (exp(x) - 1.0);&quot;);return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(&quot;\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n&quot;,t.shape,e.shape):new jn(&quot;return (b &gt;= 1.0) ? a : a * (b + 1.0);&quot;,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.selu=function(t){var e=new mi(t.shape,&quot;\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x &gt;= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n&quot;);return this.compileAndRun(e,[t])},t.prototype.int=function(t){var e=new mi(t.shape,&quot;return float(int(x));&quot;),n=this.makeOutputArray(e.outputShape,&quot;int32&quot;);return this.compileAndRun(e,[t],n)},t.prototype.clip=function(t,e,n){var r,o=(r=Zt.get(&quot;WEBGL_PACK_CLIP&quot;)?new Xn(t.shape):new Kn(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,o)},t.prototype.abs=function(t){var e=new mi(t.shape,&quot;return abs(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new Yn(t.shape),r=[this.makeComplexComponentTensorHandle(t,e.complexTensors.real),this.makeComplexComponentTensorHandle(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(t){var e=new mi(t.shape,&quot;return 1.0 / (1.0 + exp(-1.0 * x));&quot;);return this.compileAndRun(e,[t])},t.prototype.softplus=function(t){var e=new mi(t.shape,&quot;\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x &gt; -threshold;\n  bool too_small = x &lt; threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n&quot;);return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new mi(t.shape,&quot;if (isnan(x)) return x;\n  return sin(x);\n&quot;);return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new mi(t.shape,&quot;if (isnan(x)) return x;\n  return cos(x);\n&quot;);return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new mi(t.shape,&quot;return tan(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new mi(t.shape,&quot;return asin(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new mi(t.shape,&quot;return acos(x);&quot;);return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new mi(t.shape,&quot;if (isnan(x)) return x;\n  return atan(x);\n&quot;);return this.compileAndRun(e,[t])},t.prototype.atan2=function(t,e){var n=Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)?new $n(&quot;\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r &gt; 0. ? NAN : result.r;\n  result.g = isNaN.g &gt; 0. ? NAN : result.g;\n  result.b = isNaN.b &gt; 0. ? NAN : result.b;\n  result.a = isNaN.a &gt; 0. ? NAN : result.a;\n\n  return result;\n&quot;,t.shape,e.shape):new jn(&quot;\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n&quot;,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.sinh=function(t){var e=new mi(t.shape,&quot;\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n&quot;);return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new mi(t.shape,&quot;\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n&quot;);return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new mi(t.shape,&quot;\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n&quot;);return this.compileAndRun(e,[t])},t.prototype.asinh=function(t){var e=new mi(t.shape,&quot;return log(x + sqrt(x * x + 1.0));&quot;);return this.compileAndRun(e,[t])},t.prototype.acosh=function(t){var e=new mi(t.shape,&quot;if (isnan(x)) return x;\n  if (x &lt; 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));&quot;);return this.compileAndRun(e,[t])},t.prototype.atanh=function(t){var e=new mi(t.shape,&quot;if (isnan(x)) return x;\n  if ((x &lt; -1.0) || (x &gt; 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;&quot;);return this.compileAndRun(e,[t])},t.prototype.erf=function(t){var e=new mi(t.shape,&#39;\n  // Error function is calculated approximately with elementary function.\n  // See &quot;Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables&quot;, Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n&#39;);return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n,r=new mi(t.shape,(void 0===(n=e)&amp;&amp;(n=0),gi+&quot;\n    return x &gt; 0.0 ? 1.0 : float(&quot;+n+&quot;);\n  &quot;));return this.compileAndRun(r,[t])},t.prototype.conv2dByMatMul=function(t,e,n){var r=t.shape,o=this.texData.get(t.dataId),i=n.inChannels,a=r[0]*r[1]*r[2],s=n.outChannels,u=(1===a||1===s)&amp;&amp;1e3&lt;i,c=r[2]%2!=0&amp;&amp;!!o.isPacked;if(u||!Zt.get(&quot;WEBGL_LAZILY_UNPACK&quot;)||!Zt.get(&quot;WEBGL_PACK_BINARY_OPERATIONS&quot;)||!c){var l=this.reshape(t,[1,r[0]*r[1]*r[2],n.inChannels]),h=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.batchMatMul(l,h,!1,!1),n.outShape)}var p=dt.make([1,r[0]*r[1]*(r[2]+1),n.inChannels],{dataId:t.dataId},t.dtype,this),f=o.shape;o.shape=o.shape.slice(),o.shape[o.shape.length-2]++,D(uo(o.shape,p.shape),function(){return&quot;packed reshape &quot;+o.shape+&quot; to &quot;+p.shape+&quot; isn&#39;t free&quot;});var d=this.reshape(e,[1,n.inChannels,n.outChannels]),v=this.batchMatMul(p,d,!1,!1),m=this.texData.get(v.dataId);return D(m.isPacked,function(){return&quot;batchMatMul result is expected to be packed&quot;}),o.shape=f,m.shape=n.outShape,dt.make(n.outShape,{dataId:v.dataId},v.dtype,this)},t.prototype.conv2dWithIm2Row=function(t,e,n){var r=n.filterWidth,o=n.filterHeight,i=n.inChannels,a=n.outWidth,s=n.outHeight,u=r*o*i,c=s*a,l=[u,c],h=t.squeeze([0]),p=e.reshape([1,u,-1]),f=new Po(l,h.shape,n),d=this.compileAndRun(f,[h]).reshape([1,l[0],l[1]]),v=new Wo(d.shape,[1,c,n.outChannels],!0,!1);return this.compileAndRun(v,[d,p]).reshape([1,s,a,n.outChannels])},t.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&amp;&amp;1===n.filterWidth&amp;&amp;1===n.dilationHeight&amp;&amp;1===n.dilationWidth&amp;&amp;1===n.strideHeight&amp;&amp;1===n.strideWidth&amp;&amp;(&quot;SAME&quot;===n.padInfo.type||&quot;VALID&quot;===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(Zt.get(&quot;WEBGL_CONV_IM2COL&quot;)&amp;&amp;1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new ir(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerInput=function(t,e,n){var r=new tr(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new Zn(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2D=function(t,e,n){var r;return Zt.get(&quot;WEBGL_PACK_DEPTHWISECONV&quot;)&amp;&amp;n.strideWidth&lt;=2&amp;&amp;n.outChannels/n.inChannels==1?(r=new ur(n),this.compileAndRun(r,[t,e],this.makePackedTensor(n.outShape,t.dtype))):(r=new sr(n),this.compileAndRun(r,[t,e]))},t.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new or(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new rr(n);return this.compileAndRun(r,[t,e])},t.prototype.conv3d=function(t,e,n){var r=new ar(n);return this.compileAndRun(r,[t,e])},t.prototype.conv3dDerInput=function(t,e,n){var r=new nr(n);return this.compileAndRun(r,[t,e])},t.prototype.conv3dDerFilter=function(t,e,n){var r=new er(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new qo(e,&quot;max&quot;,!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.avgPool=function(t,e){var n=new qo(e,&quot;avg&quot;,!1),r=this.makeOutputArray(n.outputShape,&quot;float32&quot;);return this.compileAndRun(n,[t],r)},t.prototype.maxPoolBackprop=function(t,e,n,r){var o=new qo(r,&quot;max&quot;,!0),i=this.compileAndRun(o,[e]),a=new Bo(r),s=this.makeOutputArray(a.outputShape,e.dtype),u=this.compileAndRun(a,[t,i],s);return i.dispose(),u},t.prototype.avgPoolBackprop=function(t,e,n){var r=new Fn(n),o=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[t],o)},t.prototype.cast=function(t,e){return an(t,e,this)},t.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,i=0;i&lt;t.rank;i++)i!==e&amp;&amp;(r[o++]=t.shape[i]);var a=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(i=0;i&lt;u.length;i++)u[a[e]=i]=this.slice(t,a,s).reshape(r);return u},t.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);return!n.isPacked||uo(t.shape,e)||null!==n.texture&amp;&amp;uo(n.shape,e)?sn(t,e):this.packedReshape(t,e)},t.prototype.resizeBilinear=function(t,e,n,r){var o=Zt.get(&quot;WEBGL_PACK_IMAGE_OPERATIONS&quot;)?new Yo(t.shape,e,n,r):new Xo(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.resizeBilinearBackprop=function(t,e,n){var r=new Ko(t,e,n);return this.compileAndRun(r,[t])},t.prototype.resizeNearestNeighbor=function(t,e,n,r){var o=new Jo(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new Qo(t,e,n);return this.compileAndRun(r,[t])},t.prototype.multinomial=function(t,e,n,r){var o=e?t:Le(t),i=o.shape[0],a=o.shape[1],s=new zo(i,a,n),u=this.makeOutputArray(s.outputShape,&quot;int32&quot;),c=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],u,c)},t.prototype.oneHot=function(t,e,n,r){var o=new Uo(t.size,e,n,r);return this.compileAndRun(o,[t])},t.prototype.nonMaxSuppression=function(t,e,n,r,o){return fe(&quot;tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead&quot;),ln(t.dataSync(),e.dataSync(),n,r,o)},t.prototype.cropAndResize=function(t,e,n,r,o,i){var a=new cr(t.shape,e.shape,r,o,i);return this.compileAndRun(a,[t,e,n])},t.prototype.depthToSpace=function(t,e,n){D(1&lt;e,function(){return&quot;blockSize should be &gt; 1 for depthToSpace, but was: &quot;+e});var r=t.shape[0],o=&quot;NHWC&quot;===n?t.shape[1]:t.shape[2],i=&quot;NHWC&quot;===n?t.shape[2]:t.shape[3],a=&quot;NHWC&quot;===n?t.shape[3]:t.shape[1],s=o*e,u=i*e,c=a/(e*e),l=new pr(&quot;NHWC&quot;===n?[r,s,u,c]:[r,c,s,u],e,n);return this.compileAndRun(l,[t])},t.prototype.split=function(t,e,n){return pn(t,e,n)},t.prototype.scatterND=function(t,e,n){var r=Te(0,t,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/a,a],l=t.reshape([i,o]),h=e.reshape([i,a]);if(0===u)return sn(Ge([]),n);var p=Ve(0),f=new ei(i,o,l.rank,h.rank,s,c);return this.compileAndRun(f,[h,l,p]).reshape(n)},t.prototype.sparseToDense=function(t,e,n,r){var o=Te(0,t,n),i=o.sliceRank,a=o.numUpdates,s=o.strides,u=o.outputSize,c=new ei(a,i,t.rank,e.rank,s,[u,1],!1);return this.compileAndRun(c,[e,t,r]).reshape(n)},t.prototype.fft=function(t){return this.fftImpl(t,!1)},t.prototype.ifft=function(t){return this.fftImpl(t,!0)},t.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new mr(dr,t.shape,e),o=new mr(vr,t.shape,e),i=[this.makeComplexComponentTensorHandle(t,n.complexTensors.real),this.makeComplexComponentTensorHandle(t,n.complexTensors.imag)],a=this.compileAndRun(r,i),s=this.compileAndRun(o,i),u=this.complex(a,s).as2D(t.shape[0],t.shape[1]);return a.dispose(),s.dispose(),u},t.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=Ne(t,e),i=o[0],a=o[1],s=o[2],u=o[3],c=e.reshape([a,r]),l=t.reshape([t.size/s,s]),h=new _r(r,u,[a,s]);return this.compileAndRun(h,[l,c]).reshape(i)},t.prototype.fill=function(t,e,n){if(&quot;string&quot;===(n=n||q(e))){var r=M(n,B(t));return r.fill(e),dt.make(t,{values:r},n)}var o=new gr(t,e),i=o.getCustomSetupFunc(e),a=this.makeOutputArray(t,n);return this.compileAndRun(o,[],a,i)},t.prototype.onesLike=function(t){if(&quot;string&quot;===t.dtype)throw new Error(&quot;onesLike is not supported under string dtype&quot;);return this.fill(t.shape,1,t.dtype)},t.prototype.zerosLike=function(t){return this.fill(t.shape,&quot;string&quot;===t.dtype?&quot;&quot;:0,t.dtype)},t.prototype.makeOutputArray=function(t,e){return dt.make(t,{},e,this)},t.prototype.makePackedTensor=function(t,e){var n=dt.make(t,{},e,this);return this.texData.get(n.dataId).isPacked=!0,n},t.prototype.unpackTensor=function(t){var e=new Ci(t.shape);return this.compileAndRun(e,[t],dt.make(e.outputShape,{},t.dtype,this))},t.prototype.packTensor=function(t){var e=new Go(t.shape);return this.compileAndRun(e,[t],this.makePackedTensor(t.shape,t.dtype))},t.prototype.packedReshape=function(t,e){var n=t.reshape([oo(t.shape)].concat(io(t.shape))),r=[oo(e)].concat(io(e)),o=new $o(r,n.shape);return this.compileAndRun(o,[n]).reshape(e)},t.prototype.compileAndRun=function(o,t,e,n,r){var i=this;if(void 0===r&amp;&amp;(r=!0),null==e&amp;&amp;(e=o.usesPackedTextures?this.makePackedTensor(o.outputShape,t[0].dtype):this.makeOutputArray(o.outputShape,t[0].dtype)),0===e.size)return this.texData.get(e.dataId).values=A(e.dtype,0),e;var a=t.map(function(t){if(&quot;complex64&quot;===t.dtype)throw new Error(&quot;GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.&quot;);var e=i.texData.get(t.dataId);if(null==e.texture){if(!o.usesPackedTextures&amp;&amp;B(t.shape)&lt;=Zt.get(&quot;WEBGL_SIZE_UPLOAD_UNIFORM&quot;))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:i.readSync(t.dataId)};o.usesPackedTextures&amp;&amp;(e.isPacked=!0,e.shape=t.shape)}else if(!!e.isPacked!=!!o.usesPackedTextures)t=e.isPacked?i.unpackTensor(t):i.packTensor(t),e=i.texData.get(t.dataId);else if(e.isPacked&amp;&amp;!uo(e.shape,t.shape)){var n=t,r=t.shape;t.shape=e.shape,t=i.packedReshape(t,r),e=i.texData.get(t.dataId),n.shape=r}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:e,isUniform:!1}});this.uploadToGPU(e.dataId);var s,u={shape:e.shape,texData:this.texData.get(e.dataId),isUniform:!1},c=function(t,e,n){var r=&quot;&quot;;e.concat(n).forEach(function(t){var e=null!=t.texData&amp;&amp;null!=t.texData.slice&amp;&amp;0&lt;t.texData.slice.flatOffset,n=t.isUniform?&quot;uniform&quot;:t.texData.texShape;r+=t.shape+&quot;_&quot;+n+&quot;_&quot;+e});var o=t.userCode;return t.constructor.name+&quot;_&quot;+r+&quot;_&quot;+o}(o,a,u),l=this.getAndSaveBinary(c,function(){return function(t,r,e,n){var o=r.userCode,i=e.map(function(t,e){var n={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&amp;&amp;t.texData.isPacked,flatOffset:null};return null!=t.texData&amp;&amp;null!=t.texData.slice&amp;&amp;0&lt;t.texData.slice.flatOffset&amp;&amp;(n.flatOffset=t.texData.slice.flatOffset),{name:r.variableNames[e],shapeInfo:n}}),a=i.map(function(t){return t.shapeInfo}),s={logicalShape:n.shape,texShape:n.texData.texShape,isUniform:!1,isPacked:n.texData.isPacked,flatOffset:null},u=Cn(i,s,o,r.usesPackedTextures),c=t.createProgram(u),l=null,h=null;1===Zt.get(&quot;WEBGL_VERSION&quot;)&amp;&amp;(l=t.getUniformLocation(c,&quot;INFINITY&quot;,!1),h=t.getUniformLocation(c,&quot;NAN&quot;,!1));for(var p={},f=0;f&lt;r.variableNames.length;f++){var d=r.variableNames[f];p[d]=t.getUniformLocation(c,d,!1),p[&quot;offset&quot;+d]=t.getUniformLocation(c,&quot;offset&quot;+d,!1)}return{program:r,source:u,webGLProgram:c,uniformLocations:p,inShapeInfos:a,outShapeInfo:s,infLoc:l,nanLoc:h}}(i.gpgpu,o,a,u)}),h=null!=this.activeTimers;h&amp;&amp;(s=this.startTimer()),function(a,s,t,e,n){Oo(s.inShapeInfos,t),Oo([s.outShapeInfo],[e]);var r=e.texData.texture,o=e.texData.texShape;e.texData.isPacked?a.setOutputPackedMatrixTexture(r,o[0],o[1]):a.setOutputMatrixTexture(r,o[0],o[1]),a.setProgram(s.webGLProgram),1===Zt.get(&quot;WEBGL_VERSION&quot;)&amp;&amp;(null!==s.infLoc&amp;&amp;a.gl.uniform1f(s.infLoc,1/0),null!==s.nanLoc&amp;&amp;a.gl.uniform1f(s.nanLoc,NaN)),t.forEach(function(t,e){var n=s.program.variableNames[e],r=s.uniformLocations[n],o=s.uniformLocations[&quot;offset&quot;+n];if(null!=r)if(t.isUniform)if(B(t.shape)&lt;2)a.gl.uniform1f(r,t.uniformValues[0]);else{var i=t.uniformValues;i instanceof Float32Array||(i=new Float32Array(i)),a.gl.uniform1fv(r,i)}else null!=t.texData.slice&amp;&amp;null!=o&amp;&amp;a.gl.uniform1i(o,t.texData.slice.flatOffset),a.setInputMatrixTexture(t.texData.texture,r,e)}),null!=n&amp;&amp;n(a,s.webGLProgram),a.executeProgram()}(this.gpgpu,l,a,u,n);var p=1024*Zt.get(&quot;WEBGL_NUM_MB_BEFORE_PAGING&quot;);if(r&amp;&amp;this.numBytesInGPU&gt;p)for(var f=this.numBytesInGPU-p;0&lt;f&amp;&amp;0&lt;this.lruDataGPU.length;){var d=this.lruDataGPU.shift(),v=this.texData.get(d),m=v.texShape,g=v.dtype;f-=this.computeBytes(m,g),this.read(d)}return h&amp;&amp;(s=this.endTimer(s),this.activeTimers.push({name:o.constructor.name,query:this.getQueryTime(s)})),Zt.get(&quot;WEBGL_LAZILY_UNPACK&quot;)||!this.texData.get(e.dataId).isPacked||o.isPackShader?e:this.unpackTensor(e)},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixels2DContext&amp;&amp;this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&amp;&amp;(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return ue(function(){var t=Zt.get(&quot;DEBUG&quot;);Zt.set(&quot;DEBUG&quot;,!1);var e=n.abs(Ve(1e-8)).dataSync()[0];return Zt.set(&quot;DEBUG&quot;,t),0&lt;e?32:16})},t.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,i=n.values,a=n.texture,s=n.usage,u=n.isPacked;if(null==a){var c,l=null!=this.activeTimers;l&amp;&amp;(c=performance.now());var h=ao(r,u);n.texShape=h;var p=this.acquireTexture(t,h,s,o,u);if(n.texture=p,null!=i){if(u){var f=oo(r),d=1,v=1;r.length&amp;&amp;(d=(e=io(r))[0],v=e[1]),this.gpgpu.uploadMatrixToPackedTexture(p,f,d,v,h[0],h[1],ma(i))}else this.gpgpu.uploadMatrixToTexture(p,h[0],h[1],ma(i));n.values=null,l&amp;&amp;(this.uploadWaitMs+=performance.now()-c)}}else Zt.get(&quot;WEBGL_NUM_MB_BEFORE_PAGING&quot;)&lt;Number.POSITIVE_INFINITY&amp;&amp;0&lt;=this.lruDataGPU.indexOf(t)&amp;&amp;(this.lruDataGPU.splice(this.lruDataGPU.indexOf(t),1),this.lruDataGPU.push(t))},t.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.texture,o=n.texShape,i=n.dtype,a=n.usage,s=n.isPacked;return null!=r&amp;&amp;(this.releaseTexture(t,r,o,a,i,s),n.texture=null,n.texShape=null,n.isPacked=!1),n.usage=wr.UPLOAD,null!=e&amp;&amp;(n.values=function(t,e){if(&quot;float32&quot;===e||&quot;complex64&quot;===e)return t;if(&quot;int32&quot;!==e&amp;&amp;&quot;bool&quot;!==e)throw new Error(&quot;Unknown dtype &quot;+e);for(var n=&quot;int32&quot;===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r&lt;n.length;++r)n[r]=Math.round(t[r]);return n}(e,i)),n.values},t.prototype.releaseTexture=function(t,e,n,r,o,i){if(Zt.get(&quot;WEBGL_NUM_MB_BEFORE_PAGING&quot;)&lt;Number.POSITIVE_INFINITY){var a=this.lruDataGPU.indexOf(t);0&lt;=a&amp;&amp;this.lruDataGPU.splice(a,1)}this.numBytesInGPU-=this.computeBytes(n,o),this.textureManager.releaseTexture(e,n,r,i)},t.prototype.acquireTexture=function(t,e,n,r,o){return Zt.get(&quot;WEBGL_NUM_MB_BEFORE_PAGING&quot;)&lt;Number.POSITIVE_INFINITY&amp;&amp;this.lruDataGPU.push(t),this.numBytesInGPU+=this.computeBytes(e,r),this.textureManager.acquireTexture(e,n,o)},t.prototype.computeBytes=function(t,e){return t[0]*t[1]*U(e)},t}();function ma(t){return t instanceof Float32Array?t:new Float32Array(t)}Zt.get(&quot;IS_BROWSER&quot;)&amp;&amp;Zt.registerBackend(&quot;webgl&quot;,function(){return new va},2);var ga=Fe({abs_:function(t){var r=re(t,&quot;x&quot;,&quot;abs&quot;);return&quot;complex64&quot;===r.dtype?Zt.engine.runKernel(function(t){return t.complexAbs(r)},{$x:r}):Zt.engine.runKernel(function(t,e){var n=t.abs(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.toFloat().step(-1))}}})}}),ya=Fe({acos_:function(t){var r=re(t,&quot;x&quot;,&quot;acos&quot;);return Zt.engine.runKernel(function(t,e){var n=t.acos(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Ve(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),xa=Fe({acosh_:function(t){var r=re(t,&quot;x&quot;,&quot;acosh&quot;);return Zt.engine.runKernel(function(t,e){var n=t.acosh(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),wa=Fe({asin_:function(t){var r=re(t,&quot;x&quot;,&quot;asin&quot;);return Zt.engine.runKernel(function(t,e){var n=t.asin(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Ve(1).sub(n.toFloat().square()).sqrt())}}})}}),ba=Fe({asinh_:function(t){var r=re(t,&quot;x&quot;,&quot;asinh&quot;);return Zt.engine.runKernel(function(t,e){var n=t.asinh(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Ve(1).add(n.toFloat().square()).sqrt())}}})}}),Ea=Fe({atan_:function(t){var r=re(t,&quot;x&quot;,&quot;atan&quot;);return Zt.engine.runKernel(function(t,e){var n=t.atan(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}})}}),Ca=Fe({atanh_:function(t){var r=re(t,&quot;x&quot;,&quot;atanh&quot;);return Zt.engine.runKernel(function(t,e){var n=t.atanh(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(Ve(1).sub(n.toFloat().square()))}}})}}),_a=Fe({ceil_:function(t){var e=re(t,&quot;x&quot;,&quot;ceil&quot;);return Zt.engine.runKernel(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Sa=Fe({clipByValue_:function(t,r,o){var i=re(t,&quot;x&quot;,&quot;clipByValue&quot;);return D(r&lt;=o,function(){return&quot;Error in clip: min (&quot;+r+&quot;) must be less than or equal to max (&quot;+o+&quot;).&quot;}),Zt.engine.runKernel(function(t,e){var n=t.clip(i,r,o);return e([i]),n},{$x:i},function(t,e){var n=e[0];return{$x:function(){return t.where(n.greaterEqual(r).logicalAnd(n.lessEqual(o)),nn(t))}}})}}),Ra=Fe({cos_:function(t){var r=re(t,&quot;x&quot;,&quot;cos&quot;);return Zt.engine.runKernel(function(t,e){var n=t.cos(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sin().neg().mul(t)}}})}}),Na=Fe({cosh_:function(t){var r=re(t,&quot;x&quot;,&quot;cosh&quot;);return Zt.engine.runKernel(function(t,e){var n=t.cosh(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}})}}),ka=Fe({erf_:function(t){var r=re(t,&quot;x&quot;,&quot;erf&quot;);return D(&quot;int32&quot;===r.dtype||&quot;float32&quot;===r.dtype,function(){return&quot;Input dtype must be `int32` or `float32`.&quot;}),&quot;int32&quot;===r.dtype&amp;&amp;(r=r.toFloat()),Zt.engine.runKernel(function(t,e){var n=t.erf(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Ia=Fe({exp_:function(t){var r=re(t,&quot;x&quot;,&quot;exp&quot;);return Zt.engine.runKernel(function(t,e){var n=t.exp(r);return e([n]),n},{$x:r},function(t,e){return{$x:function(){return t.mulStrict(e[0])}}})}}),Ta=Fe({expm1_:function(t){var r=re(t,&quot;x&quot;,&quot;expm1&quot;);return Zt.engine.runKernel(function(t,e){var n=t.expm1(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}})}}),Aa=Fe({floor_:function(t){var e=re(t,&quot;x&quot;,&quot;floor&quot;);return Zt.engine.runKernel(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Da=Fe({log_:function(t){var r=re(t,&quot;x&quot;,&quot;log&quot;);return Zt.engine.runKernel(function(t,e){var n=t.log(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat())}}})}}),Ma=Fe({log1p_:function(t){var r=re(t,&quot;x&quot;,&quot;log1p&quot;);return Zt.engine.runKernel(function(t,e){var n=t.log1p(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}})}}),Oa=Fe({logSigmoid_:function(t){var r=re(t,&quot;x&quot;,&quot;logSigmoid&quot;);return Zt.engine.runKernel(function(t,e){var n=t.softplus(r.neg()).neg();return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}})}}),Pa=Fe({neg_:function(t){var e=re(t,&quot;x&quot;,&quot;neg&quot;);return Zt.engine.runKernel(function(t){return t.neg(e)},{$x:e},function(t){return{$x:function(){return t.neg()}}})}}),Fa=Fe({reciprocal_:function(t){var r=re(t,&quot;x&quot;,&quot;reciprocal&quot;);return Zt.engine.runKernel(function(t,e){var n=t.reciprocal(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}})}}),La=Fe({round_:function(t){var e=re(t,&quot;x&quot;,&quot;round&quot;);return Zt.engine.runKernel(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Ba=Fe({rsqrt_:function(t){var r=re(t,&quot;x&quot;,&quot;rsqrt&quot;);return Zt.engine.runKernel(function(t,e){var n=t.rsqrt(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}})}}),Wa=Fe({sigmoid_:function(t){var r=re(t,&quot;x&quot;,&quot;sigmoid&quot;);return Zt.engine.runKernel(function(t,e){var n=t.sigmoid(r);return e([n]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.mul(Ve(1).sub(n)))}}})}}),za=Fe({sign_:function(t){var e=re(t,&quot;x&quot;,&quot;sign&quot;);return Zt.engine.runKernel(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Ua=Fe({isNaN_:function(t){var e=re(t,&quot;x&quot;,&quot;isNaN&quot;);return Zt.engine.runKernel(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Ga=Fe({isInf_:function(t){var e=re(t,&quot;x&quot;,&quot;isInf&quot;);return Zt.engine.runKernel(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Va=Fe({isFinite_:function(t){var e=re(t,&quot;x&quot;,&quot;isFinite&quot;);return Zt.engine.runKernel(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return nn(t)}}})}}),Ha=Fe({sin_:function(t){var r=re(t,&quot;x&quot;,&quot;sin&quot;);return Zt.engine.runKernel(function(t,e){var n=t.sin(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cos().mul(t)}}})}}),qa=Fe({sinh_:function(t){var r=re(t,&quot;x&quot;,&quot;sinh&quot;);return Zt.engine.runKernel(function(t,e){var n=t.sinh(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}})}}),ja=Fe({softplus_:function(t){var r=re(t,&quot;x&quot;,&quot;softplus&quot;);return Zt.engine.runKernel(function(t,e){var n=t.softplus(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}})}}),$a=Fe({sqrt_:function(t){var r=re(t,&quot;x&quot;,&quot;sqrt&quot;);return Zt.engine.runKernel(function(t,e){var n=t.sqrt(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}})}}),Ka=Fe({square_:function(t){var n=re(t,&quot;x&quot;,&quot;square&quot;);return Zt.engine.runKernel(function(t,e){return e([n]),t.square(n)},{$x:n},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.toFloat().mul(2))}}})}}),Xa=Fe({step_:function(t,e){void 0===e&amp;&amp;(e=0);var n=re(t,&quot;x&quot;,&quot;step&quot;);return Zt.engine.runKernel(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return nn(t)}}})}}),Ya=Fe({tan_:function(t){var r=re(t,&quot;x&quot;,&quot;tan&quot;);return Zt.engine.runKernel(function(t,e){var n=t.tan(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}})}}),Qa=Fe({tanh_:function(t){var r=re(t,&quot;x&quot;,&quot;tanh&quot;);return Zt.engine.runKernel(function(t,e){var n=t.tanh(r);return e([n]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return Ve(1).sub(n.square()).mulStrict(t)}}})}});function Ja(t,e,n,r,o,i){var a,s,u=re(t,&quot;x&quot;,&quot;batchNorm&quot;),c=re(e,&quot;mean&quot;,&quot;batchNorm&quot;),l=re(n,&quot;variance&quot;,&quot;batchNorm&quot;);return null!=o&amp;&amp;(a=re(o,&quot;scale&quot;,&quot;batchNorm&quot;)),null!=r&amp;&amp;(s=re(r,&quot;offset&quot;,&quot;batchNorm&quot;)),D(2===u.rank,function(){return&quot;Error in batchNorm3D: x must be rank 3 but got rank &quot;+u.rank+&quot;.&quot;}),D(2===c.rank||1===c.rank,function(){return&quot;Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank &quot;+c.rank+&quot;.&quot;}),D(2===l.rank||1===l.rank,function(){return&quot;Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank &quot;+l.rank+&quot;.&quot;}),null!=a&amp;&amp;D(2===a.rank||1===a.rank,function(){return&quot;Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank &quot;+a.rank+&quot;.&quot;}),null!=s&amp;&amp;D(2===s.rank||1===s.rank,function(){return&quot;Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank &quot;+s.rank+&quot;.&quot;}),es(u,c,l,s,a,i)}function Za(t,e,n,r,o,i){var a,s,u=re(t,&quot;x&quot;,&quot;batchNorm&quot;),c=re(e,&quot;mean&quot;,&quot;batchNorm&quot;),l=re(n,&quot;variance&quot;,&quot;batchNorm&quot;);return null!=o&amp;&amp;(a=re(o,&quot;scale&quot;,&quot;batchNorm&quot;)),null!=r&amp;&amp;(s=re(r,&quot;offset&quot;,&quot;batchNorm&quot;)),D(3===u.rank,function(){return&quot;Error in batchNorm3D: x must be rank 3 but got rank &quot;+u.rank+&quot;.&quot;}),D(3===c.rank||1===c.rank,function(){return&quot;Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank &quot;+c.rank+&quot;.&quot;}),D(3===l.rank||1===l.rank,function(){return&quot;Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank &quot;+l.rank+&quot;.&quot;}),null!=a&amp;&amp;D(3===a.rank||1===a.rank,function(){return&quot;Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank &quot;+a.rank+&quot;.&quot;}),null!=s&amp;&amp;D(3===s.rank||1===s.rank,function(){return&quot;Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank &quot;+s.rank+&quot;.&quot;}),es(u,c,l,s,a,i)}function ts(t,e,n,r,o,i){var a,s,u=re(t,&quot;x&quot;,&quot;batchNorm&quot;),c=re(e,&quot;mean&quot;,&quot;batchNorm&quot;),l=re(n,&quot;variance&quot;,&quot;batchNorm&quot;);return null!=o&amp;&amp;(a=re(o,&quot;scale&quot;,&quot;batchNorm&quot;)),null!=r&amp;&amp;(s=re(r,&quot;offset&quot;,&quot;batchNorm&quot;)),D(4===u.rank,function(){return&quot;Error in batchNorm4D: x must be rank 4 but got rank &quot;+u.rank+&quot;.&quot;}),D(4===c.rank||1===c.rank,function(){return&quot;Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank &quot;+c.rank+&quot;.&quot;}),D(4===l.rank||1===l.rank,function(){return&quot;Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank &quot;+l.rank+&quot;.&quot;}),null!=a&amp;&amp;D(4===a.rank||1===a.rank,function(){return&quot;Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank &quot;+a.rank+&quot;.&quot;}),null!=s&amp;&amp;D(4===s.rank||1===s.rank,function(){return&quot;Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank &quot;+s.rank+&quot;.&quot;}),es(u,c,l,s,a,i)}function es(t,e,n,r,o,d){null==d&amp;&amp;(d=.001);var i,a,v,s=re(t,&quot;x&quot;,&quot;batchNorm&quot;),u=re(e,&quot;mean&quot;,&quot;batchNorm&quot;),c=re(n,&quot;variance&quot;,&quot;batchNorm&quot;);return null!=o&amp;&amp;(i=re(o,&quot;scale&quot;,&quot;batchNorm&quot;)),null!=r&amp;&amp;(a=re(r,&quot;offset&quot;,&quot;batchNorm&quot;)),D(u.rank===c.rank,function(){return&quot;Batch normalization gradient requires mean and variance to have equal ranks.&quot;}),D(null==a||u.rank===a.rank,function(){return&quot;Batch normalization gradient requires mean and offset to have equal ranks.&quot;}),D(null==i||u.rank===i.rank,function(){return&quot;Batch normalization gradient requires mean and scale to have equal ranks.&quot;}),v=0===s.rank||1===s.rank?s.as4D(1,1,1,s.size):2===s.rank?s.as4D(1,1,s.shape[0],s.shape[1]):3===s.rank?s.as4D(1,s.shape[0],s.shape[1],s.shape[2]):s,Zt.engine.runKernel(function(t,e){var n=t.batchNormalization(v,ns(u),ns(c),d,ns(i),ns(a));return e([s,u,c,i]),n},{$x:s,$mean:u,$variance:c,$scale:i,$offset:a},function(n,t){var e=t[0],r=t[1],o=t[2],i=t[3],a=null==i?Ve(1):i,s=yn(r.shape,v.shape),u=[];if(1===r.rank){for(var c=0;c&lt;v.shape.length-1;++c)u.push(v.shape[c]);u.push(1)}var l=e.sub(r),h=n.mul(a),p=Ba(o.add(Ve(d))),f=p.mul(p).mul(p).mul(Ve(-.5));return{$x:function(){return 1===r.rank?n.mul(ca(p.as4D(1,1,1,r.shape[0]),u)).mul(a).reshape(e.shape):n.mul(p).mul(a).reshape(e.shape)},$mean:function(){var t=p.mul(Ve(-1)).mul(h);return 1===r.rank&amp;&amp;(t=t.sum(s)),t.reshape(r.shape)},$variance:function(){var t=f.mul(l).mul(h);return 1===r.rank&amp;&amp;(t=t.sum(s)),t.reshape(r.shape)},$scale:function(){var t=l.mul(p),e=n.mul(t);return 1===r.rank&amp;&amp;(e=e.sum(s)),e.reshape(r.shape)},$offset:function(){var t=n;return 1===r.rank&amp;&amp;(t=t.sum(s)),t.reshape(r.shape)}}}).reshape(s.shape)}function ns(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function rs(){Qt(&quot;tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon&quot;)}var os=Fe({batchNormalization2d_:function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=.001),rs(),Ja(t,e,n,i,o,r)}}),is=Fe({batchNormalization3d_:function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=.001),rs(),Za(t,e,n,i,o,r)}}),as=Fe({batchNormalization4d_:function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=.001),rs(),ts(t,e,n,i,o,r)}}),ss=Fe({batchNormalization_:function(t,e,n,r,o,i){return void 0===r&amp;&amp;(r=.001),rs(),es(t,e,n,i,o,r)}}),us=Fe({batchNorm_:es}),cs=Fe({batchNorm2d_:Ja}),ls=Fe({batchNorm3d_:Za}),hs=Fe({batchNorm4d_:ts});function ps(t,e,n,r,o,i,a){void 0===a&amp;&amp;(a=&quot;channelsLast&quot;);var s,u=vs(e),c=u[0],l=u[1];if(&quot;channelsLast&quot;===a)s=[c,l,t[3],t[3]];else{if(&quot;channelsFirst&quot;!==a)throw new Error(&quot;Unknown dataFormat &quot;+a);s=[c,l,t[1],t[1]]}return fs(t,s,n,r,o,i,!1,a)}function fs(t,e,n,r,o,i,a,s){void 0===a&amp;&amp;(a=!1),void 0===s&amp;&amp;(s=&quot;channelsLast&quot;);var u=[-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],p=u[3];if(&quot;channelsLast&quot;===s)c=t[0],l=t[1],h=t[2],p=t[3];else{if(&quot;channelsFirst&quot;!==s)throw new Error(&quot;Unknown dataFormat &quot;+s);c=t[0],p=t[1],l=t[2],h=t[3]}var f,d=e[0],v=e[1],m=e[3],g=vs(n),y=g[0],x=g[1],w=vs(r),b=w[0],E=w[1],C=gs(d,b),_=gs(v,E),S=function(t,e,n,r,o,i,a,s){var u,c,l;if(&quot;number&quot;==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?&quot;VALID&quot;:&quot;NUMBER&quot;};var h=function(t,e,n,r,o,i){null==o&amp;&amp;(o=function(t,e,n,r){void 0===r&amp;&amp;(r=1);var o=gs(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}(t,e,r));var a=t[0],s=t[1],u=ys((a-e+2*o)/r+1,i);D(T(u),function(){return&quot;The output # of rows (&quot;+u+&quot;) must be an integer. Change the stride and/or zero pad parameters&quot;});var c=ys((s-e+2*o)/r+1,i);return D(T(c),function(){return&quot;The output # of columns (&quot;+c+&quot;) must be an integer. Change the stride and/or zero pad parameters&quot;}),[u,c,n]}([e,n,1],i,1,r,t,s);c=h[0],l=h[1]}else if(&quot;same&quot;===t){c=Math.ceil(e/r),l=Math.ceil(n/o);var p=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(l-1)*o+a-n),d=Math.floor(p/2),v=p-d,m=Math.floor(f/2);u={top:d,bottom:v,left:m,right:f-m,type:&quot;SAME&quot;}}else{if(&quot;valid&quot;!==t)throw Error(&quot;Unknown padding parameter: &quot;+t);u={top:0,bottom:0,left:0,right:0,type:&quot;VALID&quot;},c=Math.ceil((e-i+1)/r),l=Math.ceil((n-a+1)/o)}return{padInfo:u,outHeight:c,outWidth:l}}(o,l,h,y,x,C,_,i),R=S.padInfo,N=S.outHeight,k=S.outWidth,I=a?m*p:m;return&quot;channelsFirst&quot;===s?f=[c,I,N,k]:&quot;channelsLast&quot;===s&amp;&amp;(f=[c,N,k,I]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:h,inChannels:p,outHeight:N,outWidth:k,outChannels:I,padInfo:R,strideHeight:y,strideWidth:x,filterHeight:d,filterWidth:v,effectiveFilterHeight:C,effectiveFilterWidth:_,dilationHeight:b,dilationWidth:E,inShape:t,outShape:f,filterShape:e}}function ds(t,e,n,r,o,i,a){void 0===i&amp;&amp;(i=!1),void 0===a&amp;&amp;(a=&quot;channelsLast&quot;);var s=[-1,-1,-1,-1,-1],u=s[0],c=s[1],l=s[2],h=s[3],p=s[4];if(&quot;channelsLast&quot;===a)u=t[0],c=t[1],l=t[2],h=t[3],p=t[4];else{if(&quot;channelsFirst&quot;!==a)throw new Error(&quot;Unknown dataFormat &quot;+a);u=t[0],p=t[1],c=t[2],l=t[3],h=t[4]}var f,d=e[0],v=e[1],m=e[2],g=e[4],y=ms(n),x=y[0],w=y[1],b=y[2],E=ms(r),C=E[0],_=E[1],S=E[2],R=function(t,e,n,r,o,i,a,s,u,c){var l,h,p,f;if(&quot;same&quot;===t){var d=((h=Math.ceil(e/o))-1)*o+s-e,v=((p=Math.ceil(n/i))-1)*i+u-n,m=((f=Math.ceil(r/a))-1)*a+c-r,g=Math.floor(d/2),y=d-g,x=Math.floor(v/2),w=v-x,b=Math.floor(m/2);l={top:x,bottom:w,left:b,right:m-b,front:g,back:y,type:&quot;SAME&quot;}}else{if(&quot;valid&quot;!==t)throw Error(&quot;Unknown padding parameter: &quot;+t);l={top:0,bottom:0,left:0,right:0,front:0,back:0,type:&quot;VALID&quot;},h=Math.ceil((e-s+1)/o),p=Math.ceil((n-u+1)/i),f=Math.ceil((r-c+1)/a)}return{padInfo:l,outDepth:h,outHeight:p,outWidth:f}}(o,c,l,h,x,w,b,gs(d,C),gs(v,_),gs(m,S)),N=R.padInfo,k=R.outDepth,I=R.outHeight,T=R.outWidth,A=i?g*p:g;return&quot;channelsFirst&quot;===a?f=[u,A,k,I,T]:&quot;channelsLast&quot;===a&amp;&amp;(f=[u,k,I,T,A]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:l,inWidth:h,inChannels:p,outDepth:k,outHeight:I,outWidth:T,outChannels:A,padInfo:N,strideDepth:x,strideHeight:w,strideWidth:b,filterDepth:d,filterHeight:v,filterWidth:m,dilationDepth:C,dilationHeight:_,dilationWidth:S,inShape:t,outShape:f,filterShape:e}}function vs(t){return&quot;number&quot;==typeof t?[t,t]:t}function ms(t){return&quot;number&quot;==typeof t?[t,t,t]:t}function gs(t,e){return e&lt;=1?t:t+(t-1)*(e-1)}function ys(t,e){if(!e)return t;switch(e){case&quot;round&quot;:return Math.round(t);case&quot;ceil&quot;:return Math.ceil(t);case&quot;floor&quot;:return Math.floor(t);default:throw new Error(&quot;Unknown roundingMode &quot;+e)}}function xs(t){var e=vs(t),n=e[0],r=e[1];return 1===n&amp;&amp;1===r}function ws(t,e){return xs(t)||xs(e)}function bs(t,e,r,o,i,a){D(t.length===e.rank,function(){return&quot;Length of inShape (&quot;+t.length+&quot;) and rank of dy (&quot;+e.rank+&quot;) must match&quot;});var n=t,s=e,u=!1;3===e.rank&amp;&amp;(u=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),n=[1,t[0],t[1],t[2]]);var c=n[3],l=s.shape[3];D(4===n.length,function(){return&quot;Error in conv2dDerInput: inShape must be length 4, but got length &quot;+n.length+&quot;.&quot;}),D(4===s.rank,function(){return&quot;Error in conv2dDerInput: dy must be rank 4, but got rank &quot;+s.rank}),D(4===r.rank,function(){return&quot;Error in conv2dDerInput: filter must be rank 4, but got rank &quot;+r.rank}),D(c===r.shape[2],function(){return&quot;Error in conv2dDerInput: depth of input (&quot;+c+&quot;) must match input depth for filter &quot;+r.shape[2]+&quot;.&quot;}),D(l===r.shape[3],function(){return&quot;Error in conv2dDerInput: depth of output (&quot;+l+&quot;) must match output depth for filter &quot;+r.shape[3]+&quot;.&quot;}),null!=a&amp;&amp;D(T(i),function(){return&quot;Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode &quot;+a+&quot; but got pad &quot;+i+&quot;.&quot;});var h=fs(n,r.shape,o,1,i,a),p=Zt.engine.runKernel(function(t,e){var n=t.conv2dDerInput(s,r,h);return e([r,s]),n},{dy4D:s,filter:r},function(t,e){var n=e[0],r=e[1];return{dy4D:function(){return Ss(t,n,o,i,&quot;NHWC&quot;,1,a)},filter:function(){return Ns(t,r,n.shape,o,i,a)}}});return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Es(t,e,n,r,o,i){var a=t;3===t.rank&amp;&amp;(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;3===s.rank&amp;&amp;(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),D(4===a.rank,function(){return&quot;Error in conv2dDerFilter: input must be rank 4, but got shape &quot;+a.shape+&quot;.&quot;}),D(4===s.rank,function(){return&quot;Error in conv2dDerFilter: dy must be rank 4, but got shape &quot;+s.shape+&quot;.&quot;}),D(4===n.length,function(){return&quot;Error in conv2dDerFilter: filterShape must be length 4, but got &quot;+n+&quot;.&quot;}),D(a.shape[3]===n[2],function(){return&quot;Error in conv2dDerFilter: depth of input &quot;+a.shape[3]+&quot;) must match input depth in filter (&quot;+n[2]+&quot;.&quot;}),D(s.shape[3]===n[3],function(){return&quot;Error in conv2dDerFilter: depth of dy (&quot;+s.shape[3]+&quot;) must match output depth for filter (&quot;+n[3]+&quot;).&quot;}),null!=i&amp;&amp;D(T(o),function(){return&quot;Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode &quot;+i+&quot; but got pad &quot;+o+&quot;.&quot;});var u=fs(a.shape,n,r,1,o,i);return Zt.engine.runKernel(function(t){return t.conv2dDerFilter(a,s,u)},{x4D:a,dy4D:s})}function Cs(t){var e,n=&quot;number&quot;==typeof(e=t)?[e,e,e]:2===e.length?[e[0],e[1],1]:e,r=n[0],o=n[1],i=n[2];return 1===r&amp;&amp;1===o&amp;&amp;1===i}var _s=Fe({conv1d_:function(t,e,n,r,o,i,a){void 0===o&amp;&amp;(o=&quot;NWC&quot;),void 0===i&amp;&amp;(i=1);var s=re(t,&quot;x&quot;,&quot;conv1d&quot;),u=re(e,&quot;filter&quot;,&quot;conv1d&quot;),c=s,l=!1;2===s.rank&amp;&amp;(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),D(3===c.rank,function(){return&quot;Error in conv1d: input must be rank 3, but got rank &quot;+c.rank+&quot;.&quot;}),D(3===u.rank,function(){return&quot;Error in conv1d: filter must be rank 3, but got rank &quot;+u.rank+&quot;.&quot;}),null!=a&amp;&amp;D(T(r),function(){return&quot;Error in conv1d: pad must be an integer when using, dimRoundingMode &quot;+a+&quot; but got pad &quot;+r+&quot;.&quot;}),D(c.shape[2]===u.shape[1],function(){return&quot;Error in conv1d: depth of input (&quot;+c.shape[2]+&quot;) must match input depth for filter &quot;+u.shape[1]+&quot;.&quot;}),D(ws(n,i),function(){return&quot;Error in conv1D: Either stride or dilation must be 1. Got stride &quot;+n+&quot; and dilation &#39;&quot;+i+&quot;&#39;&quot;}),D(&quot;NWC&quot;===o,function(){return&quot;Error in conv1d: got dataFormat of &quot;+o+&quot; but only NWC is currently supported.&quot;});var h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),f=Ss(p,h,[1,n],r,&quot;NHWC&quot;,[1,i],a);return l?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),Ss=Fe({conv2d_:function(t,e,i,a,n,s,r){void 0===n&amp;&amp;(n=&quot;NHWC&quot;),void 0===s&amp;&amp;(s=[1,1]);var o=re(t,&quot;x&quot;,&quot;conv2d&quot;),u=re(e,&quot;filter&quot;,&quot;conv2d&quot;),c=o,l=!1;3===o.rank&amp;&amp;(l=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),D(4===c.rank,function(){return&quot;Error in conv2d: input must be rank 4, but got rank &quot;+c.rank+&quot;.&quot;}),D(4===u.rank,function(){return&quot;Error in conv2d: filter must be rank 4, but got rank &quot;+u.rank+&quot;.&quot;}),null!=r&amp;&amp;D(T(a),function(){return&quot;Error in conv2d: pad must be an integer when using, dimRoundingMode &quot;+r+&quot; but got pad &quot;+a+&quot;.&quot;}),D(c.shape[3]===u.shape[2],function(){return&quot;Error in conv2d: depth of input (&quot;+c.shape[3]+&quot;) must match input depth for filter &quot;+u.shape[2]+&quot;.&quot;}),D(ws(i,s),function(){return&quot;Error in conv2D: Either strides or dilations must be 1. Got strides &quot;+i+&quot; and dilations &#39;&quot;+s+&quot;&#39;&quot;}),D(&quot;NHWC&quot;===n,function(){return&quot;Error in conv2d: got dataFormat of &quot;+n+&quot; but only NHWC is currently supported.&quot;});var h=fs(c.shape,u.shape,i,s,a,r),p=Zt.engine.runKernel(function(t,e){var n=t.conv2d(c,u,h);return e([u,c]),n},{x:c,$filter:u},function(t,e){var n=e,r=n[0],o=n[1];return D(xs(s),function(){return&quot;Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations &#39;&quot;+s+&quot;&#39;&quot;}),{x:function(){return bs(o.shape,t,r,i,a)},$filter:function(){return Es(o,t,r.shape,i,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Rs=Fe({conv3d_:function(t,e,o,i,n,a){void 0===n&amp;&amp;(n=&quot;NHWC&quot;),void 0===a&amp;&amp;(a=[1,1,1]);var r,s=re(t,&quot;x&quot;,&quot;conv3d&quot;),u=re(e,&quot;filter&quot;,&quot;conv3d&quot;),c=s,l=!1;4===s.rank&amp;&amp;(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),D(5===c.rank,function(){return&quot;Error in conv3d: input must be rank 5, but got rank &quot;+c.rank+&quot;.&quot;}),D(5===u.rank,function(){return&quot;Error in conv3d: filter must be rank 5, but got rank &quot;+u.rank+&quot;.&quot;}),D(c.shape[4]===u.shape[3],function(){return&quot;Error in conv3d: depth of input (&quot;+c.shape[4]+&quot;) must match input depth for filter &quot;+u.shape[3]+&quot;.&quot;}),D((r=a,Cs(o)||Cs(r)),function(){return&quot;Error in conv3D: Either strides or dilations must be 1. Got strides &quot;+o+&quot; and dilations &#39;&quot;+a+&quot;&#39;&quot;}),D(&quot;NHWC&quot;===n,function(){return&quot;Error in conv3d: got dataFormat of &quot;+n+&quot; but only NHWC is currently supported.&quot;});var h=ds(c.shape,u.shape,o,a,i),p=Zt.engine.runKernel(function(t,e){var n=t.conv3d(c,u,h);return e([c,u]),n},{x:c,$filter:u},function(t,e){D(Cs(a),function(){return&quot;Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations &#39;&quot;+a+&quot;&#39;&quot;});var n=e[0],r=e[1];return{x:function(){return function(t,e,n,r,o){D(t.length===e.rank,function(){return&quot;Length of inShape (&quot;+t.length+&quot;) and rank of dy (&quot;+e.rank+&quot;) must match&quot;});var i=t,a=e,s=!1;4===e.rank&amp;&amp;(s=!0,a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,t[0],t[1],t[2],t[3]]);var u=i[4],c=a.shape[4];D(5===i.length,function(){return&quot;Error in conv3dDerInput: inShape must be length 5, but got length &quot;+i.length+&quot;.&quot;}),D(5===a.rank,function(){return&quot;Error in conv3dDerInput: dy must be rank 5, but got rank &quot;+a.rank}),D(5===n.rank,function(){return&quot;Error in conv3dDerInput: filter must be rank 5, but got rank &quot;+n.rank}),D(u===n.shape[3],function(){return&quot;Error in conv3dDerInput: depth of input (&quot;+u+&quot;) must match input depth for filter &quot;+n.shape[3]+&quot;.&quot;}),D(c===n.shape[4],function(){return&quot;Error in conv3dDerInput: depth of output (&quot;+c+&quot;) must match output depth for filter &quot;+n.shape[4]+&quot;.&quot;});var l=ds(i,n.shape,r,1,o),h=Zt.engine.runKernel(function(t){return t.conv3dDerInput(a,n,l)},{dy5D:a});return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}(n.shape,t,r,o,i)},$filter:function(){return function(t,e,n,r,o){var i=t;4===t.rank&amp;&amp;(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var a=e;4===a.rank&amp;&amp;(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),D(5===i.rank,function(){return&quot;Error in conv3dDerFilter: input must be rank 5, but got shape &quot;+i.shape+&quot;.&quot;}),D(5===a.rank,function(){return&quot;Error in conv3dDerFilter: dy must be rank 5, but got shape &quot;+a.shape+&quot;.&quot;}),D(5===n.length,function(){return&quot;Error in conv3dDerFilter: filterShape must be length 5, but got &quot;+n+&quot;.&quot;}),D(i.shape[4]===n[3],function(){return&quot;Error in conv3dDerFilter: depth of input &quot;+i.shape[4]+&quot;) must match input depth in filter (&quot;+n[3]+&quot;.&quot;}),D(a.shape[4]===n[4],function(){return&quot;Error in conv3dDerFilter: depth of dy (&quot;+a.shape[4]+&quot;) must match output depth for filter (&quot;+n[4]+&quot;).&quot;});var s=ds(i.shape,n,r,1,o);return Zt.engine.runKernel(function(t){return t.conv3dDerFilter(i,a,s)},{x5D:i,dy5D:a})}(n,t,r.shape,o,i)}}});return l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Ns=Fe({conv2dDerFilter_:Es}),ks=Fe({depthwiseConv2d_:function(t,e,n,r,o,i,a){void 0===o&amp;&amp;(o=&quot;NHWC&quot;),void 0===i&amp;&amp;(i=[1,1]);var s=re(t,&quot;x&quot;,&quot;depthwiseConv2d&quot;),u=re(e,&quot;filter&quot;,&quot;depthwiseConv2d&quot;),c=s,l=!1;3===s.rank&amp;&amp;(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(4===c.rank,function(){return&quot;Error in depthwiseConv2d: input must be rank 4, but got rank &quot;+c.rank+&quot;.&quot;}),D(4===u.rank,function(){return&quot;Error in depthwiseConv2d: filter must be rank 4, but got rank &quot;+u.rank+&quot;.&quot;}),D(c.shape[3]===u.shape[2],function(){return&quot;Error in depthwiseConv2d: number of input channels (&quot;+c.shape[3]+&quot;) must match the inChannels dimension in filter &quot;+u.shape[2]+&quot;.&quot;}),null==i&amp;&amp;(i=[1,1]),D(ws(n,i),function(){return&quot;Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides &quot;+n+&quot; and dilations &#39;&quot;+i+&quot;&#39;&quot;}),null!=a&amp;&amp;D(T(r),function(){return&quot;Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode &quot;+a+&quot; but got pad &quot;+r+&quot;.&quot;});var h=fs(c.shape,u.shape,n,i,r,a,!0),p=Zt.engine.runKernel(function(t,e){var n=t.depthwiseConv2D(c,u,h);return e([c,u]),n},{x:c,$filter:u},function(t,e){D(xs(i),function(){return&quot;Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations &#39;&quot;+i+&quot;&#39;&quot;});var n=e[0],r=e[1];return{x:function(){return function(t,e,n,r){var o=e,i=!1;3===e.rank&amp;&amp;(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=Zt.engine.runKernel(function(t){return t.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}(n.shape,t,r,h)},$filter:function(){return function(t,e,n,r){var o=t;3===t.rank&amp;&amp;(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=e;return 3===i.rank&amp;&amp;(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Zt.engine.runKernel(function(t){return t.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}(n,t,r.shape,h)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Is=Fe({separableConv2d_:function(t,e,n,r,o,i,a){void 0===i&amp;&amp;(i=[1,1]),void 0===a&amp;&amp;(a=&quot;NHWC&quot;);var s=re(t,&quot;x&quot;,&quot;separableConv2d&quot;),u=re(e,&quot;depthwiseFilter&quot;,&quot;separableConv2d&quot;),c=re(n,&quot;pointwiseFilter&quot;,&quot;separableConv2d&quot;),l=s,h=!1;if(3===s.rank&amp;&amp;(h=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),&quot;NCHW&quot;===a)throw new Error(&quot;separableConv2d currently does not support dataFormat NCHW; only NHWC is supported&quot;);D(4===l.rank,function(){return&quot;Error in separableConv2d: input must be rank 4, but got rank &quot;+l.rank+&quot;.&quot;}),D(4===u.rank,function(){return&quot;Error in separableConv2d: depthwise filter must be rank 4, but got rank &quot;+u.rank+&quot;.&quot;}),D(4===c.rank,function(){return&quot;Error in separableConv2d: pointwise filter must be rank 4, but got rank &quot;+u.rank+&quot;.&quot;}),D(1===c.shape[0],function(){return&quot;Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got &quot;+c.shape[0]+&quot;.&quot;}),D(1===c.shape[1],function(){return&quot;Error in separableConv2d: the second dimension of pointwise filter must be 1, but got &quot;+c.shape[1]+&quot;.&quot;});var p=u.shape[2],f=u.shape[3];D(c.shape[2]===p*f,function(){return&quot;Error in separableConv2d: the third dimension of pointwise filter must be &quot;+p*f+&quot;, but got &quot;+c.shape[2]+&quot;.&quot;});var d=ks(l,u,r,o,a,i),v=Ss(d,c,1,&quot;valid&quot;,a);return h?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Ts=Fe({conv2dTranspose_:function(t,e,n,r,o,i){return bs(n,re(t,&quot;x&quot;,&quot;conv2dTranspose&quot;),re(e,&quot;filter&quot;,&quot;conv2dTranspose&quot;),r,o,i)}});var As=Fe({matMul_:function(t,e,i,a){var n;void 0===i&amp;&amp;(i=!1),void 0===a&amp;&amp;(a=!1);var r=re(t,&quot;a&quot;,&quot;matMul&quot;),o=re(e,&quot;b&quot;,&quot;matMul&quot;);n=Tt(r,o),r=n[0],o=n[1];var s=i?r.shape[r.rank-2]:r.shape[r.rank-1],u=a?o.shape[o.rank-1]:o.shape[o.rank-2],c=i?r.shape[r.rank-1]:r.shape[r.rank-2],l=a?o.shape[o.rank-2]:o.shape[o.rank-1],h=r.shape.slice(0,-2),p=o.shape.slice(0,-2),f=B(h),d=B(p);D(2&lt;=r.rank&amp;&amp;2&lt;=o.rank&amp;&amp;r.rank===o.rank,function(){return&quot;Error in matMul: inputs must have the same rank of at least 2, got ranks &quot;+r.rank+&quot; and &quot;+o.rank+&quot;.&quot;}),D(E(h,p),function(){return&quot;Error in matMul: outer dimensions (&quot;+h+&quot;) and (&quot;+p+&quot;) of Tensors with shapes &quot;+r.shape+&quot; and &quot;+o.shape+&quot; must match.&quot;}),D(s===u,function(){return&quot;Error in matMul: inner shapes (&quot;+s+&quot;) and (&quot;+u+&quot;) of Tensors with shapes &quot;+r.shape+&quot; and &quot;+o.shape+&quot; and transposeA=&quot;+i+&quot; and transposeB=&quot;+a+&quot; must match.&quot;});var v=r.shape.slice(0,-2).concat([c,l]),m=i?r.as3D(f,s,c):r.as3D(f,c,s),g=a?o.as3D(d,l,u):o.as3D(d,u,l);return Zt.engine.runKernel(function(t,e){var n=t.batchMatMul(m,g,i,a);return e([m,g]),n},{$a:m,$b:g},function(t,e){var n=e,r=n[0],o=n[1];return i||a?!i&amp;&amp;a?{$a:function(){return t.matMul(o,!1,!1)},$b:function(){return t.matMul(r,!0,!1)}}:i&amp;&amp;!a?{$a:function(){return o.matMul(t,!1,!0)},$b:function(){return r.matMul(t,!1,!1)}}:{$a:function(){return o.matMul(t,!0,!0)},$b:function(){return t.matMul(r,!0,!0)}}:{$a:function(){return t.matMul(o,!1,!0)},$b:function(){return r.matMul(t,!0,!1)}}}).reshape(v)}}),Ds=Fe({dot_:function(t,e){var n=re(t,&quot;t1&quot;,&quot;dot&quot;),r=re(e,&quot;t2&quot;,&quot;dot&quot;);D(!(1!==n.rank&amp;&amp;2!==n.rank||1!==r.rank&amp;&amp;2!==r.rank),function(){return&quot;Error in dot: inputs must all be rank 1 or 2, but got ranks &quot;+n.rank+&quot; and &quot;+r.rank+&quot;.&quot;});var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return D(o===i,function(){return&quot;Error in dot: inner dimensions of inputs must match, but got &quot;+o+&quot; and &quot;+i+&quot;.&quot;}),1===n.rank&amp;&amp;1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&amp;&amp;2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&amp;&amp;1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Ms=Fe({outerProduct_:function(t,e){var n=re(t,&quot;v1&quot;,&quot;outerProduct&quot;),r=re(e,&quot;v2&quot;,&quot;outerProduct&quot;);return D(1===n.rank&amp;&amp;1===r.rank,function(){return&quot;Error in outerProduct: inputs must be rank 1, but got ranks &quot;+n.rank+&quot; and &quot;+r.rank+&quot;.&quot;}),n.as2D(-1,1).matMul(r.as2D(1,-1))}});var Os=Fe({reverse_:function(t,e){var n=re(t,&quot;x&quot;,&quot;reverse&quot;);if(0===n.rank)return n.clone();var r=k(e,n.shape);return Zt.engine.runKernel(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)}}),Ps=Fe({reverse1d_:function(t){var e=re(t,&quot;x&quot;,&quot;reverse&quot;);return D(1===e.rank,function(){return&quot;Error in reverse1D: x must be rank 1 but got rank &quot;+e.rank+&quot;.&quot;}),Os(e,0)}}),Fs=Fe({reverse2d_:function(t,e){var n=re(t,&quot;x&quot;,&quot;reverse&quot;);return D(2===n.rank,function(){return&quot;Error in reverse2D: x must be rank 2 but got rank &quot;+n.rank+&quot;.&quot;}),Os(n,e)}}),Ls=Fe({reverse3d_:function(t,e){var n=re(t,&quot;x&quot;,&quot;reverse&quot;);return D(3===n.rank,function(){return&quot;Error in reverse3D: x must be rank 3 but got rank &quot;+n.rank+&quot;.&quot;}),Os(n,e)}}),Bs=Fe({reverse4d_:function(t,e){var n=re(t,&quot;x&quot;,&quot;reverse&quot;);return D(4===n.rank,function(){return&quot;Error in reverse4D: x must be rank 4 but got rank &quot;+n.rank+&quot;.&quot;}),Os(n,e)}});function Ws(t,o,i,a,s,e){var n=re(t,&quot;x&quot;,&quot;maxPool&quot;),r=n,u=!1;3===n.rank&amp;&amp;(u=!0,r=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),null==a&amp;&amp;(a=[1,1]),D(4===r.rank,function(){return&quot;Error in maxPool: input must be rank 4 but got rank &quot;+r.rank+&quot;.&quot;}),D(ws(i,a),function(){return&quot;Error in maxPool: Either strides or dilations must be 1. Got strides &quot;+i+&quot; and dilations &#39;&quot;+a+&quot;&#39;&quot;}),null!=e&amp;&amp;D(T(s),function(){return&quot;Error in maxPool: pad must be an integer when using, dimRoundingMode &quot;+e+&quot; but got pad &quot;+s+&quot;.&quot;});var c=ps(r.shape,o,i,a,s,e),l=Zt.engine.runKernel(function(t,e){var n=t.maxPool(r,c);return e([r,n]),n},{x:r},function(t,e){var n=e[0],r=e[1];return{x:function(){return function(t,e,n,r,o,i,a,s){var u=re(t,&quot;dy&quot;,&quot;maxPoolBackprop&quot;),c=re(e,&quot;input&quot;,&quot;maxPoolBackprop&quot;),l=re(n,&quot;output&quot;,&quot;maxPoolBackprop&quot;);D(c.rank===u.rank,function(){return&quot;Rank of input (&quot;+c.rank+&quot;) does not match rank of dy (&quot;+u.rank+&quot;)&quot;}),null==i&amp;&amp;(i=[1,1]),D(ws(o,i),function(){return&quot;Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides &quot;+o+&quot; and dilations &#39;&quot;+i+&quot;&#39;&quot;}),D(4===u.rank,function(){return&quot;Error in maxPoolBackprop: dy must be rank 4 but got rank &quot;+u.rank+&quot;.&quot;}),D(4===c.rank,function(){return&quot;Error in maxPoolBackprop: input must be rank 4 but got rank &quot;+c.rank+&quot;.&quot;}),null!=s&amp;&amp;D(T(a),function(){return&quot;Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode &quot;+s+&quot; but got pad &quot;+a+&quot;.&quot;});var h=ps(c.shape,r,o,i,a,s);return Zt.engine.runKernel(function(t){return t.maxPoolBackprop(u,c,l,h)},{$dy:u,$input:c})}(t,n,r,o,i,a,s)}}});return u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function zs(t,e,n,r,o,i){var a=re(t,&quot;x&quot;,&quot;avgPool&quot;,&quot;float32&quot;);null==r&amp;&amp;(r=[1,1]),D(ws(n,r),function(){return&quot;Error in avgPool: Either strides or dilations must be 1. Got strides &quot;+n+&quot; and dilations &#39;&quot;+r+&quot;&#39;&quot;});var s=a,u=!1;3===a.rank&amp;&amp;(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(4===s.rank,function(){return&quot;Error in avgPool: x must be rank 4 but got rank &quot;+s.rank+&quot;.&quot;}),null!=i&amp;&amp;D(T(o),function(){return&quot;Error in avgPool: pad must be an integer when using, dimRoundingMode &quot;+i+&quot; but got pad &quot;+o+&quot;.&quot;});var c=ps(s.shape,e,n,r,o,i),l=Zt.engine.runKernel(function(t){return t.avgPool(s,c)},{x:s},function(t){return{x:function(){return function(t,e,n,r,o,i){var a=re(t,&quot;dy&quot;,&quot;avgPoolBackprop&quot;),s=re(e,&quot;input&quot;,&quot;avgPoolBackprop&quot;);D(s.rank===a.rank,function(){return&quot;Rank of input (&quot;+s.rank+&quot;) does not match rank of dy (&quot;+a.rank+&quot;)&quot;}),null==o&amp;&amp;(o=[1,1]),D(ws(r,o),function(){return&quot;Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides &quot;+r+&quot; and dilations &#39;&quot;+o+&quot;&#39;&quot;});var u=s,c=a,l=!1;3===s.rank&amp;&amp;(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(4===c.rank,function(){return&quot;Error in avgPoolBackprop: dy must be rank 4 but got rank &quot;+c.rank+&quot;.&quot;}),D(4===u.rank,function(){return&quot;Error in avgPoolBackprop: input must be rank 4 but got rank &quot;+u.rank+&quot;.&quot;});var h=ps(u.shape,n,r,o,i),p=Zt.engine.runKernel(function(t){return t.avgPoolBackprop(c,u,h)},{dy4D:c,input4D:u});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(t,s,e,n,r,o)}}});return l=l.cast(a.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var Us=Fe({maxPool_:function(t,e,n,r,o){return Ws(t,e,n,1,r,o)}}),Gs=Fe({avgPool_:function(t,e,n,r,o){return zs(t,e,n,1,r,o)}}),Vs=Fe({pool_:function(t,e,n,r,o,i){null==o&amp;&amp;(o=[1,1]),null==i&amp;&amp;(i=1),0===r&amp;&amp;(r=&quot;valid&quot;);var a=re(t,&quot;x&quot;,&quot;maxPool&quot;),s=a,u=!1;3===a.rank&amp;&amp;(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(ws(i,o),function(){return&quot;Error in pool: Either strides or dilations must be 1. Got strides &quot;+i+&quot; and dilations &#39;&quot;+o+&quot;&#39;&quot;});var c,l,h,p,f,d,v=ps(s.shape,e,i,o,r),m=[v.dilationHeight,v.dilationWidth];c=&quot;same&quot;===r?(l=[v.filterHeight,v.filterWidth],h=m,p=l.map(function(t,e){return t+(t-1)*(h[e]-1)}).map(function(t){return t-1}),f=p.map(function(t){return Math.floor(t/2)}),d=p.map(function(t,e){return t-f[e]}),p.map(function(t,e){return[f[e],d[e]]})):[[0,0],[0,0]];var g,y,x,w,b,E,C,_,S=1===m[0]&amp;&amp;1===m[1],R=(g=[v.inHeight,v.inWidth],y=m,w=(x=c).map(function(t){return t[0]}),b=x.map(function(t){return t[1]}),E=g.concat(w,b),C=y.map(function(t,e){return(t-E[e]%t)%t}),_=b.map(function(t,e){return t+C[e]}),[y.map(function(t,e){return[w[e],_[e]]}),y.map(function(t,e){return[0,C[e]]})]),N=R[1],k=S?r:&quot;valid&quot;,I=S?s:aa(s,m,R[0]),T=(&quot;avg&quot;===n?function(){return zs(I,e,i,1,k)}:function(){return Ws(I,e,i,1,k)})(),A=S?T:Gi(T,m,N);return u?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}});var Hs=Fe({slice_:function(t,e,n){var r,o,i=re(t,&quot;x&quot;,&quot;slice&quot;);if(0===i.rank)throw new Error(&quot;Slicing scalar is not possible&quot;);r=&quot;number&quot;==typeof e?[e].concat(new Array(i.rank-1).fill(0)):e.length&lt;i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice(),o=(o=null==n?new Array(i.rank).fill(-1):&quot;number&quot;==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length&lt;i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(t,e){return 0&lt;=t?t:(D(-1===t,function(){return&quot;Bad value in size&quot;}),i.shape[e]-r[e])}),function(e,n,r){D(e.rank===n.length,function(){return&quot;Error in slice&quot;+e.rank+&quot;D: Length of begin &quot;+n+&quot; must match the rank of the array (&quot;+e.rank+&quot;).&quot;}),D(e.rank===r.length,function(){return&quot;Error in slice&quot;+e.rank+&quot;D: Length of size &quot;+r+&quot; must match the rank of the array (&quot;+e.rank+&quot;).&quot;});for(var t=function(t){D(n[t]+r[t]&lt;=e.shape[t],function(){return&quot;Error in slice&quot;+e.rank+&quot;D: begin[&quot;+t+&quot;] + size[&quot;+t+&quot;] (&quot;+(n[t]+r[t])+&quot;) would overflow input.shape[&quot;+t+&quot;] (&quot;+e.shape[t]+&quot;)&quot;})},o=0;o&lt;e.rank;++o)t(o)}(i,r,o);var a=i.shape;return Zt.engine.runKernel(function(t){return t.slice(i,r,o)},{$x:i},function(t){for(var e=[],n=0;n&lt;t.rank;n++)e.push([r[n],a[n]-r[n]-o[n]]);return{$x:function(){return t.pad(e)}}})}}),qs=Fe({slice1d_:function(t,e,n){var r=re(t,&quot;x&quot;,&quot;slice1d&quot;);return D(1===r.rank,function(){return&quot;slice1d expects a rank-1 tensor, but got a rank-&quot;+r.rank+&quot; tensor&quot;}),Hs(r,[e],[n])}}),js=Fe({slice2d_:function(t,e,n){var r=re(t,&quot;x&quot;,&quot;slice2d&quot;);return D(2===r.rank,function(){return&quot;slice2d expects a rank-2 tensor, but got a rank-&quot;+r.rank+&quot; tensor&quot;}),Hs(r,e,n)}}),$s=Fe({slice3d_:function(t,e,n){var r=re(t,&quot;x&quot;,&quot;slice3d&quot;);return D(3===r.rank,function(){return&quot;slice3d expects a rank-3 tensor, but got a rank-&quot;+r.rank+&quot; tensor&quot;}),Hs(r,e,n)}}),Ks=Fe({slice4d_:function(t,e,n){var r=re(t,&quot;x&quot;,&quot;slice4d&quot;);return D(4===r.rank,function(){return&quot;slice4d expects a rank-4 tensor, but got a rank-&quot;+r.rank+&quot; tensor&quot;}),Hs(r,e,n)}});function Xs(e,n,r,t,o){return n.rank&lt;r.rank&amp;&amp;(n=n.reshape(be(n.shape,t))),e.rank&lt;r.rank&amp;&amp;(e=e.reshape(be(e.shape,t))),{$x:function(){var t=e.mul(r.equal(n).cast(e.dtype));return null==o?t:t.transpose(o)}}}var Ys=Fe({all_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=re(t,&quot;x&quot;,&quot;all&quot;,&quot;bool&quot;),o=k(e,r.shape),i=o,a=Ce(i,r.rank);null!=a&amp;&amp;(r=r.transpose(a),i=Se(i.length,r.rank));var s=Zt.engine.runKernel(function(t){return t.all(r,i)},{$x:r});if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),Qs=Fe({any_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=re(t,&quot;x&quot;,&quot;any&quot;,&quot;bool&quot;),o=k(e,r.shape),i=o,a=Ce(i,r.rank);null!=a&amp;&amp;(r=r.transpose(a),i=Se(i.length,r.rank));var s=Zt.engine.runKernel(function(t){return t.any(r,i)},{$x:r});if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),Js=Fe({argMax_:function(t,e){void 0===e&amp;&amp;(e=0);var r=re(t,&quot;x&quot;,&quot;argMax&quot;);null==e&amp;&amp;(e=0);var o=k(e,r.shape),n=Ce(o,r.rank);return null!=n&amp;&amp;(r=r.transpose(n),o=Se(o.length,r.rank)),Zt.engine.runKernel(function(t,e){var n=t.argMax(r,o[0]);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return nn(n)}}})}}),Zs=Fe({argMin_:function(t,e){void 0===e&amp;&amp;(e=0);var r=re(t,&quot;x&quot;,&quot;argMin&quot;);null==e&amp;&amp;(e=0);var o=k(e,r.shape),n=Ce(o,r.rank);return null!=n&amp;&amp;(r=r.transpose(n),o=Se(o.length,r.rank)),Zt.engine.runKernel(function(t,e){var n=t.argMin(r,o[0]);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return nn(n)}}})}}),tu=Fe({logSumExp_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=re(t,&quot;x&quot;,&quot;logSumExp&quot;),o=k(e,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),eu=Fe({max_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=re(t,&quot;x&quot;,&quot;max&quot;),o=r,i=k(e,r.shape),a=i,s=Ce(a,r.rank);null!=s&amp;&amp;(r=r.transpose(s),a=Se(a.length,r.rank));var u=Zt.engine.runKernel(function(t,e){var n=t.max(r,a);return e([o,n]),n},{$x:r},function(t,e){return Xs(t,e[1],e[0],i,s)});if(n){var c=be(u.shape,i);u=u.reshape(c)}return u}}),nu=Fe({mean_:function(t,e,r){void 0===e&amp;&amp;(e=null),void 0===r&amp;&amp;(r=!1);var n=re(t,&quot;x&quot;,&quot;mean&quot;),o=k(e,n.shape),i=B(we(n.shape,o)[1]);return ae(function(n){var t=Ve(i);return{value:(t.dtype===n.dtype?n:n.cast(t.dtype)).div(t).sum(e,r),gradFunc:function(t){var e=n.shape.slice();return o.forEach(function(t){e[t]=1}),t.reshape(e).mul(Ye(n.shape,&quot;float32&quot;)).div(i)}}})(n)}}),ru=Fe({min_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=re(t,&quot;x&quot;,&quot;min&quot;),o=r,i=k(e,r.shape),a=i,s=Ce(a,r.rank);null!=s&amp;&amp;(r=r.transpose(s),a=Se(a.length,r.rank));var u=Zt.engine.runKernel(function(t,e){var n=t.min(r,a);return e([o,n]),n},{$x:r},function(t,e){return Xs(t,e[1],e[0],i,s)});if(n){var c=be(u.shape,i);u=u.reshape(c)}return u}}),ou=Fe({moments_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=k(e,(t=re(t,&quot;x&quot;,&quot;moments&quot;)).shape),o=t.mean(r,n),i=o.shape;return n||(i=be(o.shape,r)),{mean:o,variance:t.toFloat().sub(o.reshape(i)).square().mean(r,n)}}}),iu=Fe({sum_:function(t,e,a){void 0===e&amp;&amp;(e=null),void 0===a&amp;&amp;(a=!1);var n=re(t,&quot;x&quot;,&quot;sum&quot;);&quot;bool&quot;===n.dtype&amp;&amp;(n=n.toInt());var s=k(e,n.shape);return ae(function(n){var t=Ce(s,n.rank),e=s,r=n;null!=t&amp;&amp;(r=n.transpose(t),e=Se(e.length,n.rank));var o=Zt.engine.runKernel(function(t){return t.sum(r,e)},{permutedX:r});if(a){var i=be(o.shape,s);o=o.reshape(i)}return{value:o,gradFunc:function(t){var e=n.shape.slice();return s.forEach(function(t){e[t]=1}),t.reshape(e).mul(Ye(n.shape,&quot;float32&quot;))}}})(n)}}),au=Fe({prod_:function(t,e,n){void 0===e&amp;&amp;(e=null),void 0===n&amp;&amp;(n=!1);var r=re(t,&quot;x&quot;,&quot;prod&quot;);&quot;bool&quot;===r.dtype&amp;&amp;(r=r.toInt());var o=k(e,r.shape),i=Ce(o,r.rank),a=o,s=r;null!=i&amp;&amp;(s=r.transpose(i),a=Se(a.length,r.rank));var u=Zt.engine.runKernel(function(t){return t.prod(s,a)},{permutedX:s});if(n){var c=be(u.shape,o);u=u.reshape(c)}return u}});var su=Fe({equal_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;equal&quot;),o=re(e,&quot;b&quot;,&quot;equal&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t){return t.equal(r,o)},{$a:r,$b:o})}}),uu=Fe({equalStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;equalStrict&quot;),r=re(e,&quot;b&quot;,&quot;equalStrict&quot;);return g(n.shape,r.shape,&quot;Error in equalStrict: &quot;),n.equal(r)}}),cu=Fe({greater_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;greater&quot;),o=re(e,&quot;b&quot;,&quot;greater&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t){return t.greater(r,o)},{$a:r,$b:o})}}),lu=Fe({greaterEqual_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;greaterEqual&quot;),o=re(e,&quot;b&quot;,&quot;greaterEqual&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t,e){var n=t.greaterEqual(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){return nn(n)},$b:function(){return nn(r)}}})}}),hu=Fe({greaterEqualStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;greaterEqualStrict&quot;),r=re(e,&quot;b&quot;,&quot;greaterEqualStrict&quot;);return g(n.shape,r.shape,&quot;Error in greaterEqualStrict: &quot;),n.greaterEqual(r)}}),pu=Fe({greaterStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;greaterStrict&quot;),r=re(e,&quot;b&quot;,&quot;greaterStrict&quot;);return g(n.shape,r.shape,&quot;Error in greaterStrict: &quot;),n.greater(r)}}),fu=Fe({less_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;less&quot;),o=re(e,&quot;b&quot;,&quot;less&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t){return t.less(r,o)},{$a:r,$b:o})}}),du=Fe({lessEqual_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;lessEqual&quot;),o=re(e,&quot;b&quot;,&quot;lessEqual&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t){return t.lessEqual(r,o)},{$a:r,$b:o})}}),vu=Fe({lessEqualStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;lessEqualStrict&quot;),r=re(e,&quot;b&quot;,&quot;lessEqualStrict&quot;);return g(n.shape,r.shape,&quot;Error in lessEqualStrict: &quot;),n.lessEqual(r)}}),mu=Fe({lessStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;lessStrict&quot;),r=re(e,&quot;b&quot;,&quot;lessStrict&quot;);return g(n.shape,r.shape,&quot;Error in lessStrict: &quot;),n.less(r)}}),gu=Fe({notEqual_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;notEqual&quot;),o=re(e,&quot;b&quot;,&quot;notEqual&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t){return t.notEqual(r,o)},{$a:r,$b:o})}}),yu=Fe({notEqualStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;notEqualStrict&quot;),r=re(e,&quot;b&quot;,&quot;notEqualStrict&quot;);return g(n.shape,r.shape,&quot;Error in notEqualStrict: &quot;),n.notEqual(r)}});var xu=Fe({add_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;add&quot;),o=re(e,&quot;b&quot;,&quot;add&quot;);n=Tt(r,o),r=n[0],o=n[1];var i=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t){return t.add(r,o)},{$a:r,$b:o},function(n){return{$a:function(){var t=n,e=yn(r.shape,i);return 0&lt;e.length&amp;&amp;(t=t.sum(e)),t.reshape(r.shape)},$b:function(){var t=n,e=yn(o.shape,i);return 0&lt;e.length&amp;&amp;(t=t.sum(e)),t.reshape(o.shape)}}})}}),wu=Fe({addN_:function(t){D(Array.isArray(t),function(){return&quot;The argument passed to tf.addN() must be a list of tensors&quot;}),D(1&lt;=t.length,function(){return&quot;Must pass at least one tensor to tf.addN(), but got &quot;+t.length});var e=t.map(function(t,e){return re(t,&quot;tensors&quot;+e,&quot;addN&quot;)}),n=e[0];e.forEach(function(t){if(t.dtype!==n.dtype)throw new Error(&quot;All tensors passed to tf.addN() must have the same dtype&quot;)}),e.forEach(function(t){if(!E(t.shape,n.shape))throw new Error(&quot;All tensors passed to tf.addN() must have the same shape&quot;)});var r=e;return Zt.engine.runKernel(function(t){return t.addN(e)},r,function(n){var r={};return e.forEach(function(t,e){r[e]=function(){return n.clone()}}),r})}}),bu=Fe({addStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;addStrict&quot;),r=re(e,&quot;b&quot;,&quot;addStrict&quot;);return g(n.shape,r.shape,&quot;Error in addStrict: &quot;),n.add(r)}}),Eu=Fe({atan2_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;atan2&quot;),o=re(e,&quot;b&quot;,&quot;atan2&quot;);n=Tt(r,o),r=n[0],o=n[1];var a=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t,e){var n=t.atan2(r,o);return e([r,o]),n},{$a:r,$b:o},function(r,t){var o=t[0],i=t[1];return{$a:function(){var t=xu(o.square(),i.square()),e=r.mul(i.div(t)),n=yn(o.shape,a);return 0&lt;n.length&amp;&amp;(e=e.sum(n)),e.reshape(o.shape)},$b:function(){var t=xu(o.square(),i.square()),e=Pa(r.mul(o.div(t))),n=yn(i.shape,a);return 0&lt;n.length&amp;&amp;(e=e.sum(n)),e.reshape(i.shape)}}})}}),Cu=Fe({div_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;div&quot;),o=re(e,&quot;b&quot;,&quot;div&quot;);if(n=Tt(r,o),r=n[0],o=n[1],&quot;int32&quot;===r.dtype&amp;&amp;&quot;int32&quot;===o.dtype)return Su(r,o);var a=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t,e){var n=t.realDivide(r,o);return e([r,o]),n},{$a:r,$b:o},function(r,t){var o=t[0],i=t[1];return{$a:function(){var t=r.div(i.toFloat()),e=yn(o.shape,a);return 0&lt;e.length?t.sum(e).reshape(o.shape):t},$b:function(){var t=r.mul(o.toFloat()),e=yn(i.shape,a);0&lt;e.length&amp;&amp;(t=t.sum(e).reshape(i.shape));var n=i.square();return t.div(n.toFloat()).neg()}}})}}),_u=Fe({divStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;div&quot;),r=re(e,&quot;b&quot;,&quot;div&quot;);return g(n.shape,r.shape,&quot;Error in divideStrict: &quot;),n.div(r)}}),Su=Fe({floorDiv_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;floorDiv&quot;),o=re(e,&quot;b&quot;,&quot;floorDiv&quot;);n=Tt(r,o),r=n[0],o=n[1];var a=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t,e){var n=t.floorDiv(r,o);return e([r,o]),n},{$a:r,$b:o},function(r,t){var o=t[0],i=t[1];return{$a:function(){var t=r.div(i.toFloat()),e=yn(o.shape,a);return 0&lt;e.length?t.sum(e).reshape(o.shape):t},$b:function(){var t=r.mul(o.toFloat()),e=yn(i.shape,a);0&lt;e.length&amp;&amp;(t=t.sum(e).reshape(i.shape));var n=i.square();return t.div(n.toFloat()).neg()}}})}}),Ru=Fe({maximum_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;maximum&quot;),o=re(e,&quot;b&quot;,&quot;maximum&quot;);return n=Tt(r,o),r=n[0],o=n[1],&quot;bool&quot;===r.dtype&amp;&amp;(r=r.toInt(),o=o.toInt()),xn(r.shape,o.shape),Zt.engine.runKernel(function(t,e){var n=t.maximum(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){return t.mul(n.greaterEqual(r).toFloat())},$b:function(){return t.mul(n.less(r).toFloat())}}})}}),Nu=Fe({maximumStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;maximumStrict&quot;),r=re(e,&quot;b&quot;,&quot;maximumStrict&quot;);return g(n.shape,r.shape,&quot;Error in maximumStrict: &quot;),n.maximum(r)}}),ku=Fe({minimum_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;minimum&quot;),o=re(e,&quot;b&quot;,&quot;minimum&quot;);return n=Tt(r,o),r=n[0],o=n[1],&quot;bool&quot;===r.dtype&amp;&amp;(r=r.toInt(),o=o.toInt()),xn(r.shape,o.shape),Zt.engine.runKernel(function(t,e){var n=t.minimum(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){return t.mul(n.lessEqual(r).toFloat())},$b:function(){return t.mul(n.greater(r).toFloat())}}})}}),Iu=Fe({minimumStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;minimumStrict&quot;),r=re(e,&quot;b&quot;,&quot;minimumStrict&quot;);return g(n.shape,r.shape,&quot;Error in minimumStrict: &quot;),n.minimum(r)}}),Tu=Fe({mod_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;mod&quot;),o=re(e,&quot;b&quot;,&quot;mod&quot;);n=Tt(r,o),r=n[0],o=n[1];var i=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t,e){var n=t.mod(r,o);return e([r,o]),n},{$a:r,$b:o},function(n,t){var r=t[0],o=t[1];return{$a:function(){var t=yn(r.shape,i);return 0&lt;t.length?n.sum(t).reshape(r.shape):n},$b:function(){var t=n.mul(r.div(o).floor().neg()),e=yn(o.shape,i);return 0&lt;e.length?t.sum(e).reshape(o.shape):t}}})}}),Au=Fe({modStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;modStrict&quot;),r=re(e,&quot;b&quot;,&quot;modStrict&quot;);return g(n.shape,r.shape,&quot;Error in modStrict: &quot;),n.mod(r)}}),Du=Fe({mul_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;mul&quot;),o=re(e,&quot;b&quot;,&quot;mul&quot;);n=Tt(r,o),r=n[0],o=n[1];var i=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t,e){var n=t.multiply(r,o);return e([r,o]),n},{$a:r,$b:o},function(n,t){var r=t[0],o=t[1];return{$a:function(){var t=n.mul(o.toFloat()),e=yn(r.shape,i);return 0&lt;e.length?t.sum(e).reshape(r.shape):t},$b:function(){var t=n.mul(r.toFloat()),e=yn(o.shape,i);return 0&lt;e.length?t.sum(e).reshape(o.shape):t}}})}}),Mu=Fe({mulStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;mul&quot;),r=re(e,&quot;b&quot;,&quot;mul&quot;);return g(n.shape,r.shape,&quot;Error in multiplyStrict: &quot;),n.mul(r)}}),Ou=Fe({pow_:function(t,e){var r=re(t,&quot;base&quot;,&quot;pow&quot;),o=re(e,&quot;exp&quot;,&quot;pow&quot;),u=xn(r.shape,o.shape);return t=r.cast(kt(r.dtype,o.dtype)),e=o.cast(kt(r.dtype,o.dtype)),Zt.engine.runKernel(function(t,e){var n=t.pow(r,o);return e([r,o,n]),n},{$base:r,$exp:o},function(o,t){var i=t[0],a=t[1],s=t[2];return{$base:function(){var t=a.toFloat(),e=o.mul(t.mul(i.pow(t.sub(Ve(1))))),n=yn(i.shape,u);return 0&lt;n.length&amp;&amp;(e=e.sum(n)),e.reshape(i.shape)},$exp:function(){var t=i.greater(0),e=i.log().where(t,nn(i)),n=o.mul(s.mul(e)),r=yn(a.shape,u);return 0&lt;r.length&amp;&amp;(n=n.sum(r)),n.reshape(a.shape)}}})}}),Pu=Fe({powStrict_:function(t,e){return g(t.shape,e.shape,&quot;Error in powStrict: &quot;),t.pow(e)}}),Fu=Fe({squaredDifference_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;squaredDifference&quot;),o=re(e,&quot;b&quot;,&quot;squaredDifference&quot;);return n=Tt(r,o),r=n[0],o=n[1],xn(r.shape,o.shape),Zt.engine.runKernel(function(t,e){var n=t.squaredDifference(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1],o=Ve(2);return{$a:function(){return t.mul(n.sub(r).mul(o))},$b:function(){return t.mul(r.sub(n).mul(o))}}})}}),Lu=Fe({squaredDifferenceStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;squaredDifferenceStrict&quot;),r=re(e,&quot;b&quot;,&quot;squaredDifferenceStrict&quot;);return g(n.shape,r.shape,&quot;Error in squaredDifferenceStrict: &quot;),n.squaredDifference(r)}}),Bu=Fe({sub_:function(t,e){var n,r=re(t,&quot;a&quot;,&quot;sub&quot;),o=re(e,&quot;b&quot;,&quot;sub&quot;);n=Tt(r,o),r=n[0],o=n[1];var i=xn(r.shape,o.shape);return Zt.engine.runKernel(function(t){return t.subtract(r,o)},{$a:r,$b:o},function(n){return{$a:function(){var t=n,e=yn(r.shape,i);return 0&lt;e.length&amp;&amp;(t=t.sum(e)),t.reshape(r.shape)},$b:function(){var t=n,e=yn(o.shape,i);return 0&lt;e.length&amp;&amp;(t=t.sum(e)),t.neg().reshape(o.shape)}}})}}),Wu=Fe({subStrict_:function(t,e){var n=re(t,&quot;a&quot;,&quot;subStrict&quot;),r=re(e,&quot;b&quot;,&quot;subStrict&quot;);return g(n.shape,r.shape,&quot;Error in subStrict: &quot;),n.sub(r)}});var zu=Fe({logicalAnd_:function(t,e){var n=re(t,&quot;a&quot;,&quot;logicalAnd&quot;,&quot;bool&quot;),r=re(e,&quot;b&quot;,&quot;logicalAnd&quot;,&quot;bool&quot;);return xn(n.shape,r.shape),Zt.engine.runKernel(function(t){return t.logicalAnd(n,r)},{$a:n,$b:r})}}),Uu=Fe({logicalNot_:function(t){var e=re(t,&quot;x&quot;,&quot;logicalNot&quot;,&quot;bool&quot;);return Zt.engine.runKernel(function(t){return t.logicalNot(e)},{$x:e})}}),Gu=Fe({logicalOr_:function(t,e){var n=re(t,&quot;a&quot;,&quot;logicalOr&quot;,&quot;bool&quot;),r=re(e,&quot;b&quot;,&quot;logicalOr&quot;,&quot;bool&quot;);return xn(n.shape,r.shape),Zt.engine.runKernel(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})}}),Vu=Fe({logicalXor_:function(t,e){var n=re(t,&quot;a&quot;,&quot;logicalXor&quot;,&quot;bool&quot;),r=re(e,&quot;b&quot;,&quot;logicalXor&quot;,&quot;bool&quot;);return xn(n.shape,r.shape),Gu(t,e).logicalAnd(zu(t,e).logicalNot())}}),Hu=Fe({where_:function(t,e,n){var r=re(e,&quot;a&quot;,&quot;where&quot;),o=re(n,&quot;b&quot;,&quot;where&quot;),i=re(t,&quot;condition&quot;,&quot;where&quot;,&quot;bool&quot;);return g(r.shape,o.shape,&quot;Error in where: &quot;),1===i.rank?D(i.shape[0]===r.shape[0],function(){return&quot;The first dimension of `a` must match the size of `condition`.&quot;}):g(i.shape,o.shape,&quot;Error in where: &quot;),Zt.engine.runKernel(function(t,e){var n=t.select(i,r,o);return e([i]),n},{$condition:i,$a:r,$b:o},function(t,e){var n=e[0];return{$condition:function(){return nn(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}})}}),qu=function(o){return m(this,void 0,void 0,function(){var e,n,r;return R(this,function(t){switch(t.label){case 0:return[4,(e=re(o,&quot;condition&quot;,&quot;whereAsync&quot;,&quot;bool&quot;)).data()];case 1:return n=t.sent(),r=fa(e.shape,n),o!==e&amp;&amp;e.dispose(),[2,r]}})})};var ju=Fe({elu_:function(t){var r=re(t,&quot;x&quot;,&quot;elu&quot;);return Zt.engine.runKernel(function(t,e){var n=t.elu(r);return e([n]),n},{$x:r},function(e,t){var n=t[0];return{$x:function(){return Zt.engine.runKernel(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),$u=Fe({leakyRelu_:function(t,e){void 0===e&amp;&amp;(e=.2);var n=re(t,&quot;x&quot;,&quot;leakyRelu&quot;);return Ru(Ve(e).mul(n),n)}}),Ku=Fe({prelu_:function(t,e){var r=re(t,&quot;x&quot;,&quot;prelu&quot;),o=re(e,&quot;alpha&quot;,&quot;prelu&quot;);return Zt.engine.runKernel(function(t,e){var n=t.prelu(r,o);return e([r,o]),n},{$x:r,$alpha:o},function(n,t){var r=t[0],o=t[1],i=r.greater(0);return{$x:function(){return Hu(i,n,n.mul(o))},$alpha:function(){var t=Hu(i,nn(n),n.mul(r)),e=yn(o.shape,n.shape);return 0&lt;e.length&amp;&amp;(t=t.sum(e)),t.reshape(o.shape)}}})}}),Xu=Fe({relu_:function(t){var r=re(t,&quot;x&quot;,&quot;relu&quot;);return&quot;bool&quot;===r.dtype?r.toInt():Zt.engine.runKernel(function(t,e){var n=t.relu(r);return e([r]),n},{$x:r},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n.step().toFloat())}}})}}),Yu=Fe({selu_:function(t){var r=re(t,&quot;x&quot;,&quot;selu&quot;);return Zt.engine.runKernel(function(t,e){var n=t.selu(r);return e([r]),n},{$x:r},function(i,t){var a=t[0];return{$x:function(){var t=a.greater(Ve(0)),e=Ve(di),n=Ve(vi),r=i.mul(n),o=i.mul(e).mul(a.toFloat().exp());return Hu(t,r,o)}}})}});var Qu=Fe({transpose_:function(t,n){var e=re(t,&quot;x&quot;,&quot;transpose&quot;);return null==n&amp;&amp;(n=e.shape.map(function(t,e){return e}).reverse()),D(e.rank===n.length,function(){return&quot;Error in transpose: rank of input &quot;+e.rank+&quot; must match length of perm &quot;+n+&quot;.&quot;}),n.forEach(function(t){D(0&lt;=t&amp;&amp;t&lt;e.rank,function(){return&quot;All entries in &#39;perm&#39; must be between 0 and &quot;+(e.rank-1)+&quot; but got &quot;+n})}),e.rank&lt;=1?e.clone():Zt.engine.runKernel(function(t){return t.transpose(e,n)},{$x:e},function(t){var e=_e(n);return{$x:function(){return t.transpose(e)}}})}});var Ju=Fe({localResponseNormalization_:function(t,o,i,a,s){void 0===o&amp;&amp;(o=5),void 0===i&amp;&amp;(i=1),void 0===a&amp;&amp;(a=1),void 0===s&amp;&amp;(s=.5);var e=re(t,&quot;x&quot;,&quot;localResponseNormalization&quot;);D(4===e.rank||3===e.rank,function(){return&quot;Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank &quot;+e.rank+&quot;.&quot;}),D(T(o),function(){return&quot;Error in localResponseNormalization: depthRadius must be an integer but got depthRadius &quot;+o+&quot;.&quot;});var r=e,n=!1;3===e.rank&amp;&amp;(n=!0,r=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=Zt.engine.runKernel(function(t,e){var n=t.localResponseNormalization4D(r,o,i,a,s);return e([r,n]),n},{x4D:r},function(e,t){var n=t[0],r=t[1];return{x4D:function(){return Zt.engine.runKernel(function(t){return t.LRNGrad(e,n,r,o,i,a,s)},{})}}});return n?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}});var Zu=Fe({norm_:function(t,e,n,r){void 0===e&amp;&amp;(e=&quot;euclidean&quot;),void 0===n&amp;&amp;(n=null),void 0===r&amp;&amp;(r=!1);var o=function t(e,n,r){if(void 0===r&amp;&amp;(r=null),0===e.rank)return e.abs();if(1!==e.rank&amp;&amp;null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||&quot;number&quot;==typeof r||Array.isArray(r)&amp;&amp;1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if(&quot;euclidean&quot;===n||2===n)return e.abs().pow(Ve(2,&quot;int32&quot;)).sum(r).sqrt();throw new Error(&quot;Error in norm: invalid ord value: &quot;+n)}if(Array.isArray(r)&amp;&amp;2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if(&quot;fro&quot;===n||&quot;euclidean&quot;===n)return e.square().sum(r).sqrt();throw new Error(&quot;Error in norm: invalid ord value: &quot;+n)}throw new Error(&quot;Error in norm: invalid axis: &quot;+r)}(t=re(t,&quot;x&quot;,&quot;norm&quot;),e,n),i=o.shape;if(r){var a=k(n,t.shape);i=be(o.shape,a)}return o.reshape(i)}});function tc(t,e){for(var n=[],r=t;r&lt;e;++r)n.push(r);return n}function ec(t){for(var e=[],n=0;n&lt;t.length;++n)for(var r=0;r&lt;t[n].length;++r)e.push(t[n][r]);return e}var nc=Fe({gather_:function(t,e,g){void 0===g&amp;&amp;(g=0);var y=re(t,&quot;x&quot;,&quot;gather&quot;),r=re(e,&quot;indices&quot;,&quot;gather&quot;,&quot;int32&quot;);g=k(g,y.shape)[0];var n=function(t,e,n){for(var r=t.shape[n],o=[],i=1,a=1,s=0;s&lt;n;s++)o.push(t.shape[s]),i*=t.shape[s];for(s=0;s&lt;e.rank;s++)o.push(e.shape[s]);for(s=n+1;s&lt;t.rank;s++)o.push(t.shape[s]),a*=t.shape[s];return{batchSize:i,sliceSize:a,dimSize:r,outputShape:o}}(y,r,g);return Zt.engine.runKernel(function(t,e){var n=t.gather(y,r.flatten(),g);return e([r]),n},{$x:y},function(v,t){var m=t[0];return{$x:function(){var t=y.shape,e=m.size,n=t.slice(0,g),r=n.length,o=t.slice(g,t.length).slice(1),i=o.length,a=tc(0,r),s=tc(r+1,r+1+i),u=ec([n,[e],o]),c=v.reshape(u),l=m.reshape([e]),h=ec([[r],a,s]),p=c.transpose(h),f=rc(p,l,y.shape[g]),d=_e(h);return f.transpose(d)}}}).reshape(n.outputShape)}}),rc=Fe({unsortedSegmentSum_:function(t,e,r){var o=re(t,&quot;x&quot;,&quot;unsortedSegmentSum&quot;),i=re(e,&quot;segmentIds&quot;,&quot;unsortedSegmentSum&quot;,&quot;int32&quot;);return D(T(r),function(){return&quot;numSegments must be of dtype int&quot;}),Zt.engine.runKernel(function(t,e){var n=t.unsortedSegmentSum(o,i,r);return e([i]),n},{$x:o},function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=Ru(e,nn(e)),r=nc(t,n),o=lu(e,Ve(0,&quot;int32&quot;)),i=r.rank-o.rank,a=0;a&lt;i;++a)o=$i(o,a+1);o=zu(o,Ye(r.shape,&quot;bool&quot;));var s=nn(r);return Hu(o,r,s)}(t,n)}}})}});var oc=Fe({basicLSTMCell_:function(t,e,n,r,o,i){var a=re(t,&quot;forgetBias&quot;,&quot;basicLSTMCell&quot;),s=re(e,&quot;lstmKernel&quot;,&quot;basicLSTMCell&quot;),u=re(n,&quot;lstmBias&quot;,&quot;basicLSTMCell&quot;),c=re(r,&quot;data&quot;,&quot;basicLSTMCell&quot;),l=re(o,&quot;c&quot;,&quot;basicLSTMCell&quot;),h=re(i,&quot;h&quot;,&quot;basicLSTMCell&quot;),p=c.concat(h,1).matMul(s).add(u),f=p.shape[0],d=p.shape[1]/4,v=[f,d],m=p.slice([0,0],v),g=p.slice([0,d],v),y=p.slice([0,2*d],v),x=p.slice([0,3*d],v),w=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(y).sigmoid()));return[w,w.tanh().mulStrict(x.sigmoid())]}}),ic=Fe({multiRNNCell_:function(t,e,n,r){for(var o=re(e,&quot;data&quot;,&quot;multiRNNCell&quot;),i=oe(n,&quot;c&quot;,&quot;multiRNNCell&quot;),a=oe(r,&quot;h&quot;,&quot;multiRNNCell&quot;),s=o,u=[],c=0;c&lt;t.length;c++){var l=t[c](s,i[c],a[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var h=[],p=[];for(c=0;c&lt;u.length;c+=2)h.push(u[c]),p.push(u[c+1]);return[h,p]}});var ac=Fe({movingAverage_:function(t,e,n,r,o){void 0===o&amp;&amp;(o=!0);var i=re(t,&quot;v&quot;,&quot;movingAverage&quot;),a=re(e,&quot;x&quot;,&quot;movingAverage&quot;),s=re(n,&quot;decay&quot;,&quot;movingAverage&quot;);At(i,a),D(E(i.shape,a.shape),function(){return&quot;Shape mismatch in v and x&quot;});var u=Ve(1),c=u.sub(s),l=a.sub(i).mul(c);if(o){D(null!=r,function(){return&quot;When using zeroDebias: true, step is required.&quot;});var h=re(r,&quot;step&quot;,&quot;movingAverage&quot;);l=l.div(u.sub(Ou(s,h)))}return i.add(l)}});var sc=Fe({stridedSlice_:function(t,e,n,r,o,i,a,s,u){if(void 0===o&amp;&amp;(o=0),void 0===i&amp;&amp;(i=0),void 0===a&amp;&amp;(a=0),void 0===s&amp;&amp;(s=0),void 0===u&amp;&amp;(u=0),0!==a)throw new Error(&quot;ellipsis mask is not yet supported&quot;);if(0!==s)throw new Error(&quot;new axis mask is not yet supported&quot;);var c=re(t,&quot;x&quot;,&quot;stridedSlice&quot;);if(r.every(function(t){return 1===t})){var l=Ae(c.shape,e,n,r,o,i,a,s,u),h=l[0],p=l[1],f=l[2],d=p.filter(function(t,e){return-1===f.indexOf(e)});return Hs(c,h,p).reshape(d)}return Zt.engine.runKernel(function(t){return t.stridedSlice(c,e,n,r,o,i,a,s,u)},{$x:c})}});var uc=Fe({topk_:function(t,e,n){void 0===e&amp;&amp;(e=1),void 0===n&amp;&amp;(n=!0);var r=re(t,&quot;x&quot;,&quot;topk&quot;);if(0===r.rank)throw new Error(&quot;topk() expects the input to be of rank 1 or higher&quot;);var o=r.shape[r.shape.length-1];if(o&lt;e)throw new Error(&quot;&#39;k&#39; passed to topk() must be &lt;= the last dimension (&quot;+o+&quot;) but got &quot;+e);var i=Zt.engine.runKernel(function(t){return t.topk(r,e,n)},{$x:r});return{values:i[0],indices:i[1]}}});var cc=Fe({scatterND_:function(t,e,n){var r=re(t,&quot;indices&quot;,&quot;scatterND&quot;,&quot;int32&quot;),o=re(e,&quot;updates&quot;,&quot;scatterND&quot;);return Ie(o,r,n),Zt.engine.runKernel(function(t){return t.scatterND(r,o,n)},{$indices:r,$updates:o})}});var lc=Fe({fft_:function(t){D(&quot;complex64&quot;===t.dtype,function(){return&quot;The dtype for tf.spectral.fft() must be complex64 but got &quot;+t.dtype+&quot;.&quot;});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Zt.engine.runKernel(function(t){return t.fft(r)},{input:t}).reshape(t.shape)}}),hc=Fe({ifft_:function(t){D(&quot;complex64&quot;===t.dtype,function(){return&quot;The dtype for tf.spectral.ifft() must be complex64 but got &quot;+t.dtype+&quot;.&quot;});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Zt.engine.runKernel(function(t){return t.ifft(r)},{input:t}).reshape(t.shape)}}),pc=Fe({rfft_:function(t){D(&quot;float32&quot;===t.dtype,function(){return&quot;The dtype for rfft() must be real value but got &quot;+t.dtype});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.zerosLike(),o=We(t,r).as2D(n,e),i=lc(o),a=Math.floor(e/2)+1,s=ze(i),u=Ue(i),c=s.split([a,e-a],s.shape.length-1),l=u.split([a,e-a],u.shape.length-1),h=t.shape.slice();return h[t.shape.length-1]=a,We(c[0],l[0]).reshape(h)}}),fc=Fe({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e&lt;=2){var r=t.as2D(n,e),o=hc(r);return ze(o)}var i=[n,2*(e-1)],a=ze(t).as2D(n,e),s=Ue(t).as2D(n,e),u=a.slice([0,1],[n,e-2]).reverse(1),c=s.slice([0,1],[n,e-2]).reverse(1).mul(Ve(-1)),l=a.concat(u,1),h=s.concat(c,1);return r=We(l,h).as2D(i[0],i[1]),o=hc(r),ze(o)}}),dc=Object.freeze({fft:lc,ifft:hc,rfft:pc,irfft:fc});var vc=Fe({sparseToDense_:function(t,e,n,r){void 0===r&amp;&amp;(r=0);var o=re(t,&quot;sparseIndices&quot;,&quot;sparseToDense&quot;,&quot;int32&quot;),i=re(e,&quot;sparseValues&quot;,&quot;sparseToDense&quot;),a=re(r,&quot;defaultValue&quot;,&quot;sparseToDense&quot;,i.dtype);return function(t,e,n,r){if(&quot;int32&quot;!==t.dtype)throw new Error(&quot;tf.sparseToDense() expects the indices to be int32 type, but the dtype was &quot;+t.dtype+&quot;.&quot;);if(2&lt;t.rank)throw new Error(&quot;sparseIndices should be a scalar, vector, or matrix, but got shape &quot;+t.shape+&quot;.&quot;);var o=0&lt;t.rank?t.shape[0]:1,i=1&lt;t.rank?t.shape[1]:1;if(n.length!==i)throw new Error(&quot;outputShape has incorrect number of elements:, &quot;+n.length+&quot;, should be: &quot;+i+&quot;.&quot;);var a=e.size;if(0!==e.rank&amp;&amp;(1!==e.rank||a!==o))throw new Error(&quot;sparseValues has incorrect shape &quot;+e.shape+&quot;, should be [] or [&quot;+o+&quot;]&quot;);if(e.dtype!==r.dtype)throw new Error(&quot;sparseValues.dtype must match defaultValues.dtype&quot;)}(o,i,n,a),Zt.engine.runKernel(function(t){return t.sparseToDense(o,i,n,a)},{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}});var mc,gc,yc=Fe({gatherND_:function(t,e){var n=re(e,&quot;indices&quot;,&quot;gatherND&quot;,&quot;int32&quot;),r=re(t,&quot;x&quot;,&quot;gatherND&quot;);return Zt.engine.runKernel(function(t){return t.gatherND(r,n)},{$x:r,$indices:n})}});(gc=mc||(mc={}))[gc.NONE=0]=&quot;NONE&quot;,gc[gc.MEAN=1]=&quot;MEAN&quot;,gc[gc.SUM=2]=&quot;SUM&quot;,gc[gc.SUM_BY_NONZERO_WEIGHTS=3]=&quot;SUM_BY_NONZERO_WEIGHTS&quot;;var xc=Fe({absoluteDifference_:function(t,e,n,r){void 0===r&amp;&amp;(r=mc.SUM_BY_NONZERO_WEIGHTS);var o=re(t,&quot;labels&quot;,&quot;absoluteDifference&quot;),i=re(e,&quot;predictions&quot;,&quot;absoluteDifference&quot;),a=null;null!=n&amp;&amp;(a=re(n,&quot;weights&quot;,&quot;absoluteDifference&quot;)),g(o.shape,i.shape,&quot;Error in absoluteDifference: &quot;);var s=o.sub(i).abs();return wc(s,a,r)}}),wc=Fe({computeWeightedLoss_:function(t,e,n){void 0===n&amp;&amp;(n=mc.SUM_BY_NONZERO_WEIGHTS);var r=re(t,&quot;losses&quot;,&quot;computeWeightedLoss&quot;),o=null;null!=e&amp;&amp;(o=re(e,&quot;weights&quot;,&quot;computeWeightedLoss&quot;));var i=null==o?r:r.mul(o);if(n===mc.NONE)return i;if(n===mc.SUM)return i.sum();if(n===mc.MEAN){if(null==o)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return 1&lt;a?s.div(Ve(a)):s}if(n!==mc.SUM_BY_NONZERO_WEIGHTS)throw Error(&quot;Unknown reduction: &quot;+n);if(null==o)return i.sum().div(Ve(r.size));var u=o.mul(Ye(r.shape)).notEqual(Ve(0)).sum().toFloat();return i.sum().div(u)}}),bc=Fe({cosineDistance_:function(t,e,n,r,o){void 0===o&amp;&amp;(o=mc.SUM_BY_NONZERO_WEIGHTS);var i=re(t,&quot;labels&quot;,&quot;cosineDistance&quot;),a=re(e,&quot;predictions&quot;,&quot;cosineDistance&quot;),s=null;null!=r&amp;&amp;(s=re(r,&quot;weights&quot;,&quot;cosineDistance&quot;)),g(i.shape,a.shape,&quot;Error in cosineDistance: &quot;);var u=Ve(1).sub(i.mul(a).sum(n,!0));return wc(u,s,o)}}),Ec=Fe({hingeLoss_:function(t,e,n,r){void 0===r&amp;&amp;(r=mc.SUM_BY_NONZERO_WEIGHTS);var o=re(t,&quot;labels&quot;,&quot;hingeLoss&quot;),i=re(e,&quot;predictions&quot;,&quot;hingeLoss&quot;),a=null;null!=n&amp;&amp;(a=re(n,&quot;weights&quot;,&quot;hingeLoss&quot;)),g(o.shape,i.shape,&quot;Error in hingeLoss: &quot;);var s=Ve(1);o=Ve(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return wc(u,a,r)}}),Cc=Fe({huberLoss_:function(t,e,n,r,o){void 0===r&amp;&amp;(r=1),void 0===o&amp;&amp;(o=mc.SUM_BY_NONZERO_WEIGHTS);var i=re(t,&quot;labels&quot;,&quot;huberLoss&quot;),a=re(e,&quot;predictions&quot;,&quot;huberLoss&quot;),s=null;null!=n&amp;&amp;(s=re(n,&quot;weights&quot;,&quot;huberLoss&quot;)),g(i.shape,a.shape,&quot;Error in huberLoss: &quot;);var u=Ve(r),c=a.sub(i).abs(),l=ku(c,u),h=c.sub(l),p=Ve(.5).mul(l.square()).add(u.mul(h));return wc(p,s,o)}}),_c=Fe({logLoss_:function(t,e,n,r,o){void 0===r&amp;&amp;(r=1e-7),void 0===o&amp;&amp;(o=mc.SUM_BY_NONZERO_WEIGHTS);var i=re(t,&quot;labels&quot;,&quot;logLoss&quot;),a=re(e,&quot;predictions&quot;,&quot;logLoss&quot;),s=null;null!=n&amp;&amp;(s=re(n,&quot;weights&quot;,&quot;logLoss&quot;)),g(i.shape,a.shape,&quot;Error in logLoss: &quot;);var u=Ve(1),c=Ve(r),l=i.mul(a.add(c).log()).neg().sub(u.sub(i).mul(u.sub(a).add(c).log()));return wc(l,s,o)}}),Sc=Fe({meanSquaredError_:function(t,e,n,r){void 0===r&amp;&amp;(r=mc.SUM_BY_NONZERO_WEIGHTS);var o=re(t,&quot;labels&quot;,&quot;meanSquaredError&quot;),i=re(e,&quot;predictions&quot;,&quot;meanSquaredError&quot;),a=null;null!=n&amp;&amp;(a=re(n,&quot;weights&quot;,&quot;meanSquaredError&quot;)),g(o.shape,i.shape,&quot;Error in meanSquaredError: &quot;);var s=o.squaredDifference(i);return wc(s,a,r)}}),Rc=Fe({sigmoidCrossEntropy_:function(t,e,n,r,o){void 0===r&amp;&amp;(r=0),void 0===o&amp;&amp;(o=mc.SUM_BY_NONZERO_WEIGHTS);var i=re(t,&quot;multiClassLabels&quot;,&quot;sigmoidCrossEntropy&quot;),a=re(e,&quot;logits&quot;,&quot;sigmoidCrossEntropy&quot;),s=null;if(null!=n&amp;&amp;(s=re(n,&quot;weights&quot;,&quot;sigmoidCrossEntropy&quot;)),g(i.shape,a.shape,&quot;Error in sigmoidCrossEntropy: &quot;),0&lt;r){var u=Ve(r),c=Ve(1),l=Ve(.5);i=i.mul(c.sub(u)).add(l.mul(u))}var h=function(t,e){var n=re(t,&quot;labels&quot;,&quot;sigmoidCrossEntropyWithLogits&quot;),r=re(e,&quot;logits&quot;,&quot;sigmoidCrossEntropyWithLogits&quot;);g(n.shape,r.shape,&quot;Error in sigmoidCrossEntropyWithLogits: &quot;);var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)}(i,a);return wc(h,s,o)}}),Nc=Fe({softmaxCrossEntropy_:function(t,e,n,r,o){void 0===r&amp;&amp;(r=0),void 0===o&amp;&amp;(o=mc.SUM_BY_NONZERO_WEIGHTS);var i=re(t,&quot;onehotLabels&quot;,&quot;softmaxCrossEntropy&quot;),a=re(e,&quot;logits&quot;,&quot;softmaxCrossEntropy&quot;),s=null;if(null!=n&amp;&amp;(s=re(n,&quot;weights&quot;,&quot;softmaxCrossEntropy&quot;)),g(i.shape,a.shape,&quot;Error in softmaxCrossEntropy: &quot;),0&lt;r){var u=Ve(r),c=Ve(1),l=Ve(i.shape[1]);i=i.mul(c.sub(u)).add(u.div(l))}var h=function(t,e,i){if(void 0===i&amp;&amp;(i=-1),-1===i&amp;&amp;(i=e.rank-1),i!==e.rank-1)throw Error(&quot;Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank &quot;+e.rank+&quot; and dim was &quot;+i);return ae(function(t,e,n){var r=e.logSumExp([i],!0),o=e.toFloat().sub(r);return n([t,o]),{value:o.mul(t).neg().sum([i]),gradFunc:function(t,e){var n=e[0],r=e[1],o=be(t.shape,[i]);return[t.reshape(o).mul(n.toFloat().sub(r.exp())),t.reshape(o).mul(r.exp().sub(n.toFloat()))]}}})(t,e)}(i,a);return wc(h,s,o)}}),kc=Object.freeze({get Reduction(){return mc},absoluteDifference:xc,computeWeightedLoss:wc,cosineDistance:bc,hingeLoss:Ec,huberLoss:Cc,logLoss:_c,meanSquaredError:Sc,sigmoidCrossEntropy:Rc,softmaxCrossEntropy:Nc});function Ic(r,o){return void 0===o&amp;&amp;(o=!1),Zt.engine.tidy(function(){if(2!==r.shape.length)throw new Error(&quot;qr2d() requires a 2D Tensor, but got a &quot;+r.shape.length+&quot;D Tensor.&quot;);for(var h=r.shape[0],p=r.shape[1],f=Ki(h),d=r.clone(),v=qe([[1]],[1,1]),m=v.clone(),t=p&lt;=h?p:h,e=function(l){var t,e=d,n=m,r=f;m=(t=Zt.engine.tidy(function(){var t=d.slice([l,l],[h-l,1]),e=t.norm(),n=d.slice([l,l],[1,1]),r=n.sign().neg(),o=n.sub(r.mul(e)),i=t.div(o);m=1===i.shape[0]?v.clone():v.concat(i.slice([1,0],[i.shape[0]-1,i.shape[1]]),0);var a=r.matMul(o).div(e).neg(),s=d.slice([l,0],[h-l,p]),u=a.mul(m);d=0===l?s.sub(u.matMul(m.transpose().matMul(s))):d.slice([0,0],[l,p]).concat(s.sub(u.matMul(m.transpose().matMul(s))),0);var c=f.slice([0,l],[h,f.shape[1]-l]);return f=0===l?c.sub(c.matMul(m).matMul(u.transpose())):f.slice([0,0],[h,l]).concat(c.sub(c.matMul(m).matMul(u.transpose())),1),[m,d,f]}))[0],d=t[1],f=t[2],le([e,n,r])},n=0;n&lt;t;++n)e(n);return!o&amp;&amp;p&lt;h&amp;&amp;(f=f.slice([0,0],[h,p]),d=d.slice([0,0],[p,p])),[f,d]})}var Tc=Fe({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,D(null!=e&amp;&amp;0&lt;e.length,function(){return&quot;Gram-Schmidt process: input must not be null, undefined, or empty&quot;});for(var n=e[0].shape[0],r=function(t){D(e[t].shape[0]===n,function(){return&quot;Gram-Schmidt: Non-unique lengths found in the input vectors: (&quot;+e[t].shape[0]+&quot; vs. &quot;+n+&quot;)&quot;})},o=1;o&lt;e.length;++o)r(o)}else t=!0,e=Ii(e,e.shape[0],0).map(function(t){return sa(t,[0])});D(e.length&lt;=e[0].shape[0],function(){return&quot;Gram-Schmidt: Number of vectors (&quot;+e.length+&quot;) exceeds number of dimensions (&quot;+e[0].shape[0]+&quot;).&quot;});var i=[],a=e,s=function(r){i.push(Zt.engine.tidy(function(){var t=a[r];if(0&lt;r)for(var e=0;e&lt;r;++e){var n=iu(i[e].mulStrict(t)).mul(i[e]);t=t.sub(n)}return t.div(Zu(t,&quot;euclidean&quot;))}))};for(o=0;o&lt;e.length;++o)s(o);return t?ua(i,0):i}}),Ac=Fe({qr_:function(t,o){if(void 0===o&amp;&amp;(o=!1),t.rank&lt;2)throw new Error(&quot;qr() requires input tensor to have a rank &gt;= 2, but got rank &quot;+t.rank);if(2===t.rank)return Ic(t,o);var e=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),i=[],a=[];return ha(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(t){var e=Ic(t,o),n=e[0],r=e[1];i.push(n),a.push(r)}),[ua(i,0).reshape(t.shape),ua(a,0).reshape(t.shape)]}}),Dc=Object.freeze({gramSchmidt:Tc,qr:Ac});function Mc(t,e,n,r,o){null==r&amp;&amp;(r=.5),null==o&amp;&amp;(o=Number.NEGATIVE_INFINITY);var i=t.shape[0];return n=Math.min(n,i),D(0&lt;=r&amp;&amp;r&lt;=1,function(){return&quot;iouThreshold must be in [0, 1], but was &#39;&quot;+r+&quot;&#39;&quot;}),D(2===t.rank,function(){return&quot;boxes must be a 2D tensor, but was of rank &#39;&quot;+t.rank+&quot;&#39;&quot;}),D(4===t.shape[1],function(){return&quot;boxes must have 4 columns, but 2nd dimension was &quot;+t.shape[1]}),D(1===e.rank,function(){return&quot;scores must be a 1D tensor&quot;}),D(e.shape[0]===i,function(){return&quot;scores has incompatible shape with boxes. Expected &quot;+i+&quot;, but was &quot;+e.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o}}var Oc=Fe({resizeBilinear_:function(t,e,r){void 0===r&amp;&amp;(r=!1);var n=re(t,&quot;images&quot;,&quot;resizeBilinear&quot;);D(3===n.rank||4===n.rank,function(){return&quot;Error in resizeBilinear: x must be rank 3 or 4, but got rank &quot;+n.rank+&quot;.&quot;}),D(2===e.length,function(){return&quot;Error in resizeBilinear: new shape must 2D, but got shape &quot;+e+&quot;.&quot;});var o=n,i=!1;3===n.rank&amp;&amp;(i=!0,o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=e[0],s=e[1],u=Zt.engine.runKernel(function(t,e){return e([o]),t.resizeBilinear(o,a,s,r)},{batchImages:o},function(e,n){return{batchImages:function(){return Zt.engine.runKernel(function(t){return t.resizeBilinearBackprop(e,n[0],r)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Pc=Fe({resizeNearestNeighbor_:function(t,e,r){void 0===r&amp;&amp;(r=!1);var n=re(t,&quot;images&quot;,&quot;resizeNearestNeighbor&quot;);D(3===n.rank||4===n.rank,function(){return&quot;Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank &quot;+n.rank+&quot;.&quot;}),D(2===e.length,function(){return&quot;Error in resizeNearestNeighbor: new shape must 2D, but got shape &quot;+e+&quot;.&quot;}),D(&quot;float32&quot;===n.dtype||&quot;int32&quot;===n.dtype,function(){return&quot;`images` must have `int32` or `float32` as dtype&quot;});var o=n,i=!1;3===n.rank&amp;&amp;(i=!0,o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=e[0],s=e[1],u=Zt.engine.runKernel(function(t,e){return e([o]),t.resizeNearestNeighbor(o,a,s,r)},{batchImages:o},function(e,n){return{batchImages:function(){return Zt.engine.runKernel(function(t){return t.resizeNearestNeighborBackprop(e,n[0],r)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Fc=Fe({nonMaxSuppression_:function(t,e,n,r,o){void 0===r&amp;&amp;(r=.5),void 0===o&amp;&amp;(o=Number.NEGATIVE_INFINITY);var i=re(t,&quot;boxes&quot;,&quot;nonMaxSuppression&quot;),a=re(e,&quot;scores&quot;,&quot;nonMaxSuppression&quot;),s=Mc(i,a,n,r,o);return n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,Zt.engine.runKernel(function(t){return t.nonMaxSuppression(i,a,n,r,o)},{$boxes:i})}}),Lc=function(s,u,c,l,h){return void 0===l&amp;&amp;(l=.5),void 0===h&amp;&amp;(h=Number.NEGATIVE_INFINITY),m(this,void 0,void 0,function(){var e,n,r,o,i,a;return R(this,function(t){switch(t.label){case 0:return e=re(s,&quot;boxes&quot;,&quot;nonMaxSuppressionAsync&quot;),n=re(u,&quot;scores&quot;,&quot;nonMaxSuppressionAsync&quot;),r=Mc(e,n,c,l,h),c=r.maxOutputSize,l=r.iouThreshold,h=r.scoreThreshold,[4,e.data()];case 1:return o=t.sent(),[4,n.data()];case 2:return i=t.sent(),a=ln(o,i,c,l,h),e!==s&amp;&amp;e.dispose(),n!==u&amp;&amp;n.dispose(),[2,a]}})})},Bc=Fe({cropAndResize_:function(t,e,n,r,o,i){var a=re(t,&quot;image&quot;,&quot;cropAndResize&quot;,&quot;float32&quot;),s=re(e,&quot;boxes&quot;,&quot;cropAndResize&quot;,&quot;float32&quot;),u=re(n,&quot;boxInd&quot;,&quot;cropAndResize&quot;,&quot;int32&quot;);o=o||&quot;bilinear&quot;,i=i||0;var c=s.shape[0];return D(4===a.rank,function(){return&quot;Error in cropAndResize: image must be rank 4,but got rank &quot;+a.rank+&quot;.&quot;}),D(2===s.rank&amp;&amp;4===s.shape[1],function(){return&quot;Error in cropAndResize: boxes must be have size [&quot;+c+&quot;,4] but had shape &quot;+s.shape+&quot;.&quot;}),D(1===u.rank&amp;&amp;u.shape[0]===c,function(){return&quot;Error in cropAndResize: boxInd must be have size [&quot;+c+&quot;] but had shape &quot;+s.shape+&quot;.&quot;}),D(2===r.length,function(){return&quot;Error in cropAndResize: cropSize must be of length 2, but got length &quot;+r.length+&quot;.&quot;}),D(1&lt;=r[0]&amp;&amp;1&lt;=r[1],function(){return&quot;cropSize must be atleast [1,1], but was &quot;+r}),D(&quot;bilinear&quot;===o||&quot;nearest&quot;===o,function(){return&quot;method must be bilinear or nearest, but was &quot;+o}),Zt.engine.runKernel(function(t,e){return t.cropAndResize(a,s,u,r,o,i)},{$image:a,$boxes:s})}}),Wc=Object.freeze({resizeBilinear:Oc,resizeNearestNeighbor:Pc,nonMaxSuppression:Fc,nonMaxSuppressionAsync:Lc,cropAndResize:Bc});var zc=Fe({matMul_:function(t,e,s,u,c,l){var n;void 0===s&amp;&amp;(s=!1),void 0===u&amp;&amp;(u=!1),void 0===l&amp;&amp;(l=&quot;linear&quot;);var r=re(t,&quot;a&quot;,&quot;fused matMul&quot;),o=re(e,&quot;b&quot;,&quot;fused matMul&quot;);n=Tt(r,o),r=n[0],o=n[1];var i=s?r.shape[r.rank-2]:r.shape[r.rank-1],a=u?o.shape[o.rank-1]:o.shape[o.rank-2],h=s?r.shape[r.rank-1]:r.shape[r.rank-2],p=u?o.shape[o.rank-2]:o.shape[o.rank-1],f=r.shape.slice(0,-2),d=o.shape.slice(0,-2),v=B(f),m=B(d);D(2&lt;=r.rank&amp;&amp;2&lt;=o.rank&amp;&amp;r.rank===o.rank,function(){return&quot;Error in fused matMul: inputs must have the same rank of at least 2, got ranks &quot;+r.rank+&quot; and &quot;+o.rank+&quot;.&quot;}),D(E(f,d),function(){return&quot;Error in fused matMul: outer dimensions (&quot;+f+&quot;) and (&quot;+d+&quot;) of Tensors with shapes &quot;+r.shape+&quot; and &quot;+o.shape+&quot; must match.&quot;}),D(i===a,function(){return&quot;Error in fused matMul: inner shapes (&quot;+i+&quot;) and (&quot;+a+&quot;) of Tensors with shapes &quot;+r.shape+&quot; and &quot;+o.shape+&quot; and transposeA=&quot;+s+&quot; and transposeB=&quot;+u+&quot; must match.&quot;});var g,y=r.shape.slice(0,-2).concat([h,p]),x=s?r.as3D(v,i,h):r.as3D(v,h,i),w=u?o.as3D(m,p,a):o.as3D(m,a,p);null!=c&amp;&amp;xn(y,(g=Tt(g=re(c,&quot;bias&quot;,&quot;fused matMul&quot;),r)[0]).shape);var b={$a:x,$b:w};return null!=c&amp;&amp;(b.$bias=g),Zt.engine.runKernel(function(t,e){var n=t.fusedBatchMatMul(x,w,s,u,g,l);return e([x,w,n]),n},b,function(t,e){var n,r=e[0],o=e[1],i=e[2];if(null==l||&quot;linear&quot;===l)n=t;else{if(&quot;relu&quot;!==l)throw new Error(&quot;Gradient for activation &quot;+l+&quot; has not been implemented yet.&quot;);n=t.mul(i.step())}var a={};return null!=c&amp;&amp;(a={$bias:function(){var t=n,e=yn(g.shape,n.shape);return 0&lt;e.length&amp;&amp;(t=t.sum(e)),t.reshape(g.shape)}}),s||u?!s&amp;&amp;u?Object.assign({$a:function(){return n.matMul(o,!1,!1)},$b:function(){return n.matMul(r,!0,!1)}},a):s&amp;&amp;!u?Object.assign({$a:function(){return o.matMul(n,!1,!0)},$b:function(){return r.matMul(n,!1,!1)}},a):Object.assign({$a:function(){return o.matMul(n,!0,!0)},$b:function(){return n.matMul(r,!0,!0)}},a):Object.assign({$a:function(){return n.matMul(o,!1,!0)},$b:function(){return r.matMul(n,!0,!1)}},a)}).reshape(y)}}),Uc=Object.freeze({matMul:zc}),Gc=Object.freeze({image:Wc,linalg:Dc,losses:kc,spectral:dc,fused:Uc,op:Fe,batchNormalization2d:os,batchNormalization3d:is,batchNormalization4d:as,batchNormalization:ss,batchNorm:us,batchNorm2d:cs,batchNorm3d:ls,batchNorm4d:hs,complex:We,real:ze,imag:Ue,concat:_i,concat1d:Si,concat2d:Ri,concat3d:Ni,concat4d:ki,split:Ii,conv1d:_s,conv2d:Ss,conv3d:Rs,conv2dDerFilter:Ns,depthwiseConv2d:ks,separableConv2d:Is,conv2dTranspose:Ts,matMul:As,dot:Ds,outerProduct:Ms,reverse:Os,reverse1d:Ps,reverse2d:Fs,reverse3d:Ls,reverse4d:Bs,maxPool:Us,avgPool:Gs,pool:Vs,slice:Hs,slice1d:qs,slice2d:js,slice3d:$s,slice4d:Ks,abs:ga,acos:ya,acosh:xa,asin:wa,asinh:ba,atan:Ea,atanh:Ca,ceil:_a,clipByValue:Sa,cos:Ra,cosh:Na,erf:ka,exp:Ia,expm1:Ta,floor:Aa,log:Da,log1p:Ma,logSigmoid:Oa,neg:Pa,reciprocal:Fa,round:La,rsqrt:Ba,sigmoid:Wa,sign:za,isNaN:Ua,isInf:Ga,isFinite:Va,sin:Ha,sinh:qa,softplus:ja,sqrt:$a,square:Ka,step:Xa,tan:Ya,tanh:Qa,all:Ys,any:Qs,argMax:Js,argMin:Zs,logSumExp:tu,max:eu,mean:nu,min:ru,moments:ou,sum:iu,prod:au,equal:su,equalStrict:uu,greater:cu,greaterEqual:lu,greaterEqualStrict:hu,greaterStrict:pu,less:fu,lessEqual:du,lessEqualStrict:vu,lessStrict:mu,notEqual:gu,notEqualStrict:yu,add:xu,addN:wu,addStrict:bu,atan2:Eu,div:Cu,divStrict:_u,floorDiv:Su,maximum:Ru,maximumStrict:Nu,minimum:ku,minimumStrict:Iu,mod:Tu,modStrict:Au,mul:Du,mulStrict:Mu,pow:Ou,powStrict:Pu,squaredDifference:Fu,squaredDifferenceStrict:Lu,sub:Bu,subStrict:Wu,elu:ju,leakyRelu:$u,prelu:Ku,relu:Xu,selu:Yu,logicalAnd:zu,logicalNot:Uu,logicalOr:Gu,logicalXor:Vu,where:Hu,whereAsync:qu,buffer:zi,print:Ui,batchToSpaceND:Gi,cast:Vi,clone:Hi,cumsum:qi,depthToSpace:ji,expandDims:$i,eye:Ki,multinomial:Xi,oneHot:Yi,pad:Qi,pad1d:Ji,pad2d:Zi,pad3d:ta,pad4d:ea,rand:na,randomNormal:ra,randomUniform:oa,reshape:ia,spaceToBatchND:aa,squeeze:sa,stack:ua,tile:ca,truncatedNormal:la,unstack:ha,setdiff1dAsync:pa,fill:Je,linspace:Ze,ones:Ye,range:tn,scalar:Ve,tensor:Ge,tensor1d:He,tensor2d:qe,tensor3d:je,tensor4d:$e,tensor5d:Ke,tensor6d:Xe,zeros:Qe,onesLike:en,zerosLike:nn,transpose:Qu,softmax:Le,logSoftmax:Be,localResponseNormalization:Ju,norm:Zu,gather:nc,unsortedSegmentSum:rc,basicLSTMCell:oc,multiRNNCell:ic,movingAverage:ac,stridedSlice:sc,topk:uc,scatterND:cc,fft:lc,ifft:hc,rfft:pc,irfft:fc,sparseToDense:vc,gatherND:yc});var Vc=function(){function t(){this.blockSize=48,this.firstUse=!0,Zt.get(&quot;IS_BROWSER&quot;)&amp;&amp;(this.fromPixels2DContext=document.createElement(&quot;canvas&quot;).getContext(&quot;2d&quot;))}return t.prototype.setDataMover=function(t){this.data=new rn(t)},t.prototype.register=function(t,e,n){if(this.firstUse&amp;&amp;(this.firstUse=!1,Zt.get(&quot;IS_NODE&quot;)&amp;&amp;fe(&quot;\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require(&#39;@tensorflow/tfjs-node&#39;); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n&quot;)),this.data.has(t))throw new Error(&quot;Data buffer is already registered&quot;);this.data.set(t,{dtype:n})},t.prototype.write=function(t,e){if(null==e)throw new Error(&quot;MathBackendCPU.write(): values can not be null&quot;);this.data.get(t).values=e},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error(&quot;pixels passed to tf.browser.fromPixels() can not be null&quot;);var n,r;if(Zt.get(&quot;IS_NODE&quot;)&amp;&amp;null==t.getContext)throw new Error(&quot;When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package&quot;);if(null!=t.getContext)n=t.getContext(&quot;2d&quot;).getImageData(0,0,t.width,t.height).data;else if(t instanceof ImageData)n=t.data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error(&quot;pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was &quot;+t.constructor.name);if(null==this.fromPixels2DContext)throw new Error(&quot;Can&#39;t read pixels from HTMLImageElement outside the browser.&quot;);this.fromPixels2DContext.canvas.width=t.width,this.fromPixels2DContext.canvas.height=t.height,this.fromPixels2DContext.drawImage(t,0,0,t.width,t.height),n=this.fromPixels2DContext.getImageData(0,0,t.width,t.height).data}if(4===e)r=new Int32Array(n);else{var o=t.width*t.height;r=new Int32Array(o*e);for(var i=0;i&lt;o;i++)for(var a=0;a&lt;e;++a)r[i*e+a]=n[4*i+a]}return je(r,[t.height,t.width,e],&quot;int32&quot;)},t.prototype.read=function(e){return m(this,void 0,void 0,function(){return R(this,function(t){return[2,this.readSync(e)]})})},t.prototype.readSync=function(t){var e=this.data.get(t),n=e.dtype,r=e.complexTensors;return&quot;complex64&quot;===n?un(r.real.dataSync(),r.imag.dataSync()):this.data.get(t).values},t.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&amp;&amp;(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},t.prototype.time=function(n){return m(this,void 0,void 0,function(){var e;return R(this,function(t){return e=Z(),n(),[2,{kernelMs:Z()-e}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:[&quot;The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less.&quot;]}},t.prototype.complex=function(t,e){var n=dt.make(t.shape,{},&quot;complex64&quot;);return this.data.get(n.dataId).complexTensors={real:Zt.engine.keep(t.clone()),imag:Zt.engine.keep(e.clone())},n},t.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},t.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){null!=t&amp;&amp;D(&quot;complex64&quot;!==t.dtype,function(){return e+&quot; does not support complex64 tensors.&quot;})})},t.prototype.slice=function(t,n,e){if(this.assertNotComplex(t,&quot;slice&quot;),Oe(t.shape,n,e)){var r=Pe(n,t.strides),o=B(e);return Ge(t.dataSync().subarray(r,r+o),e,t.dtype)}for(var i=zi(e,t.dtype),a=t.bufferSync(),s=0;s&lt;i.size;++s){var u=i.indexToLoc(s).map(function(t,e){return t+n[e]});i.values[s]=a.get.apply(a,u)}return i.toTensor()},t.prototype.stridedSlice=function(t,e,n,r,o,i,a,s,u){this.assertNotComplex(t,&quot;stridedSlice&quot;);var c=Ae(t.shape,e,n,r,o,i,a,s,u),l=c[0],h=c[1],p=c[2],f=h.filter(function(t,e){return-1===p.indexOf(e)});if(f.some(function(t){return 0===t}))return Ge([],f);for(var d=zi(h,t.dtype),v=t.bufferSync(),m=0;m&lt;d.size;m++){for(var g=d.indexToLoc(m),y=new Array(g.length),x=0;x&lt;y.length;x++)y[x]=g[x]*r[x]+l[x];d.set.apply(d,[v.get.apply(v,y)].concat(g))}return d.toTensor().reshape(f)},t.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,i=0;i&lt;t.rank;i++)i!==e&amp;&amp;(r[o++]=t.shape[i]);var a=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(i=0;i&lt;u.length;i++)u[a[e]=i]=this.slice(t,a,s).reshape(r);return u},t.prototype.reverse=function(r,o){this.assertNotComplex(r,&quot;reverse&quot;);for(var i=zi(r.shape,r.dtype),a=r.bufferSync(),t=function(t){var e=i.indexToLoc(t),n=e.slice();o.forEach(function(t){return n[t]=r.shape[t]-1-n[t]}),i.set.apply(i,[a.get.apply(a,n)].concat(e))},e=0;e&lt;i.size;e++)t(e);return i.toTensor()},t.prototype.concat=function(t,n){this.assertNotComplex(t,&quot;concat&quot;);var e=t.map(function(t){var e=B(t.shape.slice(n));return t.as2D(-1,e)}),a=Re(e.map(function(t){return t.shape}),1),s=zi(a,t[0].dtype).values;if(1===e[0].shape[0]){var r=0;e.forEach(function(t){s.set(t.dataSync(),r),r+=t.size})}else{var u=0;e.forEach(function(t){for(var e=t.dataSync(),n=0,r=0;r&lt;t.shape[0];++r)for(var o=r*a[1]+u,i=0;i&lt;t.shape[1];++i)s[o+i]=e[n++];u+=t.shape[1]})}var o=Re(t.map(function(t){return t.shape}),n);return Ge(s,o,t[0].dtype)},t.prototype.neg=function(t){return this.assertNotComplex(t,&quot;neg&quot;),this.multiply(Ve(-1),t)},t.prototype.add=function(t,e){return&quot;complex64&quot;===t.dtype||&quot;complex64&quot;===e.dtype?this.broadcastedBinaryComplexOp(t.cast(&quot;complex64&quot;),e.cast(&quot;complex64&quot;),function(t,e,n,r){return{real:t+n,imag:e+r}}):this.broadcastedBinaryOp(t,e,kt(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.addN=function(t){this.assertNotComplex(t,&quot;addN&quot;);for(var e=t.map(function(t){return t.dataSync()}),n=zi(t[0].shape,t[0].dtype),r=n.values,o=0;o&lt;t.length;o++)for(var i=e[o],a=0;a&lt;r.length;a++)r[a]+=i[a];return n.toTensor()},t.prototype.subtract=function(t,e){return&quot;complex64&quot;===t.dtype||&quot;complex64&quot;===e.dtype?this.broadcastedBinaryComplexOp(t.cast(&quot;complex64&quot;),e.cast(&quot;complex64&quot;),function(t,e,n,r){return{real:t-n,imag:e-r}}):this.broadcastedBinaryOp(t,e,kt(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.assertNotComplex([t,e],&quot;pow&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.batchMatMul=function(t,e,n,r){this.assertNotComplex([t,e],&quot;matMul&quot;);for(var o=n?t.shape[1]:t.shape[2],i=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],s=t.shape[0],u=t.dataSync(),c=e.dataSync(),l=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],h=l[0],p=l[1],f=l[2],d=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],v=d[0],m=d[1],g=d[2],y=i*a,x=zi([s,i,a],t.dtype),w=x.values,b=this.blockSize,E=0;E&lt;s;E++)for(var C=0;C&lt;i;C+=b)for(var _=0;_&lt;a;_+=b)for(var S=0;S&lt;o;S+=b)for(var R=Math.min(C+b,i),N=Math.min(_+b,a),k=Math.min(S+b,o),I=C;I&lt;R;I++)for(var T=_;T&lt;N;T++){for(var A=0,D=S;D&lt;k;D++)A+=u[E*h+I*p+D*f]*c[D*v+T*m+E*g];w[E*y+(I*a+T)]+=A}return x.toTensor()},t.prototype.fusedBatchMatMul=function(t,e,n,r,o,i){var a=this.batchMatMul(t,e,n,r);return o&amp;&amp;(a=this.add(a,o)),i&amp;&amp;(a=function(t,e,n){if(&quot;linear&quot;===e)return t.linear(n);if(&quot;relu&quot;===e)return t.relu(n);throw new Error(&quot;Activation &quot;+e+&quot; has not been implemented for the CPU backend.&quot;)}(this,i,a)),a},t.prototype.multiply=function(t,e){return&quot;complex64&quot;===t.dtype||&quot;complex64&quot;===e.dtype?this.broadcastedBinaryComplexOp(t.cast(&quot;complex64&quot;),e.cast(&quot;complex64&quot;),function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}}):this.broadcastedBinaryOp(t,e,kt(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.realDivide=function(t,e){return this.assertNotComplex([t,e],&quot;realDivide&quot;),this.broadcastedBinaryOp(t,e,&quot;float32&quot;,function(t,e){return t/e})},t.prototype.floorDiv=function(t,e){return this.assertNotComplex([t,e],&quot;floorDiv&quot;),this.broadcastedBinaryOp(t,e,&quot;int32&quot;,function(t,e){return Math.floor(t/e)})},t.prototype.sum=function(t,e){this.assertNotComplex(t,&quot;sum&quot;),Ee(&quot;sum&quot;,e,t.rank);for(var n=we(t.shape,e),r=n[0],o=n[1],i=Qe(r,kt(t.dtype,&quot;int32&quot;)),a=B(o),s=i.dataSync(),u=t.dataSync(),c=0;c&lt;s.length;++c){for(var l=c*a,h=0,p=0;p&lt;a;++p)h+=u[l+p];s[c]=h}return i},t.prototype.prod=function(t,e){this.assertNotComplex(t,&quot;sum&quot;);for(var n=we(t.shape,e),r=n[0],o=n[1],i=Qe(r,kt(t.dtype,&quot;int32&quot;)),a=B(o),s=i.dataSync(),u=t.dataSync(),c=0;c&lt;s.length;++c){for(var l=c*a,h=1,p=0;p&lt;a;++p)h*=u[l+p];s[c]=h}return i},t.prototype.unsortedSegmentSum=function(t,e,n){this.assertNotComplex(t,&quot;unsortedSegmentSum&quot;);for(var r=[],o=t.rank-e.rank,i=0;i&lt;o;++i)e=e.expandDims(i+1);for(i=0;i&lt;n;++i){var a=Ve(i,&quot;int32&quot;),s=su(a,e).asType(&quot;float32&quot;).mul(t).sum(0);r.push(s)}return ua(r)},t.prototype.argMin=function(t,e){this.assertNotComplex(t,&quot;argMin&quot;);var n=[e];Ee(&quot;argMin&quot;,n,t.rank);for(var r=we(t.shape,n),o=r[0],i=r[1],a=Qe(o,&quot;int32&quot;),s=B(i),u=a.dataSync(),c=t.dataSync(),l=0;l&lt;u.length;++l){for(var h=l*s,p=c[h],f=0,d=0;d&lt;s;++d){var v=c[h+d];v&lt;p&amp;&amp;(p=v,f=d)}u[l]=f}return a},t.prototype.argMax=function(t,e){this.assertNotComplex(t,&quot;argMax&quot;);var n=[e];Ee(&quot;argMax&quot;,n,t.rank);for(var r=we(t.shape,n),o=r[0],i=r[1],a=Qe(o,&quot;int32&quot;),s=B(i),u=a.dataSync(),c=t.dataSync(),l=0;l&lt;u.length;++l){for(var h=l*s,p=c[h],f=0,d=0;d&lt;s;++d){var v=c[h+d];p&lt;v&amp;&amp;(p=v,f=d)}u[l]=f}return a},t.prototype.cumsum=function(t,e,n,r){if(this.assertNotComplex(t,&quot;cumsum&quot;),e!==t.rank-1)throw new Error(&quot;backend.cumsum in CPU expects an inner-most axis=&quot;+(t.rank-1)+&quot; but got axis=&quot;+e);for(var o=kt(t.dtype,&quot;int32&quot;),i=Qe(t.shape,o),a=i.dataSync(),s=t.dataSync(),u=t.shape[t.rank-1],c=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},l=0;l&lt;s.length;l+=u)for(var h=0;h&lt;u;h++){var p=c(l,h);if(0===h)a[p]=n?0:s[p];else{var f=c(l,h-1);a[p]=n?s[f]+a[f]:s[p]+a[f]}}return i},t.prototype.equal=function(t,e){return this.assertNotComplex([t,e],&quot;equal&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return t===e?1:0})},t.prototype.notEqual=function(t,e){return this.assertNotComplex([t,e],&quot;notEqual&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return t!==e?1:0})},t.prototype.less=function(t,e){return this.assertNotComplex([t,e],&quot;less&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return t&lt;e?1:0})},t.prototype.lessEqual=function(t,e){return this.assertNotComplex([t,e],&quot;lessEqual&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return t&lt;=e?1:0})},t.prototype.greater=function(t,e){return this.assertNotComplex([t,e],&quot;greater&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return e&lt;t?1:0})},t.prototype.greaterEqual=function(t,e){return this.assertNotComplex([t,e],&quot;greaterEqual&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return e&lt;=t?1:0})},t.prototype.logicalNot=function(t){this.assertNotComplex(t,&quot;logicalNot&quot;);for(var e=t.dataSync(),n=new Uint8Array(e.length),r=0;r&lt;e.length;++r)n[r]=e[r]?0:1;return dt.make(t.shape,{values:n},&quot;bool&quot;)},t.prototype.logicalAnd=function(t,e){return this.assertNotComplex([t,e],&quot;logicalAnd&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return t&amp;&amp;e})},t.prototype.logicalOr=function(t,e){return this.assertNotComplex([t,e],&quot;logicalOr&quot;),this.broadcastedBinaryOp(t,e,&quot;bool&quot;,function(t,e){return t||e})},t.prototype.select=function(t,e,n){this.assertNotComplex([t,e,n],&quot;select&quot;);for(var r=t.dataSync(),o=e.dataSync(),i=n.dataSync(),a=Qe(e.shape,kt(e.dtype,n.dtype)),s=a.dataSync(),u=0,c=0===t.rank||1&lt;t.rank||1===e.rank?1:e.shape[1],l=0;l&lt;r.length;l++)for(var h=0;h&lt;c;h++)1===r[l]?s[u++]=o[l]:s[u++]=i[l];return a},t.prototype.where=function(t){this.assertNotComplex([t],&quot;where&quot;);var e=t.dataSync();return fa(t.shape,e)},t.prototype.topk=function(t,e,n){return this.assertNotComplex(t,&quot;topk&quot;),fn(t.dataSync(),t.shape,t.dtype,e)},t.prototype.min=function(t,e){this.assertNotComplex(t,&quot;min&quot;),Ee(&quot;min&quot;,e,t.rank);for(var n=we(t.shape,e),r=n[0],o=n[1],i=Qe(r,t.dtype),a=B(o),s=i.dataSync(),u=t.dataSync(),c=0;c&lt;s.length;++c){for(var l=c*a,h=u[l],p=0;p&lt;a;++p){var f=u[l+p];f&lt;h&amp;&amp;(h=f)}s[c]=h}return i},t.prototype.minimum=function(t,e){return this.assertNotComplex([t,e],&quot;minimum&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.mod=function(t,e){return this.assertNotComplex([t,e],&quot;mod&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t&lt;0&amp;&amp;e&lt;0||0&lt;=t&amp;&amp;0&lt;=e?n:(n+e)%e})},t.prototype.max=function(t,e){this.assertNotComplex(t,&quot;max&quot;),Ee(&quot;max&quot;,e,t.rank);for(var n=we(t.shape,e),r=n[0],o=n[1],i=Qe(r,t.dtype),a=B(o),s=i.dataSync(),u=t.dataSync(),c=0;c&lt;s.length;++c){for(var l=c*a,h=u[l],p=0;p&lt;a;++p){var f=u[l+p];h&lt;f&amp;&amp;(h=f)}s[c]=h}return i},t.prototype.maximum=function(t,e){return this.assertNotComplex([t,e],&quot;maximum&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.all=function(t,e){this.assertNotComplex(t,&quot;all&quot;),Ee(&quot;all&quot;,e,t.rank);for(var n=we(t.shape,e),r=n[0],o=n[1],i=Qe(r,t.dtype),a=B(o),s=i.dataSync(),u=t.dataSync(),c=0;c&lt;s.length;++c){for(var l=c*a,h=u[l],p=0;p&lt;a;++p){var f=u[l+p];h=h&amp;&amp;f}s[c]=h}return i},t.prototype.any=function(t,e){this.assertNotComplex(t,&quot;any&quot;),Ee(&quot;any&quot;,e,t.rank);for(var n=we(t.shape,e),r=n[0],o=n[1],i=Qe(r,t.dtype),a=B(o),s=i.dataSync(),u=t.dataSync(),c=0;c&lt;s.length;++c){for(var l=c*a,h=u[l],p=0;p&lt;a;++p){var f=u[l+p];h=h||f}s[c]=h}return i},t.prototype.squaredDifference=function(t,e){return this.assertNotComplex([t,e],&quot;squaredDifference&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},t.prototype.ceil=function(t){this.assertNotComplex(t,&quot;ceil&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r)n[r]=Math.ceil(e[r]);return dt.make(t.shape,{values:n})},t.prototype.floor=function(t){this.assertNotComplex(t,&quot;floor&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r)n[r]=Math.floor(e[r]);return dt.make(t.shape,{values:n})},t.prototype.sign=function(t){this.assertNotComplex(t,&quot;x&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r)e[r]&lt;0?n[r]=-1:0&lt;e[r]?n[r]=1:n[r]=0;return dt.make(t.shape,{values:n})},t.prototype.isNaN=function(t){this.assertNotComplex(t,&quot;x&quot;);for(var e=t.dataSync(),n=new Uint8Array(e.length),r=0;r&lt;e.length;++r)Number.isNaN(e[r])&amp;&amp;(n[r]=1);return dt.make(t.shape,{values:n},&quot;bool&quot;)},t.prototype.isInf=function(t){this.assertNotComplex(t,&quot;x&quot;);for(var e=t.dataSync(),n=new Uint8Array(e.length),r=0;r&lt;e.length;++r)Math.abs(e[r])===1/0&amp;&amp;(n[r]=1);return dt.make(t.shape,{values:n},&quot;bool&quot;)},t.prototype.isFinite=function(t){this.assertNotComplex(t,&quot;x&quot;);for(var e=t.dataSync(),n=new Uint8Array(e.length),r=0;r&lt;e.length;++r)Number.isFinite(e[r])&amp;&amp;(n[r]=1);return dt.make(t.shape,{values:n},&quot;bool&quot;)},t.prototype.round=function(t){this.assertNotComplex(t,&quot;round&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r){var o=Math.floor(e[r]);e[r]-o&lt;.5?n[r]=Math.floor(e[r]):.5&lt;e[r]-o?n[r]=Math.ceil(e[r]):n[r]=o%2==0?o:o+1}return dt.make(t.shape,{values:n})},t.prototype.exp=function(t){this.assertNotComplex(t,&quot;exp&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r)n[r]=Math.exp(e[r]);return dt.make(t.shape,{values:n})},t.prototype.expm1=function(t){this.assertNotComplex(t,&quot;expm1&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r)n[r]=Math.expm1(e[r]);return dt.make(t.shape,{values:n})},t.prototype.log=function(t){this.assertNotComplex(t,&quot;log&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r){var o=e[r];n[r]=Math.log(o)}return dt.make(t.shape,{values:n})},t.prototype.log1p=function(t){this.assertNotComplex(t,&quot;log1p&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r){var o=e[r];n[r]=Math.log1p(o)}return dt.make(t.shape,{values:n})},t.prototype.sqrt=function(t){this.assertNotComplex(t,&quot;sqrt&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r){var o=e[r];n[r]=Math.sqrt(o)}return dt.make(t.shape,{values:n})},t.prototype.rsqrt=function(t){this.assertNotComplex(t,&quot;rsqrt&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r){var o=e[r];n[r]=1/Math.sqrt(o)}return dt.make(t.shape,{values:n})},t.prototype.square=function(t){this.assertNotComplex(t,&quot;square&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r){var o=e[r];n[r]=o*o}return dt.make(t.shape,{values:n})},t.prototype.reciprocal=function(t){this.assertNotComplex(t,&quot;reciprocal&quot;);for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r&lt;e.length;++r)n[r]=1/e[r];return dt.make(t.shape,{values:n})},t.prototype.linear=function(t){return t},t.prototype.relu=function(t){this.assertNotComplex(t,&quot;relu&quot;);for(var e=Qe(t.shape,t.dtype),n=e.dataSync(),r=t.dataSync(),o=0;o&lt;r.length;++o)n[o]=Math.max(0,r[o]);return e},t.prototype.prelu=function(t,e){return this.assertNotComplex([t,e],&quot;prelu&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return t&lt;0?e*t:t})},t.prototype.elu=function(t){this.assertNotComplex(t,&quot;elu&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r){var o=n[r];e[r]=0&lt;=o?o:Math.exp(o)-1}return dt.make(t.shape,{values:e})},t.prototype.eluDer=function(t,e){this.assertNotComplex([t,e],&quot;eluDer&quot;);for(var n=new Float32Array(e.size),r=e.dataSync(),o=t.dataSync(),i=0;i&lt;r.length;++i){var a=r[i];n[i]=1&lt;=a?o[i]:o[i]*(a+1)}return dt.make(e.shape,{values:n})},t.prototype.selu=function(t){this.assertNotComplex(t,&quot;selu&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r){var o=n[r];e[r]=0&lt;=o?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return dt.make(t.shape,{values:e})},t.prototype.clip=function(t,e,n){this.assertNotComplex(t,&quot;clip&quot;);for(var r=new Float32Array(t.size),o=t.dataSync(),i=0;i&lt;o.length;++i){var a=o[i];r[i]=n&lt;a?n:a&lt;e?e:a}return dt.make(t.shape,{values:r})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.abs(n[r]);return dt.make(t.shape,{values:e})},t.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;t.size;++r){var o=n[2*r],i=n[2*r+1];e[r]=Math.hypot(o,i)}return dt.make(t.shape,{values:e})},t.prototype.int=function(t){this.assertNotComplex(t,&quot;int&quot;);for(var e=new Int32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=n[r];return dt.make(t.shape,{values:e},&quot;int32&quot;)},t.prototype.sigmoid=function(t){this.assertNotComplex(t,&quot;sigmoid&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return dt.make(t.shape,{values:e})},t.prototype.softplus=function(t){this.assertNotComplex(t,&quot;softplus&quot;);for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=t.dataSync(),o=0;o&lt;r.length;++o){var i,a=r[o]&gt;-e,s=r[o]&lt;e,u=Math.exp(r[o]);i=s?u:a?r[o]:Math.log(1+u),n[o]=i}return dt.make(t.shape,{values:n})},t.prototype.sin=function(t){this.assertNotComplex(t,&quot;sin&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.sin(n[r]);return dt.make(t.shape,{values:e})},t.prototype.cos=function(t){this.assertNotComplex(t,&quot;cos&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.cos(n[r]);return dt.make(t.shape,{values:e})},t.prototype.tan=function(t){this.assertNotComplex(t,&quot;tan&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.tan(n[r]);return dt.make(t.shape,{values:e})},t.prototype.asin=function(t){this.assertNotComplex(t,&quot;asin&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.asin(n[r]);return dt.make(t.shape,{values:e})},t.prototype.acos=function(t){this.assertNotComplex(t,&quot;acos&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.acos(n[r]);return dt.make(t.shape,{values:e})},t.prototype.atan=function(t){this.assertNotComplex(t,&quot;atan&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.atan(n[r]);return dt.make(t.shape,{values:e})},t.prototype.atan2=function(t,e){return this.assertNotComplex([t,e],&quot;atan2&quot;),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},t.prototype.sinh=function(t){this.assertNotComplex(t,&quot;sinh&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.sinh(n[r]);return dt.make(t.shape,{values:e})},t.prototype.cosh=function(t){this.assertNotComplex(t,&quot;cosh&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.cosh(n[r]);return dt.make(t.shape,{values:e})},t.prototype.tanh=function(t){this.assertNotComplex(t,&quot;tanh&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=w(n[r]);return dt.make(t.shape,{values:e})},t.prototype.asinh=function(t){this.assertNotComplex(t,&quot;asinh&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.asinh(n[r]);return dt.make(t.shape,{values:e})},t.prototype.acosh=function(t){this.assertNotComplex(t,&quot;acosh&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.acosh(n[r]);return dt.make(t.shape,{values:e})},t.prototype.atanh=function(t){this.assertNotComplex(t,&quot;atanh&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r)e[r]=Math.atanh(n[r]);return dt.make(t.shape,{values:e})},t.prototype.erf=function(t){this.assertNotComplex(t,&quot;erf&quot;);for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r&lt;n.length;++r){var o=n[r],i=1/(1+.3275911*o);e[r]=1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-o*o)}return dt.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&amp;&amp;(e=0),this.assertNotComplex(t,&quot;step&quot;);for(var n=new Float32Array(t.size),r=t.dataSync(),o=0;o&lt;r.length;++o){var i=r[o];isNaN(i)?n[o]=NaN:n[o]=0&lt;i?1:e}return dt.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n){this.assertNotComplex([t,e],&quot;conv2d&quot;);for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=zi(n.outShape,t.dtype),l=t.dataSync(),h=e.dataSync(),p=c.values,f=0;f&lt;n.batchSize;++f)for(var d=f*t.strides[0],v=f*c.strides[0],m=0;m&lt;n.outHeight;++m)for(var g=v+m*c.strides[1],y=m*n.strideHeight-s,x=0;x&lt;r;x++){var w=y+x*i;if(!(w&lt;0||w&gt;=n.inHeight))for(var b=x*e.strides[0],E=d+w*t.strides[1],C=0;C&lt;n.outWidth;++C)for(var _=g+C*n.outChannels,S=C*n.strideWidth-u,R=0;R&lt;o;R++){var N=S+R*a;if(!(N&lt;0||N&gt;=n.inWidth))for(var k=b+R*e.strides[1],I=E+N*n.inChannels,T=k,A=0;A&lt;n.inChannels;++A){for(var D=l[I+A],M=0;M&lt;n.outChannels;++M)p[_+M]+=D*h[T+M];T+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,o=n.filterHeight,i=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,h=n.padInfo.top,p=zi(n.outShape,t.dtype),f=t.dataSync(),d=e.dataSync(),v=p.values,m=0;m&lt;n.batchSize;++m)for(var g=m*t.strides[0],y=m*p.strides[0],x=0;x&lt;n.outDepth;++x)for(var w=y+x*p.strides[1],b=x*n.strideDepth-c,E=0;E&lt;r;E++){var C=b+E*a;if(!(C&lt;0||C&gt;=n.inDepth))for(var _=E*e.strides[0],S=g+C*t.strides[1],R=0;R&lt;n.outHeight;++R)for(var N=w+R*p.strides[2],k=R*n.strideHeight-h,I=0;I&lt;o;I++){var T=k+I*s;if(!(T&lt;0||T&gt;=n.inHeight))for(var A=_+I*e.strides[1],D=S+T*t.strides[2],M=0;M&lt;n.outWidth;++M)for(var O=N+M*n.outChannels,P=M*n.strideWidth-l,F=0;F&lt;i;F++){var L=P+F*u;if(!(L&lt;0||L&gt;=n.inWidth))for(var B=A+F*e.strides[2],W=D+L*n.inChannels,z=B,U=0;U&lt;n.inChannels;++U){for(var G=f[W+U],V=0;V&lt;n.outChannels;++V)v[O+V]+=G*d[z+V];z+=n.outChannels}}}}return p.toTensor()},t.prototype.conv2dDerInput=function(t,e,n){this.assertNotComplex([t,e],&quot;conv2dDerInput&quot;);for(var r=zi(n.inShape,&quot;float32&quot;),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=t.dataSync(),l=t.strides,h=l[0],p=l[1],f=l[2],d=e.dataSync(),v=e.strides,m=v[0],g=v[1],y=v[2],x=n.batchSize,w=n.filterHeight,b=n.filterWidth,E=n.inChannels,C=n.inHeight,_=n.inWidth,S=n.outChannels,R=n.outHeight,N=n.outWidth,k=n.strideHeight,I=n.strideWidth,T=w-1-n.padInfo.top,A=b-1-n.padInfo.left,D=0;D&lt;x;++D)for(var M=0;M&lt;E;++M)for(var O=0;O&lt;C;++O)for(var P=O-T,F=Math.max(0,Math.ceil(P/k)),L=Math.min(R,(w+P)/k),B=0;B&lt;_;++B){for(var W=B-A,z=Math.max(0,Math.ceil(W/I)),U=Math.min(N,(b+W)/I),G=0,V=F;V&lt;L;++V)for(var H=V*k-P,q=z;q&lt;U;++q)for(var j=h*D+p*V+f*q,$=m*(w-1-H)+g*(b-1-(q*I-W))+y*M,K=0;K&lt;S;++K)G+=c[j+K]*d[$+K];o[a*D+s*O+u*B+M]=G}return r.toTensor()},t.prototype.conv3dDerInput=function(t,e,n){for(var r=zi(n.inShape,&quot;float32&quot;),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=i[3],l=t.dataSync(),h=t.strides,p=h[0],f=h[1],d=h[2],v=h[3],m=e.dataSync(),g=e.strides,y=g[0],x=g[1],w=g[2],b=g[3],E=n.batchSize,C=n.filterDepth,_=n.filterHeight,S=n.filterWidth,R=n.inChannels,N=n.inDepth,k=n.inHeight,I=n.inWidth,T=n.outChannels,A=n.outDepth,D=n.outHeight,M=n.outWidth,O=n.strideDepth,P=n.strideHeight,F=n.strideWidth,L=C-1-n.padInfo.front,B=_-1-n.padInfo.top,W=S-1-n.padInfo.left,z=0;z&lt;E;++z)for(var U=0;U&lt;R;++U)for(var G=0;G&lt;N;++G)for(var V=G-L,H=Math.max(0,Math.ceil(V/O)),q=Math.min(A,(C+V)/O),j=0;j&lt;k;++j)for(var $=j-B,K=Math.max(0,Math.ceil($/P)),X=Math.min(D,(_+$)/P),Y=0;Y&lt;I;++Y){for(var Q=Y-W,J=Math.max(0,Math.ceil(Q/F)),Z=Math.min(M,(S+Q)/F),tt=0,et=H;et&lt;q;++et)for(var nt=et*O-V,rt=K;rt&lt;X;++rt)for(var ot=rt*P-$,it=J;it&lt;Z;++it)for(var at=p*z+f*et+d*rt+v*it,st=y*(C-1-nt)+x*(_-1-ot)+w*(S-1-(it*F-Q))+b*U,ut=0;ut&lt;T;++ut)tt+=l[at+ut]*m[st+ut];o[a*z+s*G+u*j+c*Y+U]=tt}return r.toTensor()},t.prototype.conv2dDerFilter=function(t,e,n){this.assertNotComplex([t,e],&quot;conv2dDerFilter&quot;);for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=zi(n.filterShape,&quot;float32&quot;),u=n.padInfo.left,c=n.padInfo.top,l=t.bufferSync(),h=e.bufferSync(),p=0;p&lt;i;++p)for(var f=Math.max(0,Math.ceil((c-p)/r)),d=Math.min(n.outHeight,(n.inHeight+c-p)/r),v=0;v&lt;a;++v)for(var m=Math.max(0,Math.ceil((u-v)/o)),g=Math.min(n.outWidth,(n.inWidth+u-v)/o),y=0;y&lt;n.inChannels;++y)for(var x=0;x&lt;n.outChannels;++x){for(var w=0,b=0;b&lt;n.batchSize;++b)for(var E=f;E&lt;d;++E)for(var C=p+E*r-c,_=m;_&lt;g;++_){var S=v+_*o-u;w+=l.get(b,C,S,y)*h.get(b,E,_,x)}s.set(w,p,v,y,x)}return s.toTensor()},t.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=zi(n.filterShape,&quot;float32&quot;),l=c.values,h=c.strides,p=h[0],f=h[1],d=h[2],v=h[3],m=e.dataSync(),g=e.strides,y=g[0],x=g[1],w=g[2],b=g[3],E=t.dataSync(),C=t.strides,_=C[0],S=C[1],R=C[2],N=C[3],k=n.padInfo.front,I=n.padInfo.left,T=n.padInfo.top,A=0;A&lt;a;++A)for(var D=Math.max(0,Math.ceil((k-A)/r)),M=Math.min(n.outDepth,(n.inDepth+k-A)/r),O=A*p,P=0;P&lt;s;++P)for(var F=Math.max(0,Math.ceil((T-P)/o)),L=Math.min(n.outHeight,(n.inHeight+T-P)/o),B=P*f+O,W=0;W&lt;u;++W)for(var z=Math.max(0,Math.ceil((I-W)/i)),U=Math.min(n.outWidth,(n.inWidth+I-W)/i),G=W*d+B,V=0;V&lt;n.inChannels;++V)for(var H=V*v+G,q=0;q&lt;n.outChannels;++q){for(var j=0,$=0;$&lt;n.batchSize;++$)for(var K=$*_,X=$*y,Y=D;Y&lt;M;++Y)for(var Q=(A+Y*r-k)*S+K,J=Y*x+X,Z=F;Z&lt;L;++Z)for(var tt=(P+Z*o-T)*R+Q,et=Z*w+J,nt=z;nt&lt;U;++nt){var rt=nt*b+et;j+=E[(W+nt*i-I)*N+tt+V]*m[rt+q]}l[H+q]=j}return c.toTensor()},t.prototype.depthwiseConv2D=function(t,e,n){this.assertNotComplex([t,e],&quot;depthwiseConv2D&quot;);for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=zi(n.outShape,t.dtype),h=t.dataSync(),p=e.dataSync(),f=l.values,d=0;d&lt;n.batchSize;++d)for(var v=d*t.strides[0],m=d*l.strides[0],g=0;g&lt;n.outHeight;++g)for(var y=m+g*l.strides[1],x=g*n.strideHeight-s,w=0;w&lt;r;++w){var b=x+w*i;if(!(b&lt;0||b&gt;=n.inHeight))for(var E=w*e.strides[0],C=v+b*t.strides[1],_=0;_&lt;n.outWidth;++_)for(var S=y+_*l.strides[2],R=_*n.strideWidth-u,N=0;N&lt;o;++N){var k=R+N*a;if(!(k&lt;0||k&gt;=n.inWidth))for(var I=E+N*e.strides[1],T=C+k*n.inChannels,A=S,D=I,M=0;M&lt;n.inChannels;++M){for(var O=h[T+M],P=0;P&lt;c;++P)f[A+P]+=O*p[D+P];A+=c,D+=c}}}return l.toTensor()},t.prototype.depthwiseConv2DDerInput=function(t,e,n){this.assertNotComplex([t,e],&quot;depthwiseConv2DDerInput&quot;);for(var r=zi(n.inShape,&quot;float32&quot;),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=t.dataSync(),l=t.strides,h=l[0],p=l[1],f=l[2],d=e.dataSync(),v=e.strides,m=v[0],g=v[1],y=v[2],x=n.batchSize,w=n.filterHeight,b=n.filterWidth,E=n.inChannels,C=n.inHeight,_=n.inWidth,S=n.outChannels,R=n.outHeight,N=n.outWidth,k=n.strideHeight,I=n.strideWidth,T=w-1-n.padInfo.top,A=b-1-n.padInfo.left,D=S/E,M=0;M&lt;x;++M)for(var O=0;O&lt;E;++O)for(var P=0;P&lt;C;++P)for(var F=P-T,L=Math.max(0,Math.ceil(F/k)),B=Math.min(R,(w+F)/k),W=0;W&lt;_;++W){for(var z=W-A,U=Math.max(0,Math.ceil(z/I)),G=Math.min(N,(b+z)/I),V=0,H=L;H&lt;B;++H)for(var q=H*k-F,j=U;j&lt;G;++j)for(var $=h*M+p*H+f*j,K=m*(w-1-q)+g*(b-1-(j*I-z))+y*O,X=0;X&lt;D;++X)V+=c[$+(O*D+X)]*d[K+X];o[a*M+s*P+u*W+O]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){this.assertNotComplex([t,e],&quot;depthwiseConv2DDerFilter&quot;);for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=zi(n.filterShape,&quot;float32&quot;),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,h=t.bufferSync(),p=e.bufferSync(),f=0;f&lt;i;++f)for(var d=Math.max(0,Math.ceil((c-f)/r)),v=Math.min(n.outHeight,(n.inHeight+c-f)/r),m=0;m&lt;a;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),y=Math.min(n.outWidth,(n.inWidth+u-m)/o),x=0;x&lt;n.outChannels;++x){for(var w=Math.trunc(x/l),b=x%l,E=0,C=0;C&lt;n.batchSize;++C)for(var _=d;_&lt;v;++_)for(var S=f+_*r-c,R=g;R&lt;y;++R){var N=m+R*o-u;E+=h.get(C,S,N,w)*p.get(C,_,R,x)}s.set(E,f,m,w,b)}return s.toTensor()},t.prototype.tile=function(t,e){this.assertNotComplex(t,&quot;tile&quot;);for(var n=new Array(t.rank),r=0;r&lt;n.length;r++)n[r]=t.shape[r]*e[r];var o=zi(n,t.dtype),i=t.bufferSync();for(r=0;r&lt;o.values.length;++r){for(var a=o.indexToLoc(r),s=new Array(t.rank),u=0;u&lt;s.length;u++)s[u]=a[u]%t.shape[u];var c=i.locToIndex(s);o.values[r]=i.values[c]}return o.toTensor()},t.prototype.pad=function(n,t,e){this.assertNotComplex(n,&quot;pad&quot;);var r=t.map(function(t,e){return t[0]+n.shape[e]+t[1]}),o=t.map(function(t){return t[0]}),i=n.bufferSync(),a=zi(r,n.dtype);0!==e&amp;&amp;a.values.fill(e);for(var s=0;s&lt;n.size;s++){var u=i.indexToLoc(s),c=u.map(function(t,e){return t+o[e]});a.set.apply(a,[i.get.apply(i,u)].concat(c))}return a.toTensor()},t.prototype.transpose=function(t,e){this.assertNotComplex(t,&quot;transpose&quot;);for(var n=new Array(t.rank),r=0;r&lt;n.length;r++)n[r]=t.shape[e[r]];var o=t.dataSync(),i=zi(n,t.dtype),a=t.bufferSync();for(r=0;r&lt;t.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),c=0;c&lt;u.length;c++)u[c]=s[e[c]];var l=i.locToIndex(u);i.values[l]=o[r]}return i.toTensor()},t.prototype.gather=function(t,e,n){this.assertNotComplex([t,e],&quot;gather&quot;);var r=t.shape.slice(),o=e.dataSync();r[n]=o.length;for(var i=zi(r,t.dtype),a=t.bufferSync(),s=0;s&lt;i.size;++s){var u=i.indexToLoc(s),c=u.slice();c[n]=o[u[n]];var l=a.locToIndex(c);i.values[s]=a.values[l]}return i.toTensor()},t.prototype.batchToSpaceND=function(t,e,n){this.assertNotComplex([t],&quot;batchToSpaceND&quot;);var r=e.reduce(function(t,e){return t*e}),o=de(t.shape,e,r),i=ve(o.length,e.length),a=me(t.shape,e,r),s=ge(n,e.length),u=ye(a,n,e.length);return t.reshape(o).transpose(i).reshape(a).slice(s,u)},t.prototype.spaceToBatchND=function(t,e,n){this.assertNotComplex([t],&quot;spaceToBatchND&quot;);var r=e.reduce(function(t,e){return t*e}),o=[[0,0]];o.push.apply(o,n);for(var i=1+e.length;i&lt;t.shape.length;++i)o.push([0,0]);var a=t.pad(o),s=de(a.shape,e,r,!1),u=ve(s.length,e.length,!1),c=me(a.shape,e,r,!1);return a.reshape(s).transpose(u).reshape(c)},t.prototype.pool=function(t,e,n){this.assertNotComplex(t,&quot;pool&quot;);for(var r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,h=&quot;max&quot;===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=t.dataSync(),f=zi(e.outShape,t.dtype),d=f.values,v=e.outShape[1]*e.outShape[2]*e.outShape[3],m=e.outShape[2]*e.outShape[3],g=e.outShape[3],y=0;y&lt;e.batchSize;++y)for(var x=y*v,w=y*t.strides[0],b=0;b&lt;e.inChannels;++b)for(var E=0;E&lt;e.outHeight;++E)for(var C=E*r-c,_=Math.max(0,C),S=Math.min(e.inHeight,s+C),R=x+E*m,N=0;N&lt;e.outWidth;++N){for(var k=N*o-l,I=Math.max(0,k),T=Math.min(e.inWidth,u+k),A=h,D=0,M=0,O=_;O&lt;S;O+=i){for(var P=w+O*t.strides[1],F=I;F&lt;T;F+=a){var L=p[P+F*t.strides[2]+b];&quot;max&quot;===n&amp;&amp;A&lt;L?A=L:&quot;avg&quot;===n&amp;&amp;(D+=L,M++)}if(isNaN(A))break}d[R+N*g+b]=&quot;avg&quot;===n?D/M:A}return f.toTensor()},t.prototype.maxPool=function(t,e){return this.pool(t,e,&quot;max&quot;)},t.prototype.maxPoolPositions=function(t,e){for(var n=zi(e.outShape,&quot;int32&quot;),r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,h=t.bufferSync(),p=0;p&lt;e.batchSize;++p)for(var f=0;f&lt;e.inChannels;++f)for(var d=0;d&lt;e.outHeight;++d){for(var v=d*r-c,m=v;m&lt;0;)m+=i;for(var g=Math.min(e.inHeight,s+v),y=0;y&lt;e.outWidth;++y){for(var x=y*o-l,w=x;w&lt;0;)w+=a;for(var b=Math.min(e.inWidth,u+x),E=Number.NEGATIVE_INFINITY,C=-1,_=m;_&lt;g;_+=i)for(var S=_-v,R=w;R&lt;b;R+=a){var N=R-x,k=h.get(p,_,R,f);E&lt;k&amp;&amp;(E=k,C=S*u+N)}n.set(C,p,d,y,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(t,e,n,r){this.assertNotComplex([e,n],&quot;maxPoolBackprop&quot;);for(var o=this.maxPoolPositions(e,r),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,h=l-1-r.padInfo.left,p=c-1-r.padInfo.top,f=zi(e.shape,&quot;float32&quot;),d=o.bufferSync(),v=t.bufferSync(),m=0;m&lt;r.batchSize;++m)for(var g=0;g&lt;r.inChannels;++g)for(var y=0;y&lt;r.inHeight;++y)for(var x=0;x&lt;r.inWidth;++x){for(var w=y-p,b=x-h,E=0,C=0;C&lt;c;C+=s){var _=(w+C)/i;if(!(_&lt;0||_&gt;=r.outHeight||Math.floor(_)!==_))for(var S=0;S&lt;l;S+=u){var R=(b+S)/a;if(!(R&lt;0||R&gt;=r.outWidth||Math.floor(R)!==R)){var N=c*l-1-d.get(m,_,R,g)===C*l+S?1:0;0!==N&amp;&amp;(E+=v.get(m,_,R,g)*N)}}}f.set(E,m,y,x,g)}return f.toTensor()},t.prototype.avgPoolBackprop=function(t,e,n){this.assertNotComplex([t,e],&quot;avgPoolBackprop&quot;);for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,h=l-1-n.padInfo.left,p=c-1-n.padInfo.top,f=zi(e.shape,&quot;float32&quot;),d=1/(i*a),v=t.bufferSync(),m=0;m&lt;n.batchSize;++m)for(var g=0;g&lt;n.inChannels;++g)for(var y=0;y&lt;n.inHeight;++y)for(var x=0;x&lt;n.inWidth;++x){for(var w=y-p,b=x-h,E=0,C=0;C&lt;c;C+=s){var _=(w+C)/r;if(!(_&lt;0||_&gt;=n.outHeight||Math.floor(_)!==_))for(var S=0;S&lt;l;S+=u){var R=(b+S)/o;R&lt;0||R&gt;=n.outWidth||Math.floor(R)!==R||(E+=v.get(m,_,R,g))}}f.set(E*d,m,y,x,g)}return f.toTensor()},t.prototype.cast=function(t,e){return an(t,e,this)},t.prototype.reshape=function(t,e){return sn(t,e)},t.prototype.avgPool=function(t,e){return this.assertNotComplex(t,&quot;avgPool&quot;),this.pool(t,e,&quot;avg&quot;).toFloat()},t.prototype.resizeBilinear=function(t,e,n,r){this.assertNotComplex(t,&quot;resizeBilinear&quot;);for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=t.dataSync(),l=new Float32Array(B([i,e,n,u])),h=[r&amp;&amp;1&lt;e?a-1:a,r&amp;&amp;1&lt;n?s-1:s],p=[r&amp;&amp;1&lt;e?e-1:e,r&amp;&amp;1&lt;n?n-1:n],f=0,d=h[0]/p[0],v=h[1]/p[1],m=0;m&lt;i;m++)for(var g=0;g&lt;e;g++)for(var y=d*g,x=Math.floor(y),w=y-x,b=Math.min(a-1,Math.ceil(y)),E=m*t.strides[0]+x*t.strides[1],C=m*t.strides[0]+b*t.strides[1],_=0;_&lt;n;_++)for(var S=v*_,R=Math.floor(S),N=S-R,k=Math.min(s-1,Math.ceil(S)),I=E+R*t.strides[2],T=C+R*t.strides[2],A=E+ +k*t.strides[2],D=C+k*t.strides[2],M=0;M&lt;u;M++){var O=c[I+M],P=c[T+M],F=O+(c[A+M]-O)*N,L=F+(P+(c[D+M]-P)*N-F)*w;l[f++]=L}return Ge(l,[i,e,n,u])},t.prototype.resizeBilinearBackprop=function(t,e,n){this.assertNotComplex([t,e],&quot;resizeBilinearBackprop&quot;);for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],h=new Float32Array(o*i*a*s),p=[n&amp;&amp;1&lt;c?i-1:i,n&amp;&amp;1&lt;l?a-1:a],f=[n&amp;&amp;1&lt;c?c-1:c,n&amp;&amp;1&lt;l?l-1:l],d=p[0]/f[0],v=p[1]/f[1],m=t.dataSync(),g=0,y=0;y&lt;o;y++)for(var x=y*e.strides[0],w=0;w&lt;c;w++)for(var b=w*d,E=Math.floor(b),C=Math.min(Math.ceil(b),i-1),_=x+E*e.strides[1],S=x+C*e.strides[1],R=b-E,N=1-R,k=0;k&lt;l;k++)for(var I=k*v,T=Math.floor(I),A=Math.min(Math.ceil(I),a-1),D=I-T,M=1-D,O=_+T*e.strides[2],P=_+A*e.strides[2],F=S+T*e.strides[2],L=S+A*e.strides[2],B=N*M,W=N*D,z=R*M,U=R*D,G=0;G&lt;s;G++){var V=m[g++];h[O+G]+=V*B,h[P+G]+=V*W,h[F+G]+=V*z,h[L+G]+=V*U}return $e(h,[o,a,i,s],e.dtype)},t.prototype.resizeNearestNeighbor=function(t,e,n,r){this.assertNotComplex(t,&quot;resizeNearestNeighbor&quot;);for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=t.dataSync(),l=new Float32Array(i*e*n*u),h=[r&amp;&amp;1&lt;e?a-1:a,r&amp;&amp;1&lt;n?s-1:s],p=[r&amp;&amp;1&lt;e?e-1:e,r&amp;&amp;1&lt;n?n-1:n],f=h[0]/p[0],d=h[1]/p[1],v=0,m=0;m&lt;i;m++)for(var g=m*t.strides[0],y=0;y&lt;e;y++)for(var x=f*y,w=g+Math.min(a-1,r?Math.round(x):Math.floor(x))*t.strides[1],b=0;b&lt;n;b++)for(var E=d*b,C=w+Math.min(s-1,r?Math.round(E):Math.floor(E))*t.strides[2],_=0;_&lt;u;_++){var S=c[C+_];l[v++]=S}return Ge(l,[i,e,n,u],t.dtype)},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){this.assertNotComplex([t,e],&quot;resizeNearestNeighborBackprop&quot;);for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],h=new Float32Array(o*i*a*s),p=t.dataSync(),f=[n&amp;&amp;1&lt;c?i-1:i,n&amp;&amp;1&lt;l?a-1:a],d=[n&amp;&amp;1&lt;c?c-1:c,n&amp;&amp;1&lt;l?l-1:l],v=f[0]/d[0],m=f[1]/d[1],g=1/v,y=1/m,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2,b=0;b&lt;o;b++)for(var E=b*e.strides[0],C=0;C&lt;i;C++)for(var _=E+C*e.strides[1],S=Math.floor(C*g),R=Math.floor(S-x/2),N=0;N&lt;a;N++)for(var k=_+N*e.strides[2],I=Math.floor(N*y),T=Math.floor(I-w/2),A=0;A&lt;s;A++){for(var D=0,M=0;M&lt;x;M++){var O=M+R;if(!(O&lt;0||c&lt;=O)){var P=E+O*t.strides[1],F=O*v;if(C===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var L=0;L&lt;w;L++){var B=L+T;if(!(B&lt;0||l&lt;=B)){var W=P+B*t.strides[2],z=B*m;N===Math.min(a-1,n?Math.round(z):Math.floor(z))&amp;&amp;(D+=p[W+A])}}}}h[k+A]=D}return $e(h,e.shape,e.dtype)},t.prototype.batchNormalization=function(t,e,n,r,o,i){this.assertNotComplex([t,e,n,o,i],&quot;batchNorm&quot;);for(var a=t.dataSync(),s=e.dataSync(),u=n.dataSync(),c=o?o.dataSync():new Float32Array([1]),l=i?i.dataSync():new Float32Array([0]),h=new Float32Array(a.length),p=l.length,f=c.length,d=u.length,v=s.length,m=0,g=0,y=0,x=0,w=0;w&lt;a.length;++w)h[w]=l[m++]+(a[w]-s[g++])*c[y++]/Math.sqrt(u[x++]+r),p&lt;=m&amp;&amp;(m=0),v&lt;=g&amp;&amp;(g=0),f&lt;=y&amp;&amp;(y=0),d&lt;=x&amp;&amp;(x=0);return $e(h,t.shape)},t.prototype.localResponseNormalization4D=function(t,a,e,n,r){this.assertNotComplex(t,&quot;localResponseNormalization4D&quot;);var s=t.shape[3],u=s-1,c=t.dataSync(),o=t.size,i=new Float32Array(o);function l(t){for(var e=t%s,n=t-e+Math.max(0,e-a),r=t-e+Math.min(e+a,u),o=0;n&lt;=r;n++){var i=c[n];o+=i*i}return o}for(var h=0;h&lt;o;h++){var p=l(h),f=c[h]*Math.pow(e+n*p,-r);i[h]=f}return $e(i,t.shape)},t.prototype.LRNGrad=function(t,e,n,r,o,i,a){this.assertNotComplex(t,&quot;LRNGrad&quot;);for(var s=t.shape[3],u=t.dataSync(),c=e.dataSync(),l=n.dataSync(),h=new Float32Array(t.size),p=t.size,f=0;f&lt;p;f++){for(var d=f%s,v=f-d+Math.max(0,d-r),m=f-d+Math.min(s,d+r+1),g=0,y=v;y&lt;m;y++)g+=Math.pow(c[y],2);for(g=i*g+o,y=v;y&lt;m;y++){var x=-2*i*a*c[y]*l[f]/g;f===y&amp;&amp;(x+=Math.pow(g,-a)),x*=u[f],h[y]+=x}}return $e(h,t.shape)},t.prototype.multinomial=function(t,e,n,r){this.assertNotComplex(t,&quot;multinomial&quot;);for(var o=e?t:Le(t),i=o.shape[0],a=o.shape[1],s=Qe([i,n],&quot;int32&quot;),u=s.dataSync(),c=o.dataSync(),l=0;l&lt;i;++l){var h=l*a,p=new Float32Array(a-1);p[0]=c[h];for(var f=1;f&lt;p.length;++f)p[f]=p[f-1]+c[h+f];for(var d=Bi(r.toString()),v=l*n,m=0;m&lt;n;++m){var g=d();u[v+m]=p.length;for(var y=0;y&lt;p.length;y++)if(g&lt;p[y]){u[v+m]=y;break}}}return s},t.prototype.oneHot=function(t,e,n,r){this.assertNotComplex(t,&quot;oneHot&quot;);var o=new Float32Array(t.size*e);o.fill(r);for(var i=t.dataSync(),a=0;a&lt;t.size;++a)0&lt;=i[a]&amp;&amp;i[a]&lt;e&amp;&amp;(o[a*e+i[a]]=n);return qe(o,[t.size,e],&quot;int32&quot;)},t.prototype.nonMaxSuppression=function(t,e,n,r,o){return this.assertNotComplex(t,&quot;nonMaxSuppression&quot;),ln(t.dataSync(),e.dataSync(),n,r,o)},t.prototype.fft=function(t){return this.fftBatch(t,!1)},t.prototype.ifft=function(t){return this.fftBatch(t,!0)},t.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],o=zi(t.shape,&quot;float32&quot;),i=zi(t.shape,&quot;float32&quot;),a=ze(t).as2D(n,r),s=Ue(t).as2D(n,r),u=0;u&lt;n;u++)for(var c=a.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),h=We(c,l),p=this.fftImpl(h,e).dataSync(),f=0;f&lt;r;f++){var d=cn(p,f);o.values[u*r+f]=d.real,i.values[u*r+f]=d.imag}return We(o.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&amp;&amp;(o=We(ze(o).div(Ve(r)),Ue(o).div(Ve(r)))),o}var i=t.dataSync(),a=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r&lt;t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(i,r,e));return We(a.real,a.imag).as2D(t.shape[0],t.shape[1])},t.prototype.isExponentOf2=function(t){return 0==(t&amp;t-1)},t.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=t.dataSync(),o=e/2,i=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=0;o&lt;t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),a=We(i.real,i.imag).as1D(),s=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=2;o&lt;t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),u=We(s.real,s.imag).as1D();a=this.fftRadix2(a,o,n),u=this.fftRadix2(u,o,n);var c=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),o=0;o&lt;Math.ceil(t/2);o++){var i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}(e,n),l=We(c.real,c.imag).mul(u),h=a.add(l),p=a.sub(l),f=ze(h).concat(ze(p)),d=Ue(h).concat(Ue(p));return We(f,d).as1D()},t.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),o=0;o&lt;e;o++){for(var i=0,a=0,s=0;s&lt;e;s++){var u=(d=o*s,v=e,void 0,m=(n?2:-2)*Math.PI*(d/v),{real:Math.cos(m),imag:Math.sin(m)}),c=cn(t,s);i+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&amp;&amp;(i/=e,a/=e),h=i,p=a,(l=r)[2*(f=o)]=h,l[2*f+1]=p}var l,h,p,f,d,v,m;return r},t.prototype.depthToSpace=function(t,e,n){D(&quot;NHWC&quot;===n,function(){return&quot;Only NHWC dataFormat supported on CPU for depthToSpace. Got &quot;+n}),D(1&lt;e,function(){return&quot;blockSize should be &gt; 1 for depthToSpace, but was: &quot;+e});for(var r=t.shape[0],o=t.shape[1],i=t.shape[2],a=t.shape[3],s=o*e,u=i*e,c=a/(e*e),l=t.dataSync(),h=new Float32Array(r*s*u*c),p=0,f=0;f&lt;r;++f)for(var d=0;d&lt;s;++d)for(var v=Math.floor(d/e),m=d%e,g=0;g&lt;u;++g)for(var y=Math.floor(g/e),x=(m*e+g%e)*c,w=0;w&lt;c;++w){var b=w+x+a*(y+i*(v+o*f));h[p++]=l[b]}return $e(h,[r,s,u,c])},t.prototype.broadcastedBinaryOp=function(a,s,t,u){var e=xn(a.shape,s.shape),c=zi(e,t),l=a.dataSync(),h=s.dataSync(),p=gn(a.shape,e),f=gn(s.shape,e),d=c.values;if(p.length+f.length===0)for(var n=0;n&lt;d.length;++n)d[n]=u(l[n%l.length],h[n%h.length]);else{var v=a.bufferSync(),m=s.bufferSync(),r=function(t){var e=c.indexToLoc(t),n=e.slice(-a.rank);p.forEach(function(t){return n[t]=0});var r=v.locToIndex(n),o=e.slice(-s.rank);f.forEach(function(t){return o[t]=0});var i=m.locToIndex(o);d[t]=u(l[r],h[i])};for(n=0;n&lt;d.length;++n)r(n)}return c.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(s,u,c){var t=xn(s.shape,u.shape),l=zi(t,&quot;float32&quot;),e=zi(t,&quot;float32&quot;),h=s.dataSync(),p=u.dataSync(),f=gn(s.shape,t),d=gn(u.shape,t),v=l.values,m=e.values;if(f.length+d.length===0)for(var n=0;n&lt;v.length;n++){var r=n%h.length,o=n%p.length,i=c(h[2*r],h[2*r+1],p[2*o],p[2*o+1]);v[n]=i.real,m[n]=i.imag}else{var g=this.data.get(s.dataId).complexTensors.real.bufferSync(),y=this.data.get(u.dataId).complexTensors.real.bufferSync(),a=function(t){var e=l.indexToLoc(t),n=e.slice(-s.rank);f.forEach(function(t){return n[t]=0});var r=g.locToIndex(n),o=e.slice(-u.rank);d.forEach(function(t){return o[t]=0});var i=y.locToIndex(o),a=c(h[2*r],h[2*r+1],p[2*i],p[2*i+1]);v[t]=a.real,m[t]=a.imag};for(n=0;n&lt;v.length;n++)a(n)}return this.complex(l.toTensor(),e.toTensor())},t.prototype.split=function(t,e,n){return pn(t,e,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.cropAndResize=function(t,e,n,r,o,i){for(var a=t.shape,s=a[0],u=a[1],c=a[2],l=a[3],h=e.shape[0],p=r[0],f=r[1],d=zi([h,p,f,l],t.dtype),v=e.dataSync(),m=n.dataSync(),g=t.dataSync(),y=t.strides,x=d.strides,w=0;w&lt;h;w++){var b=4*w,E=v[b],C=v[b+1],_=v[b+2],S=v[b+3],R=m[w];if(!(s&lt;=R))for(var N=1&lt;p?(_-E)*(u-1)/(p-1):0,k=1&lt;f?(S-C)*(c-1)/(f-1):0,I=0;I&lt;p;I++){var T=1&lt;p?E*(u-1)+I*N:.5*(E+_)*(u-1);if(T&lt;0||u-1&lt;T)for(var A=0;A&lt;f;A++)for(var D=0;D&lt;l;D++){var M=D+A*x[2]+I*x[1]+w*x[0];d.values[M]=i}else if(&quot;bilinear&quot;===o){var O=Math.floor(T),P=Math.ceil(T),F=T-O;for(A=0;A&lt;f;A++)if((q=1&lt;f?C*(c-1)+A*k:.5*(C+S)*(c-1))&lt;0||c-1&lt;q)for(D=0;D&lt;l;D++)M=D+A*x[2]+I*x[1]+w*x[0],d.values[M]=i;else{var L=Math.floor(q),B=Math.ceil(q),W=q-L;for(D=0;D&lt;l;D++){var z=g[M=D+L*y[2]+O*y[1]+R*y[0]],U=g[M=D+B*y[2]+O*y[1]+R*y[0]],G=g[M=D+L*y[2]+P*y[1]+R*y[0]],V=z+(U-z)*W,H=G+(g[M=D+B*y[2]+P*y[1]+R*y[0]]-G)*W;M=D+A*x[2]+I*x[1]+w*x[0],d.values[M]=V+(H-V)*F}}}else for(A=0;A&lt;f;++A){var q;if((q=1&lt;f?C*(c-1)+A*k:.5*(C+S)*(c-1))&lt;0||c-1&lt;q)for(D=0;D&lt;l;D++)M=D+A*x[2]+I*x[1]+w*x[0],d.values[M]=i;else{var j=Math.round(q),$=Math.round(T);for(D=0;D&lt;l;D++){var K=D+j*y[2]+$*y[1]+R*y[0],X=D+A*x[2]+I*x[1]+w*x[0];d.values[X]=g[K]}}}}}return d.toTensor()},t.prototype.sparseToDense=function(t,e,n,r){var o=Te(0,t,n),i=o.sliceRank,a=o.numUpdates,s=o.sliceSize,u=o.strides,c=o.outputSize;return this.scatter(t,e,n,c,s,a,i,u,r,!1)},t.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=Ne(t,e),i=o[0],a=o[1],s=o[2],u=o[3];if(0===a)return Ge([],i,t.dtype);for(var c=new lt([a,s],t.dtype),l=e.dataSync(),h=t.dataSync(),p=0;p&lt;a;p++){for(var f=[],d=0,v=0;v&lt;r;v++){var m=l[p*r+v];d+=m*u[v],f.push(m)}if(d&lt;0||d&gt;=t.size/s)throw new Error(&quot;Invalid indices: &quot;+f+&quot; does not index into &quot;+t.shape);for(var g=0;g&lt;s;g++)c.values[p*s+g]=h[d*s+g]}return c.toTensor().reshape(i)},t.prototype.scatterND=function(t,e,n){var r=Te(0,t,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=Ve(0);return this.scatter(t,e,n,u,a,i,o,s,c,!0)},t.prototype.fill=function(t,e,n){var r=M(n=n||q(e),B(t));return r.fill(e),dt.make(t,{values:r},n)},t.prototype.onesLike=function(t){if(&quot;string&quot;===t.dtype)throw new Error(&quot;onesLike is not supported for string tensors&quot;);return this.fill(t.shape,1,t.dtype)},t.prototype.zerosLike=function(t){var e=M(t.dtype,B(t.shape));return dt.make(t.shape,{values:e},t.dtype)},t.prototype.scatter=function(t,e,n,r,o,i,a,s,u,c){var l=[r/o,o],h=t.dataSync(),p=e.dataSync();if(0===r)return Ge([],n,e.dtype);var f=new lt(l,e.dtype);f.values.fill(u.dataSync()[0]);for(var d=0;d&lt;i;d++){for(var v=[],m=0,g=0;g&lt;a;g++){var y=h[d*a+g];v.push(y),m+=y*s[g]}if(m&lt;0||r/o&lt;=m)throw new Error(&quot;Invalid indices: &quot;+v+&quot; does not index into &quot;+n);for(var x=0;x&lt;o;x++)c?f.values[m*o+x]+=p[d*o+x]:f.values[m*o+x]=0===e.rank?p[0]:p[d*o+x]}return f.toTensor().reshape(n)},t}();Zt.registerBackend(&quot;cpu&quot;,function(){return new Vc},1);var Hc=&quot;undefined&quot;!=typeof requestAnimationFrame?requestAnimationFrame:&quot;undefined&quot;!=typeof setImmediate?setImmediate:function(t){return t()};var qc={float32:4,int32:4,uint16:2,uint8:1,bool:1};function jc(p,t){for(var f={},d=0,e=function(t){var e=t.name,n=t.dtype,r=t.shape,o=B(r),i=void 0;if(&quot;quantization&quot;in t){var a=t.quantization;if(&quot;uint8&quot;!==a.dtype&amp;&amp;&quot;uint16&quot;!==a.dtype)throw new Error(&quot;Weight &quot;+t.name+&quot; has unknown quantization dtype &quot;+a.dtype+&quot;. Supported quantization dtypes are: &#39;uint8&#39; and &#39;uint16&#39;.&quot;);var s=qc[a.dtype],u=p.slice(d,d+o*s),c=&quot;uint8&quot;===a.dtype?new Uint8Array(u):new Uint16Array(u);if(&quot;float32&quot;===n)i=Float32Array.from(c,function(t){return t*a.scale+a.min});else{if(&quot;int32&quot;!==n)throw new Error(&quot;Unsupported dtype in weight &#39;&quot;+e+&quot;&#39;: &quot;+n);i=Int32Array.from(c,function(t){return Math.round(t*a.scale+a.min)})}d+=o*s}else{var l=qc[n];if(u=p.slice(d,d+o*l),&quot;float32&quot;===n)i=new Float32Array(u);else if(&quot;int32&quot;===n)i=new Int32Array(u);else{if(&quot;bool&quot;!==n)throw new Error(&quot;Unsupported dtype in weight &#39;&quot;+e+&quot;&#39;: &quot;+n);i=new Uint8Array(u)}d+=o*l}var h=void 0;if(&quot;float32&quot;===n)h=Ge(i,r,&quot;float32&quot;);else if(&quot;int32&quot;===n)h=Ge(i,r,&quot;int32&quot;);else{if(&quot;bool&quot;!==n)throw new Error(&quot;Unsupported dtype in weight &#39;&quot;+e+&quot;&#39;: &quot;+n);h=Ge(i,r,&quot;bool&quot;)}f[e]=h},n=0,r=t;n&lt;r.length;n++)e(r[n]);return f}var $c=&quot;undefined&quot;!=typeof Buffer&amp;&amp;(&quot;undefined&quot;==typeof Blob||&quot;undefined&quot;==typeof atob||&quot;undefined&quot;==typeof btoa);function Kc(t){return $c?Buffer.byteLength(t):new Blob([t]).size}function Xc(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function Yc(t){for(t=t.trim();t.endsWith(&quot;/&quot;);)t=t.slice(0,t.length-1);var e=t.split(&quot;/&quot;);return e[e.length-1]}function Qc(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error(&quot;Expected JSON model topology, received ArrayBuffer.&quot;);return{dateSaved:new Date,modelTopologyType:&quot;JSON&quot;,modelTopologyBytes:null==t.modelTopology?0:Kc(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:Kc(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Jc=function(){function i(){this.saveRouters=[],this.loadRouters=[]}return i.getInstance=function(){return null==i.instance&amp;&amp;(i.instance=new i),i.instance},i.registerSaveRouter=function(t){i.getInstance().saveRouters.push(t)},i.registerLoadRouter=function(t){i.getInstance().loadRouters.push(t)},i.getSaveHandlers=function(t){return i.getHandlers(t,&quot;save&quot;)},i.getLoadHandlers=function(t,e){return i.getHandlers(t,&quot;load&quot;,e)},i.getHandlers=function(n,t,r){var o=[];return(&quot;load&quot;===t?i.getInstance().loadRouters:i.getInstance().saveRouters).forEach(function(t){var e=t(n,r);null!==e&amp;&amp;o.push(e)}),o},i}(),Zc=&quot;://&quot;,tl=function(){function r(){this.managers={}}return r.getInstance=function(){return null==r.instance&amp;&amp;(r.instance=new r),r.instance},r.registerManager=function(t,e){D(null!=t,function(){return&quot;scheme must not be undefined or null.&quot;}),t.endsWith(Zc)&amp;&amp;(t=t.slice(0,t.indexOf(Zc))),D(0&lt;t.length,function(){return&quot;scheme must not be an empty string.&quot;});var n=r.getInstance();D(null==n.managers[t],function(){return&quot;A model store manager is already registered for scheme &#39;&quot;+t+&quot;&#39;.&quot;}),n.managers[t]=e},r.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error(&quot;Cannot find model manager for scheme &#39;&quot;+t+&quot;&#39;&quot;);return e},r.getSchemes=function(){return Object.keys(this.getInstance().managers)},r}();function el(t){if(-1===t.indexOf(Zc))throw new Error(&quot;The url string provided does not contain a scheme. Supported schemes are: &quot;+tl.getSchemes().join(&quot;,&quot;));return{scheme:t.split(Zc)[0],path:t.split(Zc)[1]}}function nl(l,h,p){return void 0===p&amp;&amp;(p=!1),m(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c;return R(this,function(t){switch(t.label){case 0:return D(l!==h,function(){return&quot;Old path and new path are the same: &#39;&quot;+l+&quot;&#39;&quot;}),D(0&lt;(e=Jc.getLoadHandlers(l)).length,function(){return&quot;Copying failed because no load handler is found for source URL &quot;+l+&quot;.&quot;}),D(e.length&lt;2,function(){return&quot;Copying failed because more than one (&quot;+e.length+&quot;) load handlers for source URL &quot;+l+&quot;.&quot;}),n=e[0],D(0&lt;(r=Jc.getSaveHandlers(h)).length,function(){return&quot;Copying failed because no save handler is found for destination URL &quot;+h+&quot;.&quot;}),D(r.length&lt;2,function(){return&quot;Copying failed because more than one (&quot;+e.length+&quot;) save handlers for destination URL &quot;+h+&quot;.&quot;}),o=r[0],i=el(l).scheme,a=el(l).path,s=i===el(l).scheme,[4,n.load()];case 1:return u=t.sent(),p&amp;&amp;s?[4,tl.getManager(i).removeModel(a)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[4,o.save(u)];case 4:return c=t.sent(),!p||s?[3,6]:[4,tl.getManager(i).removeModel(a)];case 5:t.sent(),t.label=6;case 6:return[2,c.modelArtifactsInfo]}})})}var rl=&quot;tensorflowjs&quot;,ol=&quot;models_store&quot;,il=&quot;model_info_store&quot;;function al(){if(!Zt.get(&quot;IS_BROWSER&quot;))throw new Error(&quot;Failed to obtain IndexedDB factory because the current environmentis not a web browser.&quot;);var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error(&quot;The current browser does not appear to support IndexedDB.&quot;);return e}function sl(t){var e=t.result;e.createObjectStore(ol,{keyPath:&quot;modelPath&quot;}),e.createObjectStore(il,{keyPath:&quot;modelPath&quot;})}var ul=function(){function t(t){if(this.indexedDB=al(),null==t||!t)throw new Error(&quot;For IndexedDB, modelPath must not be null, undefined or empty.&quot;);this.modelPath=t}return t.prototype.save=function(e){return m(this,void 0,void 0,function(){return R(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error(&quot;BrowserLocalStorage.save() does not support saving model topology in binary formats yet.&quot;);return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return m(this,void 0,void 0,function(){return R(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,h){var p=this;return new Promise(function(u,c){var l=p.indexedDB.open(rl,1);l.onupgradeneeded=function(){return sl(l)},l.onsuccess=function(){var r=l.result;if(null==h){var t=r.transaction(ol,&quot;readonly&quot;),e=t.objectStore(ol).get(p.modelPath);e.onsuccess=function(){if(null==e.result)return r.close(),c(new Error(&quot;Cannot find model with path &#39;&quot;+p.modelPath+&quot;&#39; in IndexedDB.&quot;));u(e.result.modelArtifacts)},e.onerror=function(t){return r.close(),c(e.error)},t.oncomplete=function(){return r.close()}}else{var o,i=Qc(h),a=r.transaction(il,&quot;readwrite&quot;),s=a.objectStore(il),n=s.put({modelPath:p.modelPath,modelArtifactsInfo:i});n.onsuccess=function(){var n=(o=r.transaction(ol,&quot;readwrite&quot;)).objectStore(ol).put({modelPath:p.modelPath,modelArtifacts:h,modelArtifactsInfo:i});n.onsuccess=function(){return u({modelArtifactsInfo:i})},n.onerror=function(t){var e=(s=a.objectStore(il)).delete(p.modelPath);e.onsuccess=function(){return r.close(),c(n.error)},e.onerror=function(t){return r.close(),c(n.error)}}},n.onerror=function(t){return r.close(),c(n.error)},a.oncomplete=function(){null==o?r.close():o.oncomplete=function(){return r.close()}}}},l.onerror=function(t){return c(l.error)}})},t.URL_SCHEME=&quot;indexeddb://&quot;,t}(),cl=function(t){return Zt.get(&quot;IS_BROWSER&quot;)&amp;&amp;!Array.isArray(t)&amp;&amp;t.startsWith(ul.URL_SCHEME)?(e=t.slice(ul.URL_SCHEME.length),new ul(e)):null;var e};Jc.registerSaveRouter(cl),Jc.registerLoadRouter(cl);var ll=function(){function t(){this.indexedDB=al()}return t.prototype.listModels=function(){return m(this,void 0,void 0,function(){var e=this;return R(this,function(t){return[2,new Promise(function(i,n){var r=e.indexedDB.open(rl,1);r.onupgradeneeded=function(){return sl(r)},r.onsuccess=function(){var e=r.result,t=e.transaction(il,&quot;readonly&quot;),o=t.objectStore(il).getAll();o.onsuccess=function(){for(var t={},e=0,n=o.result;e&lt;n.length;e++){var r=n[e];t[r.modelPath]=r.modelArtifactsInfo}i(t)},o.onerror=function(t){return e.close(),n(o.error)},t.oncomplete=function(){return e.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(u){return m(this,void 0,void 0,function(){var n=this;return R(this,function(t){return u=(e=u).startsWith(ul.URL_SCHEME)?e.slice(ul.URL_SCHEME.length):e,[2,new Promise(function(a,s){var e=n.indexedDB.open(rl,1);e.onupgradeneeded=function(){return sl(e)},e.onsuccess=function(){var n,r=e.result,t=r.transaction(il,&quot;readwrite&quot;),o=t.objectStore(il),i=o.get(u);i.onsuccess=function(){if(null==i.result)return r.close(),s(new Error(&quot;Cannot find model with path &#39;&quot;+u+&quot;&#39; in IndexedDB.&quot;));var t=o.delete(u),e=function(){var t=(n=r.transaction(ol,&quot;readwrite&quot;)).objectStore(ol).delete(u);t.onsuccess=function(){return a(i.result.modelArtifactsInfo)},t.onerror=function(t){return s(i.error)}};t.onsuccess=e,t.onerror=function(t){return e(),r.close(),s(i.error)}},i.onerror=function(t){return r.close(),s(i.error)},t.oncomplete=function(){null==n?r.close():n.oncomplete=function(){return r.close()}}},e.onerror=function(t){return s(e.error)}})];var e})})},t}();if(Zt.get(&quot;IS_BROWSER&quot;))try{tl.registerManager(ul.URL_SCHEME,new ll)}catch(t){}var hl=&quot;/&quot;,pl=&quot;tensorflowjs_models&quot;,fl=&quot;info&quot;,dl=&quot;model_topology&quot;,vl=&quot;weight_specs&quot;,ml=&quot;weight_data&quot;,gl=&quot;model_metadata&quot;;function yl(t){return{info:[pl,t,fl].join(hl),topology:[pl,t,dl].join(hl),weightSpecs:[pl,t,vl].join(hl),weightData:[pl,t,ml].join(hl),modelMetadata:[pl,t,gl].join(hl)}}function xl(t){var e=t.split(hl);if(e.length&lt;3)throw new Error(&quot;Invalid key format: &quot;+t);return e.slice(1,e.length-1).join(hl)}var wl=function(){function t(t){if(!Zt.get(&quot;IS_BROWSER&quot;)||void 0===window.localStorage)throw new Error(&quot;The current environment does not support local storage.&quot;);if(this.LS=window.localStorage,null==t||!t)throw new Error(&quot;For local storage, modelPath must not be null, undefined or empty.&quot;);this.modelPath=t,this.keys=yl(this.modelPath)}return t.prototype.save=function(i){return m(this,void 0,void 0,function(){var n,r,o;return R(this,function(t){if(i.modelTopology instanceof ArrayBuffer)throw new Error(&quot;BrowserLocalStorage.save() does not support saving model topology in binary formats yet.&quot;);n=JSON.stringify(i.modelTopology),r=JSON.stringify(i.weightSpecs),o=Qc(i);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(e=i.weightData,$c?Buffer.from(e).toString(&quot;base64&quot;):btoa(String.fromCharCode.apply(null,new Uint8Array(e))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy})),[2,{modelArtifactsInfo:o}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(&quot;Failed to save model &#39;&quot;+this.modelPath+&quot;&#39; to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=&quot;+o.modelTopologyBytes+&quot;, weightSpecsBytes=&quot;+o.weightSpecsBytes+&quot;, weightDataBytes=&quot;+o.weightDataBytes+&quot;.&quot;)}var e;return[2]})})},t.prototype.load=function(){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s;return R(this,function(t){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error(&quot;In local storage, there is no model with name &#39;&quot;+this.modelPath+&quot;&#39;&quot;);if(&quot;JSON&quot;!==e.modelTopologyType)throw new Error(&quot;BrowserLocalStorage does not support loading non-JSON model topology yet.&quot;);if(n={},null==(r=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error(&quot;In local storage, the topology of model &#39;&quot;+this.modelPath+&quot;&#39; is missing.&quot;);if(n.modelTopology=r,null==(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error(&quot;In local storage, the weight specs of model &#39;&quot;+this.modelPath+&quot;&#39; are missing.&quot;);if(n.weightSpecs=o,null!=(i=this.LS.getItem(this.keys.modelMetadata))&amp;&amp;(a=JSON.parse(i),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy),null==(s=this.LS.getItem(this.keys.weightData)))throw new Error(&quot;In local storage, the binary weight values of model &#39;&quot;+this.modelPath+&quot;&#39; are missing.&quot;);return n.weightData=function(t){if($c){var e=Buffer.from(t,&quot;base64&quot;);return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o&lt;n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(s),[2,n]})})},t.URL_SCHEME=&quot;localstorage://&quot;,t}(),bl=function(t){return Zt.get(&quot;IS_BROWSER&quot;)&amp;&amp;!Array.isArray(t)&amp;&amp;t.startsWith(wl.URL_SCHEME)?(e=t.slice(wl.URL_SCHEME.length),new wl(e)):null;var e};Jc.registerSaveRouter(bl),Jc.registerLoadRouter(bl);var El=function(){function t(){D(Zt.get(&quot;IS_BROWSER&quot;),function(){return&quot;Current environment is not a web browser&quot;}),D(void 0!==window.localStorage,function(){return&quot;Current browser does not appear to support localStorage&quot;}),this.LS=window.localStorage}return t.prototype.listModels=function(){return m(this,void 0,void 0,function(){var e,n,r,o,i,a;return R(this,function(t){for(e={},n=pl+hl,r=hl+fl,o=0;o&lt;this.LS.length;++o)(i=this.LS.key(o)).startsWith(n)&amp;&amp;i.endsWith(r)&amp;&amp;(a=xl(i),e[a]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},t.prototype.removeModel=function(o){return m(this,void 0,void 0,function(){var n,r;return R(this,function(t){if(o=(e=o).startsWith(wl.URL_SCHEME)?e.slice(wl.URL_SCHEME.length):e,n=yl(o),null==this.LS.getItem(n.info))throw new Error(&quot;Cannot find model at path &#39;&quot;+o+&quot;&#39;&quot;);var e;return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(Zt.get(&quot;IS_BROWSER&quot;))try{tl.registerManager(wl.URL_SCHEME,new El)}catch(t){}var Cl=function(){function e(t){if(!Zt.get(&quot;IS_BROWSER&quot;))throw new Error(&quot;browserDownloads() cannot proceed because the current environment is not a browser.&quot;);t.startsWith(e.URL_SCHEME)&amp;&amp;(t=t.slice(e.URL_SCHEME.length)),null!=t&amp;&amp;0!==t.length||(t=&quot;model&quot;),this.modelTopologyFileName=t+&quot;.json&quot;,this.weightDataFileName=t+&quot;.weights.bin&quot;}return e.prototype.save=function(s){return m(this,void 0,void 0,function(){var e,n,r,o,i,a;return R(this,function(t){if(e=window.URL.createObjectURL(new Blob([s.weightData],{type:&quot;application/octet-stream&quot;})),s.modelTopology instanceof ArrayBuffer)throw new Error(&quot;BrowserDownloads.save() does not support saving model topology in binary formats yet.&quot;);return n=[{paths:[&quot;./&quot;+this.weightDataFileName],weights:s.weightSpecs}],r={modelTopology:s.modelTopology,format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:&quot;application/json&quot;})),(i=null==this.jsonAnchor?document.createElement(&quot;a&quot;):this.jsonAnchor).download=this.modelTopologyFileName,i.href=o,i.click(),null!=s.weightData&amp;&amp;((a=null==this.weightDataAnchor?document.createElement(&quot;a&quot;):this.weightDataAnchor).download=this.weightDataFileName,a.href=e,a.click()),[2,{modelArtifactsInfo:Qc(s)}]})})},e.URL_SCHEME=&quot;downloads://&quot;,e}(),_l=function(){function t(t){if(null==t||t.length&lt;1)throw new Error(&quot;When calling browserFiles, at least 1 file is required, but received &quot;+t);this.files=t}return t.prototype.load=function(){return m(this,void 0,void 0,function(){var r,h,p=this;return R(this,function(t){return r=this.files[0],h=this.files.slice(1),[2,new Promise(function(c,l){var t=new FileReader;t.onload=function(t){var e=JSON.parse(t.target.result),o=e.modelTopology;if(null!=o){0===h.length&amp;&amp;c({modelTopology:o});var n=e.weightsManifest;if(null!=n){var i;try{i=p.checkManifestAndWeightFiles(n,h)}catch(t){return void l(t)}var a=[],s=[],u=[];n.forEach(function(t){t.paths.forEach(function(t){s.push(t),u.push(null)}),a.push.apply(a,t.weights)}),n.forEach(function(t){t.paths.forEach(function(r){var t=new FileReader;t.onload=function(t){var e=t.target.result,n=s.indexOf(r);u[n]=e,-1===u.indexOf(null)&amp;&amp;c({modelTopology:o,weightSpecs:a,weightData:Xc(u)})},t.onerror=function(t){return l(&quot;Failed to weights data from file of path &#39;&quot;+r+&quot;&#39;.&quot;)},t.readAsArrayBuffer(i[r])})})}else l(new Error(&quot;weightManifest field is missing from file &quot;+r.name))}else l(new Error(&quot;modelTopology field is missing from file &quot;+r.name))},t.onerror=function(t){return l(&quot;Failed to read model topology and weights manifest JSON from file &#39;&quot;+r.name+&quot;&#39;. BrowserFiles supports loading Keras-style tf.Model artifacts only.&quot;)},t.readAsText(r)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],o=n.map(function(t){return Yc(t.name)}),i={},e=0,a=t;e&lt;a.length;e++)a[e].paths.forEach(function(t){var e=Yc(t);if(-1!==r.indexOf(e))throw new Error(&quot;Duplicate file basename found in weights manifest: &#39;&quot;+e+&quot;&#39;&quot;);if(r.push(e),-1===o.indexOf(e))throw new Error(&quot;Weight file with basename &#39;&quot;+e+&quot;&#39; is not provided.&quot;);i[t]=n[o.indexOf(e)]});if(r.length!==n.length)throw new Error(&quot;Mismatch in the number of files in weights manifest (&quot;+r.length+&quot;) and the number of weight files provided (&quot;+n.length+&quot;).&quot;);return i},t}();function Sl(n,r,o,i){var t,e,a;D(null!=(a=n)&amp;&amp;Array.isArray(a)&amp;&amp;0&lt;a.length,function(){return&quot;promises must be a none empty array&quot;}),t=o=null==o?0:o,e=i=null==i?1:i,D(0&lt;=t&amp;&amp;t&lt;=1,function(){return&quot;Progress fraction must be in range [0, 1], but got startFraction &quot;+t}),D(0&lt;=e&amp;&amp;e&lt;=1,function(){return&quot;Progress fraction must be in range [0, 1], but got endFraction &quot;+e}),D(t&lt;=e,function(){return&quot;startFraction must be no more than endFraction, but got startFraction &quot;+t+&quot; and endFraction &quot;+e});var s=0;return Promise.all(n.map(function(t){return t.then(function(t){var e=o+ ++s/n.length*(i-o);return r(e),t}),t}))}function Rl(l,h){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c;return R(this,function(t){switch(t.label){case 0:return null==h&amp;&amp;(h={}),e=null==h.fetchFunc?fetch:h.fetchFunc,n=l.map(function(t){return e(t,h.requestInit)}),r=0,o=.5,null!=h.onProgress?[3,2]:[4,Promise.all(n)];case 1:return i=t.sent(),[3,4];case 2:return[4,Sl(n,h.onProgress,r,o)];case 3:i=t.sent(),t.label=4;case 4:return a=i.map(function(t){return t.arrayBuffer()}),s=.5,u=1,null!=h.onProgress?[3,6]:[4,Promise.all(a)];case 5:return c=t.sent(),[3,8];case 6:return[4,Sl(a,h.onProgress,s,u)];case 7:c=t.sent(),t.label=8;case 8:return[2,c]}})})}function Nl(i){var t=this;return function(f,o,d){return void 0===o&amp;&amp;(o=&quot;&quot;),m(t,void 0,void 0,function(){var a,c,s,u,e,n,r,l,h,p;return R(this,function(t){switch(t.label){case 0:if(a=f.map(function(){return!1}),c={},s=null!=d?d.map(function(){return!1}):[],u=[],f.forEach(function(t,o){var i=0;t.weights.forEach(function(n){var t=&quot;quantization&quot;in n?n.quantization.dtype:n.dtype,e=qc[t]*B(n.shape),r=function(){a[o]=!0,null==c[o]&amp;&amp;(c[o]=[]),c[o].push({manifestEntry:n,groupOffset:i,sizeBytes:e})};null!=d?d.forEach(function(t,e){t===n.name&amp;&amp;(r(),s[e]=!0)}):r(),u.push(n.name),i+=e})}),!s.every(function(t){return t}))throw e=d.filter(function(t,e){return!s[e]}),new Error(&quot;Could not find weights in manifest with names: &quot;+e.join(&quot;, &quot;)+&quot;. \nManifest JSON has weights with names: &quot;+u.join(&quot;, &quot;)+&quot;.&quot;);return n=a.reduce(function(t,e,n){return e&amp;&amp;t.push(n),t},[]),r=[],n.forEach(function(t){f[t].paths.forEach(function(t){var e=o+(o.endsWith(&quot;/&quot;)?&quot;&quot;:&quot;/&quot;)+t;r.push(e)})}),[4,i(r)];case 1:return l=t.sent(),h={},p=0,n.forEach(function(t){for(var e=f[t].paths.length,n=0,r=0;r&lt;e;r++)n+=l[p+r].byteLength;for(var o=new ArrayBuffer(n),i=new Uint8Array(o),a=0,s=0;s&lt;e;s++){var u=new Uint8Array(l[p+s]);i.set(u,a),a+=u.byteLength}c[t].forEach(function(t){var e=jc(o.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)h[n]=e[n]}),p+=e}),[2,h]}})})}}Jc.registerSaveRouter(function(t){return Zt.get(&quot;IS_BROWSER&quot;)&amp;&amp;!Array.isArray(t)&amp;&amp;t.startsWith(Cl.URL_SCHEME)?(void 0===(e=t.slice(Cl.URL_SCHEME.length))&amp;&amp;(e=&quot;model&quot;),new Cl(e)):null;var e});var kl=function(){function t(t,n){if(this.DEFAULT_METHOD=&quot;POST&quot;,null==n&amp;&amp;(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,null==n.fetchFunc){var e=Zt.global.fetch;if(void 0===e)throw new Error(&quot;browserHTTPRequest is not supported outside the web browser without a fetch polyfill.&quot;);n.fetchFunc=e.bind(Zt.global)}else D(&quot;function&quot;==typeof n.fetchFunc,function(){return&quot;Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)&quot;});if(this.fetchFunc=function(e,t){return n.fetchFunc(e,t).catch(function(t){throw new Error(&quot;Request for &quot;+e+&quot; failed due to error: &quot;+t)})},D(null!=t&amp;&amp;0&lt;t.length,function(){return&quot;URL path for browserHTTPRequest must not be null, undefined or empty.&quot;}),Array.isArray(t)&amp;&amp;D(2===t.length,function(){return&quot;URL paths for browserHTTPRequest must have a length of 2, (actual length is &quot;+t.length+&quot;).&quot;}),this.path=t,null!=n.requestInit&amp;&amp;null!=n.requestInit.body)throw new Error(&quot;requestInit is expected to have no pre-existing body, but has one.&quot;);this.requestInit=n.requestInit||{}}return t.prototype.save=function(i){return m(this,void 0,void 0,function(){var e,n,r,o;return R(this,function(t){switch(t.label){case 0:if(i.modelTopology instanceof ArrayBuffer)throw new Error(&quot;BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.&quot;);return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:[&quot;./model.weights.bin&quot;],weights:i.weightSpecs}],r={modelTopology:i.modelTopology,format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,weightsManifest:n},e.body.append(&quot;model.json&quot;,new Blob([JSON.stringify(r)],{type:&quot;application/json&quot;}),&quot;model.json&quot;),null!=i.weightData&amp;&amp;e.body.append(&quot;model.weights.bin&quot;,new Blob([i.weightData],{type:&quot;application/octet-stream&quot;}),&quot;model.weights.bin&quot;),[4,this.getFetchFunc()(this.path,e)];case 1:if((o=t.sent()).ok)return[2,{modelArtifactsInfo:Qc(i),responses:[o]}];throw new Error(&quot;BrowserHTTPRequest.save() failed due to HTTP response status &quot;+o.status+&quot;.&quot;)}})})},t.prototype.load=function(){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u;return R(this,function(t){switch(t.label){case 0:return[4,this.getFetchFunc()(this.path,this.requestInit)];case 1:if(!(e=t.sent()).ok)throw new Error(&quot;Request to &quot;+this.path+&quot; failed with status code &quot;+e.status+&quot;. Please verify this URL points to the model JSON of the model to load.&quot;);t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e.json()];case 3:return n=t.sent(),[3,5];case 4:throw t.sent(),r=&quot;Failed to parse model JSON of response from &quot;+this.path+&quot;.&quot;,this.path.endsWith(&quot;.pb&quot;)?r+=&quot; Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the &#39;pb2json&#39;NPM script in the tensorflow/tfjs-converter repository.&quot;:r+=&quot; Please make sure the server is serving valid JSON for this request.&quot;,new Error(r);case 5:if(o=n.modelTopology,i=n.weightsManifest,null==o&amp;&amp;null==i)throw new Error(&quot;The JSON from HTTP path &quot;+this.path+&quot; contains neither model topology or manifest for weights.&quot;);return null==i?[3,7]:[4,this.loadWeights(i)];case 6:u=t.sent(),a=u[0],s=u[1],t.label=7;case 7:return[2,{modelTopology:o,weightSpecs:a,weightData:s}]}})})},t.prototype.loadWeights=function(v){return m(this,void 0,void 0,function(){var o,i,a,s,u,c,l,h,p,f,d;return R(this,function(t){switch(t.label){case 0:for(o=Array.isArray(this.path)?this.path[1]:this.path,r=n=void 0,n=(e=o).lastIndexOf(&quot;/&quot;),r=e.lastIndexOf(&quot;?&quot;),i=[e.substring(0,n)+&quot;/&quot;,n&lt;r?e.substring(r):&quot;&quot;],a=i[0],s=i[1],u=this.weightPathPrefix||a,c=[],l=0,h=v;l&lt;h.length;l++)p=h[l],c.push.apply(c,p.weights);return f=[],v.forEach(function(t){t.paths.forEach(function(t){f.push(u+t+s)})}),[4,Rl(f,{requestInit:this.requestInit,fetchFunc:this.getFetchFunc(),onProgress:this.onProgress})];case 1:return d=t.sent(),[2,[c,Xc(d)]]}var e,n,r})})},t.prototype.getFetchFunc=function(){return this.fetchFunc},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function Il(t){return null!=t.match(kl.URL_SCHEME_REGEX)}var Tl=function(t,e){return&quot;undefined&quot;==typeof fetch?null:(Array.isArray(t)?t.every(function(t){return Il(t)}):Il(t))?Al(t,{onProgress:e}):null};function Al(t,e){return new kl(t,e)}Jc.registerSaveRouter(Tl),Jc.registerLoadRouter(Tl);var Dl=function(){function t(t,e,n){this.modelTopology=t,this.weightSpecs=e,this.weightData=n}return t.prototype.load=function(){return m(this,void 0,void 0,function(){var e;return R(this,function(t){return e={},null!=this.modelTopology&amp;&amp;(e=n({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&amp;&amp;0&lt;this.weightSpecs.length&amp;&amp;(e=n({weightSpecs:this.weightSpecs},e)),null!=this.weightData&amp;&amp;0&lt;this.weightData.byteLength&amp;&amp;(e=n({weightData:this.weightData},e)),[2,e]})})},t}(),Ml=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(e){return m(this,void 0,void 0,function(){return R(this,function(t){return[2,this.saveHandler(e)]})})},t}();var Ol=Object.freeze({browserFiles:function(t){return new _l(t)},browserHTTPRequest:Al,concatenateArrayBuffers:Xc,decodeWeights:jc,encodeWeights:function(i){return m(this,void 0,void 0,function(){var e,n,r,o;return R(this,function(t){switch(t.label){case 0:for(r in e=[],n=[],i){if(&quot;float32&quot;!==(o=i[r]).dtype&amp;&amp;&quot;int32&quot;!==o.dtype&amp;&amp;&quot;bool&quot;!==o.dtype)throw new Error(&quot;Unsupported dtype in weight &#39;&quot;+r+&quot;&#39;: &quot;+o.dtype);e.push({name:r,shape:o.shape,dtype:o.dtype}),n.push(o.data())}return[4,Promise.all(n)];case 1:return[2,{data:function(t){if(null===t)throw new Error(&quot;Invalid input value: &quot;+JSON.stringify(t));var e=0,n=[];t.forEach(function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error(&quot;Unsupported TypedArray subtype: &quot;+t.constructor.name)});var r=new Uint8Array(e),o=0;return n.forEach(function(t){r.set(new Uint8Array(t.buffer),o),o+=t.byteLength}),r.buffer}(t.sent()),specs:e}]}})})},fromMemory:function(t,e,n){return new Dl(t,e,n)},getLoadHandlers:function(t,e){return Jc.getLoadHandlers(t)},getModelArtifactsInfoForJSON:Qc,getSaveHandlers:function(t){return Jc.getSaveHandlers(t)},isHTTPScheme:Il,loadWeights:function(e,n,r,o){return void 0===n&amp;&amp;(n=&quot;&quot;),m(this,void 0,void 0,function(){return R(this,function(t){return[2,Nl(function(t){return Rl(t,{requestInit:o})})(e,n,r)]})})},registerLoadRouter:function(t){return Jc.registerLoadRouter(t)},registerSaveRouter:function(t){return Jc.registerSaveRouter(t)},weightsLoaderFactory:Nl,withSaveHandler:function(t){return new Ml(t)},copyModel:function(e,n){return m(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return[4,nl(e,n,!1)];case 1:return[2,t.sent()]}})})},listModels:function(){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s;return R(this,function(t){switch(t.label){case 0:e=tl.getSchemes(),n={},r=0,o=e,t.label=1;case 1:return r&lt;o.length?(i=o[r],[4,tl.getManager(i).listModels()]):[3,4];case 2:for(s in a=t.sent())n[i+Zc+s]=a[s];t.label=3;case 3:return r++,[3,1];case 4:return[2,n]}})})},moveModel:function(e,n){return m(this,void 0,void 0,function(){return R(this,function(t){switch(t.label){case 0:return[4,nl(e,n,!0)];case 1:return[2,t.sent()]}})})},removeModel:function(n){return m(this,void 0,void 0,function(){var e;return R(this,function(t){switch(t.label){case 0:return e=el(n),[4,tl.getManager(e.scheme).removeModel(e.path)];case 1:return[2,t.sent()]}})})}});var Pl=Fe({confusionMatrix_:function(t,e,n){var r=re(t,&quot;labels&quot;,&quot;confusionMatrix&quot;),o=re(e,&quot;predictions&quot;,&quot;confusionMatrix&quot;);D(null==n||0&lt;n&amp;&amp;Number.isInteger(n),function(){return&quot;If provided, numClasses must be a positive integer, but got &quot;+n}),D(1===r.rank,function(){return&quot;Expected the rank of labels to be 1, but got &quot;+r.rank}),D(1===o.rank,function(){return&quot;Expected the rank of predictions to be 1, but got &quot;+o.rank}),D(r.shape[0]===o.shape[0],function(){return&quot;Mismatch in the number of examples: &quot;+r.shape[0]+&quot; vs. &quot;+o.shape[0]+&quot;. Labels and predictions should have the same number of elements.&quot;}),D(0&lt;n&amp;&amp;Number.isInteger(n),function(){return&quot;numClasses is required to be a positive integer, but got &quot;+n});var i=Yi(r.asType(&quot;int32&quot;),n),a=Yi(o.asType(&quot;int32&quot;),n);return i.transpose().matMul(a).asType(&quot;int32&quot;)}}),Fl=Object.freeze({confusionMatrix:Pl});var Ll=Fe({fromPixels_:function(t,e){if(void 0===e&amp;&amp;(e=3),4&lt;e)throw new Error(&quot;Cannot construct Tensor with more than 4 channels from pixels.&quot;);return Zt.engine.fromPixels(t,e)}}),Bl=Object.freeze({toPixels:function(b,E){return m(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l,h,p,f,d,v,m,g,y,x,w;return R(this,function(t){switch(t.label){case 0:if(e=re(b,&quot;img&quot;,&quot;toPixels&quot;),b instanceof dt||(e=e.toInt()),2!==e.rank&amp;&amp;3!==e.rank)throw new Error(&quot;toPixels only supports rank 2 or 3 tensors, got rank &quot;+e.rank+&quot;.&quot;);if(n=e.shape.slice(0,2),r=n[0],o=n[1],4&lt;(i=2===e.rank?1:e.shape[2])||2===i)throw new Error(&quot;toPixels only supports depth of size 1, 3 or 4 but got &quot;+i);return a=e.min(),s=e.max(),[4,a.data()];case 1:return u=t.sent()[0],[4,s.data()];case 2:if(c=t.sent()[0],a.dispose(),s.dispose(),&quot;float32&quot;===e.dtype){if(u&lt;0||1&lt;c)throw new Error(&quot;Tensor values for a float32 Tensor must be in the range [0 - 1] but got range [&quot;+u+&quot; - &quot;+c+&quot;].&quot;)}else{if(&quot;int32&quot;!==e.dtype)throw new Error(&quot;Unsupported type for toPixels: &quot;+e.dtype+&quot;. Please use float32 or int32 tensors.&quot;);if(u&lt;0||255&lt;c)throw new Error(&quot;Tensor values for a int32 Tensor must be in the range [0 - 255] but got range [&quot;+u+&quot; - &quot;+c+&quot;].&quot;)}return[4,e.data()];case 3:for(l=t.sent(),h=&quot;float32&quot;===e.dtype?255:1,p=new Uint8ClampedArray(o*r*4),f=0;f&lt;r*o;++f)g=m=v=d=void 0,1===i?(d=l[f]*h,v=l[f]*h,m=l[f]*h,g=255):3===i?(d=l[3*f]*h,v=l[3*f+1]*h,m=l[3*f+2]*h,g=255):4===i&amp;&amp;(d=l[4*f]*h,v=l[4*f+1]*h,m=l[4*f+2]*h,g=l[4*f+3]*h),p[0+(y=4*f)]=Math.round(d),p[y+1]=Math.round(v),p[y+2]=Math.round(m),p[y+3]=Math.round(g);return null!=E&amp;&amp;(E.width=o,E.height=r,x=E.getContext(&quot;2d&quot;),w=new ImageData(p,o,r),x.putImageData(w,0,0)),e!==b&amp;&amp;e.dispose(),[2,p]}})})},fromPixels:Ll}),Wl=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),zl=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&amp;&amp;(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Ul(t){D(null!=t.className,function(){return&quot;Class being registered does not have the static className property defined.&quot;}),D(&quot;string&quot;==typeof t.className,function(){return&quot;className is required to be a string, but got type &quot;+typeof t.className}),D(0&lt;t.className.length,function(){return&quot;Class being registered has an empty-string as its className, which is disallowed.&quot;}),zl.register(t)}var Gl=Object.freeze({Serializable:Wl,SerializationMap:zl,registerClass:Ul});function Vl(t,e,n){return null==n&amp;&amp;(n=Zt.get(&quot;TEST_EPSILON&quot;)),Hl(t,&quot;number&quot;==typeof e||&quot;boolean&quot;==typeof e?[e]:e,function(t,e){return ql(t,Number(e),n)})}function Hl(t,e,n){if(t instanceof dt||e instanceof dt){if(t instanceof dt&amp;&amp;e instanceof dt){if(t.dtype!==e.dtype)throw new Error(&quot;Arrays are of different type actual: &quot;+t.dtype+&quot; vs expected: &quot;+e.dtype+&quot;.&quot;);if(!E(t.shape,e.shape))throw new Error(&quot;Arrays are of different shape actual: &quot;+t.shape+&quot; vs expected: &quot;+e.shape+&quot;.&quot;)}}else{var r=t.constructor.name,o=e.constructor.name;if(r!==o)throw new Error(&quot;Arrays are of different type actual: &quot;+r+&quot; vs expected: &quot;+o)}var i,a;if(i=t instanceof dt?t.dataSync():t,a=e instanceof dt?e.dataSync():e,i.length!==a.length)throw new Error(&quot;Arrays have different lengths actual: &quot;+i.length+&quot; vs expected: &quot;+a.length+&quot;.\nActual:   &quot;+i+&quot;.\nExpected: &quot;+a+&quot;.&quot;);for(var s=0;s&lt;a.length;++s){var u=i[s],c=a[s];if(!n(u,c))throw new Error(&quot;Arrays differ: actual[&quot;+s+&quot;] = &quot;+u+&quot;, expected[&quot;+s+&quot;] = &quot;+c+&quot;.\nActual:   &quot;+i+&quot;.\nExpected: &quot;+a+&quot;.&quot;)}}function ql(t,e,n){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)&gt;n)}var jl=Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},PACKED_ENVS:{WEBGL_PACK:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},ALL_ENVS:{},expectArraysClose:Vl,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n=&quot;string&quot;==typeof e||&quot;number&quot;==typeof e||&quot;boolean&quot;==typeof e?[e]:e;return t instanceof dt&amp;&amp;&quot;string&quot;===t.dtype||e instanceof dt&amp;&amp;&quot;string&quot;===e.dtype||Array.isArray(t)&amp;&amp;V(t[0])||Array.isArray(e)&amp;&amp;V(e[0])?Hl(t,n,function(t,e){return t==e}):Vl(t,e,0)},expectNumbersClose:function(t,e,n){if(null==n&amp;&amp;(n=Zt.get(&quot;TEST_EPSILON&quot;)),!ql(t,e,n))throw new Error(&quot;Numbers differ: actual === &quot;+t+&quot;, expected === &quot;+e)},expectValuesInRange:function(t,e,n){var r;r=t instanceof dt?t.dataSync():t;for(var o=0;o&lt;r.length;o++)if(r[o]&lt;e||r[o]&gt;n)throw new Error(&quot;Value out of range:&quot;+r[o]+&quot; low: &quot;+e+&quot;, high: &quot;+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),$l=Object.freeze({gpgpu_util:Do,webgl_util:co,MathBackendWebGL:va,GPGPUContext:Mo}),Kl=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return s(e,t),e.prototype.minimize=function(t,e,n){void 0===e&amp;&amp;(e=!1);var r=this.computeGradients(t,n),o=r.value,i=r.grads;return this.applyGradients(i),Object.keys(i).forEach(function(t){return i[t].dispose()}),e?o:(o.dispose(),null)},e.prototype.computeGradients=function(t,e){return ie(t,e)},e.prototype.dispose=function(){},e}(Wl);Object.defineProperty(Kl,Symbol.hasInstance,{value:function(t){return null!=t.minimize&amp;&amp;null!=t.computeGradients&amp;&amp;null!=t.applyGradients}});var Xl=function(o){function t(t,e,n){void 0===n&amp;&amp;(n=null);var r=o.call(this)||this;return r.learningRate=t,r.rho=e,r.epsilon=n,r.accumulatedGrads={},r.accumulatedUpdates={},r.c=ce(Ve(-t)),r.rhoScalar=ce(Ve(e)),r.oneMinusRho=ce(Ve(1-e)),null===n&amp;&amp;(n=Zt.get(&quot;EPSILON&quot;)),r.epsilonScalar=ce(Ve(n)),r}return s(t,o),t.prototype.applyGradients=function(t){var c=this,e=function(o){var i=Zt.engine.registeredVariables[o];null==n.accumulatedGrads[o]&amp;&amp;ue(function(){c.accumulatedGrads[o]=nn(i).variable(!1)}),null==n.accumulatedUpdates[o]&amp;&amp;ue(function(){c.accumulatedUpdates[o]=nn(i).variable(!1)});var a=t[o],s=n.accumulatedGrads[o],u=n.accumulatedUpdates[o];ue(function(){var t=c.rhoScalar.mul(s).add(c.oneMinusRho.mul(a.square())),e=u.add(c.epsilonScalar).sqrt().div(s.add(c.epsilonScalar).sqrt()).mul(a),n=c.rhoScalar.mul(u).add(c.oneMinusRho.mul(e.square()));c.accumulatedGrads[o].assign(t),c.accumulatedUpdates[o].assign(n);var r=c.c.mul(e).add(i);i.assign(r)})},n=this;for(var r in t)e(r)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&amp;&amp;(Object.keys(this.accumulatedUpdates).forEach(function(t){return e.accumulatedUpdates[t].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},t.className=&quot;AdadeltaOptimizer&quot;,t}(Kl);Ul(Xl);var Yl=function(r){function t(t,e){void 0===e&amp;&amp;(e=.1);var n=r.call(this)||this;return n.learningRate=t,n.initialAccumulatorValue=e,n.accumulatedGrads={},n.c=ce(Ve(-t)),n.epsilon=ce(Ve(Zt.get(&quot;EPSILON&quot;))),n}return s(t,r),t.prototype.applyGradients=function(t){var a=this,e=function(n){var r=Zt.engine.registeredVariables[n];null==s.accumulatedGrads[n]&amp;&amp;ue(function(){a.accumulatedGrads[n]=Je(r.shape,a.initialAccumulatorValue).variable(!1)});var o=t[n],i=s.accumulatedGrads[n];ue(function(){var t=i.add(o.square());a.accumulatedGrads[n].assign(t);var e=a.c.mul(o.div(t.add(a.epsilon).sqrt())).add(r);r.assign(e)})},s=this;for(var n in t)e(n)},t.prototype.dispose=function(){var e=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&amp;&amp;Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},t.className=&quot;AdagradOptimizer&quot;,t}(Kl);Ul(Yl);var Ql=function(i){function t(t,e,n,r){void 0===r&amp;&amp;(r=null);var o=i.call(this)||this;return o.learningRate=t,o.beta1=e,o.beta2=n,o.epsilon=r,o.accumulatedFirstMoment={},o.accumulatedSecondMoment={},o.c=ce(Ve(-t)),o.beta1Scalar=ce(Ve(e)),o.beta2Scalar=ce(Ve(n)),ue(function(){o.accBeta1=Ve(e).variable(),o.accBeta2=Ve(n).variable()}),o.oneMinusBeta1=ce(Ve(1-e)),o.oneMinusBeta2=ce(Ve(1-n)),o.one=ce(Ve(1)),null===r&amp;&amp;(r=Zt.get(&quot;EPSILON&quot;)),o.epsScalar=ce(Ve(r)),o}return s(t,i),t.prototype.applyGradients=function(f){var d=this;ue(function(){var t=d.one.sub(d.accBeta1),e=d.one.sub(d.accBeta2);for(var n in f){var r=Zt.engine.registeredVariables[n];if(null==d.accumulatedFirstMoment[n]){var o=!1;d.accumulatedFirstMoment[n]=nn(r).variable(o)}null==d.accumulatedSecondMoment[n]&amp;&amp;(o=!1,d.accumulatedSecondMoment[n]=nn(r).variable(o));var i=f[n],a=d.accumulatedFirstMoment[n],s=d.accumulatedSecondMoment[n],u=d.beta1Scalar.mul(a).add(d.oneMinusBeta1.mul(i)),c=d.beta2Scalar.mul(s).add(d.oneMinusBeta2.mul(i.square())),l=u.div(t),h=c.div(e);d.accumulatedFirstMoment[n].assign(u),d.accumulatedSecondMoment[n].assign(c);var p=d.c.mul(l.div(d.epsScalar.add(h.sqrt()))).add(r);r.assign(p)}d.accBeta1.assign(d.accBeta1.mul(d.beta1Scalar)),d.accBeta2.assign(d.accBeta2.mul(d.beta2Scalar))})},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&amp;&amp;Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedSecondMoment&amp;&amp;Object.keys(this.accumulatedSecondMoment).forEach(function(t){return e.accumulatedSecondMoment[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},t.className=&quot;AdamOptimizer&quot;,t}(Kl);Ul(Ql);var Jl=function(a){function t(t,e,n,r,o){void 0===r&amp;&amp;(r=null),void 0===o&amp;&amp;(o=0);var i=a.call(this)||this;return i.learningRate=t,i.beta1=e,i.beta2=n,i.epsilon=r,i.decay=o,i.accumulatedFirstMoment={},i.accumulatedWeightedInfNorm={},i.c=ce(Ve(-t)),i.beta1Scalar=ce(Ve(e)),i.beta2Scalar=ce(Ve(n)),i.decayScalar=ce(Ve(o)),ue(function(){i.iteration=Ve(0).variable(),i.accBeta1=Ve(e).variable()}),i.oneMinusBeta1=ce(Ve(1-e)),i.one=ce(Ve(1)),null===r&amp;&amp;(r=Zt.get(&quot;EPSILON&quot;)),i.epsScalar=ce(Ve(r)),i}return s(t,a),t.prototype.applyGradients=function(f){var d=this;ue(function(){var t=d.one.sub(d.accBeta1),e=d.c.div(d.one.add(d.decayScalar.mul(d.iteration)));for(var n in f){var r=Zt.engine.registeredVariables[n];if(null==d.accumulatedFirstMoment[n]){var o=!1;d.accumulatedFirstMoment[n]=nn(r).variable(o)}null==d.accumulatedWeightedInfNorm[n]&amp;&amp;(o=!1,d.accumulatedWeightedInfNorm[n]=nn(r).variable(o));var i=f[n],a=d.accumulatedFirstMoment[n],s=d.accumulatedWeightedInfNorm[n],u=d.beta1Scalar.mul(a).add(d.oneMinusBeta1.mul(i)),c=d.beta2Scalar.mul(s),l=i.abs(),h=c.maximum(l);d.accumulatedFirstMoment[n].assign(u),d.accumulatedWeightedInfNorm[n].assign(h);var p=e.div(t).mul(u.div(d.epsScalar.add(h))).add(r);r.assign(p)}d.iteration.assign(d.iteration.add(d.one)),d.accBeta1.assign(d.accBeta1.mul(d.beta1Scalar))})},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&amp;&amp;Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedWeightedInfNorm&amp;&amp;Object.keys(this.accumulatedWeightedInfNorm).forEach(function(t){return e.accumulatedWeightedInfNorm[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},t.className=&quot;AdamaxOptimizer&quot;,t}(Kl);Ul(Jl);var Zl=function(n){function t(t){var e=n.call(this)||this;return e.learningRate=t,e.setLearningRate(t),e}return s(t,n),t.prototype.applyGradients=function(r){var o=this;Object.keys(r).forEach(function(t){var e=r[t],n=Zt.engine.registeredVariables[t];ue(function(){var t=o.c.mul(e).add(n);n.assign(t)})})},t.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&amp;&amp;this.c.dispose(),this.c=ce(Ve(-t))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(t,e){return new t(e.learningRate)},t.className=&quot;SGDOptimizer&quot;,t}(Kl);Ul(Zl);var th=function(o){function t(t,e,n){void 0===n&amp;&amp;(n=!1);var r=o.call(this,t)||this;return r.learningRate=t,r.momentum=e,r.useNesterov=n,r.m=Ve(r.momentum),r.accumulations={},r}return s(t,o),t.prototype.applyGradients=function(t){var a=this,e=function(n){var r=Zt.engine.registeredVariables[n];null==s.accumulations[n]&amp;&amp;ue(function(){a.accumulations[n]=nn(r).variable(!1)});var o=s.accumulations[n],i=t[n];ue(function(){var t,e=a.m.mul(o).add(i);t=a.useNesterov?a.c.mul(i.add(e.mul(a.m))).add(r):a.c.mul(e).add(r),a.accumulations[n].assign(e),r.assign(t)})},s=this;for(var n in t)e(n)},t.prototype.dispose=function(){if(o.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var t in this.accumulations)this.accumulations[t].dispose()},t.prototype.setMomentum=function(t){this.momentum=t},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},t.className=&quot;MomentumOptimizer&quot;,t}(Zl);Ul(th);var eh=function(a){function t(t,e,n,r,o){void 0===e&amp;&amp;(e=.9),void 0===n&amp;&amp;(n=0),void 0===r&amp;&amp;(r=null),void 0===o&amp;&amp;(o=!1);var i=a.call(this)||this;return i.learningRate=t,i.decay=e,i.momentum=n,i.epsilon=r,i.accumulatedMeanSquares={},i.accumulatedMeanGrads={},i.accumulatedMoments={},i.c=ce(Ve(t)),i.decayScalar=ce(Ve(e)),i.momentumScalar=ce(Ve(n)),i.oneMinusDecay=ce(Ve(1-e)),i.centered=o,null===r&amp;&amp;(r=Zt.get(&quot;EPSILON&quot;)),i.epsilonScalar=ce(Ve(r)),i}return s(t,a),t.prototype.applyGradients=function(t){var h=this,e=function(i){var a=Zt.engine.registeredVariables[i];null==n.accumulatedMeanSquares[i]&amp;&amp;ue(function(){h.accumulatedMeanSquares[i]=nn(a).variable(!1)}),null==n.accumulatedMeanGrads[i]&amp;&amp;n.centered&amp;&amp;ue(function(){h.accumulatedMeanGrads[i]=nn(a).variable(!1)}),null==n.accumulatedMoments[i]&amp;&amp;ue(function(){h.accumulatedMoments[i]=nn(a).variable(!1)});var s=n.accumulatedMeanSquares[i],u=n.accumulatedMeanGrads[i],c=n.accumulatedMoments[i],l=t[i];ue(function(){var t=h.decayScalar.mul(s).add(h.oneMinusDecay.mul(l.square()));if(h.centered){var e=h.decayScalar.mul(u).add(h.oneMinusDecay.mul(l)),n=h.momentumScalar.mul(c).add(h.c.mul(l).div(t.sub(e.square().add(h.epsilonScalar)).sqrt()));h.accumulatedMeanSquares[i].assign(t),h.accumulatedMeanGrads[i].assign(e),h.accumulatedMoments[i].assign(n);var r=a.sub(n);a.assign(r)}else{var o=h.decayScalar.mul(s).add(h.oneMinusDecay.mul(l.square()));n=h.momentumScalar.mul(c).add(h.c.mul(l).div(o.add(h.epsilonScalar).sqrt())),h.accumulatedMeanSquares[i].assign(o),h.accumulatedMoments[i].assign(n),r=a.sub(n),a.assign(r)}})},n=this;for(var r in t)e(r)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&amp;&amp;Object.keys(this.accumulatedMeanSquares).forEach(function(t){return e.accumulatedMeanSquares[t].dispose()}),null!=this.accumulatedMeanGrads&amp;&amp;this.centered&amp;&amp;Object.keys(this.accumulatedMeanGrads).forEach(function(t){return e.accumulatedMeanGrads[t].dispose()}),null!=this.accumulatedMoments&amp;&amp;Object.keys(this.accumulatedMoments).forEach(function(t){return e.accumulatedMoments[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},t.className=&quot;RMSPropOptimizer&quot;,t}(Kl);Ul(eh);var nh=function(){function t(){}return t.sgd=function(t){return new Zl(t)},t.momentum=function(t,e,n){return void 0===n&amp;&amp;(n=!1),new th(t,e,n)},t.rmsprop=function(t,e,n,r,o){return void 0===e&amp;&amp;(e=.9),void 0===n&amp;&amp;(n=0),void 0===r&amp;&amp;(r=null),void 0===o&amp;&amp;(o=!1),new eh(t,e,n,r,o)},t.adam=function(t,e,n,r){return void 0===t&amp;&amp;(t=.001),void 0===e&amp;&amp;(e=.9),void 0===n&amp;&amp;(n=.999),void 0===r&amp;&amp;(r=null),new Ql(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&amp;&amp;(t=.001),void 0===e&amp;&amp;(e=.95),void 0===n&amp;&amp;(n=null),new Xl(t,e,n)},t.adamax=function(t,e,n,r,o){return void 0===t&amp;&amp;(t=.002),void 0===e&amp;&amp;(e=.9),void 0===n&amp;&amp;(n=.999),void 0===r&amp;&amp;(r=null),void 0===o&amp;&amp;(o=0),new Jl(t,e,n,r,o)},t.adagrad=function(t,e){return void 0===e&amp;&amp;(e=.1),new Yl(t,e)},t}(),rh={sgd:nh.sgd,momentum:nh.momentum,adadelta:nh.adadelta,adagrad:nh.adagrad,rmsprop:nh.rmsprop,adamax:nh.adamax,adam:nh.adam},oh=jt.setBackend,ih=jt.getBackend,ah=jt.disposeVariables,sh=jt.memory;pt=Gc;var uh=Object.freeze({setBackend:oh,getBackend:ih,disposeVariables:ah,memory:sh,version_core:&quot;1.0.3&quot;,nextFrame:function(){return new Promise(function(t){return Hc(function(){return t()})})},enableProdMode:Kt,enableDebugMode:Xt,disableDeprecationWarnings:Yt,deprecationWarn:Qt,browser:Bl,environment:te,io:Ol,math:Fl,serialization:Gl,test_util:jl,util:t,webgl:$l,tensor_util:Pt,AdadeltaOptimizer:Xl,AdagradOptimizer:Yl,AdamOptimizer:Ql,AdamaxOptimizer:Jl,MomentumOptimizer:th,Optimizer:Kl,RMSPropOptimizer:eh,SGDOptimizer:Zl,Tensor:dt,TensorBuffer:lt,variable:Rt,Variable:vt,get Rank(){return mt},get Reduction(){return mc},ENV:Zt,Environment:jt,KernelBackend:on,DataStorage:rn,image:Wc,linalg:Dc,losses:kc,spectral:dc,fused:Uc,op:Fe,batchNormalization2d:os,batchNormalization3d:is,batchNormalization4d:as,batchNormalization:ss,batchNorm:us,batchNorm2d:cs,batchNorm3d:ls,batchNorm4d:hs,complex:We,real:ze,imag:Ue,concat:_i,concat1d:Si,concat2d:Ri,concat3d:Ni,concat4d:ki,split:Ii,conv1d:_s,conv2d:Ss,conv3d:Rs,conv2dDerFilter:Ns,depthwiseConv2d:ks,separableConv2d:Is,conv2dTranspose:Ts,matMul:As,dot:Ds,outerProduct:Ms,reverse:Os,reverse1d:Ps,reverse2d:Fs,reverse3d:Ls,reverse4d:Bs,maxPool:Us,avgPool:Gs,pool:Vs,slice:Hs,slice1d:qs,slice2d:js,slice3d:$s,slice4d:Ks,abs:ga,acos:ya,acosh:xa,asin:wa,asinh:ba,atan:Ea,atanh:Ca,ceil:_a,clipByValue:Sa,cos:Ra,cosh:Na,erf:ka,exp:Ia,expm1:Ta,floor:Aa,log:Da,log1p:Ma,logSigmoid:Oa,neg:Pa,reciprocal:Fa,round:La,rsqrt:Ba,sigmoid:Wa,sign:za,isNaN:Ua,isInf:Ga,isFinite:Va,sin:Ha,sinh:qa,softplus:ja,sqrt:$a,square:Ka,step:Xa,tan:Ya,tanh:Qa,all:Ys,any:Qs,argMax:Js,argMin:Zs,logSumExp:tu,max:eu,mean:nu,min:ru,moments:ou,sum:iu,prod:au,equal:su,equalStrict:uu,greater:cu,greaterEqual:lu,greaterEqualStrict:hu,greaterStrict:pu,less:fu,lessEqual:du,lessEqualStrict:vu,lessStrict:mu,notEqual:gu,notEqualStrict:yu,add:xu,addN:wu,addStrict:bu,atan2:Eu,div:Cu,divStrict:_u,floorDiv:Su,maximum:Ru,maximumStrict:Nu,minimum:ku,minimumStrict:Iu,mod:Tu,modStrict:Au,mul:Du,mulStrict:Mu,pow:Ou,powStrict:Pu,squaredDifference:Fu,squaredDifferenceStrict:Lu,sub:Bu,subStrict:Wu,elu:ju,leakyRelu:$u,prelu:Ku,relu:Xu,selu:Yu,logicalAnd:zu,logicalNot:Uu,logicalOr:Gu,logicalXor:Vu,where:Hu,whereAsync:qu,buffer:zi,print:Ui,batchToSpaceND:Gi,cast:Vi,clone:Hi,cumsum:qi,depthToSpace:ji,expandDims:$i,eye:Ki,multinomial:Xi,oneHot:Yi,pad:Qi,pad1d:Ji,pad2d:Zi,pad3d:ta,pad4d:ea,rand:na,randomNormal:ra,randomUniform:oa,reshape:ia,spaceToBatchND:aa,squeeze:sa,stack:ua,tile:ca,truncatedNormal:la,unstack:ha,setdiff1dAsync:pa,fill:Je,linspace:Ze,ones:Ye,range:tn,scalar:Ve,tensor:Ge,tensor1d:He,tensor2d:qe,tensor3d:je,tensor4d:$e,tensor5d:Ke,tensor6d:Xe,zeros:Qe,onesLike:en,zerosLike:nn,transpose:Qu,softmax:Le,logSoftmax:Be,localResponseNormalization:Ju,norm:Zu,gather:nc,unsortedSegmentSum:rc,basicLSTMCell:oc,multiRNNCell:ic,movingAverage:ac,stridedSlice:sc,topk:uc,scatterND:cc,fft:lc,ifft:hc,rfft:pc,irfft:fc,sparseToDense:vc,gatherND:yc,train:rh,tidy:ue,keep:ce,dispose:le,time:he,profile:pe,customGrad:ae,grad:function(i){return D(j(i),function(){return&quot;The f passed in grad(f) must be a function&quot;}),function(t,e){var r=re(t,&quot;x&quot;,&quot;tf.grad&quot;,null),o=null!=e?re(e,&quot;dy&quot;,&quot;tf.grad&quot;):null;return Zt.engine.tidy(function(){var t=Zt.engine.gradients(function(){return i(r)},[r],o),e=t.value,n=t.grads;return null!=o&amp;&amp;g(e.shape,o.shape,&quot;The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)&quot;),se(n),n[0]})}},grads:function(i){return D(j(i),function(){return&quot;The f passed in grads(f) must be a function&quot;}),function(t,e){D(Array.isArray(t),function(){return&quot;The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s&quot;});var r=oe(t,&quot;args&quot;,&quot;tf.grads&quot;,null),o=null!=e?re(e,&quot;dy&quot;,&quot;tf.grads&quot;):null;return Zt.engine.tidy(function(){var t=Zt.engine.gradients(function(){return i.apply(void 0,r)},r,o),e=t.value,n=t.grads;return null!=o&amp;&amp;g(e.shape,o.shape,&quot;The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])&quot;),se(n),n})}},valueAndGrad:function(i){return D(j(i),function(){return&quot;The f passed in valueAndGrad(f) must be a function&quot;}),function(t,e){D(t instanceof dt,function(){return&quot;The x passed in valueAndGrad(f)(x) must be a tensor&quot;}),D(null==e||e instanceof dt,function(){return&quot;The dy passed in valueAndGrad(f)(x, dy) must be a tensor&quot;});var n=Zt.engine.gradients(function(){return i(t)},[t],e),r=n.grads,o=n.value;return se(r),{grad:r[0],value:o}}},valueAndGrads:function(r){return D(j(r),function(){return&quot;The f passed in valueAndGrads(f) must be a function&quot;}),function(t,e){D(Array.isArray(t)&amp;&amp;t.every(function(t){return t instanceof dt}),function(){return&quot;The args passed in valueAndGrads(f)(args) must be array of tensors&quot;}),D(null==e||e instanceof dt,function(){return&quot;The dy passed in valueAndGrads(f)(args, dy) must be a tensor&quot;});var n=Zt.engine.gradients(function(){return r.apply(void 0,t)},t,e);return null!=e&amp;&amp;g(n.value.shape,e.shape,&quot;The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])&quot;),se(n.grads),n}},variableGrads:ie}),ch=function(){function t(t,e){if(!Eh(t)||!Eh(e))throw new Error(&quot;Dimensions.constructor - expected width and height to be valid numbers, instead have &quot;+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(t.prototype,&quot;width&quot;,{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;height&quot;,{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}(),lh=function(){function e(t,e){this._x=t,this._y=e}return Object.defineProperty(e.prototype,&quot;x&quot;,{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,&quot;y&quot;,{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}();function hh(t,e){return t instanceof dt&amp;&amp;t.shape.length===e}function ph(t){return hh(t,2)}function fh(t){return hh(t,3)}function dh(t){return hh(t,4)}function vh(t){return t%1!=0}function mh(t){return t%2==0}function gh(t,e){void 0===e&amp;&amp;(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function yh(t){return t&amp;&amp;t.width&amp;&amp;t.height}function xh(t,e){var n=t.width,r=t.height,o=e/Math.max(r,n);return new ch(Math.round(n*o),Math.round(r*o))}function wh(t){return t.reduce(function(t,e){return t.add(e)},new lh(0,0)).div(new lh(t.length,t.length))}function bh(t,n,r){return Array(t).fill(0).map(function(t,e){return n+e*r})}function Eh(t){return!!t&amp;&amp;t!==1/0&amp;&amp;t!==-1/0&amp;&amp;!isNaN(t)||0===t}function Ch(t){return Eh(t)&amp;&amp;0&lt;=t&amp;&amp;t&lt;=1}var _h,Sh=function(){function l(t,e){void 0===e&amp;&amp;(e=!0);var n=t||{},r=[n.left,n.top,n.right,n.bottom].every(Eh),o=[n.x,n.y,n.width,n.height].every(Eh);if(!o&amp;&amp;!r)throw new Error(&quot;Box.constructor - expected box to be IBoundingBox | IRect, instead have &quot;+JSON.stringify(n));var i=o?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top],a=i[0],s=i[1],u=i[2],c=i[3];l.assertIsValidBox({x:a,y:s,width:u,height:c},&quot;Box.constructor&quot;,e),this._x=a,this._y=s,this._width=u,this._height=c}return l.isRect=function(t){return!!t&amp;&amp;[t.x,t.y,t.width,t.height].every(Eh)},l.assertIsValidBox=function(t,e,n){if(void 0===n&amp;&amp;(n=!1),!l.isRect(t))throw new Error(e+&quot; - invalid box: &quot;+JSON.stringify(t)+&quot;, expected object with properties x, y, width, height&quot;);if(!n&amp;&amp;(t.width&lt;0||t.height&lt;0))throw new Error(e+&quot; - width (&quot;+t.width+&quot;) and height (&quot;+t.height+&quot;) must be positive numbers&quot;)},Object.defineProperty(l.prototype,&quot;x&quot;,{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;y&quot;,{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;width&quot;,{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;height&quot;,{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;left&quot;,{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;top&quot;,{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;right&quot;,{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;bottom&quot;,{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;area&quot;,{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;topLeft&quot;,{get:function(){return new lh(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;topRight&quot;,{get:function(){return new lh(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;bottomLeft&quot;,{get:function(){return new lh(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,&quot;bottomRight&quot;,{get:function(){return new lh(this.right,this.bottom)},enumerable:!0,configurable:!0}),l.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(t){return Math.round(t)});return new l({x:t[0],y:t[1],width:t[2],height:t[3]})},l.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(t){return Math.floor(t)});return new l({x:t[0],y:t[1],width:t[2],height:t[3]})},l.prototype.toSquare=function(){var t=this.x,e=this.y,n=this.width,r=this.height,o=Math.abs(n-r);return n&lt;r&amp;&amp;(t-=o/2,n+=o),r&lt;n&amp;&amp;(e-=o/2,r+=o),new l({x:t,y:e,width:n,height:r})},l.prototype.rescale=function(t){var e=yh(t)?t.width:t,n=yh(t)?t.height:t;return new l({x:this.x*e,y:this.y*n,width:this.width*e,height:this.height*n})},l.prototype.pad=function(t,e){var n=[this.x-t/2,this.y-e/2,this.width+t,this.height+e];return new l({x:n[0],y:n[1],width:n[2],height:n[3]})},l.prototype.clipAtImageBorders=function(t,e){var n=this.x,r=this.y,o=this.right,i=this.bottom,a=Math.max(n,0),s=Math.max(r,0),u=o-a,c=i-s;return new l({x:a,y:s,width:Math.min(u,t-a),height:Math.min(c,e-s)}).floor()},l.prototype.shift=function(t,e){var n=this.width,r=this.height;return new l({x:this.x+t,y:this.y+e,width:n,height:r})},l.prototype.padAtBorders=function(t,e){var n=this.width+1,r=this.height+1,o=n,i=r,a=this.left,s=this.top,u=this.right,c=this.bottom;return e&lt;u&amp;&amp;(o=-u+e+n,u=e),t&lt;c&amp;&amp;(i=-c+t+r,c=t),a&lt;1&amp;&amp;(i=2-a,a=1),s&lt;1&amp;&amp;(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:o,y:s,ey:c,x:a,ex:u,w:n,h:r}},l.prototype.calibrate=function(t){return new l({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},l}(),Rh=function(i){function t(t,e,n,r,o){return void 0===o&amp;&amp;(o=!1),i.call(this,{left:t,top:e,right:n,bottom:r},o)||this}return a(t,i),t}(Sh),Nh=function(r){function t(t,e){var n=r.call(this,t)||this;return n._label=e,n}return a(t,r),t.assertIsValidLabeledBox=function(t,e){if(Sh.assertIsValidBox(t,e),!Eh(t.label))throw new Error(e+&quot; - expected property label (&quot;+t.label+&quot;) to be a number&quot;)},Object.defineProperty(t.prototype,&quot;label&quot;,{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Sh),kh=function(){function n(t,e,n,r,o){this._imageDims=new ch(o.width,o.height),this._score=t,this._classScore=e,this._className=n,this._box=new Sh(r).rescale(this._imageDims)}return Object.defineProperty(n.prototype,&quot;score&quot;,{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;classScore&quot;,{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;className&quot;,{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;box&quot;,{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;imageDims&quot;,{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;imageWidth&quot;,{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;imageHeight&quot;,{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,&quot;relativeBox&quot;,{get:function(){return new Sh(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:e})},n}(),Ih=function(i){function t(t,e,n,r){var o=i.call(this,t,e)||this;return o._score=n,o._classScore=r,o}return a(t,i),t.assertIsValidPredictedBox=function(t,e){if(Nh.assertIsValidLabeledBox(t,e),!Ch(t.score)||!Ch(t.classScore))throw new Error(e+&quot; - expected properties score (&quot;+t.score+&quot;) and (&quot;+t.classScore+&quot;) to be a number between [0, 1]&quot;)},Object.defineProperty(t.prototype,&quot;score&quot;,{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;classScore&quot;,{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t}(Nh),Th=function(i){function t(t,e,n,r,o){return void 0===o&amp;&amp;(o=!1),i.call(this,{x:t,y:e,width:n,height:r},o)||this}return a(t,i),t}(Sh);function Ah(){var t=window.fetch||function(){throw new Error(&quot;fetch - missing fetch implementation for browser environment&quot;)};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement(&quot;canvas&quot;)},createImageElement:function(){return document.createElement(&quot;img&quot;)},fetch:t,readFile:function(){throw new Error(&quot;readFile - filesystem not available for browser environment&quot;)}}}function Dh(e){var n=&quot;&quot;;if(!e)try{e=require(&quot;fs&quot;)}catch(t){n=t.toString()}return{readFile:e?function(t){return new Promise(function(n,r){e.readFile(t,function(t,e){return t?r(t):n(e)})})}:function(){throw new Error(&quot;readFile - failed to require fs in nodejs environment with error: &quot;+n)}}}function Mh(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=global.fetch||function(){throw new Error(&quot;fetch - missing fetch implementation for nodejs environment&quot;)},r=Dh();return O({Canvas:t||function(){},CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){},Image:e||function(){},ImageData:global.ImageData||function(){},Video:global.HTMLVideoElement||function(){},createCanvasElement:function(){if(t)return new t;throw new Error(&quot;createCanvasElement - missing Canvas implementation for nodejs environment&quot;)},createImageElement:function(){if(e)return new e;throw new Error(&quot;createImageElement - missing Image implementation for nodejs environment&quot;)},fetch:n},r)}function Oh(){return&quot;object&quot;==typeof window&amp;&amp;&quot;undefined&quot;!=typeof document&amp;&amp;&quot;undefined&quot;!=typeof HTMLImageElement&amp;&amp;&quot;undefined&quot;!=typeof HTMLCanvasElement&amp;&amp;&quot;undefined&quot;!=typeof HTMLVideoElement&amp;&amp;&quot;undefined&quot;!=typeof ImageData&amp;&amp;&quot;undefined&quot;!=typeof CanvasRenderingContext2D}function Ph(){return&quot;object&quot;==typeof global&amp;&amp;&quot;function&quot;==typeof require&amp;&amp;&quot;undefined&quot;!=typeof module&amp;&amp;&quot;undefined&quot;!=typeof process&amp;&amp;!!process.version}function Fh(t){_h=t}function Lh(){Oh()&amp;&amp;Fh(Ah()),Ph()&amp;&amp;Fh(Mh())}var Bh,Wh,zh={getEnv:function(){if(!_h)throw new Error(&quot;getEnv - environment is not defined, check isNodejs() and isBrowser()&quot;);return _h},setEnv:Fh,initialize:Lh,createBrowserEnv:Ah,createFileSystem:Dh,createNodejsEnv:Mh,monkeyPatch:function(t){if(_h||Lh(),!_h)throw new Error(&quot;monkeyPatch - environment is not defined, check isNodejs() and isBrowser()&quot;);var e=t.Canvas,n=void 0===e?_h.Canvas:e,r=t.Image,o=void 0===r?_h.Image:r;_h.Canvas=n,_h.Image=o,_h.createCanvasElement=t.createCanvasElement||function(){return new n},_h.createImageElement=t.createImageElement||function(){return new o},_h.ImageData=t.ImageData||_h.ImageData,_h.Video=t.Video||_h.Video,_h.fetch=t.fetch||_h.fetch,_h.readFile=t.readFile||_h.readFile},isBrowser:Oh,isNodejs:Ph};function Uh(t){return zh.isNodejs()||&quot;string&quot;!=typeof t?t:document.getElementById(t)}function Gh(t){var e=zh.getEnv(),n=e.Canvas;if(t instanceof e.CanvasRenderingContext2D)return t;var r=Uh(t);if(!(r instanceof n))throw new Error(&quot;resolveContext2d - expected canvas to be of instance of Canvas&quot;);var o=r.getContext(&quot;2d&quot;);if(!o)throw new Error(&quot;resolveContext2d - canvas 2d context is null&quot;);return o}Lh(),(Wh=Bh||(Bh={})).TOP_LEFT=&quot;TOP_LEFT&quot;,Wh.TOP_RIGHT=&quot;TOP_RIGHT&quot;,Wh.BOTTOM_LEFT=&quot;BOTTOM_LEFT&quot;,Wh.BOTTOM_RIGHT=&quot;BOTTOM_RIGHT&quot;;var Vh=function(t){void 0===t&amp;&amp;(t={});var e=t.anchorPosition,n=t.backgroundColor,r=t.fontColor,o=t.fontSize,i=t.fontStyle,a=t.padding;this.anchorPosition=e||Bh.TOP_LEFT,this.backgroundColor=n||&quot;rgba(0, 0, 0, 0.5)&quot;,this.fontColor=r||&quot;rgba(255, 255, 255, 1)&quot;,this.fontSize=o||14,this.fontStyle=i||&quot;Georgia&quot;,this.padding=a||4},Hh=function(){function r(t,e,n){void 0===n&amp;&amp;(n={}),this.text=&quot;string&quot;==typeof t?[t]:t instanceof r?t.text:t,this.anchor=e,this.options=new Vh(n)}return r.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(t){return e.measureText(t).width}).reduce(function(t,e){return t&lt;e?e:t},0)+2*t},r.prototype.measureHeight=function(){var t=this.options,e=t.fontSize,n=t.padding;return this.text.length*e+2*n},r.prototype.getUpperLeft=function(t,e){var n=this.options.anchorPosition,r=n===Bh.BOTTOM_RIGHT||n===Bh.TOP_RIGHT,o=n===Bh.BOTTOM_LEFT||n===Bh.BOTTOM_RIGHT,i=this.measureWidth(t),a=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,u=o?this.anchor.y-a:this.anchor.y;if(e){var c=e.width,l=e.height;return{x:Math.max(Math.min(s,c-i),0),y:Math.max(Math.min(u,l-a),0)}}return{x:s,y:u}},r.prototype.draw=function(t){var e=Uh(t),o=Gh(e),n=this.options,r=n.backgroundColor,i=n.fontColor,a=n.fontSize,s=n.fontStyle,u=n.padding;o.font=a+&quot;px &quot;+s;var c=this.measureWidth(o),l=this.measureHeight();o.fillStyle=r;var h=this.getUpperLeft(o,e);o.fillRect(h.x,h.y,c,l),o.fillStyle=i,this.text.forEach(function(t,e){var n=u+h.x,r=u+h.y+(e+1)*a;o.fillText(t,n,r)})},r}(),qh=function(t){void 0===t&amp;&amp;(t={});var e=t.boxColor,n=t.lineWidth,r=t.label,o=t.drawLabelOptions;this.boxColor=e||&quot;rgba(0, 0, 255, 1)&quot;,this.lineWidth=n||2,this.label=r;var i={anchorPosition:Bh.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Vh(Object.assign({},i,o))},jh=function(){function t(t,e){void 0===e&amp;&amp;(e={}),this.box=new Sh(t),this.options=new qh(e)}return t.prototype.draw=function(t){var e=Gh(t),n=this.options,r=n.boxColor,o=n.lineWidth,i=this.box,a=i.x,s=i.y,u=i.width,c=i.height;e.strokeStyle=r,e.lineWidth=o,e.strokeRect(a,s,u,c);var l=this.options.label;l&amp;&amp;new Hh([l],{x:a-o/2,y:s},this.options.drawLabelOptions).draw(t)},t}(),$h=Object.freeze({DrawBoxOptions:qh,DrawBox:jh,get AnchorPosition(){return Bh},DrawTextFieldOptions:Vh,DrawTextField:Hh});function Kh(e,n,r,o){return void 0===r&amp;&amp;(r=&quot;same&quot;),void 0===o&amp;&amp;(o=!1),ue(function(){var t=xu(Ss(e,n.filters,[1,1],r),n.bias);return o?Xu(t):t})}function Xh(t,n){Object.keys(t).forEach(function(e){n.some(function(t){return t.originalPath===e})||t[e].dispose()})}function Yh(a,s){return function(t,e,n,r){var o=$e(a(t*e*n*n),[n,n,t,e]),i=He(a(e));return s.push({paramPath:r+&quot;/filters&quot;},{paramPath:r+&quot;/bias&quot;}),{filters:o,bias:i}}}function Qh(i,a){return function(t,e,n){var r=qe(i(t*e),[t,e]),o=He(i(e));return a.push({paramPath:n+&quot;/weights&quot;},{paramPath:n+&quot;/bias&quot;}),{weights:r,bias:o}}}var Jh=function(t,e,n){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=n};function Zh(a,s){return function(t,e,n){var r=$e(a(9*t),[3,3,t,1]),o=$e(a(t*e),[1,1,t,e]),i=He(a(e));return s.push({paramPath:n+&quot;/depthwise_filter&quot;},{paramPath:n+&quot;/pointwise_filter&quot;},{paramPath:n+&quot;/bias&quot;}),new Jh(r,o,i)}}function tp(o){return function(t){var e=o(t+&quot;/depthwise_filter&quot;,4),n=o(t+&quot;/pointwise_filter&quot;,4),r=o(t+&quot;/bias&quot;,1);return new Jh(e,n,r)}}function ep(o,i){return function(t,e,n){var r=o[t];if(!hh(r,e))throw new Error(&quot;expected weightMap[&quot;+t+&quot;] to be a Tensor&quot;+e+&quot;D, instead have &quot;+r);return i.push({originalPath:t,paramPath:n||t}),r}}function np(t){var n=t;return{extractWeights:function(t){var e=n.slice(0,t);return n=n.slice(t),e},getRemainingWeights:function(){return n}}}function rp(t,e){var n=e+&quot;-weights_manifest.json&quot;;if(!t)return{modelBaseUri:&quot;&quot;,manifestUri:n};if(&quot;/&quot;===t)return{modelBaseUri:&quot;/&quot;,manifestUri:&quot;/&quot;+n};var r=t.startsWith(&quot;http://&quot;)?&quot;http://&quot;:t.startsWith(&quot;https://&quot;)?&quot;https://&quot;:&quot;&quot;,o=(t=t.replace(r,&quot;&quot;)).split(&quot;/&quot;).filter(function(t){return t}),i=t.endsWith(&quot;.json&quot;)?o[o.length-1]:n,a=r+(t.endsWith(&quot;.json&quot;)?o.slice(0,o.length-1):o).join(&quot;/&quot;);return{modelBaseUri:a=t.startsWith(&quot;/&quot;)?&quot;/&quot;+a:a,manifestUri:&quot;/&quot;===a?&quot;/&quot;+i:a+&quot;/&quot;+i}}function op(t){var e=zh.getEnv(),n=e.Image,r=e.Video;return t instanceof n&amp;&amp;t.complete||t instanceof r&amp;&amp;3&lt;=t.readyState}function ip(t){return new Promise(function(e,n){if(t instanceof zh.getEnv().Canvas||op(t))return e();function r(t){t.currentTarget&amp;&amp;(t.currentTarget.removeEventListener(&quot;load&quot;,r),t.currentTarget.removeEventListener(&quot;error&quot;,o),e(t))}function o(t){t.currentTarget&amp;&amp;(t.currentTarget.removeEventListener(&quot;load&quot;,r),t.currentTarget.removeEventListener(&quot;error&quot;,o),n(t))}t.addEventListener(&quot;load&quot;,r),t.addEventListener(&quot;error&quot;,o)})}function ap(t){return new Promise(function(e,n){if(!(t instanceof Blob))return n(&quot;bufferToImage - expected buf to be of type: Blob&quot;);var r=new FileReader;r.onload=function(){if(&quot;string&quot;!=typeof r.result)return n(&quot;bufferToImage - expected reader.result to be a string, in onload&quot;);var t=zh.getEnv().createImageElement();t.onload=function(){return e(t)},t.onerror=n,t.src=r.result},r.onerror=n,r.readAsDataURL(t)})}function sp(t){var e=zh.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new ch(t.naturalWidth,t.naturalHeight):t instanceof r?new ch(t.videoWidth,t.videoHeight):new ch(t.width,t.height)}function up(t){var e=t.width,n=t.height,r=(0,zh.getEnv().createCanvasElement)();return r.width=e,r.height=n,r}function cp(t,e){var n=zh.getEnv().ImageData;if(!(t instanceof n||op(t)))throw new Error(&quot;createCanvasFromMedia - media has not finished loading yet&quot;);var r=e||sp(t),o=r.width,i=r.height,a=up({width:o,height:i});return t instanceof n?Gh(a).putImageData(t,0,0):Gh(a).drawImage(t,0,0,o,i),a}function lp(n,r){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,(0,zh.getEnv().fetch)(n,r)];case 1:if(!((e=t.sent()).status&lt;400))throw new Error(&quot;failed to fetch: (&quot;+e.status+&quot;) &quot;+e.statusText+&quot;, from url: &quot;+e.url);return[2,e]}})})}function hp(e){return p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,lp(e)];case 1:return[2,t.sent().json()]}})})}function pp(s,u){return p(this,void 0,void 0,function(){var e,n,r,o,i,a;return P(this,function(t){switch(t.label){case 0:return e=u||zh.getEnv().createCanvasElement(),n=s.shape.slice(dh(s)?1:0),r=n[0],o=n[1],i=n[2],a=ue(function(){return s.as3D(r,o,i).toInt()}),[4,Bl.toPixels(a,e)];case 1:return t.sent(),a.dispose(),[2,e]}})})}function fp(t,e,n){void 0===n&amp;&amp;(n=!1);var r=zh.getEnv(),o=r.Image,i=r.Canvas;if(!(t instanceof o||t instanceof i))throw new Error(&quot;imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement&quot;);var a=sp(t),s=e/Math.max(a.height,a.width),u=s*a.width,c=s*a.height,l=up({width:e,height:e}),h=t instanceof i?t:cp(t),p=Math.abs(u-c)/2,f=n&amp;&amp;u&lt;c?p:0,d=n&amp;&amp;c&lt;u?p:0;return Gh(l).drawImage(h,f,d,u,c),l}function dp(t){var e=zh.getEnv(),n=e.Image,r=e.Canvas,o=e.Video;return t instanceof n||t instanceof r||t instanceof o}function vp(i,a){return p(this,void 0,void 0,function(){var e,n,r,o;return P(this,function(t){switch(t.label){case 0:return e=rp(i,a),n=e.manifestUri,r=e.modelBaseUri,[4,hp(n)];case 1:return o=t.sent(),[2,Ol.loadWeights(o,r)]}})})}function mp(l,h){return void 0===h&amp;&amp;(h=!1),ue(function(){var t=l.shape.slice(1),e=t[0],n=t[1];if(e===n)return l;var r=Math.abs(e-n),o=Math.round(r*(h?.5:1)),i=n&lt;e?2:1,a=function(t){var e=l.shape.slice();return e[i]=t,Je(e,0)},s=a(o),u=r-s.shape[i],c=[h&amp;&amp;u?a(u):null,l,s].filter(function(t){return!!t}).map(function(t){return t.toFloat()});return _i(c,i)})}var gp=function(){function t(t,e){void 0===e&amp;&amp;(e=!1);var o=this;if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error(&quot;NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have &quot;+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach(function(t,e){if(fh(t))return o._imageTensors[e]=t,void(o._inputDimensions[e]=t.shape);if(dh(t)){var n=t.shape[0];if(1!==n)throw new Error(&quot;NetInput - tf.Tensor4D with batchSize &quot;+n+&quot; passed, but not supported in input array&quot;);return o._imageTensors[e]=t,void(o._inputDimensions[e]=t.shape.slice(1))}var r=t instanceof zh.getEnv().Canvas?t:cp(t);o._canvases[e]=r,o._inputDimensions[e]=[r.height,r.width,3]})}return Object.defineProperty(t.prototype,&quot;imageTensors&quot;,{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;canvases&quot;,{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;isBatchInput&quot;,{get:function(){return 1&lt;this.batchSize||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;batchSize&quot;,{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;inputDimensions&quot;,{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;inputSize&quot;,{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;reshapedInputDimensions&quot;,{get:function(){var n=this;return bh(this.batchSize,0,1).map(function(t,e){return n.getReshapedInputDimensions(e)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},t.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},t.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},t.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},t.prototype.getReshapedInputDimensions=function(t){if(&quot;number&quot;!=typeof this.inputSize)throw new Error(&quot;getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet&quot;);return xh({width:this.getInputWidth(t),height:this.getInputHeight(t)},this.inputSize)},t.prototype.toBatchTensor=function(r,o){var i=this;return void 0===o&amp;&amp;(o=!0),this._inputSize=r,ue(function(){var t=bh(i.batchSize,0,1).map(function(t){var e=i.getInput(t);if(e instanceof dt){var n=dh(e)?e:e.expandDims();return(n=mp(n,o)).shape[1]===r&amp;&amp;n.shape[2]===r||(n=Wc.resizeBilinear(n,[r,r])),n.as3D(r,r,3)}if(e instanceof zh.getEnv().Canvas)return Bl.fromPixels(fp(e,r,o));throw new Error(&quot;toBatchTensor - at batchIdx &quot;+t+&quot;, expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have &quot;+e)});return ua(t.map(function(t){return t.toFloat()})).as4D(i.batchSize,r,r,3)})},t}();function yp(n){return p(this,void 0,void 0,function(){var r,o,e;return P(this,function(t){switch(t.label){case 0:if(n instanceof gp)return[2,n];if(!(r=Array.isArray(n)?n:[n]).length)throw new Error(&quot;toNetInput - empty array passed as input&quot;);return o=function(t){return Array.isArray(n)?&quot; at input index &quot;+t+&quot;:&quot;:&quot;&quot;},(e=r.map(Uh)).forEach(function(t,e){if(!dp(t)&amp;&amp;!fh(t)&amp;&amp;!dh(t)){if(&quot;string&quot;==typeof r[e])throw new Error(&quot;toNetInput -&quot;+o(e)+&quot; string passed, but could not resolve HTMLElement for element id &quot;+r[e]);throw new Error(&quot;toNetInput -&quot;+o(e)+&quot; expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id&quot;)}if(dh(t)){var n=t.shape[0];if(1!==n)throw new Error(&quot;toNetInput -&quot;+o(e)+&quot; tf.Tensor4D with batchSize &quot;+n+&quot; passed, but not supported in input array&quot;)}}),[4,Promise.all(e.map(function(t){return dp(t)&amp;&amp;ip(t)}))];case 1:return t.sent(),[2,new gp(e,Array.isArray(n))]}})})}var xp=function(){function t(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,&quot;params&quot;,{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;paramMappings&quot;,{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;isLoaded&quot;,{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t);return e.obj[e.objProp]},t.prototype.reassignParamFromPath=function(t,e){var n=this.traversePropertyPath(t),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=e},t.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(t){var e=t.paramPath;return{path:e,tensor:n.getParamFromPath(e)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof vt})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof vt)})},t.prototype.variable=function(){var r=this;this.getFrozenParams().forEach(function(t){var e=t.path,n=t.tensor;r.reassignParamFromPath(e,n.variable())})},t.prototype.freeze=function(){var o=this;this.getTrainableParams().forEach(function(t){var e=t.path,n=t.tensor,r=Ge(n.dataSync());n.dispose(),o.reassignParamFromPath(e,r)})},t.prototype.dispose=function(e){void 0===e&amp;&amp;(e=!0),this.getParamList().forEach(function(t){if(e&amp;&amp;t.tensor.isDisposed)throw new Error(&quot;param tensor has already been disposed for path &quot;+t.path);t.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var e=t.tensor;return Array.from(e.dataSync())}).reduce(function(t,e){return t.concat(e)}))},t.prototype.load=function(e){return p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},t.prototype.loadFromUri=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:if(n&amp;&amp;&quot;string&quot;!=typeof n)throw new Error(this._name+&quot;.loadFromUri - expected model uri&quot;);return[4,vp(n,this.getDefaultModelName())];case 1:return e=t.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(h){return p(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l;return P(this,function(t){switch(t.label){case 0:if(h&amp;&amp;&quot;string&quot;!=typeof h)throw new Error(this._name+&quot;.loadFromDisk - expected model file path&quot;);return e=zh.getEnv().readFile,n=rp(h,this.getDefaultModelName()),r=n.manifestUri,o=n.modelBaseUri,i=function(t){return Promise.all(t.map(function(t){return e(t).then(function(t){return t.buffer})}))},a=Ol.weightsLoaderFactory(i),c=(u=JSON).parse,[4,e(r)];case 1:return s=c.apply(u,[t.sent().toString()]),[4,a(s,o)];case 2:return l=t.sent(),this.loadFromWeightMap(l),[2]}})})},t.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),n=e.paramMappings,r=e.params;this._paramMappings=n,this._params=r},t.prototype.extractWeights=function(t){var e=this.extractParams(t),n=e.paramMappings,r=e.params;this._paramMappings=n,this._params=r},t.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error(&quot;traversePropertyPath - model has no loaded params&quot;);var t=n.split(&quot;/&quot;).reduce(function(t,e){if(!t.nextObj.hasOwnProperty(e))throw new Error(&quot;traversePropertyPath - object does not have property &quot;+e+&quot;, for path &quot;+n);return{obj:t.nextObj,objProp:e,nextObj:t.nextObj[e]}},{nextObj:this.params}),e=t.obj,r=t.objProp;if(!(e&amp;&amp;r&amp;&amp;e[r]instanceof dt))throw new Error(&quot;traversePropertyPath - parameter is not a tensor, for path &quot;+n);return{obj:e,objProp:r}},t}();function wp(t,e,n){void 0===n&amp;&amp;(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return n?r/(t.area+e.area-r):r/Math.min(t.area,e.area)}function bp(s,t,u,c){void 0===c&amp;&amp;(c=!0);for(var l=t.map(function(t,e){return{score:t,boxIndex:e}}).sort(function(t,e){return t.score-e.score}).map(function(t){return t.boxIndex}),h=[],e=function(){var t=l.pop();h.push(t);for(var e=l,n=[],r=0;r&lt;e.length;r++){var o=e[r],i=s[t],a=s[o];n.push(wp(i,a,c))}l=l.filter(function(t,e){return n[e]&lt;=u})};0&lt;l.length;)e();return h}function Ep(s,u){return ue(function(){var t=u[0],e=u[1],n=u[2],r=Je(s.shape.slice(0,3).concat([1]),t),o=Je(s.shape.slice(0,3).concat([1]),e),i=Je(s.shape.slice(0,3).concat([1]),n),a=_i([r,o,i],3);return Bu(s,a)})}function Cp(t){return 1/(1+Math.exp(-t))}var _p,Sp,Rp=function(t){return&quot;number&quot;==typeof t};function Np(t){if(!t)throw new Error(&quot;invalid config: &quot;+t);if(&quot;boolean&quot;!=typeof t.withSeparableConvs)throw new Error(&quot;config.withSeparableConvs has to be a boolean, have: &quot;+t.withSeparableConvs);if(!Rp(t.iouThreshold)||t.iouThreshold&lt;0||1&lt;t.iouThreshold)throw new Error(&quot;config.iouThreshold has to be a number between [0, 1], have: &quot;+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(t){return&quot;string&quot;==typeof t}))throw new Error(&quot;config.classes has to be an array class names: string[], have: &quot;+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(t){return t||{}}).every(function(t){return Rp(t.x)&amp;&amp;Rp(t.y)}))throw new Error(&quot;config.anchors has to be an array of { x: number, y: number }, have: &quot;+JSON.stringify(t.anchors));if(t.meanRgb&amp;&amp;(!Array.isArray(t.meanRgb)||3!==t.meanRgb.length||!t.meanRgb.every(Rp)))throw new Error(&quot;config.meanRgb has to be an array of shape [number, number, number], have: &quot;+JSON.stringify(t.meanRgb))}function kp(e){return ue(function(){var t=Du(e,Ve(.10000000149011612));return xu(Xu(Bu(e,t)),t)})}function Ip(e,n){return ue(function(){var t=Qi(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Ss(t,n.conv.filters,[1,1],&quot;valid&quot;),t=Bu(t,n.bn.sub),t=Du(t,n.bn.truediv),kp(t=xu(t,n.conv.bias))})}function Tp(e,n){return ue(function(){var t=Qi(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Is(t,n.depthwise_filter,n.pointwise_filter,[1,1],&quot;valid&quot;),kp(t=xu(t,n.bias))})}function Ap(s,u){var c=Yh(s,u);var t=Zh(s,u);return{extractConvParams:c,extractConvWithBatchNormParams:function(t,e,n){var r,o,i,a;return{conv:c(t,e,3,n+&quot;/conv&quot;),bn:(o=n+&quot;/bn&quot;,i=He(s(r=e)),a=He(s(r)),u.push({paramPath:o+&quot;/sub&quot;},{paramPath:o+&quot;/truediv&quot;}),{sub:i,truediv:a})}},extractSeparableConvParams:t}}function Dp(t,e){var n=ep(t,e);function r(t){return{filters:n(t+&quot;/filters&quot;,4),bias:n(t+&quot;/bias&quot;,1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(t){var e;return{conv:r(t+&quot;/conv&quot;),bn:{sub:n((e=t+&quot;/bn&quot;)+&quot;/sub&quot;,1),truediv:n(e+&quot;/truediv&quot;,1)}}},extractSeparableConvParams:tp(n)}}(Sp=_p||(_p={}))[Sp.XS=224]=&quot;XS&quot;,Sp[Sp.SM=320]=&quot;SM&quot;,Sp[Sp.MD=416]=&quot;MD&quot;,Sp[Sp.LG=608]=&quot;LG&quot;;var Mp=function(){function t(t){var e=void 0===t?{}:t,n=e.inputSize,r=e.scoreThreshold;if(this._name=&quot;TinyYolov2Options&quot;,this._inputSize=n||416,this._scoreThreshold=r||.5,&quot;number&quot;!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+&quot; - expected inputSize to be a number divisible by 32&quot;);if(&quot;number&quot;!=typeof this._scoreThreshold||this._scoreThreshold&lt;=0||1&lt;=this._scoreThreshold)throw new Error(this._name+&quot; - expected scoreThreshold to be a number between 0 and 1&quot;)}return Object.defineProperty(t.prototype,&quot;inputSize&quot;,{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;scoreThreshold&quot;,{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),Op=function(n){function r(t){var e=n.call(this,&quot;TinyYolov2&quot;)||this;return Np(t),e._config=t,e}return a(r,n),Object.defineProperty(r.prototype,&quot;config&quot;,{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,&quot;withClassScores&quot;,{get:function(){return this.config.withClassScores||1&lt;this.config.classes.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,&quot;boxEncodingSize&quot;,{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),r.prototype.runTinyYolov2=function(t,e){var n=Ip(t,e.conv0);return n=Ip(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv1),n=Ip(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv2),n=Ip(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv3),n=Ip(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv4),n=Ip(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv5),Kh(n=Ip(n=Ip(n=Us(n,[2,2],[1,1],&quot;same&quot;),e.conv6),e.conv7),e.conv8,&quot;valid&quot;,!1)},r.prototype.runMobilenet=function(t,e){var n=this.config.isFirstLayerConv2d?kp(Kh(t,e.conv0,&quot;valid&quot;,!1)):Tp(t,e.conv0);return n=Tp(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv1),n=Tp(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv2),n=Tp(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv3),n=Tp(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv4),n=Tp(n=Us(n,[2,2],[2,2],&quot;same&quot;),e.conv5),n=Us(n,[2,2],[1,1],&quot;same&quot;),n=e.conv6?Tp(n,e.conv6):n,Kh(n=e.conv7?Tp(n,e.conv7):n,e.conv8,&quot;valid&quot;,!1)},r.prototype.forwardInput=function(e,n){var r=this,o=this.params;if(!o)throw new Error(&quot;TinyYolov2 - load model before inference&quot;);return ue(function(){var t=e.toBatchTensor(n,!1).toFloat();return t=(t=r.config.meanRgb?Ep(t,r.config.meanRgb):t).div(Ve(256)),r.config.withSeparableConvs?r.runMobilenet(t,o):r.runTinyYolov2(t,o)})},r.prototype.forward=function(n,r){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[4,e.apply(this,[t.sent(),r])];case 2:return[2,t.sent()]}})})},r.prototype.detect=function(v,m){return void 0===m&amp;&amp;(m={}),p(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l,h,p,f,d=this;return P(this,function(t){switch(t.label){case 0:return e=new Mp(m),n=e.inputSize,r=e.scoreThreshold,[4,yp(v)];case 1:return o=t.sent(),[4,this.forwardInput(o,n)];case 2:return i=t.sent(),a=ue(function(){return ha(i)[0].expandDims()}),s={width:o.getInputWidth(0),height:o.getInputHeight(0)},[4,this.extractBoxes(a,o.getReshapedInputDimensions(0),r)];case 3:return u=t.sent(),i.dispose(),a.dispose(),c=u.map(function(t){return t.box}),l=u.map(function(t){return t.score}),h=u.map(function(t){return t.classScore}),p=u.map(function(t){return d.config.classes[t.label]}),f=bp(c.map(function(t){return t.rescale(n)}),l,this.config.iouThreshold,!0),[2,f.map(function(t){return new kh(l[t],h[t],p[t],c[t],s)})]}})})},r.prototype.getDefaultModelName=function(){return&quot;&quot;},r.prototype.extractParamsFromWeigthMap=function(t){return function(t,e){var n,r=[],o=Dp(t,r),i=o.extractConvParams,a=o.extractConvWithBatchNormParams,s=o.extractSeparableConvParams;if(e.withSeparableConvs){var u=e.filterSizes&amp;&amp;e.filterSizes.length||9;n={conv0:e.isFirstLayerConv2d?i(&quot;conv0&quot;):s(&quot;conv0&quot;),conv1:s(&quot;conv1&quot;),conv2:s(&quot;conv2&quot;),conv3:s(&quot;conv3&quot;),conv4:s(&quot;conv4&quot;),conv5:s(&quot;conv5&quot;),conv6:7&lt;u?s(&quot;conv6&quot;):void 0,conv7:8&lt;u?s(&quot;conv7&quot;):void 0,conv8:i(&quot;conv8&quot;)}}else n={conv0:a(&quot;conv0&quot;),conv1:a(&quot;conv1&quot;),conv2:a(&quot;conv2&quot;),conv3:a(&quot;conv3&quot;),conv4:a(&quot;conv4&quot;),conv5:a(&quot;conv5&quot;),conv6:a(&quot;conv6&quot;),conv7:a(&quot;conv7&quot;),conv8:i(&quot;conv8&quot;)};return Xh(t,r),{params:n,paramMappings:r}}(t,this.config)},r.prototype.extractParams=function(t){var e=this.config.filterSizes||r.DEFAULT_FILTER_SIZES,n=e?e.length:void 0;if(7!==n&amp;&amp;8!==n&amp;&amp;9!==n)throw new Error(&quot;TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found &quot;+n+&quot; filterSizes in config&quot;);return function(t,e,n,r){var o,i=np(t),a=i.extractWeights,s=i.getRemainingWeights,u=[],c=Ap(a,u),l=c.extractConvParams,h=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams;if(e.withSeparableConvs){var f=r[0],d=r[1],v=r[2],m=r[3],g=r[4],y=r[5],x=r[6],w=r[7],b=r[8];o={conv0:e.isFirstLayerConv2d?l(f,d,3,&quot;conv0&quot;):p(f,d,&quot;conv0&quot;),conv1:p(d,v,&quot;conv1&quot;),conv2:p(v,m,&quot;conv2&quot;),conv3:p(m,g,&quot;conv3&quot;),conv4:p(g,y,&quot;conv4&quot;),conv5:p(y,x,&quot;conv5&quot;),conv6:w?p(x,w,&quot;conv6&quot;):void 0,conv7:b?p(w,b,&quot;conv7&quot;):void 0,conv8:l(b||w||x,5*n,1,&quot;conv8&quot;)}}else f=r[0],d=r[1],v=r[2],m=r[3],g=r[4],y=r[5],x=r[6],w=r[7],b=r[8],o={conv0:h(f,d,&quot;conv0&quot;),conv1:h(d,v,&quot;conv1&quot;),conv2:h(v,m,&quot;conv2&quot;),conv3:h(m,g,&quot;conv3&quot;),conv4:h(g,y,&quot;conv4&quot;),conv5:h(y,x,&quot;conv5&quot;),conv6:h(x,w,&quot;conv6&quot;),conv7:h(w,b,&quot;conv7&quot;),conv8:l(b,5*n,1,&quot;conv8&quot;)};if(0!==s().length)throw new Error(&quot;weights remaing after extract: &quot;+s().length);return{params:o,paramMappings:u}}(t,this.config,this.boxEncodingSize,e)},r.prototype.extractBoxes=function(A,D,M){return p(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l,h,p,f,d,v,m,g,y,x,w,b,E,C,_,S,R,N,k,I,T=this;return P(this,function(t){switch(t.label){case 0:return e=D.width,n=D.height,r=Math.max(e,n),o=r/e,i=r/n,a=A.shape[1],s=this.config.anchors.length,u=ue(function(){var t=A.reshape([a,a,s,T.boxEncodingSize]);return[t.slice([0,0,0,0],[a,a,s,4]),t.slice([0,0,0,4],[a,a,s,1]),T.withClassScores?Le(t.slice([0,0,0,5],[a,a,s,T.config.classes.length]),3):Ve(0)]}),c=u[0],l=u[1],h=u[2],p=[],[4,l.array()];case 1:return f=t.sent(),[4,c.array()];case 2:d=t.sent(),v=0,t.label=3;case 3:if(!(v&lt;a))return[3,12];m=0,t.label=4;case 4:if(!(m&lt;a))return[3,11];g=0,t.label=5;case 5:return g&lt;s?(y=Cp(f[v][m][g][0]),!M||M&lt;y?(x=(m+Cp(d[v][m][g][0]))/a*o,w=(v+Cp(d[v][m][g][1]))/a*i,b=Math.exp(d[v][m][g][2])*this.config.anchors[g].x/a*o,E=Math.exp(d[v][m][g][3])*this.config.anchors[g].y/a*i,C=x-b/2,_=w-E/2,S={row:v,col:m,anchor:g},this.withClassScores?[4,this.extractPredictedClass(h,S)]:[3,7]):[3,9]):[3,10];case 6:return I=t.sent(),[3,8];case 7:I={classScore:1,label:0},t.label=8;case 8:N=(R=I).classScore,k=R.label,p.push(O({box:new Rh(C,_,C+b,_+E),score:y,classScore:y*N,label:k},S)),t.label=9;case 9:return g++,[3,5];case 10:return m++,[3,4];case 11:return v++,[3,3];case 12:return c.dispose(),l.dispose(),h.dispose(),[2,p]}})})},r.prototype.extractPredictedClass=function(e,a){return p(this,void 0,void 0,function(){var n,r,o,i;return P(this,function(t){switch(t.label){case 0:return n=a.row,r=a.col,o=a.anchor,[4,e.array()];case 1:return i=t.sent(),[2,Array(this.config.classes.length).fill(0).map(function(t,e){return i[n][r][o][e]}).map(function(t,e){return{classScore:t,label:e}}).reduce(function(t,e){return t.classScore&gt;e.classScore?t:e})]}})})},r.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],r}(xp),Pp=Object.freeze({convLayer:Kh,disposeUnusedWeightTensors:Xh,extractConvParamsFactory:Yh,extractFCParamsFactory:Qh,extractSeparableConvParamsFactory:Zh,loadSeparableConvParamsFactory:tp,extractWeightEntryFactory:ep,extractWeightsFactory:np,getModelUris:rp,SeparableConvParams:Jh,TinyYolov2:Op,get TinyYolov2SizeType(){return _p},TinyYolov2Options:Mp,validateConfig:Np});function Fp(i,a,t){if(void 0===t&amp;&amp;(t=!1),i.beginPath(),a.slice(1).forEach(function(t,e){var n=t.x,r=t.y,o=a[e];i.moveTo(o.x,o.y),i.lineTo(n,r)}),t){var e=a[a.length-1],n=a[0];if(!e||!n)return;i.moveTo(e.x,e.y),i.lineTo(n.x,n.y)}i.stroke()}var Lp=function(r){function o(t,e,n){return r.call(this,t,t,&quot;&quot;,e,n)||this}return a(o,r),o.prototype.forSize=function(t,e){var n=r.prototype.forSize.call(this,t,e);return new o(n.score,n.relativeBox,n.imageDims)},o}(kh);function Bp(t){return t.detection instanceof Lp}function Wp(t,e){var n={detection:e};return Object.assign({},t,n)}function zp(e,n,r){return ue(function(){var t=Is(e,n.depthwise_filter,n.pointwise_filter,r,&quot;same&quot;);return t=xu(t,n.bias)})}function Up(r,o,i){return void 0===i&amp;&amp;(i=!1),ue(function(){var t=Xu(i?xu(Ss(r,o.conv0.filters,[2,2],&quot;same&quot;),o.conv0.bias):zp(r,o.conv0,[2,2])),e=zp(t,o.conv1,[1,1]),n=zp(Xu(xu(t,e)),o.conv2,[1,1]);return Xu(xu(t,xu(e,n)))})}function Gp(o,i,a,s){return void 0===a&amp;&amp;(a=!1),void 0===s&amp;&amp;(s=!0),ue(function(){var t=Xu(a?xu(Ss(o,i.conv0.filters,s?[2,2]:[1,1],&quot;same&quot;),i.conv0.bias):zp(o,i.conv0,s?[2,2]:[1,1])),e=zp(t,i.conv1,[1,1]),n=zp(Xu(xu(t,e)),i.conv2,[1,1]),r=zp(Xu(xu(t,xu(e,n))),i.conv3,[1,1]);return Xu(xu(t,xu(e,xu(n,r))))})}function Vp(t,e){var o=Yh(t,e),i=Zh(t,e);function a(t,e,n,r){return void 0===r&amp;&amp;(r=!1),{conv0:r?o(t,e,3,n+&quot;/conv0&quot;):i(t,e,n+&quot;/conv0&quot;),conv1:i(e,e,n+&quot;/conv1&quot;),conv2:i(e,e,n+&quot;/conv2&quot;)}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(t,e,n,r){void 0===r&amp;&amp;(r=!1);var o=a(t,e,n,r);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:i(e,e,n+&quot;/conv3&quot;)}}}}function Hp(e){return function(t){return{filters:e(t+&quot;/filters&quot;,4),bias:e(t+&quot;/bias&quot;,1)}}}function qp(t,e){var n=ep(t,e),r=Hp(n),o=tp(n);return{extractDenseBlock3Params:function(t,e){return void 0===e&amp;&amp;(e=!1),{conv0:e?r(t+&quot;/conv0&quot;):o(t+&quot;/conv0&quot;),conv1:o(t+&quot;/conv1&quot;),conv2:o(t+&quot;/conv2&quot;)}},extractDenseBlock4Params:function(t,e){return void 0===e&amp;&amp;(e=!1),{conv0:e?r(t+&quot;/conv0&quot;):o(t+&quot;/conv0&quot;),conv1:o(t+&quot;/conv1&quot;),conv2:o(t+&quot;/conv2&quot;),conv3:o(t+&quot;/conv3&quot;)}}}}var jp=function(t){function e(){return t.call(this,&quot;FaceFeatureExtractor&quot;)||this}return a(e,t),e.prototype.forwardInput=function(e){var n=this.params;if(!n)throw new Error(&quot;FaceFeatureExtractor - load model before inference&quot;);return ue(function(){var t=Gp(Ep(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ve(255)),n.dense0,!0);return t=Gp(t=Gp(t=Gp(t,n.dense1),n.dense2),n.dense3),t=Gs(t,[7,7],[2,2],&quot;valid&quot;)})},e.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},e.prototype.getDefaultModelName=function(){return&quot;face_feature_extractor_model&quot;},e.prototype.extractParamsFromWeigthMap=function(t){return r=qp(e=t,n=[]).extractDenseBlock4Params,o={dense0:r(&quot;dense0&quot;,!0),dense1:r(&quot;dense1&quot;),dense2:r(&quot;dense2&quot;),dense3:r(&quot;dense3&quot;)},Xh(e,n),{params:o,paramMappings:n};var e,n,r,o},e.prototype.extractParams=function(t){return function(t){var e=[],n=np(t),r=n.extractWeights,o=n.getRemainingWeights,i=Vp(r,e).extractDenseBlock4Params,a=i(3,32,&quot;dense0&quot;,!0),s=i(32,64,&quot;dense1&quot;),u=i(64,128,&quot;dense2&quot;),c=i(128,256,&quot;dense3&quot;);if(0!==o().length)throw new Error(&quot;weights remaing after extract: &quot;+o().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u,dense3:c}}}(t)},e}(xp);function $p(t,e){return ue(function(){return xu(As(t,e.weights),e.bias)})}function Kp(e){var n={},r={};return Object.keys(e).forEach(function(t){(t.startsWith(&quot;fc&quot;)?r:n)[t]=e[t]}),{featureExtractorMap:n,classifierMap:r}}var Xp=function(r){function t(t,e){var n=r.call(this,t)||this;return n._faceFeatureExtractor=e,n}return a(t,r),Object.defineProperty(t.prototype,&quot;faceFeatureExtractor&quot;,{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var n=this,r=this.params;if(!r)throw new Error(this._name+&quot; - load model before inference&quot;);return ue(function(){var t=e instanceof gp?n.faceFeatureExtractor.forwardInput(e):e;return $p(t.as2D(t.shape[0],-1),r.fc)})},t.prototype.dispose=function(t){void 0===t&amp;&amp;(t=!0),this.faceFeatureExtractor.dispose(t),r.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.params,r=e.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(t){return function(t,e,n){var r=[],o=np(t),i=o.extractWeights,a=o.getRemainingWeights,s=Qh(i,r)(e,n,&quot;fc&quot;);if(0!==a().length)throw new Error(&quot;weights remaing after extract: &quot;+a().length);return{paramMappings:r,params:{fc:s}}}(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(t){var e,n,r,o,i,a=Kp(t),s=a.featureExtractorMap,u=a.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),o=ep(e=u,r=[]),i={fc:(n=&quot;fc&quot;,{weights:o(n+&quot;/weights&quot;,2),bias:o(n+&quot;/bias&quot;,1)})},Xh(e,r),{params:i,paramMappings:r}},t.prototype.extractParams=function(t){var e=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*e+n,o=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(xp),Yp=[&quot;neutral&quot;,&quot;happy&quot;,&quot;sad&quot;,&quot;angry&quot;,&quot;fearful&quot;,&quot;disgusted&quot;,&quot;surprised&quot;],Qp=function(){function t(n){var r=this;if(7!==n.length)throw new Error(&quot;FaceExpressions.constructor - expected probabilities.length to be 7, have: &quot;+n.length);Yp.forEach(function(t,e){r[t]=n[e]})}return t.prototype.asSortedArray=function(){var e=this;return Yp.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,e){return e.probability-t.probability})},t}(),Jp=function(e){function t(t){return void 0===t&amp;&amp;(t=new jp),e.call(this,&quot;FaceExpressionNet&quot;,t)||this}return a(t,e),t.prototype.forwardInput=function(t){var e=this;return ue(function(){return Le(e.runNet(t))})},t.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},t.prototype.predictExpressions=function(a){return p(this,void 0,void 0,function(){var e,n,r,o,i=this;return P(this,function(t){switch(t.label){case 0:return[4,yp(a)];case 1:return e=t.sent(),[4,this.forwardInput(e)];case 2:return n=t.sent(),[4,Promise.all(ha(n).map(function(n){return p(i,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,n.data()];case 1:return e=t.sent(),n.dispose(),[2,e]}})})}))];case 3:return r=t.sent(),n.dispose(),o=r.map(function(t){return new Qp(t)}),[2,e.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return&quot;face_expression_model&quot;},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(Xp);function Zp(t){return t.expressions instanceof Qp}function tf(t,e){var n={expressions:e};return Object.assign({},t,n)}var ef=function(){function t(t,e,n){void 0===n&amp;&amp;(n=new lh(0,0));var r=e.width,o=e.height;this._imgDims=new ch(r,o),this._shift=n,this._positions=t.map(function(t){return t.mul(new lh(r,o)).add(n)})}return Object.defineProperty(t.prototype,&quot;shift&quot;,{get:function(){return new lh(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;imageWidth&quot;,{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;imageHeight&quot;,{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;positions&quot;,{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;relativePositions&quot;,{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new lh(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},t.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new lh(t,e))},t.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},t.prototype.align=function(t,e){if(void 0===e&amp;&amp;(e={}),t){var n=t instanceof Lp?t.box.floor():new Sh(t);return this.shiftBy(n.x,n.y).align(null,e)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=r.useDlibAlignment,i=r.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(i)},t.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[0],n=t[1],r=t[2],o=function(t){return r.sub(t).magnitude()},i=(o(e)+o(n))/2,a=Math.floor(i/.45),s=wh(t),u=Math.floor(Math.max(0,s.x-.5*a)),c=Math.floor(Math.max(0,s.y-.43*a));return new Th(u,c,Math.min(a,this.imageWidth+u),Math.min(a,this.imageHeight+c))},t.prototype.alignMinBbox=function(t){var e,n,r,o,i,a,s,u=(e=this.positions,n=e.map(function(t){return t.x}),r=e.map(function(t){return t.y}),o=n.reduce(function(t,e){return e&lt;t?e:t},1/0),i=r.reduce(function(t,e){return e&lt;t?e:t},1/0),a=n.reduce(function(t,e){return t&lt;e?e:t},0),s=r.reduce(function(t,e){return t&lt;e?e:t},0),new Rh(o,i,a,s));return u.pad(u.width*t,u.height*t)},t.prototype.getRefPointsForAlignment=function(){throw new Error(&quot;getRefPointsForAlignment not implemented by base class&quot;)},t}(),nf=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(wh)},e}(ef);function rf(t){return Bp(t)&amp;&amp;t.landmarks instanceof ef&amp;&amp;t.unshiftedLandmarks instanceof ef&amp;&amp;t.alignedRect instanceof Lp}function of(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),o=r.align(),i=t.detection.imageDims,a={landmarks:r,unshiftedLandmarks:e,alignedRect:new Lp(t.detection.score,o.rescale(i.reverse()),i)};return Object.assign({},t,a)}var af=function(t){void 0===t&amp;&amp;(t={});var e=t.drawLines,n=void 0===e||e,r=t.drawPoints,o=void 0===r||r,i=t.lineWidth,a=t.lineColor,s=t.pointSize,u=t.pointColor;this.drawLines=n,this.drawPoints=o,this.lineWidth=i||1,this.pointSize=s||2,this.lineColor=a||&quot;rgba(0, 255, 255, 1)&quot;,this.pointColor=u||&quot;rgba(255, 0, 255, 1)&quot;},sf=function(){function t(t,e){void 0===e&amp;&amp;(e={}),this.faceLandmarks=t,this.options=new af(e)}return t.prototype.draw=function(t){var e=Gh(t),n=this.options,r=n.drawLines,o=n.drawPoints,i=n.lineWidth,a=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&amp;&amp;this.faceLandmarks instanceof nf&amp;&amp;(e.strokeStyle=a,e.lineWidth=i,Fp(e,this.faceLandmarks.getJawOutline()),Fp(e,this.faceLandmarks.getLeftEyeBrow()),Fp(e,this.faceLandmarks.getRightEyeBrow()),Fp(e,this.faceLandmarks.getNose()),Fp(e,this.faceLandmarks.getLeftEye(),!0),Fp(e,this.faceLandmarks.getRightEye(),!0),Fp(e,this.faceLandmarks.getMouth(),!0)),o){e.strokeStyle=u,e.fillStyle=u;this.faceLandmarks.positions.forEach(function(t){e.beginPath(),e.arc(t.x,t.y,s,0,2*Math.PI),e.fill()})}},t}();var uf=Object.freeze({drawContour:Fp,drawDetections:function(o,t){(Array.isArray(t)?t:[t]).forEach(function(t){var e=t instanceof Lp?t.score:Bp(t)?t.detection.score:void 0,n=t instanceof Lp?t.box:Bp(t)?t.detection.box:new Sh(t),r=e?&quot;&quot;+gh(e):void 0;new jh(n,{label:r}).draw(o)})},drawFaceExpressions:function(o,t,i,a){void 0===i&amp;&amp;(i=.1),(Array.isArray(t)?t:[t]).forEach(function(t){var e=t instanceof Qp?t:Zp(t)?t.expressions:void 0;if(!e)throw new Error(&quot;drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions&lt;{}&gt; or array thereof&quot;);var n=e.asSortedArray().filter(function(t){return t.probability&gt;i}),r=Bp(t)?t.detection.box.bottomLeft:a||new lh(0,0);new Hh(n.map(function(t){return t.expression+&quot; (&quot;+gh(t.probability)+&quot;)&quot;}),r).draw(o)})},DrawFaceLandmarksOptions:af,DrawFaceLandmarks:sf,drawFaceLandmarks:function(n,t){(Array.isArray(t)?t:[t]).forEach(function(t){var e=t instanceof ef?t:rf(t)?t.landmarks:void 0;if(!e)throw new Error(&quot;drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt; or array thereof&quot;);new sf(e).draw(n)})}});function cf(t,e){var n,r,o,i,a=[],s=np(t),u=s.extractWeights,c=s.getRemainingWeights,l=(o=Yh(n=u,r=a),i=Zh(n,r),{extractConvParams:o,extractSeparableConvParams:i,extractReductionBlockParams:function(t,e,n){return{separable_conv0:i(t,e,n+&quot;/separable_conv0&quot;),separable_conv1:i(e,e,n+&quot;/separable_conv1&quot;),expansion_conv:o(t,e,1,n+&quot;/expansion_conv&quot;)}},extractMainBlockParams:function(t,e){return{separable_conv0:i(t,t,e+&quot;/separable_conv0&quot;),separable_conv1:i(t,t,e+&quot;/separable_conv1&quot;),separable_conv2:i(t,t,e+&quot;/separable_conv2&quot;)}}}),h=l.extractSeparableConvParams,p=l.extractReductionBlockParams,f=l.extractMainBlockParams,d={conv_in:(0,l.extractConvParams)(3,32,3,&quot;entry_flow/conv_in&quot;),reduction_block_0:p(32,64,&quot;entry_flow/reduction_block_0&quot;),reduction_block_1:p(64,128,&quot;entry_flow/reduction_block_1&quot;)},v={};bh(e,0,1).forEach(function(t){v[&quot;main_block_&quot;+t]=f(128,&quot;middle_flow/main_block_&quot;+t)});var m={reduction_block:p(128,256,&quot;exit_flow/reduction_block&quot;),separable_conv:h(256,512,&quot;exit_flow/separable_conv&quot;)};if(0!==c().length)throw new Error(&quot;weights remaing after extract: &quot;+c().length);return{paramMappings:a,params:{entry_flow:d,middle_flow:v,exit_flow:m}}}function lf(t,e){var n,r,o,i=[],a=(n=ep(t,i),r=Hp(n),o=tp(n),{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:function(t){return{separable_conv0:o(t+&quot;/separable_conv0&quot;),separable_conv1:o(t+&quot;/separable_conv1&quot;),expansion_conv:r(t+&quot;/expansion_conv&quot;)}},extractMainBlockParams:function(t){return{separable_conv0:o(t+&quot;/separable_conv0&quot;),separable_conv1:o(t+&quot;/separable_conv1&quot;),separable_conv2:o(t+&quot;/separable_conv2&quot;)}}}),s=a.extractSeparableConvParams,u=a.extractReductionBlockParams,c=a.extractMainBlockParams,l={conv_in:(0,a.extractConvParams)(&quot;entry_flow/conv_in&quot;),reduction_block_0:u(&quot;entry_flow/reduction_block_0&quot;),reduction_block_1:u(&quot;entry_flow/reduction_block_1&quot;)},h={};bh(e,0,1).forEach(function(t){h[&quot;main_block_&quot;+t]=c(&quot;middle_flow/main_block_&quot;+t)});var p={reduction_block:u(&quot;exit_flow/reduction_block&quot;),separable_conv:s(&quot;exit_flow/separable_conv&quot;)};return Xh(t,i),{params:{entry_flow:l,middle_flow:h,exit_flow:p},paramMappings:i}}function hf(t,e,n){return xu(Ss(t,e.filters,n,&quot;same&quot;),e.bias)}function pf(t,e,n){void 0===n&amp;&amp;(n=!0);var r=n?Xu(t):t;return r=zp(r,e.separable_conv0,[1,1]),r=zp(Xu(r),e.separable_conv1,[1,1]),r=Us(r,[3,3],[2,2],&quot;same&quot;),r=xu(r,hf(t,e.expansion_conv,[2,2]))}var ff,df=function(n){function t(t){var e=n.call(this,&quot;TinyXception&quot;)||this;return e._numMainBlocks=t,e}return a(t,n),t.prototype.forwardInput=function(e){var n=this,i=this.params;if(!i)throw new Error(&quot;TinyXception - load model before inference&quot;);return ue(function(){var t=Ep(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ve(256)),o=Xu(hf(t,i.entry_flow.conv_in,[2,2]));return o=pf(o=pf(o,i.entry_flow.reduction_block_0,!1),i.entry_flow.reduction_block_1),bh(n._numMainBlocks,0,1).forEach(function(t){var e,n,r;e=o,n=i.middle_flow[&quot;main_block_&quot;+t],r=zp(Xu(e),n.separable_conv0,[1,1]),r=zp(Xu(r),n.separable_conv1,[1,1]),r=zp(Xu(r),n.separable_conv2,[1,1]),o=r=xu(r,e)}),o=pf(o,i.exit_flow.reduction_block),o=Xu(zp(o,i.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},t.prototype.getDefaultModelName=function(){return&quot;tiny_xception_model&quot;},t.prototype.extractParamsFromWeigthMap=function(t){return lf(t,this._numMainBlocks)},t.prototype.extractParams=function(t){return cf(t,this._numMainBlocks)},t}(xp);(ff=c.Gender||(c.Gender={})).FEMALE=&quot;female&quot;,ff.MALE=&quot;male&quot;;var vf=function(n){function t(t){void 0===t&amp;&amp;(t=new df(2));var e=n.call(this,&quot;AgeGenderNet&quot;)||this;return e._faceFeatureExtractor=t,e}return a(t,n),Object.defineProperty(t.prototype,&quot;faceFeatureExtractor&quot;,{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+&quot; - load model before inference&quot;);return ue(function(){var t=n instanceof gp?r.faceFeatureExtractor.forwardInput(n):n,e=Gs(t,[7,7],[2,2],&quot;valid&quot;).as2D(t.shape[0],-1);return{age:$p(e,o.fc.age).as1D(),gender:$p(e,o.fc.gender)}})},t.prototype.forwardInput=function(r){var o=this;return ue(function(){var t=o.runNet(r),e=t.age,n=t.gender;return{age:e,gender:Le(n)}})},t.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},t.prototype.predictAgeAndGender=function(s){return p(this,void 0,void 0,function(){var e,n,r,o,i,a,u=this;return P(this,function(t){switch(t.label){case 0:return[4,yp(s)];case 1:return e=t.sent(),[4,this.forwardInput(e)];case 2:return n=t.sent(),r=ha(n.age),o=ha(n.gender),i=r.map(function(t,e){return{ageTensor:t,genderTensor:o[e]}}),[4,Promise.all(i.map(function(t){var a=t.ageTensor,s=t.genderTensor;return p(u,void 0,void 0,function(){var e,n,r,o,i;return P(this,function(t){switch(t.label){case 0:return[4,a.data()];case 1:return e=t.sent()[0],[4,s.data()];case 2:return n=t.sent()[0],o=(r=.5&lt;n)?c.Gender.MALE:c.Gender.FEMALE,i=r?n:1-n,a.dispose(),s.dispose(),[2,{age:e,gender:o,genderProbability:i}]}})})}))];case 3:return a=t.sent(),n.age.dispose(),n.gender.dispose(),[2,e.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return&quot;age_gender_model&quot;},t.prototype.dispose=function(t){void 0===t&amp;&amp;(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(t){var e=this.extractClassifierParams(t),n=e.params,r=e.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(t){return function(t){var e=[],n=np(t),r=n.extractWeights,o=n.getRemainingWeights,i=Qh(r,e),a=i(512,1,&quot;fc/age&quot;),s=i(512,2,&quot;fc/gender&quot;);if(0!==o().length)throw new Error(&quot;weights remaing after extract: &quot;+o().length);return{paramMappings:e,params:{fc:{age:a,gender:s}}}}(t)},t.prototype.extractParamsFromWeigthMap=function(t){var e=Kp(t),n=e.featureExtractorMap,r=e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(t){var e=[],n=ep(t,e);function r(t){return{weights:n(t+&quot;/weights&quot;,2),bias:n(t+&quot;/bias&quot;,1)}}var o={fc:{age:r(&quot;fc/age&quot;),gender:r(&quot;fc/gender&quot;)}};return Xh(t,e),{params:o,paramMappings:e}}(r)},t.prototype.extractParams=function(t){var e=t.slice(0,t.length-1539),n=t.slice(t.length-1539);return this.faceFeatureExtractor.extractWeights(e),this.extractClassifierParams(n)},t}(xp),mf=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],wh([t[3],t[4]])]},e}(ef),gf=function(){function t(t,e){this._label=t,this._distance=e}return Object.defineProperty(t.prototype,&quot;label&quot;,{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;distance&quot;,{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){return void 0===t&amp;&amp;(t=!0),this.label+(t?&quot; (&quot;+gh(this.distance)+&quot;)&quot;:&quot;&quot;)},t}(),yf=function(){function t(t,e){if(&quot;string&quot;!=typeof t)throw new Error(&quot;LabeledFaceDescriptors - constructor expected label to be a string&quot;);if(!Array.isArray(e)||e.some(function(t){return!(t instanceof Float32Array)}))throw new Error(&quot;LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array&quot;);this._label=t,this._descriptors=e}return Object.defineProperty(t.prototype,&quot;label&quot;,{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;descriptors&quot;,{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t}();function xf(s,u){return p(this,void 0,void 0,function(){var e,n,r,o,i,a;return P(this,function(t){switch(t.label){case 0:return e=zh.getEnv().Canvas,(n=s)instanceof e?[3,5]:[4,yp(s)];case 1:if(1&lt;(r=t.sent()).batchSize)throw new Error(&quot;extractFaces - batchSize &gt; 1 not supported&quot;);return(o=r.getInput(0))instanceof e?(i=o,[3,4]):[3,2];case 2:return[4,pp(o)];case 3:i=t.sent(),t.label=4;case 4:n=i,t.label=5;case 5:return a=Gh(n),[2,u.map(function(t){return t instanceof Lp?t.forSize(n.width,n.height).box.floor():t}).map(function(t){return t.clipAtImageBorders(n.width,n.height)}).map(function(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=up({width:r,height:o});return Gh(i).putImageData(a.getImageData(e,n,r,o),0,0),i})]}})})}function wf(u,e){return p(this,void 0,void 0,function(){return P(this,function(t){if(!fh(u)&amp;&amp;!dh(u))throw new Error(&quot;extractFaceTensors - expected image tensor to be 3D or 4D&quot;);if(dh(u)&amp;&amp;1&lt;u.shape[0])throw new Error(&quot;extractFaceTensors - batchSize &gt; 1 not supported&quot;);return[2,ue(function(){var t=u.shape.slice(dh(u)?1:0),i=t[0],a=t[1],s=t[2];return e.map(function(t){return t instanceof Lp?t.forSize(a,i).box:t}).map(function(t){return t.clipAtImageBorders(a,i)}).map(function(t){var e=t.x,n=t.y,r=t.width,o=t.height;return $s(u.as3D(i,a,s),[n,e,0],[o,r,s])})})]})})}var bf=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.postProcess=function(t,o,e){var i=e.map(function(t){var e=t.width,n=t.height,r=o/Math.max(n,e);return{width:e*r,height:n*r}}),a=i.length;return ue(function(){var n=function(t,e){return ua([Je([68],t),Je([68],e)],1).as2D(1,136).as1D()},r=function(t,e){var n=i[t],r=n.width,o=n.height;return e(r,o)?Math.abs(r-o)/2:0};return t.mul(Je([a,136],o)).sub(ua(Array.from(Array(a),function(t,e){return n(r(e,function(t,e){return t&lt;e}),r(e,function(t,e){return e&lt;t}))}))).div(ua(Array.from(Array(a),function(t,e){return n(i[e].width,i[e].height)})))})},e.prototype.forwardInput=function(e){var n=this;return ue(function(){var t=n.runNet(e);return n.postProcess(t,e.inputSize,e.inputDimensions.map(function(t){return{height:t[0],width:t[1]}}))})},e.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},e.prototype.detectLandmarks=function(o){return p(this,void 0,void 0,function(){var u,e,n,r=this;return P(this,function(t){switch(t.label){case 0:return[4,yp(o)];case 1:return u=t.sent(),e=ue(function(){return ha(r.forwardInput(u))}),[4,Promise.all(e.map(function(a,s){return p(r,void 0,void 0,function(){var e,n,r,o,i;return P(this,function(t){switch(t.label){case 0:return r=(n=Array).from,[4,a.data()];case 1:return e=r.apply(n,[t.sent()]),o=e.filter(function(t,e){return mh(e)}),i=e.filter(function(t,e){return!mh(e)}),[2,new nf(Array(68).fill(0).map(function(t,e){return new lh(o[e],i[e])}),{height:u.getInputHeight(s),width:u.getInputWidth(s)})]}})})}))];case 2:return n=t.sent(),e.forEach(function(t){return t.dispose()}),[2,u.isBatchInput?n:n[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Xp),Ef=function(e){function t(t){return void 0===t&amp;&amp;(t=new jp),e.call(this,&quot;FaceLandmark68Net&quot;,t)||this}return a(t,e),t.prototype.getDefaultModelName=function(){return&quot;face_landmark_68_model&quot;},t.prototype.getClassifierChannelsIn=function(){return 256},t}(bf);var Cf=function(t){function e(){return t.call(this,&quot;TinyFaceFeatureExtractor&quot;)||this}return a(e,t),e.prototype.forwardInput=function(e){var n=this.params;if(!n)throw new Error(&quot;TinyFaceFeatureExtractor - load model before inference&quot;);return ue(function(){var t=Up(Ep(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ve(255)),n.dense0,!0);return t=Up(t=Up(t,n.dense1),n.dense2),t=Gs(t,[14,14],[2,2],&quot;valid&quot;)})},e.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},e.prototype.getDefaultModelName=function(){return&quot;face_feature_extractor_tiny_model&quot;},e.prototype.extractParamsFromWeigthMap=function(t){return r=qp(e=t,n=[]).extractDenseBlock3Params,o={dense0:r(&quot;dense0&quot;,!0),dense1:r(&quot;dense1&quot;),dense2:r(&quot;dense2&quot;)},Xh(e,n),{params:o,paramMappings:n};var e,n,r,o},e.prototype.extractParams=function(t){return function(t){var e=[],n=np(t),r=n.extractWeights,o=n.getRemainingWeights,i=Vp(r,e).extractDenseBlock3Params,a=i(3,32,&quot;dense0&quot;,!0),s=i(32,64,&quot;dense1&quot;),u=i(64,128,&quot;dense2&quot;);if(0!==o().length)throw new Error(&quot;weights remaing after extract: &quot;+o().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u}}}(t)},e}(xp),_f=function(e){function t(t){return void 0===t&amp;&amp;(t=new Cf),e.call(this,&quot;FaceLandmark68TinyNet&quot;,t)||this}return a(t,e),t.prototype.getDefaultModelName=function(){return&quot;face_landmark_68_tiny_model&quot;},t.prototype.getClassifierChannelsIn=function(){return 128},t}(bf),Sf=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e}(Ef);function Rf(t,e,n,r,o){void 0===o&amp;&amp;(o=&quot;same&quot;);var i,a,s=e.conv,u=s.filters,c=s.bias,l=Ss(t,u,n,o);return l=xu(l,c),i=l,a=e.scale,l=xu(Du(i,a.weights),a.biases),r?Xu(l):l}function Nf(t,e){return Rf(t,e,[1,1],!1)}function kf(t,e){return Rf(t,e,[2,2],!0,&quot;valid&quot;)}function If(u,c){function l(t,e,n,r){var o=function(t,e,n){var r=u(t),o=r.length/(e*n*n);if(vh(o))throw new Error(&quot;depth has to be an integer: &quot;+o+&quot;, weights.length: &quot;+r.length+&quot;, numFilters: &quot;+e+&quot;, filterSize: &quot;+n);return ue(function(){return Qu($e(r,[e,o,n,n]),[2,3,1,0])})}(t,e,n),i=He(u(e));return c.push({paramPath:r+&quot;/filters&quot;},{paramPath:r+&quot;/bias&quot;}),{filters:o,bias:i}}function i(t,e,n,r){var o,i,a,s;return{conv:l(t,e,n,r+&quot;/conv&quot;),scale:(i=r+&quot;/scale&quot;,a=He(u(o=e)),s=He(u(o)),c.push({paramPath:i+&quot;/weights&quot;},{paramPath:i+&quot;/biases&quot;}),{weights:a,biases:s})}}return{extractConvLayerParams:i,extractResidualLayerParams:function(t,e,n,r,o){return void 0===o&amp;&amp;(o=!1),{conv1:i((o?.5:1)*t,e,n,r+&quot;/conv1&quot;),conv2:i(t,e,n,r+&quot;/conv2&quot;)}}}}function Tf(t,e){var n=ep(t,e);function r(t){var e;return{conv:{filters:n(t+&quot;/conv/filters&quot;,4),bias:n(t+&quot;/conv/bias&quot;,1)},scale:{weights:n((e=t)+&quot;/scale/weights&quot;,1),biases:n(e+&quot;/scale/biases&quot;,1)}}}return{extractConvLayerParams:r,extractResidualLayerParams:function(t){return{conv1:r(t+&quot;/conv1&quot;),conv2:r(t+&quot;/conv2&quot;)}}}}function Af(t,e){var n,r,o=(n=t,r=e.conv1,Rf(n,r,[1,1],!0));return o=Nf(o,e.conv2),o=xu(o,t),o=Xu(o)}function Df(t,e){var n=kf(t,e.conv1);n=Nf(n,e.conv2);var r=Gs(t,2,2,&quot;valid&quot;),o=Qe(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var a=n.shape.slice();a[1]=1;var s=Qe(a),u=(n=_i([n,s],1)).shape.slice();u[2]=1;var c=Qe(u);n=_i([n,c],2)}return r=i?_i([r,o],3):r,n=xu(r,n),n=Xu(n)}var Mf=function(t){function e(){return t.call(this,&quot;FaceRecognitionNet&quot;)||this}return a(e,t),e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error(&quot;FaceRecognitionNet - load model before inference&quot;);return ue(function(){var t=kf(Ep(n.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Ve(256)),r.conv32_down),e=(t=Df(t=Af(t=Af(t=Df(t=Af(t=Af(t=Df(t=Af(t=Af(t=Af(t=Df(t=Af(t=Af(t=Af(t=Us(t,3,2,&quot;valid&quot;),r.conv32_1),r.conv32_2),r.conv32_3),r.conv64_down),r.conv64_1),r.conv64_2),r.conv64_3),r.conv128_down),r.conv128_1),r.conv128_2),r.conv256_down),r.conv256_1),r.conv256_2),r.conv256_down_out)).mean([1,2]);return As(e,r.fc)})},e.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},e.prototype.computeFaceDescriptor=function(i){return p(this,void 0,void 0,function(){var e,n,r,o=this;return P(this,function(t){switch(t.label){case 0:return[4,yp(i)];case 1:return e=t.sent(),n=ue(function(){return ha(o.forwardInput(e))}),[4,Promise.all(n.map(function(t){return t.data()}))];case 2:return r=t.sent(),n.forEach(function(t){return t.dispose()}),[2,e.isBatchInput?r:r[0]]}})})},e.prototype.getDefaultModelName=function(){return&quot;face_recognition_model&quot;},e.prototype.extractParamsFromWeigthMap=function(t){return function(t){var e=[],n=Tf(t,e),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r(&quot;conv32_down&quot;),a=o(&quot;conv32_1&quot;),s=o(&quot;conv32_2&quot;),u=o(&quot;conv32_3&quot;),c=o(&quot;conv64_down&quot;),l=o(&quot;conv64_1&quot;),h=o(&quot;conv64_2&quot;),p=o(&quot;conv64_3&quot;),f=o(&quot;conv128_down&quot;),d=o(&quot;conv128_1&quot;),v=o(&quot;conv128_2&quot;),m=o(&quot;conv256_down&quot;),g=o(&quot;conv256_1&quot;),y=o(&quot;conv256_2&quot;),x=o(&quot;conv256_down_out&quot;),w=t.fc;if(e.push({originalPath:&quot;fc&quot;,paramPath:&quot;fc&quot;}),!ph(w))throw new Error(&quot;expected weightMap[fc] to be a Tensor2D, instead have &quot;+w);var b={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:h,conv64_3:p,conv128_down:f,conv128_1:d,conv128_2:v,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:x,fc:w};return Xh(t,e),{params:b,paramMappings:e}}(t)},e.prototype.extractParams=function(t){return function(t){var e=np(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],i=If(n,o),a=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=a(4704,32,7,&quot;conv32_down&quot;),c=s(9216,32,3,&quot;conv32_1&quot;),l=s(9216,32,3,&quot;conv32_2&quot;),h=s(9216,32,3,&quot;conv32_3&quot;),p=s(36864,64,3,&quot;conv64_down&quot;,!0),f=s(36864,64,3,&quot;conv64_1&quot;),d=s(36864,64,3,&quot;conv64_2&quot;),v=s(36864,64,3,&quot;conv64_3&quot;),m=s(147456,128,3,&quot;conv128_down&quot;,!0),g=s(147456,128,3,&quot;conv128_1&quot;),y=s(147456,128,3,&quot;conv128_2&quot;),x=s(589824,256,3,&quot;conv256_down&quot;,!0),w=s(589824,256,3,&quot;conv256_1&quot;),b=s(589824,256,3,&quot;conv256_2&quot;),E=s(589824,256,3,&quot;conv256_down_out&quot;),C=ue(function(){return Qu(qe(n(32768),[128,256]),[1,0])});if(o.push({paramPath:&quot;fc&quot;}),0!==r().length)throw new Error(&quot;weights remaing after extract: &quot;+r().length);return{params:{conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:h,conv64_down:p,conv64_1:f,conv64_2:d,conv64_3:v,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:x,conv256_1:w,conv256_2:b,conv256_down_out:E,fc:C},paramMappings:o}}(t)},e}(xp);function Of(t,e){var n={descriptor:e};return Object.assign({},t,n)}var Pf=function(){function t(t){var e=void 0===t?{}:t,n=e.minFaceSize,r=e.scaleFactor,o=e.maxNumScales,i=e.scoreThresholds,a=e.scaleSteps;if(this._name=&quot;MtcnnOptions&quot;,this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,&quot;number&quot;!=typeof this._minFaceSize||this._minFaceSize&lt;0)throw new Error(this._name+&quot; - expected minFaceSize to be a number &gt; 0&quot;);if(&quot;number&quot;!=typeof this._scaleFactor||this._scaleFactor&lt;=0||1&lt;=this._scaleFactor)throw new Error(this._name+&quot; - expected scaleFactor to be a number between 0 and 1&quot;);if(&quot;number&quot;!=typeof this._maxNumScales||this._maxNumScales&lt;0)throw new Error(this._name+&quot; - expected maxNumScales to be a number &gt; 0&quot;);if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(t){return&quot;number&quot;!=typeof t}))throw new Error(this._name+&quot; - expected scoreThresholds to be an array of numbers of length 3&quot;);if(this._scaleSteps&amp;&amp;(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(t){return&quot;number&quot;!=typeof t})))throw new Error(this._name+&quot; - expected scaleSteps to be an array of numbers&quot;)}return Object.defineProperty(t.prototype,&quot;minFaceSize&quot;,{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;scaleFactor&quot;,{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;maxNumScales&quot;,{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;scoreThresholds&quot;,{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;scaleSteps&quot;,{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function Ff(l,h){function i(t,e,n,r,o){var i=$e(l(t*e*n*n),[n,n,t,e]),a=He(l(e));return h.push({paramPath:r+&quot;/filters&quot;},{paramPath:r+&quot;/&quot;+(o?&quot;batch_norm_offset&quot;:&quot;bias&quot;)}),{filters:i,bias:a}}function p(t,e,n,r){var o=i(t,e,n,r,!0);return{filters:o.filters,batch_norm_offset:o.bias}}function t(t,e,n){var r,o,i,a,s,u,c;return{depthwise_conv:(o=n+&quot;/depthwise_conv&quot;,i=$e(l(9*(r=t)),[3,3,r,1]),a=He(l(r)),s=He(l(r)),u=He(l(r)),c=He(l(r)),h.push({paramPath:o+&quot;/filters&quot;},{paramPath:o+&quot;/batch_norm_scale&quot;},{paramPath:o+&quot;/batch_norm_offset&quot;},{paramPath:o+&quot;/batch_norm_mean&quot;},{paramPath:o+&quot;/batch_norm_variance&quot;}),{filters:i,batch_norm_scale:a,batch_norm_offset:s,batch_norm_mean:u,batch_norm_variance:c}),pointwise_conv:p(t,e,1,n+&quot;/pointwise_conv&quot;)}}return{extractMobilenetV1Params:function(){return{conv_0:p(3,32,3,&quot;mobilenetv1/conv_0&quot;),conv_1:t(32,64,&quot;mobilenetv1/conv_1&quot;),conv_2:t(64,128,&quot;mobilenetv1/conv_2&quot;),conv_3:t(128,128,&quot;mobilenetv1/conv_3&quot;),conv_4:t(128,256,&quot;mobilenetv1/conv_4&quot;),conv_5:t(256,256,&quot;mobilenetv1/conv_5&quot;),conv_6:t(256,512,&quot;mobilenetv1/conv_6&quot;),conv_7:t(512,512,&quot;mobilenetv1/conv_7&quot;),conv_8:t(512,512,&quot;mobilenetv1/conv_8&quot;),conv_9:t(512,512,&quot;mobilenetv1/conv_9&quot;),conv_10:t(512,512,&quot;mobilenetv1/conv_10&quot;),conv_11:t(512,512,&quot;mobilenetv1/conv_11&quot;),conv_12:t(512,1024,&quot;mobilenetv1/conv_12&quot;),conv_13:t(1024,1024,&quot;mobilenetv1/conv_13&quot;)}},extractPredictionLayerParams:function(){return{conv_0:p(1024,256,1,&quot;prediction_layer/conv_0&quot;),conv_1:p(256,512,3,&quot;prediction_layer/conv_1&quot;),conv_2:p(512,128,1,&quot;prediction_layer/conv_2&quot;),conv_3:p(128,256,3,&quot;prediction_layer/conv_3&quot;),conv_4:p(256,128,1,&quot;prediction_layer/conv_4&quot;),conv_5:p(128,256,3,&quot;prediction_layer/conv_5&quot;),conv_6:p(256,64,1,&quot;prediction_layer/conv_6&quot;),conv_7:p(64,128,3,&quot;prediction_layer/conv_7&quot;),box_predictor_0:{box_encoding_predictor:i(512,12,1,&quot;prediction_layer/box_predictor_0/box_encoding_predictor&quot;),class_predictor:i(512,9,1,&quot;prediction_layer/box_predictor_0/class_predictor&quot;)},box_predictor_1:{box_encoding_predictor:i(1024,24,1,&quot;prediction_layer/box_predictor_1/box_encoding_predictor&quot;),class_predictor:i(1024,18,1,&quot;prediction_layer/box_predictor_1/class_predictor&quot;)},box_predictor_2:{box_encoding_predictor:i(512,24,1,&quot;prediction_layer/box_predictor_2/box_encoding_predictor&quot;),class_predictor:i(512,18,1,&quot;prediction_layer/box_predictor_2/class_predictor&quot;)},box_predictor_3:{box_encoding_predictor:i(256,24,1,&quot;prediction_layer/box_predictor_3/box_encoding_predictor&quot;),class_predictor:i(256,18,1,&quot;prediction_layer/box_predictor_3/class_predictor&quot;)},box_predictor_4:{box_encoding_predictor:i(256,24,1,&quot;prediction_layer/box_predictor_4/box_encoding_predictor&quot;),class_predictor:i(256,18,1,&quot;prediction_layer/box_predictor_4/class_predictor&quot;)},box_predictor_5:{box_encoding_predictor:i(128,24,1,&quot;prediction_layer/box_predictor_5/box_encoding_predictor&quot;),class_predictor:i(128,18,1,&quot;prediction_layer/box_predictor_5/class_predictor&quot;)}}}}}function Lf(t){var e=[],n=function(t,e){var i=ep(t,e);function a(t,e,n){return{filters:i(t+&quot;/Conv2d_&quot;+e+&quot;_pointwise/weights&quot;,4,n+&quot;/filters&quot;),batch_norm_offset:i(t+&quot;/Conv2d_&quot;+e+&quot;_pointwise/convolution_bn_offset&quot;,1,n+&quot;/batch_norm_offset&quot;)}}function n(t){var e=&quot;mobilenetv1/conv_&quot;+t,n=&quot;MobilenetV1/Conv2d_&quot;+t+&quot;_depthwise&quot;,r=e+&quot;/depthwise_conv&quot;,o=e+&quot;/pointwise_conv&quot;;return{depthwise_conv:{filters:i(n+&quot;/depthwise_weights&quot;,4,r+&quot;/filters&quot;),batch_norm_scale:i(n+&quot;/BatchNorm/gamma&quot;,1,r+&quot;/batch_norm_scale&quot;),batch_norm_offset:i(n+&quot;/BatchNorm/beta&quot;,1,r+&quot;/batch_norm_offset&quot;),batch_norm_mean:i(n+&quot;/BatchNorm/moving_mean&quot;,1,r+&quot;/batch_norm_mean&quot;),batch_norm_variance:i(n+&quot;/BatchNorm/moving_variance&quot;,1,r+&quot;/batch_norm_variance&quot;)},pointwise_conv:a(&quot;MobilenetV1&quot;,t,o)}}function r(t,e){return{filters:i(t+&quot;/weights&quot;,4,e+&quot;/filters&quot;),bias:i(t+&quot;/biases&quot;,1,e+&quot;/bias&quot;)}}function o(t){return{box_encoding_predictor:r(&quot;Prediction/BoxPredictor_&quot;+t+&quot;/BoxEncodingPredictor&quot;,&quot;prediction_layer/box_predictor_&quot;+t+&quot;/box_encoding_predictor&quot;),class_predictor:r(&quot;Prediction/BoxPredictor_&quot;+t+&quot;/ClassPredictor&quot;,&quot;prediction_layer/box_predictor_&quot;+t+&quot;/class_predictor&quot;)}}return{extractMobilenetV1Params:function(){return{conv_0:a(&quot;MobilenetV1&quot;,0,&quot;mobilenetv1/conv_0&quot;),conv_1:n(1),conv_2:n(2),conv_3:n(3),conv_4:n(4),conv_5:n(5),conv_6:n(6),conv_7:n(7),conv_8:n(8),conv_9:n(9),conv_10:n(10),conv_11:n(11),conv_12:n(12),conv_13:n(13)}},extractPredictionLayerParams:function(){return{conv_0:a(&quot;Prediction&quot;,0,&quot;prediction_layer/conv_0&quot;),conv_1:a(&quot;Prediction&quot;,1,&quot;prediction_layer/conv_1&quot;),conv_2:a(&quot;Prediction&quot;,2,&quot;prediction_layer/conv_2&quot;),conv_3:a(&quot;Prediction&quot;,3,&quot;prediction_layer/conv_3&quot;),conv_4:a(&quot;Prediction&quot;,4,&quot;prediction_layer/conv_4&quot;),conv_5:a(&quot;Prediction&quot;,5,&quot;prediction_layer/conv_5&quot;),conv_6:a(&quot;Prediction&quot;,6,&quot;prediction_layer/conv_6&quot;),conv_7:a(&quot;Prediction&quot;,7,&quot;prediction_layer/conv_7&quot;),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(t,e),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=t[&quot;Output/extra_dim&quot;];if(e.push({originalPath:&quot;Output/extra_dim&quot;,paramPath:&quot;output_layer/extra_dim&quot;}),!fh(i))throw new Error(&quot;expected weightMap[&#39;Output/extra_dim&#39;] to be a Tensor3D, instead have &quot;+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return Xh(t,e),{params:a,paramMappings:e}}function Bf(e,n,r){return ue(function(){var t=Ss(e,n.filters,r,&quot;same&quot;);return t=xu(t,n.batch_norm_offset),Sa(t,0,6)})}var Wf=.0010000000474974513;function zf(t,e){return ue(function(){var u=null,c=Bf(t,e.conv_0,[2,2]);if([e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13].forEach(function(t,e){var n,r,o,i,a=e+1,s=(n=a,[2,4,6,12].some(function(t){return t===n})?[2,2]:[1,1]);r=c,o=t.depthwise_conv,i=s,c=Bf(c=ue(function(){var t=ks(r,o.filters,i,&quot;same&quot;);return t=us(t,o.batch_norm_mean,o.batch_norm_variance,o.batch_norm_offset,o.batch_norm_scale,Wf),Sa(t,0,6)}),t.pointwise_conv,[1,1]),11===a&amp;&amp;(u=c)}),null===u)throw new Error(&quot;mobileNetV1 - output of conv layer 11 is null&quot;);return{out:c,conv11:u}})}function Uf(t,e,n){var r=t.arraySync(),o=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),a=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),h=Math.max(r[n][1],r[n][3]),p=(a-o)*(s-i),f=(l-u)*(h-c);if(p&lt;=0||f&lt;=0)return 0;var d=Math.max(o,u),v=Math.max(i,c),m=Math.min(a,l),g=Math.min(s,h),y=Math.max(m-d,0)*Math.max(g-v,0);return y/(p+f-y)}function Gf(t,e){var n,r,o=(n=ha(Qu(t,[1,0])),{sizes:r=[Bu(n[2],n[0]),Bu(n[3],n[1])],centers:[xu(n[0],Cu(r[0],Ve(2))),xu(n[1],Cu(r[1],Ve(2)))]}),i=o.sizes,a=o.centers,s=ha(Qu(e,[1,0])),u=Cu(Du(Ia(Cu(s[2],Ve(5))),i[0]),Ve(2)),c=xu(Du(Cu(s[0],Ve(10)),i[0]),a[0]),l=Cu(Du(Ia(Cu(s[3],Ve(5))),i[1]),Ve(2)),h=xu(Du(Cu(s[1],Ve(10)),i[1]),a[1]);return Qu(ua([Bu(c,u),Bu(h,l),xu(c,u),xu(h,l)]),[1,0])}function Vf(e,n){return ue(function(){var t=e.shape[0];return{boxPredictionEncoding:ia(Kh(e,n.box_encoding_predictor),[t,-1,1,4]),classPrediction:ia(Kh(e,n.class_predictor),[t,-1,3])}})}var Hf=function(){function t(t){var e=void 0===t?{}:t,n=e.minConfidence,r=e.maxResults;if(this._name=&quot;SsdMobilenetv1Options&quot;,this._minConfidence=n||.5,this._maxResults=r||100,&quot;number&quot;!=typeof this._minConfidence||this._minConfidence&lt;=0||1&lt;=this._minConfidence)throw new Error(this._name+&quot; - expected minConfidence to be a number between 0 and 1&quot;);if(&quot;number&quot;!=typeof this._maxResults)throw new Error(this._name+&quot; - expected maxResults to be a number&quot;)}return Object.defineProperty(t.prototype,&quot;minConfidence&quot;,{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;maxResults&quot;,{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),qf=function(t){function e(){return t.call(this,&quot;SsdMobilenetv1&quot;)||this}return a(e,t),e.prototype.forwardInput=function(u){var c=this.params;if(!c)throw new Error(&quot;SsdMobilenetv1 - load model before inference&quot;);return ue(function(){var l,h,p,o,i,a,t=u.toBatchTensor(512,!1).toFloat(),e=zf(Bu(Du(t,Ve(.007843137718737125)),Ve(1)),c.mobilenetv1),n=(l=e.out,h=e.conv11,p=c.prediction_layer,ue(function(){var t=Bf(Bf(l,p.conv_0,[1,1]),p.conv_1,[2,2]),e=Bf(Bf(t,p.conv_2,[1,1]),p.conv_3,[2,2]),n=Bf(Bf(e,p.conv_4,[1,1]),p.conv_5,[2,2]),r=Bf(Bf(n,p.conv_6,[1,1]),p.conv_7,[2,2]),o=Vf(h,p.box_predictor_0),i=Vf(l,p.box_predictor_1),a=Vf(t,p.box_predictor_2),s=Vf(e,p.box_predictor_3),u=Vf(n,p.box_predictor_4),c=Vf(r,p.box_predictor_5);return{boxPredictions:_i([o.boxPredictionEncoding,i.boxPredictionEncoding,a.boxPredictionEncoding,s.boxPredictionEncoding,u.boxPredictionEncoding,c.boxPredictionEncoding],1),classPredictions:_i([o.classPrediction,i.classPrediction,a.classPrediction,s.classPrediction,u.classPrediction,c.classPrediction],1)}})),r=n.boxPredictions,s=n.classPredictions;return o=r,i=s,a=c.output_layer,ue(function(){var t=o.shape[0],e=Gf(ia(ca(a.extra_dim,[t,1,1]),[-1,4]),ia(o,[-1,4]));e=ia(e,[t,e.shape[0]/t,4]);var n=Wa(Hs(i,[0,0,1],[-1,-1,-1])),r=Hs(n,[0,0,0],[-1,-1,1]);return r=ia(r,[t,r.shape[1]]),{boxes:ha(e),scores:ha(r)}})})},e.prototype.forward=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent()])]}})})},e.prototype.locateFaces=function(T,A){return void 0===A&amp;&amp;(A={}),p(this,void 0,void 0,function(){var l,h,p,f,d,v,m,g,y,x,w,b,E,C,_,S,R,N,k,I;return P(this,function(t){switch(t.label){case 0:return l=new Hf(A),h=l.maxResults,p=l.minConfidence,[4,yp(T)];case 1:for(f=t.sent(),d=this.forwardInput(f),v=d.boxes,m=d.scores,g=v[0],y=m[0],x=1;x&lt;v.length;x++)v[x].dispose(),m[x].dispose();return E=(b=Array).from,[4,y.data()];case 2:return w=E.apply(b,[t.sent()]),e=w,n=h,i=.5,a=p,r=(o=g).shape[0],s=Math.min(n,r),u=e.map(function(t,e){return{score:t,boxIndex:e}}).filter(function(t){return t.score&gt;a}).sort(function(t,e){return e.score-t.score}),c=[],u.forEach(function(t){if(!(c.length&gt;=s)){for(var e=t.score,n=c.length-1;0&lt;=n;--n){var r=Uf(o,t.boxIndex,c[n]);if(0!==r&amp;&amp;(t.score*=r&lt;=i?1:0,t.score&lt;=a))break}e===t.score&amp;&amp;c.push(t.boxIndex)}}),C=c,_=f.getReshapedInputDimensions(0),S=f.inputSize,R=S/_.width,N=S/_.height,k=g.arraySync(),I=C.map(function(t){var e=[Math.max(0,k[t][0]),Math.min(1,k[t][2])].map(function(t){return t*N}),n=e[0],r=e[1],o=[Math.max(0,k[t][1]),Math.min(1,k[t][3])].map(function(t){return t*R}),i=o[0],a=o[1];return new Lp(w[t],new Th(i,n,a-i,r-n),{height:f.getInputHeight(0),width:f.getInputWidth(0)})}),g.dispose(),y.dispose(),[2,I]}var o,e,n,i,a,r,s,u,c})})},e.prototype.getDefaultModelName=function(){return&quot;ssd_mobilenetv1_model&quot;},e.prototype.extractParamsFromWeigthMap=function(t){return Lf(t)},e.prototype.extractParams=function(t){return function(t){var e=[],n=np(t),r=n.extractWeights,o=n.getRemainingWeights,i=Ff(r,e),a=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=a(),c=s(),l={extra_dim:je(r(20472),[1,5118,4])};if(e.push({paramPath:&quot;output_layer/extra_dim&quot;}),0!==o().length)throw new Error(&quot;weights remaing after extract: &quot;+o().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:l},paramMappings:e}}(t)},e}(xp);function jf(t){var e=new qf;return e.extractWeights(t),e}var $f=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e}(qf),Kf=function(e){function t(){var t=null!==e&amp;&amp;e.apply(this,arguments)||this;return t._name=&quot;TinyFaceDetectorOptions&quot;,t}return a(t,e),t}(Mp),Xf=function(){function t(){}return t.prototype.then=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},t.prototype.run=function(){return p(this,void 0,void 0,function(){return P(this,function(t){throw new Error(&quot;ComposableTask - run is not implemented&quot;)})})},t}();function Yf(a,s,u,c,l){return void 0===l&amp;&amp;(l=function(t){return t.alignedRect}),p(this,void 0,void 0,function(){var e,n,r,o,i;return P(this,function(t){switch(t.label){case 0:return e=a.map(function(t){return rf(t)?l(t):t.detection}),(r=c)?[3,5]:s instanceof dt?[4,wf(s,e)]:[3,2];case 1:return o=t.sent(),[3,4];case 2:return[4,xf(s,e)];case 3:o=t.sent(),t.label=4;case 4:r=o,t.label=5;case 5:return[4,u(n=r)];case 6:return i=t.sent(),n.forEach(function(t){return t instanceof dt&amp;&amp;t.dispose()}),[2,i]}})})}function Qf(e,r,o,i,a){return p(this,void 0,void 0,function(){var n=this;return P(this,function(t){return[2,Yf([e],r,function(e){return p(n,void 0,void 0,function(){return P(this,function(t){return[2,o(e[0])]})})},i,a)]})})}var Jf=2,Zf=12;function td(t){var e=np(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],i=function(r,o){var u=Yh(r,o),c=Qh(r,o);function l(t,e){var n=He(r(t));return o.push({paramPath:e}),n}function h(t,e,n){return void 0===n&amp;&amp;(n=!1),{conv1:u(t[0],t[1],3,e+&quot;/conv1&quot;),prelu1_alpha:l(t[1],e+&quot;/prelu1_alpha&quot;),conv2:u(t[1],t[2],3,e+&quot;/conv2&quot;),prelu2_alpha:l(t[2],e+&quot;/prelu2_alpha&quot;),conv3:u(t[2],t[3],n?2:3,e+&quot;/conv3&quot;),prelu3_alpha:l(t[3],e+&quot;/prelu3_alpha&quot;)}}return{extractPNetParams:function(){var t=h([3,10,16,32],&quot;pnet&quot;),e=u(32,2,1,&quot;pnet/conv4_1&quot;),n=u(32,4,1,&quot;pnet/conv4_2&quot;);return O({},t,{conv4_1:e,conv4_2:n})},extractRNetParams:function(){var t=h([3,28,48,64],&quot;rnet&quot;,!0),e=c(576,128,&quot;rnet/fc1&quot;),n=l(128,&quot;rnet/prelu4_alpha&quot;),r=c(128,2,&quot;rnet/fc2_1&quot;),o=c(128,4,&quot;rnet/fc2_2&quot;);return O({},t,{fc1:e,prelu4_alpha:n,fc2_1:r,fc2_2:o})},extractONetParams:function(){var t=h([3,32,64,64],&quot;onet&quot;),e=u(64,128,2,&quot;onet/conv4&quot;),n=l(128,&quot;onet/prelu4_alpha&quot;),r=c(1152,256,&quot;onet/fc1&quot;),o=l(256,&quot;onet/prelu5_alpha&quot;),i=c(256,2,&quot;onet/fc2_1&quot;),a=c(256,4,&quot;onet/fc2_2&quot;),s=c(256,10,&quot;onet/fc2_3&quot;);return O({},t,{conv4:e,prelu4_alpha:n,fc1:r,prelu5_alpha:o,fc2_1:i,fc2_2:a,fc2_3:s})}}}(n,o),a=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,c=a(),l=s(),h=u();if(0!==r().length)throw new Error(&quot;weights remaing after extract: &quot;+r().length);return{params:{pnet:c,rnet:l,onet:h},paramMappings:o}}function ed(t){var e=[],n=function(t,e){var n=ep(t,e);function u(t){return{filters:n(t+&quot;/weights&quot;,4,t+&quot;/filters&quot;),bias:n(t+&quot;/bias&quot;,1)}}function c(t){return{weights:n(t+&quot;/weights&quot;,2),bias:n(t+&quot;/bias&quot;,1)}}function l(t){return n(t,1)}function h(t){return{conv1:u(t+&quot;/conv1&quot;),prelu1_alpha:l(t+&quot;/prelu1_alpha&quot;),conv2:u(t+&quot;/conv2&quot;),prelu2_alpha:l(t+&quot;/prelu2_alpha&quot;),conv3:u(t+&quot;/conv3&quot;),prelu3_alpha:l(t+&quot;/prelu3_alpha&quot;)}}return{extractPNetParams:function(){var t=h(&quot;pnet&quot;),e=u(&quot;pnet/conv4_1&quot;),n=u(&quot;pnet/conv4_2&quot;);return O({},t,{conv4_1:e,conv4_2:n})},extractRNetParams:function(){var t=h(&quot;rnet&quot;),e=c(&quot;rnet/fc1&quot;),n=l(&quot;rnet/prelu4_alpha&quot;),r=c(&quot;rnet/fc2_1&quot;),o=c(&quot;rnet/fc2_2&quot;);return O({},t,{fc1:e,prelu4_alpha:n,fc2_1:r,fc2_2:o})},extractONetParams:function(){var t=h(&quot;onet&quot;),e=u(&quot;onet/conv4&quot;),n=l(&quot;onet/prelu4_alpha&quot;),r=c(&quot;onet/fc1&quot;),o=l(&quot;onet/prelu5_alpha&quot;),i=c(&quot;onet/fc2_1&quot;),a=c(&quot;onet/fc2_2&quot;),s=c(&quot;onet/fc2_3&quot;);return O({},t,{conv4:e,prelu4_alpha:n,fc1:r,prelu5_alpha:o,fc2_1:i,fc2_2:a,fc2_3:s})}}}(t,e),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),s=o(),u=i();return Xh(t,e),{params:{pnet:a,rnet:s,onet:u},paramMappings:e}}function nd(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}var rd=function(o){function t(t,e,n,r){return o.call(this,{left:t,top:e,right:n,bottom:r},!0)||this}return a(t,o),t}(Sh);function od(t){return ue(function(){return Du(Bu(t,Ve(127.5)),Ve(.0078125))})}function id(t,e){return ue(function(){return xu(Xu(t),Du(e,Pa(Xu(Pa(t)))))})}function ad(e,n,r){return void 0===r&amp;&amp;(r=!1),ue(function(){var t=Kh(e,n.conv1,&quot;valid&quot;);return t=id(t,n.prelu1_alpha),t=id(t=Kh(t=Us(t,r?[2,2]:[3,3],[2,2],&quot;same&quot;),n.conv2,&quot;valid&quot;),n.prelu2_alpha),t=id(t=Kh(t=r?t:Us(t,[3,3],[2,2],&quot;valid&quot;),n.conv3,&quot;valid&quot;),n.prelu3_alpha)})}function sd(h,t,u,p,c){c.stage1=[];var e=t.map(function(l){return ue(function(){var o,i,r,a,t={scale:l},e=(o=h,i=l,ue(function(){var t=nd(i,o.shape.slice(1)),e=t.height,n=t.width,r=od(Wc.resizeBilinear(o,[e,n]));return Qu(r,[0,2,1,3])})),n=Date.now(),s=(r=e,a=p,ue(function(){var t=ad(r,a,!0),e=Kh(t,a.conv4_1,&quot;valid&quot;),n=$i(eu(e,3),3);return{prob:Le(Bu(e,n),3),regions:Kh(t,a.conv4_2,&quot;valid&quot;)}})),u=s.prob,c=s.regions;return t.pnet=Date.now()-n,{scoresTensor:ha(ha(u,3)[1])[0],regionsTensor:ha(c)[0],scale:l,statsForScale:t}})}).map(function(t){var e=t.scoresTensor,n=t.regionsTensor,r=t.scale,o=t.statsForScale,i=function(t,o,i,e){for(var n=[],a=t.arraySync(),r=0;r&lt;t.shape[0];r++)for(var s=0;s&lt;t.shape[1];s++)a[r][s]&gt;=e&amp;&amp;n.push(new lh(s,r));return n.map(function(t){var e=new Rh(Math.round((t.y*Jf+1)/i),Math.round((t.x*Jf+1)/i),Math.round((t.y*Jf+Zf)/i),Math.round((t.x*Jf+Zf)/i)),n=a[t.y][t.x],r=o.arraySync();return{cell:e,score:n,region:new rd(r[t.y][t.x][0],r[t.y][t.x][1],r[t.y][t.x][2],r[t.y][t.x][3])}})}(e,n,r,u);if(e.dispose(),n.dispose(),!i.length)return c.stage1.push(o),[];var a=Date.now(),s=bp(i.map(function(t){return t.cell}),i.map(function(t){return t.score}),.5);return o.nms=Date.now()-a,o.numBoxes=s.length,c.stage1.push(o),s.map(function(t){return i[t]})}).reduce(function(t,e){return t.concat(e)},[]),n=[],r=[];if(0&lt;e.length){var o=Date.now(),i=bp(e.map(function(t){return t.cell}),e.map(function(t){return t.score}),.7);c.stage1_nms=Date.now()-o,r=i.map(function(t){return e[t].score}),n=i.map(function(t){return e[t]}).map(function(t){var e=t.cell,n=t.region;return new Rh(e.left+n.left*e.width,e.top+n.top*e.height,e.right+n.right*e.width,e.bottom+n.bottom*e.height).toSquare().round()})}return{boxes:n,scores:r}}function ud(h,r,t){var a=t.width,s=t.height;return p(this,void 0,void 0,function(){var l,e,i,n=this;return P(this,function(t){switch(t.label){case 0:return l=Gh(h),[4,Promise.all(r.map(function(c){return p(n,void 0,void 0,function(){var e,n,r,o,i,a,s,u;return P(this,function(t){return e=c.padAtBorders(h.height,h.width),n=e.y,r=e.ey,o=e.x,i=e.ex,a=o-1,s=n-1,u=l.getImageData(a,s,i-a,r-s),[2,zh.isNodejs()?cp(u):createImageBitmap(u)]})})}))];case 1:return e=t.sent(),i=[],e.forEach(function(t){var e=Gh(up({width:a,height:s}));e.drawImage(t,0,0,a,s);for(var n=e.getImageData(0,0,a,s).data,r=[],o=0;o&lt;n.length;o+=4)r.push(n[o+2]),r.push(n[o+1]),r.push(n[o]);i.push(r)}),[2,i.map(function(t){return ue(function(){return od(Qu($e(t,[1,a,s,3]),[0,2,1,3]).toFloat())})})]}})})}function cd(v,m,g,y,x){return p(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l,h,p,f,d;return P(this,function(t){switch(t.label){case 0:return e=Date.now(),[4,ud(v,m,{width:24,height:24})];case 1:return n=t.sent(),x.stage2_extractImagePatches=Date.now()-e,e=Date.now(),r=n.map(function(t){var a,s,e=(a=t,s=y,ue(function(){var t=ad(a,s),e=id($p(ia(t,[t.shape[0],s.fc1.weights.shape[0]]),s.fc1),s.prelu4_alpha),n=$p(e,s.fc2_1),r=$i(eu(n,1),1),o=Le(Bu(n,r),1),i=$p(e,s.fc2_2);return{scores:ha(o,1)[1],regions:i}}));return t.dispose(),e}),x.stage2_rnet=Date.now()-e,o=1&lt;r.length?_i(r.map(function(t){return t.scores})):r[0].scores,s=(a=Array).from,[4,o.data()];case 2:return i=s.apply(a,[t.sent()]),o.dispose(),u=i.map(function(t,e){return{score:t,idx:e}}).filter(function(t){return t.score&gt;g}).map(function(t){return t.idx}),c=u.map(function(t){return m[t]}),l=u.map(function(t){return i[t]}),h=[],p=[],0&lt;c.length&amp;&amp;(e=Date.now(),f=bp(c,l,.7),x.stage2_nms=Date.now()-e,d=f.map(function(t){var e=r[u[t]].regions.arraySync();return new rd(e[0][0],e[0][1],e[0][2],e[0][3])}),p=f.map(function(t){return l[t]}),h=f.map(function(t,e){return c[t].calibrate(d[e])})),r.forEach(function(t){t.regions.dispose(),t.scores.dispose()}),[2,{boxes:h,scores:p}]}})})}function ld(m,g,y,x,w){return p(this,void 0,void 0,function(){var e,n,i,r,o,a,s,u,c,l,h,p,f,d,v;return P(this,function(t){switch(t.label){case 0:return e=Date.now(),[4,ud(m,g,{width:48,height:48})];case 1:return n=t.sent(),w.stage3_extractImagePatches=Date.now()-e,e=Date.now(),i=n.map(function(t){var s,u,e=(s=t,u=x,ue(function(){var t=ad(s,u);t=id(t=Kh(t=Us(t,[2,2],[2,2],&quot;same&quot;),u.conv4,&quot;valid&quot;),u.prelu4_alpha);var e=id($p(ia(t,[t.shape[0],u.fc1.weights.shape[0]]),u.fc1),u.prelu5_alpha),n=$p(e,u.fc2_1),r=$i(eu(n,1),1),o=Le(Bu(n,r),1),i=$p(e,u.fc2_2),a=$p(e,u.fc2_3);return{scores:ha(o,1)[1],regions:i,points:a}}));return t.dispose(),e}),w.stage3_onet=Date.now()-e,r=1&lt;i.length?_i(i.map(function(t){return t.scores})):i[0].scores,s=(a=Array).from,[4,r.data()];case 2:return o=s.apply(a,[t.sent()]),r.dispose(),u=o.map(function(t,e){return{score:t,idx:e}}).filter(function(t){return t.score&gt;y}).map(function(t){return t.idx}),c=u.map(function(t){var e=i[t].regions.arraySync();return new rd(e[0][0],e[0][1],e[0][2],e[0][3])}),l=u.map(function(t,e){return g[t].calibrate(c[e])}),h=u.map(function(t){return o[t]}),p=[],f=[],d=[],0&lt;l.length&amp;&amp;(e=Date.now(),v=bp(l,h,.7,!1),w.stage3_nms=Date.now()-e,p=v.map(function(t){return l[t]}),f=v.map(function(t){return h[t]}),d=v.map(function(r,o){return Array(5).fill(0).map(function(t,e){var n=i[r].points.arraySync();return new lh(n[0][e]*(p[o].width+1)+p[o].left,n[0][e+5]*(p[o].height+1)+p[o].top)})})),i.forEach(function(t){t.regions.dispose(),t.scores.dispose(),t.points.dispose()}),[2,{boxes:p,scores:f,points:d}]}})})}var hd=function(t){function e(){return t.call(this,&quot;Mtcnn&quot;)||this}return a(e,t),e.prototype.forwardInput=function(E,C){return void 0===C&amp;&amp;(C={}),p(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,c,l,h,p,f,d,v,m,g,y,x,w,b;return P(this,function(t){switch(t.label){case 0:if(!(e=this.params))throw new Error(&quot;Mtcnn - load model before inference&quot;);if(!(n=E.canvases[0]))throw new Error(&quot;Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.&quot;);return r={},o=Date.now(),i=ue(function(){return t=$i(Bl.fromPixels(n)).toFloat(),ue(function(){return ua(ha(t,3).reverse(),3)});var t}),a=function(t){return i.dispose(),r.total=Date.now()-o,t},s=i.shape.slice(1),u=s[0],c=s[1],l=new Pf(C),h=l.minFaceSize,p=l.scaleFactor,f=l.maxNumScales,d=l.scoreThresholds,v=l.scaleSteps,m=(v||function(t,e,n){for(var r=n[0],o=n[1],i=Zf/t,a=[],s=Math.min(r,o)*i,u=0;12&lt;=s;)a.push(i*Math.pow(e,u)),s*=e,u+=1;return a}(h,p,[u,c])).filter(function(t){var e=nd(t,[u,c]);return Math.min(e.width,e.height)&gt;Zf}).slice(0,f),r.scales=m,r.pyramid=m.map(function(t){return nd(t,[u,c])}),g=Date.now(),[4,sd(i,m,d[0],e.pnet,r)];case 1:return y=t.sent(),r.total_stage1=Date.now()-g,y.boxes.length?(r.stage2_numInputBoxes=y.boxes.length,g=Date.now(),[4,cd(n,y.boxes,d[1],e.rnet,r)]):[2,a({results:[],stats:r})];case 2:return x=t.sent(),r.total_stage2=Date.now()-g,x.boxes.length?(r.stage3_numInputBoxes=x.boxes.length,g=Date.now(),[4,ld(n,x.boxes,d[2],e.onet,r)]):[2,a({results:[],stats:r})];case 3:return w=t.sent(),r.total_stage3=Date.now()-g,b=w.boxes.map(function(e,t){return of(Wp({},new Lp(w.scores[t],new Th(e.left/c,e.top/u,e.width/c,e.height/u),{height:u,width:c})),new mf(w.points[t].map(function(t){return t.sub(new lh(e.left,e.top)).div(new lh(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,a({results:b,stats:r})]}})})},e.prototype.forward=function(n,r){return void 0===r&amp;&amp;(r={}),p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[4,e.apply(this,[t.sent(),r])];case 2:return[2,t.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return void 0===r&amp;&amp;(r={}),p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,yp(n)];case 1:return[2,e.apply(this,[t.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return&quot;mtcnn_model&quot;},e.prototype.extractParamsFromWeigthMap=function(t){return ed(t)},e.prototype.extractParams=function(t){return td(t)},e}(xp),pd=[new lh(1.603231,2.094468),new lh(6.041143,7.080126),new lh(2.882459,3.518061),new lh(4.266906,5.178857),new lh(9.041765,10.66308)],fd=[117.001,114.697,97.404],dd=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:[&quot;face&quot;],anchors:pd,meanRgb:fd,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return a(t,e),Object.defineProperty(t.prototype,&quot;anchors&quot;,{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,n){return p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,this.detect(e,n)];case 1:return[2,t.sent().map(function(t){return new Lp(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return&quot;tiny_face_detector_model&quot;},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(Op),vd=[new lh(.738768,.874946),new lh(2.42204,2.65704),new lh(4.30971,7.04493),new lh(10.246,4.59428),new lh(12.6868,11.8741)],md=[new lh(1.603231,2.094468),new lh(6.041143,7.080126),new lh(2.882459,3.518061),new lh(4.266906,5.178857),new lh(9.041765,10.66308)],gd=[117.001,114.697,97.404],yd=function(n){function t(t){void 0===t&amp;&amp;(t=!0);var e=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:[&quot;face&quot;]},t?{anchors:md,meanRgb:gd}:{anchors:vd,withClassScores:!0});return n.call(this,e)||this}return a(t,n),Object.defineProperty(t.prototype,&quot;withSeparableConvs&quot;,{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;anchors&quot;,{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,n){return p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,this.detect(e,n)];case 1:return[2,t.sent().map(function(t){return new Lp(t.score,t.relativeBox,{width:t.imageWidth,height:t.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?&quot;tiny_yolov2_separable_conv_model&quot;:&quot;tiny_yolov2_model&quot;},t.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},t}(Op);var xd={ssdMobilenetv1:new qf,tinyFaceDetector:new dd,tinyYolov2:new yd,mtcnn:new hd,faceLandmark68Net:new Ef,faceLandmark68TinyNet:new _f,faceRecognitionNet:new Mf,faceExpressionNet:new Jp,ageGenderNet:new vf},wd=function(t,e){return xd.ssdMobilenetv1.locateFaces(t,e)},bd=function(t){return xd.faceLandmark68Net.detectLandmarks(t)},Ed=function(t){return xd.ssdMobilenetv1.load(t)},Cd=Ed,_d=wd,Sd=bd;function Rd(t,e){var n={age:e};return Object.assign({},t,n)}function Nd(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var kd=function(o){function t(t,e,n){var r=o.call(this)||this;return r.parentTask=t,r.input=e,r.extractedFaces=n,r}return a(t,o),t}(Xf),Id=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n,r=this;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,Yf(e=t.sent(),this.input,function(e){return p(r,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(t){return xd.faceExpressionNet.predictExpressions(t)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return n=t.sent(),[2,e.map(function(t,e){return tf(t,n[e])})]}})})},e.prototype.withAgeAndGender=function(){return new Od(this,this.input)},e}(kd),Td=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return(e=t.sent())?[4,Qf(e,this.input,function(t){return xd.faceExpressionNet.predictExpressions(t)},this.extractedFaces)]:[2];case 2:return n=t.sent(),[2,tf(e,n)]}})})},e.prototype.withAgeAndGender=function(){return new Pd(this,this.input)},e}(kd),Ad=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.withAgeAndGender=function(){return new Fd(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Wd(this,this.input)},e}(Id),Dd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.withAgeAndGender=function(){return new Ld(this,this.input)},e.prototype.withFaceDescriptor=function(){return new zd(this,this.input)},e}(Td),Md=function(o){function t(t,e,n){var r=o.call(this)||this;return r.parentTask=t,r.input=e,r.extractedFaces=n,r}return a(t,o),t}(Xf),Od=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,o,n=this;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,Yf(e=t.sent(),this.input,function(e){return p(n,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(t){return xd.ageGenderNet.predictAgeAndGender(t)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return o=t.sent(),[2,e.map(function(t,e){var n=o[e],r=n.age;return Rd(Nd(t,n.gender,n.genderProbability),r)})]}})})},e.prototype.withFaceExpressions=function(){return new Id(this,this.input)},e}(Md),Pd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n,r,o,i;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return(e=t.sent())?[4,Qf(e,this.input,function(t){return xd.ageGenderNet.predictAgeAndGender(t)},this.extractedFaces)]:[2];case 2:return n=t.sent(),r=n.age,o=n.gender,i=n.genderProbability,[2,Rd(Nd(e,o,i),r)]}})})},e.prototype.withFaceExpressions=function(){return new Td(this,this.input)},e}(Md),Fd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.withFaceExpressions=function(){return new Ad(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Wd(this,this.input)},e}(Od),Ld=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.withFaceExpressions=function(){return new Dd(this,this.input)},e.prototype.withFaceDescriptor=function(){return new zd(this,this.input)},e}(Pd),Bd=function(r){function t(t,e){var n=r.call(this)||this;return n.parentTask=t,n.input=e,n}return a(t,r),t}(Xf),Wd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var n;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,Yf(n=t.sent(),this.input,function(t){return Promise.all(t.map(function(t){return xd.faceRecognitionNet.computeFaceDescriptor(t)}))},null,function(t){return t.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,t.sent().map(function(t,e){return Of(n[e],t)})]}})})},e.prototype.withFaceExpressions=function(){return new Ad(this,this.input)},e.prototype.withAgeAndGender=function(){return new Fd(this,this.input)},e}(Bd),zd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return(e=t.sent())?[4,Qf(e,this.input,function(t){return xd.faceRecognitionNet.computeFaceDescriptor(t)},null,function(t){return t.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return n=t.sent(),[2,Of(e,n)]}})})},e.prototype.withFaceExpressions=function(){return new Dd(this,this.input)},e.prototype.withAgeAndGender=function(){return new Ld(this,this.input)},e}(Bd),Ud=function(o){function t(t,e,n){var r=o.call(this)||this;return r.parentTask=t,r.input=e,r.useTinyLandmarkNet=n,r}return a(t,o),Object.defineProperty(t.prototype,&quot;landmarkNet&quot;,{get:function(){return this.useTinyLandmarkNet?xd.faceLandmark68TinyNet:xd.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Xf),Gd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n,r,o,i,a=this;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return e=t.sent(),n=e.map(function(t){return t.detection}),this.input instanceof dt?[4,wf(this.input,n)]:[3,3];case 2:return o=t.sent(),[3,5];case 3:return[4,xf(this.input,n)];case 4:o=t.sent(),t.label=5;case 5:return r=o,[4,Promise.all(r.map(function(t){return a.landmarkNet.detectLandmarks(t)}))];case 6:return i=t.sent(),r.forEach(function(t){return t instanceof dt&amp;&amp;t.dispose()}),[2,e.map(function(t,e){return of(t,i[e])})]}})})},e.prototype.withFaceExpressions=function(){return new Ad(this,this.input)},e.prototype.withAgeAndGender=function(){return new Fd(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Wd(this,this.input)},e}(Ud),Vd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n,r,o,i;return P(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return(e=t.sent())?(n=e.detection,this.input instanceof dt?[4,wf(this.input,[n])]:[3,3]):[2];case 2:return o=t.sent(),[3,5];case 3:return[4,xf(this.input,[n])];case 4:o=t.sent(),t.label=5;case 5:return r=o,[4,this.landmarkNet.detectLandmarks(r[0])];case 6:return i=t.sent(),r.forEach(function(t){return t instanceof dt&amp;&amp;t.dispose()}),[2,of(e,i)]}})})},e.prototype.withFaceExpressions=function(){return new Dd(this,this.input)},e.prototype.withAgeAndGender=function(){return new Ld(this,this.input)},e.prototype.withFaceDescriptor=function(){return new zd(this,this.input)},e}(Ud),Hd=function(r){function t(t,e){void 0===e&amp;&amp;(e=new Hf);var n=r.call(this)||this;return n.input=t,n.options=e,n}return a(t,r),t}(Xf),qd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n,r,o;return P(this,function(t){switch(t.label){case 0:return n=(e=this).input,(r=e.options)instanceof Pf?[4,xd.mtcnn.forward(n,r)]:[3,2];case 1:return[2,t.sent().map(function(t){return t.detection})];case 2:if(!(o=r instanceof Kf?function(t){return xd.tinyFaceDetector.locateFaces(t,r)}:r instanceof Hf?function(t){return xd.ssdMobilenetv1.locateFaces(t,r)}:r instanceof Mp?function(t){return xd.tinyYolov2.locateFaces(t,r)}:null))throw new Error(&quot;detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options&quot;);return[2,o(n)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(n){return p(t,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,this.run()];case 1:return e=t.sent(),[2,n(e.map(function(t){return Wp({},t)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return void 0===t&amp;&amp;(t=!1),new Gd(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Id(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new Od(this.runAndExtendWithFaceDetections(),this.input)},e}(Hd),jd=function(t){function e(){return null!==t&amp;&amp;t.apply(this,arguments)||this}return a(e,t),e.prototype.run=function(){return p(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return[4,new qd(this.input,this.options)];case 1:return e=t.sent(),n=e[0],e.forEach(function(t){t.score&gt;n.score&amp;&amp;(n=t)}),[2,n]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(n){return p(t,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,this.run()];case 1:return e=t.sent(),[2,n(e?Wp({},e):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return void 0===t&amp;&amp;(t=!1),new Vd(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Td(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new Pd(this.runAndExtendWithFaceDetection(),this.input)},e}(Hd);function $d(t,e){return void 0===e&amp;&amp;(e=new Hf),new qd(t,e)}function Kd(e,n){return p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,$d(e,new Hf(n?{minConfidence:n}:{})).withFaceLandmarks().withFaceDescriptors()];case 1:return[2,t.sent()]}})})}var Xd=Kd;function Yd(t,e){if(t.length!==e.length)throw new Error(&quot;euclideanDistance: arr1.length !== arr2.length&quot;);var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(t,e){return t-r[e]}).reduce(function(t,e){return t+Math.pow(e,2)},0))}var Qd=function(){function t(t,e){void 0===e&amp;&amp;(e=.6),this._distanceThreshold=e;var n=Array.isArray(t)?t:[t];if(!n.length)throw new Error(&quot;FaceRecognizer.constructor - expected atleast one input&quot;);var r=1,o=function(){return&quot;person &quot;+r++};this._labeledDescriptors=n.map(function(t){if(t instanceof yf)return t;if(t instanceof Float32Array)return new yf(o(),[t]);if(t.descriptor&amp;&amp;t.descriptor instanceof Float32Array)return new yf(o(),[t.descriptor]);throw new Error(&quot;FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor&lt;any&gt; | Float32Array | Array&lt;LabeledFaceDescriptors | WithFaceDescriptor&lt;any&gt; | Float32Array&gt;&quot;)})}return Object.defineProperty(t.prototype,&quot;labeledDescriptors&quot;,{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,&quot;distanceThreshold&quot;,{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return Yd(t,e)}).reduce(function(t,e){return t+e},0)/(t.length||1)},t.prototype.matchDescriptor=function(r){var o=this;return this.labeledDescriptors.map(function(t){var e=t.descriptors,n=t.label;return new gf(n,o.computeMeanDistance(r,e))}).reduce(function(t,e){return t.distance&lt;e.distance?t:e})},t.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance&lt;this.distanceThreshold?e:new gf(&quot;unknown&quot;,e.distance)},t}();var Jd=O({},$h,uf);c.AgeGenderNet=vf,c.BoundingBox=Rh,c.Box=Sh,c.ComposableTask=Xf,c.ComputeAllFaceDescriptorsTask=Wd,c.ComputeFaceDescriptorsTaskBase=Bd,c.ComputeSingleFaceDescriptorTask=zd,c.DetectAllFaceLandmarksTask=Gd,c.DetectAllFacesTask=qd,c.DetectFaceLandmarksTaskBase=Ud,c.DetectFacesTaskBase=Hd,c.DetectSingleFaceLandmarksTask=Vd,c.DetectSingleFaceTask=jd,c.Dimensions=ch,c.FACE_EXPRESSION_LABELS=Yp,c.FaceDetection=Lp,c.FaceDetectionNet=$f,c.FaceExpressionNet=Jp,c.FaceExpressions=Qp,c.FaceLandmark68Net=Ef,c.FaceLandmark68TinyNet=_f,c.FaceLandmarkNet=Sf,c.FaceLandmarks=ef,c.FaceLandmarks5=mf,c.FaceLandmarks68=nf,c.FaceMatch=gf,c.FaceMatcher=Qd,c.FaceRecognitionNet=Mf,c.LabeledBox=Nh,c.LabeledFaceDescriptors=yf,c.Mtcnn=hd,c.MtcnnOptions=Pf,c.NetInput=gp,c.NeuralNetwork=xp,c.ObjectDetection=kh,c.Point=lh,c.PredictedBox=Ih,c.Rect=Th,c.SsdMobilenetv1=qf,c.SsdMobilenetv1Options=Hf,c.TfjsImageRecognitionBase=Pp,c.TinyFaceDetector=dd,c.TinyFaceDetectorOptions=Kf,c.TinyYolov2=yd,c.allFaces=Xd,c.allFacesMtcnn=function(e,n){return void 0===n&amp;&amp;(n={}),p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,$d(e,new Pf(n)).withFaceLandmarks().withFaceDescriptors()];case 1:return[2,t.sent()]}})})},c.allFacesSsdMobilenetv1=Kd,c.allFacesTinyYolov2=function(e,n){return void 0===n&amp;&amp;(n={}),p(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,$d(e,new Mp(n)).withFaceLandmarks().withFaceDescriptors()];case 1:return[2,t.sent()]}})})},c.awaitMediaLoaded=ip,c.bufferToImage=ap,c.computeFaceDescriptor=function(t){return xd.faceRecognitionNet.computeFaceDescriptor(t)},c.computeReshapedDimensions=xh,c.createCanvas=up,c.createCanvasFromMedia=cp,c.createFaceDetectionNet=function(t){return jf(t)},c.createFaceRecognitionNet=function(t){var e=new Mf;return e.extractWeights(t),e},c.createMtcnn=function(t){var e=new hd;return e.extractWeights(t),e},c.createSsdMobilenetv1=jf,c.createTinyFaceDetector=function(t){var e=new dd;return e.extractWeights(t),e},c.createTinyYolov2=function(t,e){void 0===e&amp;&amp;(e=!0);var n=new yd(e);return n.extractWeights(t),n},c.detectAllFaces=$d,c.detectFaceLandmarks=bd,c.detectFaceLandmarksTiny=function(t){return xd.faceLandmark68TinyNet.detectLandmarks(t)},c.detectLandmarks=Sd,c.detectSingleFace=function(t,e){return void 0===e&amp;&amp;(e=new Hf),new jd(t,e)},c.draw=Jd,c.env=zh,c.euclideanDistance=Yd,c.extendWithFaceDescriptor=Of,c.extendWithFaceDetection=Wp,c.extendWithFaceExpressions=tf,c.extendWithFaceLandmarks=of,c.extractFaceTensors=wf,c.extractFaces=xf,c.fetchImage=function(r){return p(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return[4,lp(r)];case 1:return[4,(e=t.sent()).blob()];case 2:if(!(n=t.sent()).type.startsWith(&quot;image/&quot;))throw new Error(&quot;fetchImage - expected blob type to be of type image/*, instead have: &quot;+n.type+&quot;, for url: &quot;+e.url);return[2,ap(n)]}})})},c.fetchJson=hp,c.fetchNetWeights=function(n){return p(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=Float32Array.bind,[4,lp(n)];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,new(e.apply(Float32Array,[void 0,t.sent()]))]}})})},c.fetchOrThrow=lp,c.getCenterPoint=wh,c.getContext2dOrThrow=Gh,c.getMediaDimensions=sp,c.imageTensorToCanvas=pp,c.imageToSquare=fp,c.inverseSigmoid=function(t){return Math.log(t/(1-t))},c.iou=wp,c.isDimensions=yh,c.isEven=mh,c.isFloat=vh,c.isMediaElement=dp,c.isMediaLoaded=op,c.isTensor=hh,c.isTensor1D=function(t){return hh(t,1)},c.isTensor2D=ph,c.isTensor3D=fh,c.isTensor4D=dh,c.isValidNumber=Eh,c.isValidProbablitiy=Ch,c.isWithFaceDetection=Bp,c.isWithFaceExpressions=Zp,c.isWithFaceLandmarks=rf,c.loadAgeGenderModel=function(t){return xd.ageGenderNet.load(t)},c.loadFaceDetectionModel=Cd,c.loadFaceExpressionModel=function(t){return xd.faceExpressionNet.load(t)},c.loadFaceLandmarkModel=function(t){return xd.faceLandmark68Net.load(t)},c.loadFaceLandmarkTinyModel=function(t){return xd.faceLandmark68TinyNet.load(t)},c.loadFaceRecognitionModel=function(t){return xd.faceRecognitionNet.load(t)},c.loadMtcnnModel=function(t){return xd.mtcnn.load(t)},c.loadSsdMobilenetv1Model=Ed,c.loadTinyFaceDetectorModel=function(t){return xd.tinyFaceDetector.load(t)},c.loadTinyYolov2Model=function(t){return xd.tinyYolov2.load(t)},c.loadWeightMap=vp,c.locateFaces=_d,c.matchDimensions=function(t,e,n){void 0===n&amp;&amp;(n=!1);var r=n?sp(e):e,o=r.width,i=r.height;return{width:t.width=o,height:t.height=i}},c.mtcnn=function(t,e){return xd.mtcnn.forward(t,e)},c.nets=xd,c.nonMaxSuppression=bp,c.normalize=Ep,c.padToSquare=mp,c.predictAgeAndGender=function(t){return xd.ageGenderNet.predictAgeAndGender(t)},c.range=bh,c.recognizeFaceExpressions=function(t){return xd.faceExpressionNet.predictExpressions(t)},c.resizeResults=function e(t,n){var r=new ch(n.width,n.height),o=r.width,i=r.height;if(o&lt;=0||i&lt;=0)throw new Error(&quot;resizeResults - invalid dimensions: &quot;+JSON.stringify({width:o,height:i}));if(Array.isArray(t))return t.map(function(t){return e(t,{width:o,height:i})});if(rf(t)){var a=t.detection.forSize(o,i),s=t.unshiftedLandmarks.forSize(a.box.width,a.box.height);return of(Wp(t,a),s)}return Bp(t)?Wp(t,t.detection.forSize(o,i)):t instanceof ef||t instanceof Lp?t.forSize(o,i):t},c.resolveInput=Uh,c.round=gh,c.shuffleArray=function(t){for(var e=t.slice(),n=e.length-1;0&lt;n;n--){var r=Math.floor(Math.random()*(n+1)),o=e[n];e[n]=e[r],e[r]=o}return e},c.sigmoid=Cp,c.ssdMobilenetv1=wd,c.tf=uh,c.tinyFaceDetector=function(t,e){return xd.tinyFaceDetector.locateFaces(t,e)},c.tinyYolov2=function(t,e){return xd.tinyYolov2.locateFaces(t,e)},c.toNetInput=yp,Object.defineProperty(c,&quot;__esModule&quot;,{value:!0})});</td>
        </tr>
  </table>
</div>

  <details class="details-reset details-overlay BlobToolbar position-absolute js-file-line-actions dropdown d-none" aria-hidden="true">
    <summary class="btn-octicon ml-0 px-2 p-0 color-bg-default border color-border-default rounded-2" aria-label="Inline file action toolbar">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
    </summary>
    <details-menu>

      <ul class="BlobToolbar-dropdown dropdown-menu dropdown-menu-se ml-2 mt-2"
      style="width:185px"
      >
        <li>
          <clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-lines" style="cursor:pointer;" aria-label="Copy lines">
            Copy lines
          </clipboard-copy>
        </li>
        <li>
          <clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-permalink" style="cursor:pointer;" aria-label="Copy permalink">
            Copy permalink
          </clipboard-copy>
        </li>
        <li><a class="dropdown-item js-update-url-with-hash" id="js-view-git-blame" role="menuitem" href="/WebDevSimplified/Face-Detection-JavaScript/blame/646525e20bea82ce838ae6047076dfd095a65ad5/face-api.min.js">View git blame</a></li>
          <li><a class="dropdown-item" id="js-new-issue" role="menuitem" href="/WebDevSimplified/Face-Detection-JavaScript/issues/new">Reference in new issue</a></li>
      </ul>
    </details-menu>
  </details>

    </div>

    </div>


  

  <details class="details-reset details-overlay details-overlay-dark" id="jumpto-line-details-dialog">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" data-turbo="false" action="" accept-charset="UTF-8" method="get">
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
          <button data-close-dialog="" type="submit" data-view-component="true" class="btn">    Go
</button>
</form>    </details-dialog>
  </details>

    <div class="Popover anim-scale-in js-tagsearch-popover"
     hidden
     data-tagsearch-url="/WebDevSimplified/Face-Detection-JavaScript/find-definition"
     data-tagsearch-ref="master"
     data-tagsearch-code-nav-context="BLOB_VIEW">
  <div class="Popover-message Popover-message--large Popover-message--top-left TagsearchPopover mt-1 mb-4 mx-auto Box color-shadow-large">
    <div class="TagsearchPopover-content js-tagsearch-popover-content overflow-auto" style="will-change:transform;">
    </div>
  </div>
</div>



</div>

  </div>


  </div>

  </turbo-frame>


    </main>
  </div>

  </div>

          <footer class="footer width-full container-xl p-responsive">
  <h2 class='sr-only'>Footer</h2>

  <div class="position-relative d-flex flex-items-center pb-2 f6 color-fg-muted border-top color-border-muted flex-column-reverse flex-lg-row flex-wrap flex-lg-nowrap mt-6 pt-6">
    <div class="list-style-none d-flex flex-wrap col-0 col-lg-2 flex-justify-start flex-lg-justify-between mb-2 mb-lg-0">
      <div class="mt-2 mt-lg-0 d-flex flex-items-center">
        <a aria-label="Homepage" title="GitHub" class="footer-octicon mr-2" href="https://github.com">
          <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>        <span>
        &copy; 2023 GitHub, Inc.
        </span>
      </div>
    </div>

    <nav aria-label='footer' class="col-12 col-lg-8">
      <h3 class='sr-only' id='sr-footer-heading'>Footer navigation</h3>
      <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0" aria-labelledby='sr-footer-heading'>
          <li class="mr-3 mr-lg-0"><a href="https://docs.github.com/en/github/site-policy/github-terms-of-service" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to terms&quot;,&quot;label&quot;:&quot;text:terms&quot;}">Terms</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://docs.github.com/en/github/site-policy/github-privacy-statement" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;}">Privacy</a></li>
          <li class="mr-3 mr-lg-0"><a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to security&quot;,&quot;label&quot;:&quot;text:security&quot;}" href="https://github.com/security">Security</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://www.githubstatus.com/" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to status&quot;,&quot;label&quot;:&quot;text:status&quot;}">Status</a></li>
          <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to help, text:Docs" href="https://docs.github.com">Docs</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://support.github.com?tags=dotcom-footer" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;}">Contact GitHub</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Pricing&quot;,&quot;label&quot;:&quot;text:Pricing&quot;}">Pricing</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://docs.github.com" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to api&quot;,&quot;label&quot;:&quot;text:api&quot;}">API</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://services.github.com" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to training&quot;,&quot;label&quot;:&quot;text:training&quot;}">Training</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://github.blog" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to blog&quot;,&quot;label&quot;:&quot;text:blog&quot;}">Blog</a></li>
          <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>
      </ul>
    </nav>
  </div>

  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 color-fg-muted"></span>
  </div>
</footer>




  <div id="ajax-error-message" class="ajax-error-message flash flash-error" hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
    </button>
    You can’t perform that action at this time.
  </div>

  <div class="js-stale-session-flash flash flash-warn flash-banner" hidden
    >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box color-shadow-large" style="width:360px;">
  </div>
</div>

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>


    <style>
      .user-mention[href$="/srglbrkchn"] {
        color: var(--color-user-mention-fg);
        background-color: var(--color-user-mention-bg);
        border-radius: 2px;
        margin-left: -2px;
        margin-right: -2px;
        padding: 0 2px;
      }
    </style>


    </div>

    <div id="js-global-screen-reader-notice" class="sr-only" aria-live="polite" ></div>
  </body>
</html>

